{
  "name": "Stationary Turret - Autocannon",
  "type": "character",
  "_id": "928c0910975672e1",
  "img": "icons/svg/mystery-man.svg",
  "system": {
    "body": {
      "contents": [
        {
          "key": "",
          "colSpan": 1,
          "rowSpan": 1,
          "cssClass": "sinlesscsb-marker",
          "role": 0,
          "editRole": 0,
          "permission": 0,
          "tooltip": "",
          "visibilityFormula": "",
          "editableFormula": "",
          "escapeHTML": false,
          "type": "panel",
          "contents": [
            {
              "key": "testnpc1",
              "colSpan": 1,
              "rowSpan": 1,
              "cssClass": "",
              "role": 0,
              "editRole": 0,
              "permission": 0,
              "tooltip": "",
              "visibilityFormula": "",
              "editableFormula": "",
              "escapeHTML": false,
              "type": "label",
              "size": "full-size",
              "icon": "",
              "value": "Roll (all) NPC Initiative",
              "prefix": "",
              "suffix": "",
              "rollMessage": "%{\n  // GM-only (scene-wide automation)\n  if (!game.user?.isGM) {\n    ui.notifications?.warn?.(\"NPC Initiative: GM only.\");\n    return \"\";\n  }\n\n  const api = game.modules?.get(\"sinlesscsb\")?.api;\n  if (typeof api?.rollNpcInitiative !== \"function\") {\n    ui.notifications?.error?.(\"SinlessCSB: rollNpcInitiative API not available.\");\n    return \"\";\n  }\n\n  const sceneId = canvas?.scene?.id;\n  if (!sceneId) {\n    ui.notifications?.error?.(\"NPC Initiative: no active scene found.\");\n    return \"\";\n  }\n\n  // Rolls ALL NPC tokens on the active scene that have system.props.NPCinit as a number\n  api.rollNpcInitiative({ sceneId });\n  return \"\";\n}%\n",
              "altRollMessage": "",
              "rollMessageToChat": false,
              "altRollMessageToChat": false,
              "style": "button"
            },
            {
              "key": "",
              "colSpan": 1,
              "rowSpan": 1,
              "cssClass": "",
              "role": 0,
              "editRole": 0,
              "permission": 0,
              "tooltip": "",
              "visibilityFormula": "",
              "editableFormula": "",
              "escapeHTML": false,
              "type": "panel",
              "contents": [
                {
                  "key": "npcNotes",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "textArea",
                  "size": "full-size",
                  "label": "",
                  "defaultValue": "",
                  "style": "sheet"
                }
              ],
              "flow": "vertical",
              "align": "left",
              "verticalAlign": "top",
              "collapsible": true,
              "defaultCollapsed": true,
              "title": "NPC notes",
              "titleStyle": "default"
            }
          ],
          "flow": "vertical",
          "align": "center",
          "verticalAlign": "top",
          "collapsible": false,
          "defaultCollapsed": false,
          "title": "",
          "titleStyle": "default"
        },
        {
          "key": "",
          "colSpan": 1,
          "rowSpan": 1,
          "cssClass": "",
          "role": 0,
          "editRole": 0,
          "permission": 0,
          "tooltip": "",
          "visibilityFormula": "",
          "editableFormula": "",
          "escapeHTML": false,
          "type": "panel",
          "contents": [
            {
              "key": "",
              "colSpan": 1,
              "rowSpan": 1,
              "cssClass": "",
              "role": 0,
              "editRole": 0,
              "permission": 0,
              "tooltip": "",
              "visibilityFormula": "",
              "editableFormula": "",
              "escapeHTML": false,
              "type": "panel",
              "contents": [
                {
                  "key": "attack1",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "panel",
                  "contents": [
                    {
                      "key": "",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "label",
                      "size": "full-size",
                      "icon": "",
                      "value": "${npcAttack1Name ? npcAttack1Name : \"Attack 1\"}$\n",
                      "prefix": "",
                      "suffix": "",
                      "rollMessage": "%{\n  (async () => {\n    const NAME_KEY = \"npcAttack1Name\";\n    const DICE_KEY = \"npcAttack1Dice\";\n    const DMG_KEY  = \"npcAttack1Damage\";\n    const PEN_KEY  = \"npcPenetration1\";\n    const TITLE_FALLBACK = \"Attack 1\";\n    const TN = 4;\n\n    const num = (x, fallback = 0) => {\n      const n = Number(x);\n      return Number.isFinite(n) ? n : fallback;\n    };\n\n    const escapeHTML = (s) => String(s ?? \"\")\n      .replaceAll(\"&\", \"&amp;\")\n      .replaceAll(\"<\", \"&lt;\")\n      .replaceAll(\">\", \"&gt;\")\n      .replaceAll('\"', \"&quot;\")\n      .replaceAll(\"'\", \"&#039;\");\n\n    const scopeActor =\n      (typeof actor !== \"undefined\" && actor?.documentName === \"Actor\") ? actor :\n      canvas?.tokens?.controlled?.[0]?.actor ||\n      (() => {\n        const t = game.user?.targets ? Array.from(game.user.targets)[0] : null;\n        return t?.actor ?? null;\n      })() ||\n      game.user?.character ||\n      null;\n\n    if (!scopeActor) {\n      ui.notifications?.warn?.(\"NPC roll: No actor context. Open a sheet or control/target a token.\");\n      return;\n    }\n\n    const props = scopeActor.system?.props ?? {};\n\n    const label = String(props?.[NAME_KEY] ?? \"\").trim() || TITLE_FALLBACK;\n    const dice = Math.max(0, Math.floor(num(props?.[DICE_KEY], 0)));\n    const baseDamage = Math.max(0, Math.floor(num(props?.[DMG_KEY], 0)));\n    const penetration = Math.max(0, Math.floor(num(props?.[PEN_KEY], 0)));\n\n    if (dice <= 0) {\n      ui.notifications?.warn?.(`NPC roll: \"${label}\" has 0 dice (check ${DICE_KEY}).`);\n      return;\n    }\n\n    const roll = new Roll(`${dice}d6`);\n    await roll.evaluate();\n\n    const results = (roll.dice?.[0]?.results ?? []).map(r => Number(r.result)).filter(Number.isFinite);\n    const successes = results.reduce((acc, v) => acc + (v >= TN ? 1 : 0), 0);\n\n    const diceHTML = await roll.render();\n\n    const content = `\n      <div class=\"sinlesscsb item-roll-card\">\n        <h3 style=\"margin:0 0 6px 0;\">${escapeHTML(label)}</h3>\n        <p style=\"margin:0 0 6px 0;\"><strong>Actor:</strong> ${escapeHTML(scopeActor.name)}</p>\n        <p style=\"margin:0 0 10px 0;\"><strong>Roll:</strong> <strong>${escapeHTML(dice)}d6</strong> vs TN <strong>${escapeHTML(TN)}+</strong></p>\n\n        <div style=\"text-align:center; margin:10px 0 12px 0;\">\n          <div style=\"font-size:28px; font-weight:bold;\">\n            ${escapeHTML(successes)} SUCCESS${successes === 1 ? \"\" : \"ES\"}\n          </div>\n        </div>\n\n        <hr/>\n        <p style=\"margin:0 0 6px 0;\">\n          <strong>Damage (base):</strong> <strong>${escapeHTML(baseDamage)}</strong>\n          <span style=\"font-size:12px; opacity:0.85;\">(+ remaining successes after dodge)</span>\n        </p>\n        <p style=\"margin:0 0 6px 0;\">\n          <strong>Penetration:</strong> <strong>${escapeHTML(penetration)}</strong>\n        </p>\n\n        <details>\n          <summary>Dice Results</summary>\n          ${diceHTML}\n        </details>\n      </div>\n    `;\n\n    await ChatMessage.create({\n      speaker: ChatMessage.getSpeaker({ actor: scopeActor }),\n      content\n    });\n  })();\n\n  return \"\";\n}%\n",
                      "altRollMessage": "",
                      "rollMessageToChat": true,
                      "altRollMessageToChat": true,
                      "style": "button"
                    }
                  ],
                  "flow": "grid-2",
                  "align": "left",
                  "verticalAlign": "top",
                  "collapsible": false,
                  "defaultCollapsed": false,
                  "title": "",
                  "titleStyle": "default"
                },
                {
                  "key": "attack2",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "panel",
                  "contents": [
                    {
                      "key": "",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "label",
                      "size": "full-size",
                      "icon": "",
                      "value": "${npcAttack2Name ? npcAttack2Name : \"Attack 2\"}$\n",
                      "prefix": "",
                      "suffix": "",
                      "rollMessage": "%{\n  (async () => {\n    const NAME_KEY = \"npcAttack2Name\";\n    const DICE_KEY = \"npcAttack2Dice\";\n    const DMG_KEY  = \"npcAttack2Damage\";\n    const PEN_KEY  = \"npcPenetration2\";\n    const TITLE_FALLBACK = \"Attack 2\";\n    const TN = 4;\n\n    const num = (x, fallback = 0) => {\n      const n = Number(x);\n      return Number.isFinite(n) ? n : fallback;\n    };\n\n    const escapeHTML = (s) => String(s ?? \"\")\n      .replaceAll(\"&\", \"&amp;\")\n      .replaceAll(\"<\", \"&lt;\")\n      .replaceAll(\">\", \"&gt;\")\n      .replaceAll('\"', \"&quot;\")\n      .replaceAll(\"'\", \"&#039;\");\n\n    const scopeActor =\n      (typeof actor !== \"undefined\" && actor?.documentName === \"Actor\") ? actor :\n      canvas?.tokens?.controlled?.[0]?.actor ||\n      (() => {\n        const t = game.user?.targets ? Array.from(game.user.targets)[0] : null;\n        return t?.actor ?? null;\n      })() ||\n      game.user?.character ||\n      null;\n\n    if (!scopeActor) {\n      ui.notifications?.warn?.(\"NPC roll: No actor context. Open a sheet or control/target a token.\");\n      return;\n    }\n\n    const props = scopeActor.system?.props ?? {};\n\n    const label = String(props?.[NAME_KEY] ?? \"\").trim() || TITLE_FALLBACK;\n    const dice = Math.max(0, Math.floor(num(props?.[DICE_KEY], 0)));\n    const baseDamage = Math.max(0, Math.floor(num(props?.[DMG_KEY], 0)));\n    const penetration = Math.max(0, Math.floor(num(props?.[PEN_KEY], 0)));\n\n    if (dice <= 0) {\n      ui.notifications?.warn?.(`NPC roll: \"${label}\" has 0 dice (check ${DICE_KEY}).`);\n      return;\n    }\n\n    const roll = new Roll(`${dice}d6`);\n    await roll.evaluate();\n\n    const results = (roll.dice?.[0]?.results ?? []).map(r => Number(r.result)).filter(Number.isFinite);\n    const successes = results.reduce((acc, v) => acc + (v >= TN ? 1 : 0), 0);\n\n    const diceHTML = await roll.render();\n\n    const content = `\n      <div class=\"sinlesscsb item-roll-card\">\n        <h3 style=\"margin:0 0 6px 0;\">${escapeHTML(label)}</h3>\n        <p style=\"margin:0 0 6px 0;\"><strong>Actor:</strong> ${escapeHTML(scopeActor.name)}</p>\n        <p style=\"margin:0 0 10px 0;\"><strong>Roll:</strong> <strong>${escapeHTML(dice)}d6</strong> vs TN <strong>${escapeHTML(TN)}+</strong></p>\n\n        <div style=\"text-align:center; margin:10px 0 12px 0;\">\n          <div style=\"font-size:28px; font-weight:bold;\">\n            ${escapeHTML(successes)} SUCCESS${successes === 1 ? \"\" : \"ES\"}\n          </div>\n        </div>\n\n        <hr/>\n        <p style=\"margin:0 0 6px 0;\">\n          <strong>Damage (base):</strong> <strong>${escapeHTML(baseDamage)}</strong>\n          <span style=\"font-size:12px; opacity:0.85;\">(+ remaining successes after dodge)</span>\n        </p>\n        <p style=\"margin:0 0 6px 0;\">\n          <strong>Penetration:</strong> <strong>${escapeHTML(penetration)}</strong>\n        </p>\n\n        <details>\n          <summary>Dice Results</summary>\n          ${diceHTML}\n        </details>\n      </div>\n    `;\n\n    await ChatMessage.create({\n      speaker: ChatMessage.getSpeaker({ actor: scopeActor }),\n      content\n    });\n  })();\n\n  return \"\";\n}%\n",
                      "altRollMessage": "",
                      "rollMessageToChat": true,
                      "altRollMessageToChat": true,
                      "style": "button"
                    }
                  ],
                  "flow": "grid-2",
                  "align": "left",
                  "verticalAlign": "top",
                  "collapsible": true,
                  "defaultCollapsed": false,
                  "title": "Attack2",
                  "titleStyle": "default"
                },
                {
                  "key": "attack3",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "panel",
                  "contents": [
                    {
                      "key": "",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "label",
                      "size": "full-size",
                      "icon": "",
                      "value": "${npcAttack3Name ? npcAttack3Name : \"Attack 3\"}$\n",
                      "prefix": "",
                      "suffix": "",
                      "rollMessage": "%{\n  (async () => {\n    const NAME_KEY = \"npcAttack3Name\";\n    const DICE_KEY = \"npcAttack3Dice\";\n    const DMG_KEY  = \"npcAttack3Damage\";\n    const PEN_KEY  = \"npcPenetration3\";\n    const TITLE_FALLBACK = \"Attack 3\";\n    const TN = 4;\n\n    const num = (x, fallback = 0) => {\n      const n = Number(x);\n      return Number.isFinite(n) ? n : fallback;\n    };\n\n    const escapeHTML = (s) => String(s ?? \"\")\n      .replaceAll(\"&\", \"&amp;\")\n      .replaceAll(\"<\", \"&lt;\")\n      .replaceAll(\">\", \"&gt;\")\n      .replaceAll('\"', \"&quot;\")\n      .replaceAll(\"'\", \"&#039;\");\n\n    const scopeActor =\n      (typeof actor !== \"undefined\" && actor?.documentName === \"Actor\") ? actor :\n      canvas?.tokens?.controlled?.[0]?.actor ||\n      (() => {\n        const t = game.user?.targets ? Array.from(game.user.targets)[0] : null;\n        return t?.actor ?? null;\n      })() ||\n      game.user?.character ||\n      null;\n\n    if (!scopeActor) {\n      ui.notifications?.warn?.(\"NPC roll: No actor context. Open a sheet or control/target a token.\");\n      return;\n    }\n\n    const props = scopeActor.system?.props ?? {};\n\n    const label = String(props?.[NAME_KEY] ?? \"\").trim() || TITLE_FALLBACK;\n    const dice = Math.max(0, Math.floor(num(props?.[DICE_KEY], 0)));\n    const baseDamage = Math.max(0, Math.floor(num(props?.[DMG_KEY], 0)));\n    const penetration = Math.max(0, Math.floor(num(props?.[PEN_KEY], 0)));\n\n    if (dice <= 0) {\n      ui.notifications?.warn?.(`NPC roll: \"${label}\" has 0 dice (check ${DICE_KEY}).`);\n      return;\n    }\n\n    const roll = new Roll(`${dice}d6`);\n    await roll.evaluate();\n\n    const results = (roll.dice?.[0]?.results ?? []).map(r => Number(r.result)).filter(Number.isFinite);\n    const successes = results.reduce((acc, v) => acc + (v >= TN ? 1 : 0), 0);\n\n    const diceHTML = await roll.render();\n\n    const content = `\n      <div class=\"sinlesscsb item-roll-card\">\n        <h3 style=\"margin:0 0 6px 0;\">${escapeHTML(label)}</h3>\n        <p style=\"margin:0 0 6px 0;\"><strong>Actor:</strong> ${escapeHTML(scopeActor.name)}</p>\n        <p style=\"margin:0 0 10px 0;\"><strong>Roll:</strong> <strong>${escapeHTML(dice)}d6</strong> vs TN <strong>${escapeHTML(TN)}+</strong></p>\n\n        <div style=\"text-align:center; margin:10px 0 12px 0;\">\n          <div style=\"font-size:28px; font-weight:bold;\">\n            ${escapeHTML(successes)} SUCCESS${successes === 1 ? \"\" : \"ES\"}\n          </div>\n        </div>\n\n        <hr/>\n        <p style=\"margin:0 0 6px 0;\">\n          <strong>Damage (base):</strong> <strong>${escapeHTML(baseDamage)}</strong>\n          <span style=\"font-size:12px; opacity:0.85;\">(+ remaining successes after dodge)</span>\n        </p>\n        <p style=\"margin:0 0 6px 0;\">\n          <strong>Penetration:</strong> <strong>${escapeHTML(penetration)}</strong>\n        </p>\n\n        <details>\n          <summary>Dice Results</summary>\n          ${diceHTML}\n        </details>\n      </div>\n    `;\n\n    await ChatMessage.create({\n      speaker: ChatMessage.getSpeaker({ actor: scopeActor }),\n      content\n    });\n  })();\n\n  return \"\";\n}%\n",
                      "altRollMessage": "",
                      "rollMessageToChat": true,
                      "altRollMessageToChat": true,
                      "style": "button"
                    }
                  ],
                  "flow": "grid-2",
                  "align": "left",
                  "verticalAlign": "top",
                  "collapsible": true,
                  "defaultCollapsed": false,
                  "title": "Attack3",
                  "titleStyle": "default"
                },
                {
                  "key": "attack4",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "panel",
                  "contents": [
                    {
                      "key": "",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "label",
                      "size": "full-size",
                      "icon": "",
                      "value": "${npcAttack4Name ? npcAttack4Name : \"Attack 4\"}$\n",
                      "prefix": "",
                      "suffix": "",
                      "rollMessage": "%{\n  (async () => {\n    const NAME_KEY = \"npcAttack4Name\";\n    const DICE_KEY = \"npcAttack4Dice\";\n    const DMG_KEY  = \"npcAttack4Damage\";\n    const PEN_KEY  = \"npcPenetration4\";\n    const TITLE_FALLBACK = \"Attack 4\";\n    const TN = 4;\n\n    const num = (x, fallback = 0) => {\n      const n = Number(x);\n      return Number.isFinite(n) ? n : fallback;\n    };\n\n    const escapeHTML = (s) => String(s ?? \"\")\n      .replaceAll(\"&\", \"&amp;\")\n      .replaceAll(\"<\", \"&lt;\")\n      .replaceAll(\">\", \"&gt;\")\n      .replaceAll('\"', \"&quot;\")\n      .replaceAll(\"'\", \"&#039;\");\n\n    const scopeActor =\n      (typeof actor !== \"undefined\" && actor?.documentName === \"Actor\") ? actor :\n      canvas?.tokens?.controlled?.[0]?.actor ||\n      (() => {\n        const t = game.user?.targets ? Array.from(game.user.targets)[0] : null;\n        return t?.actor ?? null;\n      })() ||\n      game.user?.character ||\n      null;\n\n    if (!scopeActor) {\n      ui.notifications?.warn?.(\"NPC roll: No actor context. Open a sheet or control/target a token.\");\n      return;\n    }\n\n    const props = scopeActor.system?.props ?? {};\n\n    const label = String(props?.[NAME_KEY] ?? \"\").trim() || TITLE_FALLBACK;\n    const dice = Math.max(0, Math.floor(num(props?.[DICE_KEY], 0)));\n    const baseDamage = Math.max(0, Math.floor(num(props?.[DMG_KEY], 0)));\n    const penetration = Math.max(0, Math.floor(num(props?.[PEN_KEY], 0)));\n\n    if (dice <= 0) {\n      ui.notifications?.warn?.(`NPC roll: \"${label}\" has 0 dice (check ${DICE_KEY}).`);\n      return;\n    }\n\n    const roll = new Roll(`${dice}d6`);\n    await roll.evaluate();\n\n    const results = (roll.dice?.[0]?.results ?? []).map(r => Number(r.result)).filter(Number.isFinite);\n    const successes = results.reduce((acc, v) => acc + (v >= TN ? 1 : 0), 0);\n\n    const diceHTML = await roll.render();\n\n    const content = `\n      <div class=\"sinlesscsb item-roll-card\">\n        <h3 style=\"margin:0 0 6px 0;\">${escapeHTML(label)}</h3>\n        <p style=\"margin:0 0 6px 0;\"><strong>Actor:</strong> ${escapeHTML(scopeActor.name)}</p>\n        <p style=\"margin:0 0 10px 0;\"><strong>Roll:</strong> <strong>${escapeHTML(dice)}d6</strong> vs TN <strong>${escapeHTML(TN)}+</strong></p>\n\n        <div style=\"text-align:center; margin:10px 0 12px 0;\">\n          <div style=\"font-size:28px; font-weight:bold;\">\n            ${escapeHTML(successes)} SUCCESS${successes === 1 ? \"\" : \"ES\"}\n          </div>\n        </div>\n\n        <hr/>\n        <p style=\"margin:0 0 6px 0;\">\n          <strong>Damage (base):</strong> <strong>${escapeHTML(baseDamage)}</strong>\n          <span style=\"font-size:12px; opacity:0.85;\">(+ remaining successes after dodge)</span>\n        </p>\n        <p style=\"margin:0 0 6px 0;\">\n          <strong>Penetration:</strong> <strong>${escapeHTML(penetration)}</strong>\n        </p>\n\n        <details>\n          <summary>Dice Results</summary>\n          ${diceHTML}\n        </details>\n      </div>\n    `;\n\n    await ChatMessage.create({\n      speaker: ChatMessage.getSpeaker({ actor: scopeActor }),\n      content\n    });\n  })();\n\n  return \"\";\n}%\n",
                      "altRollMessage": "",
                      "rollMessageToChat": true,
                      "altRollMessageToChat": true,
                      "style": "button"
                    }
                  ],
                  "flow": "grid-2",
                  "align": "left",
                  "verticalAlign": "top",
                  "collapsible": true,
                  "defaultCollapsed": false,
                  "title": "Attack4",
                  "titleStyle": "default"
                },
                {
                  "key": "attack5",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "panel",
                  "contents": [
                    {
                      "key": "",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "label",
                      "size": "full-size",
                      "icon": "",
                      "value": "${npcAttack5Name ? npcAttack5Name : \"Attack 5\"}$\n",
                      "prefix": "",
                      "suffix": "",
                      "rollMessage": "%{\n  (async () => {\n    const NAME_KEY = \"npcAttack5Name\";\n    const DICE_KEY = \"npcAttack5Dice\";\n    const DMG_KEY  = \"npcAttack5Damage\";\n    const PEN_KEY  = \"npcPenetration5\";\n    const TITLE_FALLBACK = \"Attack 5\";\n    const TN = 4;\n\n    const num = (x, fallback = 0) => {\n      const n = Number(x);\n      return Number.isFinite(n) ? n : fallback;\n    };\n\n    const escapeHTML = (s) => String(s ?? \"\")\n      .replaceAll(\"&\", \"&amp;\")\n      .replaceAll(\"<\", \"&lt;\")\n      .replaceAll(\">\", \"&gt;\")\n      .replaceAll('\"', \"&quot;\")\n      .replaceAll(\"'\", \"&#039;\");\n\n    const scopeActor =\n      (typeof actor !== \"undefined\" && actor?.documentName === \"Actor\") ? actor :\n      canvas?.tokens?.controlled?.[0]?.actor ||\n      (() => {\n        const t = game.user?.targets ? Array.from(game.user.targets)[0] : null;\n        return t?.actor ?? null;\n      })() ||\n      game.user?.character ||\n      null;\n\n    if (!scopeActor) {\n      ui.notifications?.warn?.(\"NPC roll: No actor context. Open a sheet or control/target a token.\");\n      return;\n    }\n\n    const props = scopeActor.system?.props ?? {};\n\n    const label = String(props?.[NAME_KEY] ?? \"\").trim() || TITLE_FALLBACK;\n    const dice = Math.max(0, Math.floor(num(props?.[DICE_KEY], 0)));\n    const baseDamage = Math.max(0, Math.floor(num(props?.[DMG_KEY], 0)));\n    const penetration = Math.max(0, Math.floor(num(props?.[PEN_KEY], 0)));\n\n    if (dice <= 0) {\n      ui.notifications?.warn?.(`NPC roll: \"${label}\" has 0 dice (check ${DICE_KEY}).`);\n      return;\n    }\n\n    const roll = new Roll(`${dice}d6`);\n    await roll.evaluate();\n\n    const results = (roll.dice?.[0]?.results ?? []).map(r => Number(r.result)).filter(Number.isFinite);\n    const successes = results.reduce((acc, v) => acc + (v >= TN ? 1 : 0), 0);\n\n    const diceHTML = await roll.render();\n\n    const content = `\n      <div class=\"sinlesscsb item-roll-card\">\n        <h3 style=\"margin:0 0 6px 0;\">${escapeHTML(label)}</h3>\n        <p style=\"margin:0 0 6px 0;\"><strong>Actor:</strong> ${escapeHTML(scopeActor.name)}</p>\n        <p style=\"margin:0 0 10px 0;\"><strong>Roll:</strong> <strong>${escapeHTML(dice)}d6</strong> vs TN <strong>${escapeHTML(TN)}+</strong></p>\n\n        <div style=\"text-align:center; margin:10px 0 12px 0;\">\n          <div style=\"font-size:28px; font-weight:bold;\">\n            ${escapeHTML(successes)} SUCCESS${successes === 1 ? \"\" : \"ES\"}\n          </div>\n        </div>\n\n        <hr/>\n        <p style=\"margin:0 0 6px 0;\">\n          <strong>Damage (base):</strong> <strong>${escapeHTML(baseDamage)}</strong>\n          <span style=\"font-size:12px; opacity:0.85;\">(+ remaining successes after dodge)</span>\n        </p>\n        <p style=\"margin:0 0 6px 0;\">\n          <strong>Penetration:</strong> <strong>${escapeHTML(penetration)}</strong>\n        </p>\n\n        <details>\n          <summary>Dice Results</summary>\n          ${diceHTML}\n        </details>\n      </div>\n    `;\n\n    await ChatMessage.create({\n      speaker: ChatMessage.getSpeaker({ actor: scopeActor }),\n      content\n    });\n  })();\n\n  return \"\";\n}%\n",
                      "altRollMessage": "",
                      "rollMessageToChat": true,
                      "altRollMessageToChat": true,
                      "style": "button"
                    }
                  ],
                  "flow": "grid-2",
                  "align": "left",
                  "verticalAlign": "top",
                  "collapsible": true,
                  "defaultCollapsed": false,
                  "title": "Attack5",
                  "titleStyle": "default"
                }
              ],
              "flow": "vertical",
              "align": "left",
              "verticalAlign": "top",
              "collapsible": true,
              "defaultCollapsed": false,
              "title": "Actions",
              "titleStyle": "default"
            },
            {
              "key": "defensesMain",
              "colSpan": 1,
              "rowSpan": 1,
              "cssClass": "",
              "role": 0,
              "editRole": 0,
              "permission": 0,
              "tooltip": "",
              "visibilityFormula": "",
              "editableFormula": "",
              "escapeHTML": false,
              "type": "panel",
              "contents": [
                {
                  "key": "",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "panel",
                  "contents": [
                    {
                      "key": "",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "label",
                      "size": "x-small",
                      "icon": "",
                      "value": "Dodge",
                      "prefix": "",
                      "suffix": "",
                      "rollMessage": "%{\n  (async () => {\n    // ===== CONFIG: DODGE =====\n    const DICE_KEY = \"npcDodgeDice\";   // Number field on NPC actor\n    const TITLE    = \"Dodge\";\n    const TN       = 4;               // NPC fixed TN\n    // =========================\n\n    const num = (x, fallback = 0) => {\n      const n = Number(x);\n      return Number.isFinite(n) ? n : fallback;\n    };\n    const escapeHTML = (s) => String(s ?? \"\")\n      .replaceAll(\"&\", \"&amp;\")\n      .replaceAll(\"<\", \"&lt;\")\n      .replaceAll(\">\", \"&gt;\")\n      .replaceAll('\"', \"&quot;\")\n      .replaceAll(\"'\", \"&#039;\");\n\n    const scopeActor =\n      (typeof actor !== \"undefined\" && actor?.documentName === \"Actor\") ? actor :\n      canvas?.tokens?.controlled?.[0]?.actor ||\n      (() => {\n        const t = game.user?.targets ? Array.from(game.user.targets)[0] : null;\n        return t?.actor ?? null;\n      })() ||\n      game.user?.character ||\n      null;\n\n    if (!scopeActor) {\n      ui.notifications?.warn?.(\"NPC roll: No actor context. Open a sheet or control/target a token.\");\n      return;\n    }\n\n    const props = scopeActor.system?.props ?? {};\n    const dice = Math.max(0, Math.floor(num(props?.[DICE_KEY], 0)));\n\n    if (dice <= 0) {\n      ui.notifications?.warn?.(`NPC ${TITLE}: 0 dice (check ${DICE_KEY}).`);\n      return;\n    }\n\n    const roll = new Roll(`${dice}d6`);\n    await roll.evaluate();\n\n    const results = (roll.dice?.[0]?.results ?? []).map(r => Number(r.result)).filter(Number.isFinite);\n    const successes = results.reduce((acc, v) => acc + (v >= TN ? 1 : 0), 0);\n\n    const diceHTML = await roll.render();\n\n    const content = `\n      <div class=\"sinlesscsb item-roll-card\">\n        <h3 style=\"margin:0 0 6px 0;\">${escapeHTML(TITLE)}</h3>\n        <p style=\"margin:0 0 6px 0;\"><strong>Actor:</strong> ${escapeHTML(scopeActor.name)}</p>\n        <p style=\"margin:0 0 10px 0;\"><strong>Roll:</strong> <strong>${escapeHTML(dice)}d6</strong> vs TN <strong>${escapeHTML(TN)}+</strong></p>\n\n        <div style=\"text-align:center; margin:10px 0 12px 0;\">\n          <div style=\"font-size:28px; font-weight:bold;\">\n            ${escapeHTML(successes)} SUCCESS${successes === 1 ? \"\" : \"ES\"}\n          </div>\n        </div>\n\n        <details>\n          <summary>Dice Results</summary>\n          ${diceHTML}\n        </details>\n      </div>\n    `;\n\n    await ChatMessage.create({\n      speaker: ChatMessage.getSpeaker({ actor: scopeActor }),\n      content\n    });\n  })();\n\n  return \"\";\n}%\n",
                      "altRollMessage": "",
                      "rollMessageToChat": true,
                      "altRollMessageToChat": false,
                      "style": "button"
                    },
                    {
                      "key": "npcDodgeDice",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "m-small",
                      "label": "",
                      "defaultValue": "6",
                      "allowDecimal": false,
                      "minVal": "0",
                      "maxVal": "",
                      "allowRelative": false,
                      "showControls": true,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    }
                  ],
                  "flow": "grid-2",
                  "align": "left",
                  "verticalAlign": "top",
                  "collapsible": false,
                  "defaultCollapsed": false,
                  "title": "",
                  "titleStyle": "default"
                },
                {
                  "key": "",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "panel",
                  "contents": [
                    {
                      "key": "",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "label",
                      "size": "full-size",
                      "icon": "",
                      "value": "SOAK",
                      "prefix": "",
                      "suffix": "",
                      "rollMessage": "%{\n  (async () => {\n    // ===== CONFIG: SOAK =====\n    const DICE_KEY = \"npcSoakDice\";    // Number field on NPC actor\n    const TITLE    = \"Soak\";\n    const TN       = 4;               // NPC fixed TN\n    // ========================\n\n    const num = (x, fallback = 0) => {\n      const n = Number(x);\n      return Number.isFinite(n) ? n : fallback;\n    };\n    const escapeHTML = (s) => String(s ?? \"\")\n      .replaceAll(\"&\", \"&amp;\")\n      .replaceAll(\"<\", \"&lt;\")\n      .replaceAll(\">\", \"&gt;\")\n      .replaceAll('\"', \"&quot;\")\n      .replaceAll(\"'\", \"&#039;\");\n\n    const scopeActor =\n      (typeof actor !== \"undefined\" && actor?.documentName === \"Actor\") ? actor :\n      canvas?.tokens?.controlled?.[0]?.actor ||\n      (() => {\n        const t = game.user?.targets ? Array.from(game.user.targets)[0] : null;\n        return t?.actor ?? null;\n      })() ||\n      game.user?.character ||\n      null;\n\n    if (!scopeActor) {\n      ui.notifications?.warn?.(\"NPC roll: No actor context. Open a sheet or control/target a token.\");\n      return;\n    }\n\n    const props = scopeActor.system?.props ?? {};\n    const dice = Math.max(0, Math.floor(num(props?.[DICE_KEY], 0)));\n\n    if (dice <= 0) {\n      ui.notifications?.warn?.(`NPC ${TITLE}: 0 dice (check ${DICE_KEY}).`);\n      return;\n    }\n\n    const roll = new Roll(`${dice}d6`);\n    await roll.evaluate();\n\n    const results = (roll.dice?.[0]?.results ?? []).map(r => Number(r.result)).filter(Number.isFinite);\n    const successes = results.reduce((acc, v) => acc + (v >= TN ? 1 : 0), 0);\n\n    const diceHTML = await roll.render();\n\n    const content = `\n      <div class=\"sinlesscsb item-roll-card\">\n        <h3 style=\"margin:0 0 6px 0;\">${escapeHTML(TITLE)}</h3>\n        <p style=\"margin:0 0 6px 0;\"><strong>Actor:</strong> ${escapeHTML(scopeActor.name)}</p>\n        <p style=\"margin:0 0 10px 0;\"><strong>Roll:</strong> <strong>${escapeHTML(dice)}d6</strong> vs TN <strong>${escapeHTML(TN)}+</strong></p>\n\n        <div style=\"text-align:center; margin:10px 0 12px 0;\">\n          <div style=\"font-size:28px; font-weight:bold;\">\n            ${escapeHTML(successes)} SUCCESS${successes === 1 ? \"\" : \"ES\"}\n          </div>\n        </div>\n\n        <details>\n          <summary>Dice Results</summary>\n          ${diceHTML}\n        </details>\n      </div>\n    `;\n\n    await ChatMessage.create({\n      speaker: ChatMessage.getSpeaker({ actor: scopeActor }),\n      content\n    });\n  })();\n\n  return \"\";\n}%\n",
                      "altRollMessage": "",
                      "rollMessageToChat": true,
                      "altRollMessageToChat": false,
                      "style": "button"
                    },
                    {
                      "key": "npcSoakDice",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "m-small",
                      "label": "",
                      "defaultValue": "6",
                      "allowDecimal": false,
                      "minVal": "0",
                      "maxVal": "",
                      "allowRelative": false,
                      "showControls": true,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    }
                  ],
                  "flow": "grid-2",
                  "align": "left",
                  "verticalAlign": "top",
                  "collapsible": false,
                  "defaultCollapsed": false,
                  "title": "",
                  "titleStyle": "default"
                },
                {
                  "key": "",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "panel",
                  "contents": [
                    {
                      "key": "",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "label",
                      "size": "full-size",
                      "icon": "",
                      "value": "Resist",
                      "prefix": "",
                      "suffix": "",
                      "rollMessage": "%{\n  (async () => {\n    // ===== CONFIG: RESIST =====\n    const DICE_KEY = \"npcResistDice\";  // Number field on NPC actor\n    const TITLE    = \"Resist\";\n    const TN       = 4;               // NPC fixed TN\n    // ==========================\n\n    const num = (x, fallback = 0) => {\n      const n = Number(x);\n      return Number.isFinite(n) ? n : fallback;\n    };\n    const escapeHTML = (s) => String(s ?? \"\")\n      .replaceAll(\"&\", \"&amp;\")\n      .replaceAll(\"<\", \"&lt;\")\n      .replaceAll(\">\", \"&gt;\")\n      .replaceAll('\"', \"&quot;\")\n      .replaceAll(\"'\", \"&#039;\");\n\n    const scopeActor =\n      (typeof actor !== \"undefined\" && actor?.documentName === \"Actor\") ? actor :\n      canvas?.tokens?.controlled?.[0]?.actor ||\n      (() => {\n        const t = game.user?.targets ? Array.from(game.user.targets)[0] : null;\n        return t?.actor ?? null;\n      })() ||\n      game.user?.character ||\n      null;\n\n    if (!scopeActor) {\n      ui.notifications?.warn?.(\"NPC roll: No actor context. Open a sheet or control/target a token.\");\n      return;\n    }\n\n    const props = scopeActor.system?.props ?? {};\n    const dice = Math.max(0, Math.floor(num(props?.[DICE_KEY], 0)));\n\n    if (dice <= 0) {\n      ui.notifications?.warn?.(`NPC ${TITLE}: 0 dice (check ${DICE_KEY}).`);\n      return;\n    }\n\n    const roll = new Roll(`${dice}d6`);\n    await roll.evaluate();\n\n    const results = (roll.dice?.[0]?.results ?? []).map(r => Number(r.result)).filter(Number.isFinite);\n    const successes = results.reduce((acc, v) => acc + (v >= TN ? 1 : 0), 0);\n\n    const diceHTML = await roll.render();\n\n    const content = `\n      <div class=\"sinlesscsb item-roll-card\">\n        <h3 style=\"margin:0 0 6px 0;\">${escapeHTML(TITLE)}</h3>\n        <p style=\"margin:0 0 6px 0;\"><strong>Actor:</strong> ${escapeHTML(scopeActor.name)}</p>\n        <p style=\"margin:0 0 10px 0;\"><strong>Roll:</strong> <strong>${escapeHTML(dice)}d6</strong> vs TN <strong>${escapeHTML(TN)}+</strong></p>\n\n        <div style=\"text-align:center; margin:10px 0 12px 0;\">\n          <div style=\"font-size:28px; font-weight:bold;\">\n            ${escapeHTML(successes)} SUCCESS${successes === 1 ? \"\" : \"ES\"}\n          </div>\n        </div>\n\n        <details>\n          <summary>Dice Results</summary>\n          ${diceHTML}\n        </details>\n      </div>\n    `;\n\n    await ChatMessage.create({\n      speaker: ChatMessage.getSpeaker({ actor: scopeActor }),\n      content\n    });\n  })();\n\n  return \"\";\n}%\n",
                      "altRollMessage": "",
                      "rollMessageToChat": true,
                      "altRollMessageToChat": false,
                      "style": "button"
                    },
                    {
                      "key": "npcResistDice",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "m-small",
                      "label": "",
                      "defaultValue": "6",
                      "allowDecimal": false,
                      "minVal": "0",
                      "maxVal": "",
                      "allowRelative": false,
                      "showControls": true,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    }
                  ],
                  "flow": "grid-2",
                  "align": "left",
                  "verticalAlign": "top",
                  "collapsible": false,
                  "defaultCollapsed": false,
                  "title": "",
                  "titleStyle": "default"
                },
                {
                  "key": "",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "panel",
                  "contents": [
                    {
                      "key": "npcBallistic",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "full-size",
                      "label": "Ballistic",
                      "defaultValue": "",
                      "allowDecimal": false,
                      "minVal": "0",
                      "maxVal": "",
                      "allowRelative": false,
                      "showControls": true,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    },
                    {
                      "key": "npcImpact",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "full-size",
                      "label": "Impact",
                      "defaultValue": "",
                      "allowDecimal": false,
                      "minVal": "0",
                      "maxVal": "",
                      "allowRelative": false,
                      "showControls": true,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    },
                    {
                      "key": "armorTxt",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "textField",
                      "size": "full-size",
                      "label": "",
                      "defaultValue": "",
                      "charList": "",
                      "maxLength": null,
                      "autocomplete": ""
                    }
                  ],
                  "flow": "vertical",
                  "align": "left",
                  "verticalAlign": "top",
                  "collapsible": false,
                  "defaultCollapsed": false,
                  "title": "",
                  "titleStyle": "default"
                },
                {
                  "key": "",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "panel",
                  "contents": [
                    {
                      "key": "",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "label",
                      "size": "full-size",
                      "icon": "plus",
                      "value": "Full Heal",
                      "prefix": "",
                      "suffix": "",
                      "rollMessage": "%{\n  (async () => {\n    // Sheet actor (preferred, prevents \u201cGM had a PC selected\u201d mistakes)\n    const sheetActor = (typeof actor !== \"undefined\" && actor?.documentName === \"Actor\") ? actor : null;\n\n    const num = (x, fallback = 0) => {\n      const n = Number(x);\n      return Number.isFinite(n) ? n : fallback;\n    };\n\n    const healOneActor = async (a) => {\n      const props = a?.system?.props ?? {};\n      const physicalMax = Math.max(0, Math.floor(num(props.physicalMax, 0)));\n      const stunMax     = Math.max(0, Math.floor(num(props.stunMax, 0)));\n\n      await a.update({\n        \"system.props.physicalCur\": physicalMax,\n        \"system.props.stunCur\": stunMax\n      });\n\n      return { name: a.name, physicalMax, stunMax };\n    };\n\n    // Controlled tokens (optional): heal only NPC-ish tokens\n    const controlled = canvas?.tokens?.controlled ?? [];\n    const npcTokenActors = controlled\n      .map(t => t?.actor)\n      .filter(a => a?.documentName === \"Actor\")\n      // Exclude PCs (or anything owned by a player)\n      .filter(a => a.hasPlayerOwner !== true);\n\n    // If any NPC tokens are selected, heal them; otherwise heal the sheet actor.\n    const targets = (npcTokenActors.length > 0) ? npcTokenActors : (sheetActor ? [sheetActor] : []);\n\n    if (targets.length === 0) {\n      ui.notifications?.warn?.(\"Full Heal: No valid target (open an actor sheet, or select NPC tokens).\");\n      return;\n    }\n\n    // Heal sequentially (stable, easier to debug)\n    const healed = [];\n    for (const a of targets) {\n      try {\n        healed.push(await healOneActor(a));\n      } catch (e) {\n        console.warn(\"SinlessCSB | Full Heal failed for actor\", a?.name, a?.uuid, e);\n      }\n    }\n\n    if (healed.length === 0) {\n      ui.notifications?.warn?.(\"Full Heal: No actors were healed (see console).\");\n      return;\n    }\n\n    const label = (npcTokenActors.length > 0)\n      ? `Healed selected NPC tokens (${healed.length})`\n      : `Healed ${healed[0].name}`;\n\n    ui.notifications?.info?.(label);\n  })();\n\n  return \"\";\n}%\n",
                      "altRollMessage": "",
                      "rollMessageToChat": true,
                      "altRollMessageToChat": true,
                      "style": "button"
                    },
                    {
                      "key": "",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "panel",
                      "contents": [
                        {
                          "key": "",
                          "colSpan": 1,
                          "rowSpan": 1,
                          "cssClass": "",
                          "role": 0,
                          "editRole": 0,
                          "permission": 0,
                          "tooltip": "",
                          "visibilityFormula": "",
                          "editableFormula": "",
                          "escapeHTML": false,
                          "type": "panel",
                          "contents": [
                            {
                              "key": "",
                              "colSpan": 1,
                              "rowSpan": 1,
                              "cssClass": "",
                              "role": 0,
                              "editRole": 0,
                              "permission": 0,
                              "tooltip": "",
                              "visibilityFormula": "",
                              "editableFormula": "",
                              "escapeHTML": false,
                              "type": "label",
                              "size": "medium",
                              "icon": "",
                              "value": "Physical",
                              "prefix": "",
                              "suffix": "",
                              "rollMessage": "",
                              "altRollMessage": "",
                              "rollMessageToChat": true,
                              "altRollMessageToChat": true,
                              "style": "subtitle"
                            },
                            {
                              "key": "physicalMax",
                              "colSpan": 1,
                              "rowSpan": 1,
                              "cssClass": "",
                              "role": 0,
                              "editRole": 0,
                              "permission": 0,
                              "tooltip": "",
                              "visibilityFormula": "",
                              "editableFormula": "",
                              "escapeHTML": false,
                              "type": "numberField",
                              "size": "small",
                              "label": "",
                              "defaultValue": "",
                              "allowDecimal": false,
                              "minVal": "0",
                              "maxVal": "",
                              "allowRelative": false,
                              "showControls": true,
                              "controlsStyle": "hover",
                              "controlsCustomIncrements": "",
                              "inputStyle": "text"
                            },
                            {
                              "key": "npcPlusforce",
                              "colSpan": 1,
                              "rowSpan": 1,
                              "cssClass": "",
                              "role": 0,
                              "editRole": 0,
                              "permission": 0,
                              "tooltip": "",
                              "visibilityFormula": "",
                              "editableFormula": "",
                              "escapeHTML": false,
                              "type": "label",
                              "size": "full-size",
                              "icon": "",
                              "value": "add Force of ",
                              "prefix": "",
                              "suffix": "",
                              "rollMessage": "",
                              "altRollMessage": "",
                              "rollMessageToChat": true,
                              "altRollMessageToChat": true,
                              "style": "label"
                            }
                          ],
                          "flow": "grid-2",
                          "align": "left",
                          "verticalAlign": "top",
                          "collapsible": false,
                          "defaultCollapsed": false,
                          "title": "",
                          "titleStyle": "default"
                        },
                        {
                          "key": "physicalCur",
                          "colSpan": 1,
                          "rowSpan": 1,
                          "cssClass": "",
                          "role": 0,
                          "editRole": 0,
                          "permission": 0,
                          "tooltip": "",
                          "visibilityFormula": "",
                          "editableFormula": "",
                          "escapeHTML": false,
                          "type": "numberField",
                          "size": "m-large",
                          "label": "Current Physical Track:",
                          "defaultValue": "",
                          "allowDecimal": false,
                          "minVal": "0",
                          "maxVal": "${physicalMax}$",
                          "allowRelative": false,
                          "showControls": true,
                          "controlsStyle": "hover",
                          "controlsCustomIncrements": "",
                          "inputStyle": "text"
                        },
                        {
                          "key": "",
                          "colSpan": 1,
                          "rowSpan": 1,
                          "cssClass": "",
                          "role": 0,
                          "editRole": 0,
                          "permission": 0,
                          "tooltip": "",
                          "visibilityFormula": "",
                          "editableFormula": "",
                          "escapeHTML": false,
                          "type": "panel",
                          "contents": [
                            {
                              "key": "Physical_Meter",
                              "colSpan": 1,
                              "rowSpan": 1,
                              "cssClass": "",
                              "role": 0,
                              "editRole": 0,
                              "permission": 0,
                              "tooltip": "",
                              "visibilityFormula": "",
                              "editableFormula": "",
                              "escapeHTML": false,
                              "type": "meter",
                              "size": "full-size",
                              "label": "",
                              "value": "${physicalCur}$",
                              "min": "0",
                              "max": "${physicalMax}$",
                              "low": "${physicalMax * 0.25}$",
                              "high": "${physicalMax * 0.5}$",
                              "optimum": "${physicalMax}$",
                              "textOption": "none"
                            }
                          ],
                          "flow": "vertical",
                          "align": "left",
                          "verticalAlign": "top",
                          "collapsible": false,
                          "defaultCollapsed": false,
                          "title": "",
                          "titleStyle": "default"
                        }
                      ],
                      "flow": "vertical",
                      "align": "left",
                      "verticalAlign": "top",
                      "collapsible": false,
                      "defaultCollapsed": false,
                      "title": "",
                      "titleStyle": "default"
                    },
                    {
                      "key": "",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "panel",
                      "contents": [],
                      "flow": "grid-2",
                      "align": "left",
                      "verticalAlign": "top",
                      "collapsible": false,
                      "defaultCollapsed": false,
                      "title": "",
                      "titleStyle": "default"
                    },
                    {
                      "key": "",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "panel",
                      "contents": [
                        {
                          "key": "",
                          "colSpan": 1,
                          "rowSpan": 1,
                          "cssClass": "",
                          "role": 0,
                          "editRole": 0,
                          "permission": 0,
                          "tooltip": "",
                          "visibilityFormula": "",
                          "editableFormula": "",
                          "escapeHTML": false,
                          "type": "panel",
                          "contents": [
                            {
                              "key": "",
                              "colSpan": 1,
                              "rowSpan": 1,
                              "cssClass": "",
                              "role": 0,
                              "editRole": 0,
                              "permission": 0,
                              "tooltip": "",
                              "visibilityFormula": "",
                              "editableFormula": "",
                              "escapeHTML": false,
                              "type": "label",
                              "size": "medium",
                              "icon": "",
                              "value": "Stun",
                              "prefix": "",
                              "suffix": "",
                              "rollMessage": "",
                              "altRollMessage": "",
                              "rollMessageToChat": true,
                              "altRollMessageToChat": true,
                              "style": "subtitle"
                            },
                            {
                              "key": "stunMax",
                              "colSpan": 1,
                              "rowSpan": 1,
                              "cssClass": "",
                              "role": 0,
                              "editRole": 0,
                              "permission": 0,
                              "tooltip": "",
                              "visibilityFormula": "",
                              "editableFormula": "",
                              "escapeHTML": false,
                              "type": "numberField",
                              "size": "small",
                              "label": "",
                              "defaultValue": "",
                              "allowDecimal": false,
                              "minVal": "0",
                              "maxVal": "",
                              "allowRelative": false,
                              "showControls": true,
                              "controlsStyle": "hover",
                              "controlsCustomIncrements": "",
                              "inputStyle": "text"
                            }
                          ],
                          "flow": "grid-2",
                          "align": "left",
                          "verticalAlign": "top",
                          "collapsible": false,
                          "defaultCollapsed": false,
                          "title": "",
                          "titleStyle": "default"
                        },
                        {
                          "key": "stunCur",
                          "colSpan": 1,
                          "rowSpan": 1,
                          "cssClass": "",
                          "role": 0,
                          "editRole": 0,
                          "permission": 0,
                          "tooltip": "",
                          "visibilityFormula": "",
                          "editableFormula": "",
                          "escapeHTML": false,
                          "type": "numberField",
                          "size": "medium",
                          "label": "Current Stun:",
                          "defaultValue": "",
                          "allowDecimal": false,
                          "minVal": "0",
                          "maxVal": "${stunMax}$",
                          "allowRelative": false,
                          "showControls": true,
                          "controlsStyle": "hover",
                          "controlsCustomIncrements": "",
                          "inputStyle": "text"
                        },
                        {
                          "key": "",
                          "colSpan": 1,
                          "rowSpan": 1,
                          "cssClass": "",
                          "role": 0,
                          "editRole": 0,
                          "permission": 0,
                          "tooltip": "",
                          "visibilityFormula": "",
                          "editableFormula": "",
                          "escapeHTML": false,
                          "type": "panel",
                          "contents": [],
                          "flow": "vertical",
                          "align": "left",
                          "verticalAlign": "top",
                          "collapsible": false,
                          "defaultCollapsed": false,
                          "title": "",
                          "titleStyle": "default"
                        },
                        {
                          "key": "",
                          "colSpan": 1,
                          "rowSpan": 1,
                          "cssClass": "",
                          "role": 0,
                          "editRole": 0,
                          "permission": 0,
                          "tooltip": "",
                          "visibilityFormula": "",
                          "editableFormula": "",
                          "escapeHTML": false,
                          "type": "panel",
                          "contents": [
                            {
                              "key": "Stun_Meter",
                              "colSpan": 1,
                              "rowSpan": 1,
                              "cssClass": "",
                              "role": 0,
                              "editRole": 0,
                              "permission": 0,
                              "tooltip": "",
                              "visibilityFormula": "",
                              "editableFormula": "",
                              "escapeHTML": false,
                              "type": "meter",
                              "size": "full-size",
                              "label": "",
                              "value": "${stunCur}$",
                              "min": "0",
                              "max": "${stunMax}$",
                              "low": "${stunMax * 0.25}$",
                              "high": "${stunMax * 0.5}$",
                              "optimum": "${stunMax}$",
                              "textOption": "none"
                            }
                          ],
                          "flow": "vertical",
                          "align": "left",
                          "verticalAlign": "top",
                          "collapsible": false,
                          "defaultCollapsed": false,
                          "title": "",
                          "titleStyle": "default"
                        }
                      ],
                      "flow": "vertical",
                      "align": "left",
                      "verticalAlign": "top",
                      "collapsible": false,
                      "defaultCollapsed": false,
                      "title": "",
                      "titleStyle": "default"
                    }
                  ],
                  "flow": "vertical",
                  "align": "left",
                  "verticalAlign": "top",
                  "collapsible": true,
                  "defaultCollapsed": false,
                  "title": "NPC Health Tracks",
                  "titleStyle": "default"
                }
              ],
              "flow": "vertical",
              "align": "left",
              "verticalAlign": "top",
              "collapsible": true,
              "defaultCollapsed": false,
              "title": "Defenses",
              "titleStyle": "default"
            }
          ],
          "flow": "grid-2",
          "align": "left",
          "verticalAlign": "top",
          "collapsible": false,
          "defaultCollapsed": false,
          "title": "",
          "titleStyle": "default"
        },
        {
          "key": "",
          "colSpan": 1,
          "rowSpan": 1,
          "cssClass": "",
          "role": 0,
          "editRole": 0,
          "permission": 0,
          "tooltip": "",
          "visibilityFormula": "",
          "editableFormula": "",
          "escapeHTML": false,
          "type": "panel",
          "contents": [
            {
              "key": "",
              "colSpan": 1,
              "rowSpan": 1,
              "cssClass": "",
              "role": 0,
              "editRole": 0,
              "permission": 0,
              "tooltip": "",
              "visibilityFormula": "",
              "editableFormula": "",
              "escapeHTML": false,
              "type": "panel",
              "contents": [
                {
                  "key": "",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "panel",
                  "contents": [
                    {
                      "key": "",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "panel",
                      "contents": [
                        {
                          "key": "npcMovement",
                          "colSpan": 1,
                          "rowSpan": 1,
                          "cssClass": "",
                          "role": 0,
                          "editRole": 0,
                          "permission": 0,
                          "tooltip": "",
                          "visibilityFormula": "",
                          "editableFormula": "",
                          "escapeHTML": false,
                          "type": "numberField",
                          "size": "medium",
                          "label": "Movement",
                          "defaultValue": "3",
                          "allowDecimal": false,
                          "minVal": "0",
                          "maxVal": "",
                          "allowRelative": false,
                          "showControls": true,
                          "controlsStyle": "hover",
                          "controlsCustomIncrements": "",
                          "inputStyle": "text"
                        },
                        {
                          "key": "NPCinit",
                          "colSpan": 1,
                          "rowSpan": 1,
                          "cssClass": "",
                          "role": 0,
                          "editRole": 0,
                          "permission": 0,
                          "tooltip": "",
                          "visibilityFormula": "",
                          "editableFormula": "",
                          "escapeHTML": false,
                          "type": "numberField",
                          "size": "medium",
                          "label": "Initiative",
                          "defaultValue": "4",
                          "allowDecimal": false,
                          "minVal": "1",
                          "maxVal": "",
                          "allowRelative": true,
                          "showControls": true,
                          "controlsStyle": "hover",
                          "controlsCustomIncrements": "",
                          "inputStyle": "text"
                        },
                        {
                          "key": "npcHardening",
                          "colSpan": 1,
                          "rowSpan": 1,
                          "cssClass": "",
                          "role": 0,
                          "editRole": 0,
                          "permission": 0,
                          "tooltip": "",
                          "visibilityFormula": "",
                          "editableFormula": "",
                          "escapeHTML": false,
                          "type": "numberField",
                          "size": "medium",
                          "label": "Hardening",
                          "defaultValue": "0",
                          "allowDecimal": false,
                          "minVal": "0",
                          "maxVal": "",
                          "allowRelative": false,
                          "showControls": true,
                          "controlsStyle": "hover",
                          "controlsCustomIncrements": "",
                          "inputStyle": "text"
                        }
                      ],
                      "flow": "vertical",
                      "align": "left",
                      "verticalAlign": "top",
                      "collapsible": false,
                      "defaultCollapsed": false,
                      "title": "",
                      "titleStyle": "default"
                    },
                    {
                      "key": "",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "panel",
                      "contents": [
                        {
                          "key": "accountForce",
                          "colSpan": 1,
                          "rowSpan": 1,
                          "cssClass": "",
                          "role": 0,
                          "editRole": 0,
                          "permission": 0,
                          "tooltip": "If NPC uses force, add the summoned Force rating to the proper field",
                          "visibilityFormula": "",
                          "editableFormula": "",
                          "escapeHTML": false,
                          "type": "checkbox",
                          "size": "full-size",
                          "label": "NPC uses force?",
                          "defaultChecked": false
                        },
                        {
                          "key": "npcForce",
                          "colSpan": 1,
                          "rowSpan": 1,
                          "cssClass": "",
                          "role": 0,
                          "editRole": 0,
                          "permission": 0,
                          "tooltip": "",
                          "visibilityFormula": "",
                          "editableFormula": "",
                          "escapeHTML": false,
                          "type": "numberField",
                          "size": "full-size",
                          "label": "Force (summoned)",
                          "defaultValue": "",
                          "allowDecimal": false,
                          "minVal": "1",
                          "maxVal": "",
                          "allowRelative": false,
                          "showControls": true,
                          "controlsStyle": "hover",
                          "controlsCustomIncrements": "",
                          "inputStyle": "text"
                        },
                        {
                          "key": "npcForceimpact",
                          "colSpan": 1,
                          "rowSpan": 1,
                          "cssClass": "",
                          "role": 0,
                          "editRole": 0,
                          "permission": 0,
                          "tooltip": "",
                          "visibilityFormula": "",
                          "editableFormula": "",
                          "escapeHTML": false,
                          "type": "textField",
                          "size": "full-size",
                          "label": "Force impacts",
                          "defaultValue": "",
                          "charList": "",
                          "maxLength": null,
                          "autocomplete": ""
                        }
                      ],
                      "flow": "vertical",
                      "align": "left",
                      "verticalAlign": "top",
                      "collapsible": false,
                      "defaultCollapsed": false,
                      "title": "",
                      "titleStyle": "default"
                    }
                  ],
                  "flow": "grid-2",
                  "align": "left",
                  "verticalAlign": "top",
                  "collapsible": false,
                  "defaultCollapsed": false,
                  "title": "",
                  "titleStyle": "default"
                },
                {
                  "key": "",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "panel",
                  "contents": [
                    {
                      "key": "npcAttack1Name",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "textField",
                      "size": "full-size",
                      "label": "Attack name:",
                      "defaultValue": "",
                      "charList": "",
                      "maxLength": null,
                      "autocomplete": ""
                    },
                    {
                      "key": "npcAttack1Dice",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "full-size",
                      "label": "Attack Dice",
                      "defaultValue": "6",
                      "allowDecimal": false,
                      "minVal": "1",
                      "maxVal": "",
                      "allowRelative": false,
                      "showControls": true,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    },
                    {
                      "key": "npcAttack1Damage",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "full-size",
                      "label": "Damage:",
                      "defaultValue": "4",
                      "allowDecimal": false,
                      "minVal": "1",
                      "maxVal": "",
                      "allowRelative": false,
                      "showControls": true,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    },
                    {
                      "key": "npcAttack1Special",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "textField",
                      "size": "full-size",
                      "label": "Special",
                      "defaultValue": "",
                      "charList": "",
                      "maxLength": null,
                      "autocomplete": ""
                    },
                    {
                      "key": "npcPenetration1",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "full-size",
                      "label": "Penetration",
                      "defaultValue": "0",
                      "allowDecimal": false,
                      "minVal": "0",
                      "maxVal": "",
                      "allowRelative": false,
                      "showControls": true,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    }
                  ],
                  "flow": "vertical",
                  "align": "left",
                  "verticalAlign": "top",
                  "collapsible": true,
                  "defaultCollapsed": false,
                  "title": "Attack1 stats",
                  "titleStyle": "default"
                },
                {
                  "key": "",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "panel",
                  "contents": [
                    {
                      "key": "npcAttack2Name",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "textField",
                      "size": "full-size",
                      "label": "Attack name:",
                      "defaultValue": "",
                      "charList": "",
                      "maxLength": null,
                      "autocomplete": ""
                    },
                    {
                      "key": "npcAttack2Dice",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "full-size",
                      "label": "Attack Dice",
                      "defaultValue": "6",
                      "allowDecimal": false,
                      "minVal": "1",
                      "maxVal": "",
                      "allowRelative": false,
                      "showControls": true,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    },
                    {
                      "key": "npcAttack2Damage",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "full-size",
                      "label": "Damage:",
                      "defaultValue": "4",
                      "allowDecimal": false,
                      "minVal": "1",
                      "maxVal": "",
                      "allowRelative": false,
                      "showControls": true,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    },
                    {
                      "key": "npcAttack2Special",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "textField",
                      "size": "full-size",
                      "label": "Special",
                      "defaultValue": "",
                      "charList": "",
                      "maxLength": null,
                      "autocomplete": ""
                    },
                    {
                      "key": "npcPenetration2",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "full-size",
                      "label": "Penetration",
                      "defaultValue": "0",
                      "allowDecimal": false,
                      "minVal": "0",
                      "maxVal": "",
                      "allowRelative": false,
                      "showControls": true,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    }
                  ],
                  "flow": "vertical",
                  "align": "left",
                  "verticalAlign": "top",
                  "collapsible": true,
                  "defaultCollapsed": false,
                  "title": "Attack2 stats",
                  "titleStyle": "default"
                },
                {
                  "key": "",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "panel",
                  "contents": [
                    {
                      "key": "npcAttack3Name",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "textField",
                      "size": "full-size",
                      "label": "Attack name:",
                      "defaultValue": "",
                      "charList": "",
                      "maxLength": null,
                      "autocomplete": ""
                    },
                    {
                      "key": "npcAttack3Dice",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "full-size",
                      "label": "Attack Dice",
                      "defaultValue": "6",
                      "allowDecimal": false,
                      "minVal": "1",
                      "maxVal": "",
                      "allowRelative": false,
                      "showControls": true,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    },
                    {
                      "key": "npcAttack3Damage",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "full-size",
                      "label": "Damage:",
                      "defaultValue": "4",
                      "allowDecimal": false,
                      "minVal": "1",
                      "maxVal": "",
                      "allowRelative": false,
                      "showControls": true,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    },
                    {
                      "key": "npcAttack3Special",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "textField",
                      "size": "full-size",
                      "label": "Special",
                      "defaultValue": "",
                      "charList": "",
                      "maxLength": null,
                      "autocomplete": ""
                    },
                    {
                      "key": "npcPenetration3",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "full-size",
                      "label": "Penetration",
                      "defaultValue": "0",
                      "allowDecimal": false,
                      "minVal": "0",
                      "maxVal": "",
                      "allowRelative": false,
                      "showControls": true,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    }
                  ],
                  "flow": "vertical",
                  "align": "left",
                  "verticalAlign": "top",
                  "collapsible": true,
                  "defaultCollapsed": false,
                  "title": "Attack3 stats",
                  "titleStyle": "default"
                },
                {
                  "key": "",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "panel",
                  "contents": [
                    {
                      "key": "npcAttack4Name",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "textField",
                      "size": "full-size",
                      "label": "Attack name:",
                      "defaultValue": "",
                      "charList": "",
                      "maxLength": null,
                      "autocomplete": ""
                    },
                    {
                      "key": "npcAttack4Dice",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "full-size",
                      "label": "Attack Dice",
                      "defaultValue": "6",
                      "allowDecimal": false,
                      "minVal": "1",
                      "maxVal": "",
                      "allowRelative": false,
                      "showControls": true,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    },
                    {
                      "key": "npcAttack4Damage",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "full-size",
                      "label": "Damage:",
                      "defaultValue": "4",
                      "allowDecimal": false,
                      "minVal": "1",
                      "maxVal": "",
                      "allowRelative": false,
                      "showControls": true,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    },
                    {
                      "key": "npcAttack4Special",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "textField",
                      "size": "full-size",
                      "label": "Special",
                      "defaultValue": "",
                      "charList": "",
                      "maxLength": null,
                      "autocomplete": ""
                    },
                    {
                      "key": "npcPenetration4",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "full-size",
                      "label": "Penetration",
                      "defaultValue": "0",
                      "allowDecimal": false,
                      "minVal": "0",
                      "maxVal": "",
                      "allowRelative": false,
                      "showControls": true,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    }
                  ],
                  "flow": "vertical",
                  "align": "left",
                  "verticalAlign": "top",
                  "collapsible": true,
                  "defaultCollapsed": false,
                  "title": "Attack4 stats",
                  "titleStyle": "default"
                },
                {
                  "key": "",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "panel",
                  "contents": [
                    {
                      "key": "npcAttack5Name",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "textField",
                      "size": "full-size",
                      "label": "Attack name:",
                      "defaultValue": "",
                      "charList": "",
                      "maxLength": null,
                      "autocomplete": ""
                    },
                    {
                      "key": "npcAttack5Dice",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "full-size",
                      "label": "Attack Dice",
                      "defaultValue": "6",
                      "allowDecimal": false,
                      "minVal": "1",
                      "maxVal": "",
                      "allowRelative": false,
                      "showControls": true,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    },
                    {
                      "key": "npcAttack5Damage",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "full-size",
                      "label": "Damage:",
                      "defaultValue": "4",
                      "allowDecimal": false,
                      "minVal": "1",
                      "maxVal": "",
                      "allowRelative": false,
                      "showControls": true,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    },
                    {
                      "key": "npcAttack5Special",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "textField",
                      "size": "full-size",
                      "label": "Special",
                      "defaultValue": "",
                      "charList": "",
                      "maxLength": null,
                      "autocomplete": ""
                    },
                    {
                      "key": "npcPenetration5",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "full-size",
                      "label": "Penetration",
                      "defaultValue": "0",
                      "allowDecimal": false,
                      "minVal": "0",
                      "maxVal": "",
                      "allowRelative": false,
                      "showControls": true,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    }
                  ],
                  "flow": "vertical",
                  "align": "left",
                  "verticalAlign": "top",
                  "collapsible": true,
                  "defaultCollapsed": false,
                  "title": "Attack5 stats",
                  "titleStyle": "default"
                }
              ],
              "flow": "vertical",
              "align": "left",
              "verticalAlign": "top",
              "collapsible": false,
              "defaultCollapsed": false,
              "title": "",
              "titleStyle": "default"
            }
          ],
          "flow": "vertical",
          "align": "left",
          "verticalAlign": "top",
          "collapsible": true,
          "defaultCollapsed": false,
          "title": "Stats",
          "titleStyle": "default"
        },
        {
          "key": "",
          "colSpan": 1,
          "rowSpan": 1,
          "cssClass": "",
          "role": 0,
          "editRole": 0,
          "permission": 0,
          "tooltip": "",
          "visibilityFormula": "",
          "editableFormula": "",
          "escapeHTML": false,
          "type": "panel",
          "contents": [
            {
              "key": "NPC_Dice",
              "colSpan": 1,
              "rowSpan": 1,
              "cssClass": "",
              "role": 0,
              "editRole": 0,
              "permission": 0,
              "tooltip": "",
              "visibilityFormula": "",
              "editableFormula": "",
              "escapeHTML": false,
              "type": "numberField",
              "size": "full-size",
              "label": "Dice to roll",
              "defaultValue": "6",
              "allowDecimal": false,
              "minVal": "",
              "maxVal": "",
              "allowRelative": false,
              "showControls": false,
              "controlsStyle": "hover",
              "controlsCustomIncrements": "",
              "inputStyle": "text"
            }
          ],
          "flow": "vertical",
          "align": "left",
          "verticalAlign": "top",
          "collapsible": true,
          "defaultCollapsed": false,
          "title": "hidden",
          "titleStyle": "default"
        }
      ],
      "key": "custom_body",
      "type": "panel"
    },
    "display": {
      "width": 600,
      "height": 800,
      "fix_size": false,
      "pp_width": 200,
      "pp_height": 200
    },
    "header": {
      "contents": [
        {
          "key": "npcFlavor",
          "colSpan": 1,
          "rowSpan": 1,
          "cssClass": "",
          "role": 0,
          "editRole": 0,
          "permission": 0,
          "tooltip": "",
          "visibilityFormula": "",
          "editableFormula": "",
          "escapeHTML": false,
          "type": "label",
          "size": "full-size",
          "icon": "",
          "value": "An economical anti-solicitor wall-of-lead defense platform.",
          "prefix": "",
          "suffix": "",
          "rollMessage": "",
          "altRollMessage": "",
          "rollMessageToChat": true,
          "altRollMessageToChat": true,
          "style": "label"
        }
      ],
      "key": "custom_header",
      "type": "panel"
    },
    "hidden": [],
    "attributeBar": {},
    "statusEffects": {},
    "props": {
      "NPC_Dice": "0",
      "NPCinit": "0",
      "npcAttack1Dice": "27",
      "npcAttack1Damage": "9",
      "npcPenetration1": "3",
      "npcMovement": "0",
      "npcAttack2Dice": "0",
      "npcAttack2Damage": "0",
      "npcPenetration2": "0",
      "npcAttack3Dice": "0",
      "npcAttack3Damage": "0",
      "npcPenetration3": "0",
      "npcAttack4Dice": "0",
      "npcAttack4Damage": "0",
      "npcPenetration4": "0",
      "npcAttack5Dice": "0",
      "npcAttack5Damage": "0",
      "npcPenetration5": "0",
      "npcDodgeDice": "0",
      "npcSoakDice": "0",
      "npcResistDice": "0",
      "physicalMax": "15",
      "physicalCur": "15",
      "stunMax": "0",
      "stunCur": "0",
      "npcAttack1Name": "Autocannon",
      "npcAttack2Name": "",
      "npcAttack3Name": "",
      "npcAttack4Name": "",
      "npcAttack5Name": "",
      "npcHardening": "5",
      "npcBallistic": "5",
      "npcImpact": "5",
      "npcNotes": "Can only fire every other turn or it risks aim failure and overheating.",
      "npcForce": "",
      "accountForce": false,
      "ActorUuid": "",
      "actorUuid": "",
      "armorTxt": "",
      "npcForceimpact": "",
      "npcAttack1Special": "",
      "npcAttack2Special": "",
      "npcAttack3Special": "",
      "npcAttack4Special": "",
      "npcAttack5Special": ""
    },
    "activeConditionalModifierGroups": [],
    "template": "694838d341f4407b",
    "templateSystemUniqueVersion": 2917896213
  },
  "prototypeToken": {
    "name": "Stationary Turret - Autocannon",
    "displayName": 50,
    "actorLink": false,
    "width": 1,
    "height": 1,
    "texture": {
      "src": "icons/svg/mystery-man.svg",
      "anchorX": 0.5,
      "anchorY": 0.5,
      "offsetX": 0,
      "offsetY": 0,
      "fit": "contain",
      "scaleX": 1,
      "scaleY": 1,
      "rotation": 0,
      "tint": "#ffffff",
      "alphaThreshold": 0.75
    },
    "lockRotation": false,
    "rotation": 0,
    "alpha": 1,
    "disposition": -1,
    "displayBars": 50,
    "bar1": {
      "attribute": "attributeBar.physicalCur"
    },
    "bar2": {
      "attribute": "attributeBar.stunCur"
    },
    "light": {
      "negative": false,
      "priority": 0,
      "alpha": 0.5,
      "angle": 360,
      "bright": 0,
      "color": null,
      "coloration": 1,
      "dim": 0,
      "attenuation": 0.5,
      "luminosity": 0.5,
      "saturation": 0,
      "contrast": 0,
      "shadows": 0,
      "animation": {
        "type": null,
        "speed": 5,
        "intensity": 5,
        "reverse": false
      },
      "darkness": {
        "min": 0,
        "max": 1
      }
    },
    "sight": {
      "enabled": false,
      "range": 0,
      "angle": 360,
      "visionMode": "basic",
      "color": null,
      "attenuation": 0.1,
      "brightness": 0,
      "saturation": 0,
      "contrast": 0
    },
    "detectionModes": [],
    "occludable": {
      "radius": 0
    },
    "ring": {
      "enabled": false,
      "colors": {
        "ring": null,
        "background": null
      },
      "effects": 0,
      "subject": {
        "scale": 1,
        "texture": null
      }
    },
    "turnMarker": {
      "mode": 1,
      "animation": null,
      "src": null,
      "disposition": false
    },
    "movementAction": null,
    "flags": {},
    "randomImg": false,
    "appendNumber": false,
    "prependAdjective": true
  },
  "items": [],
  "effects": [],
  "folder": null,
  "flags": {
    "custom-system-builder": {
      "version": "5.0.2"
    }
  },
  "_stats": {
    "compendiumSource": null,
    "duplicateSource": null,
    "exportSource": {
      "worldId": "sinless",
      "uuid": "Actor.AP1IGJDa3vNgHD75",
      "coreVersion": "13.351",
      "systemId": "custom-system-builder",
      "systemVersion": "5.1.0"
    },
    "coreVersion": "13.351",
    "systemId": "custom-system-builder",
    "systemVersion": "5.1.0",
    "createdTime": 1767462160434,
    "modifiedTime": 1770519130833,
    "lastModifiedBy": "KoiB8oaGNkPdgzdM"
  },
  "ownership": {
    "default": 0
  }
}
