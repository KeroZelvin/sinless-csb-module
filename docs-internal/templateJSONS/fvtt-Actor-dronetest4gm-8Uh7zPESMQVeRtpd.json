{
  "name": "DroneTEST4GM",
  "type": "character",
  "img": "icons/svg/mystery-man.svg",
  "system": {
    "body": {
      "contents": [
        {
          "key": "",
          "colSpan": 1,
          "rowSpan": 1,
          "cssClass": "",
          "role": 0,
          "editRole": 0,
          "permission": 0,
          "tooltip": "",
          "visibilityFormula": "",
          "editableFormula": "",
          "escapeHTML": false,
          "type": "panel",
          "contents": [
            {
              "key": "inventoryWeapons",
              "colSpan": 1,
              "rowSpan": 1,
              "cssClass": "",
              "role": 0,
              "editRole": 0,
              "permission": 0,
              "tooltip": "",
              "visibilityFormula": "",
              "editableFormula": "",
              "escapeHTML": false,
              "type": "itemContainer",
              "contents": [],
              "rowLayout": [
                {
                  "key": "wepAction1",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "wep-action-btn ${ item.wepAction1Enabled ? (item.wepAction1Label ? \"\" : \"wep-action-hidden\") : \"wep-action-hidden\" }$",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "item.wepAction1Enabled",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "label",
                  "size": "full-size",
                  "icon": "",
                  "value": "${ item.wepAction1Enabled ? item.wepAction1Label : \"\" }$\n\n",
                  "prefix": "",
                  "suffix": "",
                  "rollMessage": "%{\n  const slot = 1;\n\n  const doc = (typeof linkedEntity !== \"undefined\" && linkedEntity) ? linkedEntity\n            : (typeof entity !== \"undefined\" && entity) ? entity\n            : null;\n\n  const itemUuid = String(doc?.uuid ?? \"\").trim();\n\n  const embeddedActorUuid =\n    (doc?.parent?.documentName === \"Actor\" && doc?.parent?.uuid) ? String(doc.parent.uuid) : \"\";\n\n  const scopeActorUuid =\n    (typeof actor !== \"undefined\" && actor?.documentName === \"Actor\" && actor?.uuid) ? String(actor.uuid) : \"\";\n\n  const controlledActorUuid = (() => {\n    const t = canvas?.tokens?.controlled?.[0];\n    return t?.actor?.uuid ? String(t.actor.uuid) : \"\";\n  })();\n\n  const targetedActorUuid = (() => {\n    const t = game.user?.targets ? Array.from(game.user.targets)[0] : null;\n    return t?.actor?.uuid ? String(t.actor.uuid) : \"\";\n  })();\n\n  const userCharUuid = game.user?.character?.uuid ? String(game.user.character.uuid) : \"\";\n\n  const actorUuid = String(\n    embeddedActorUuid ||\n    scopeActorUuid ||\n    controlledActorUuid ||\n    targetedActorUuid ||\n    userCharUuid ||\n    \"\"\n  ).trim();\n\n  if (!itemUuid) { ui.notifications?.warn?.(\"SinlessCSB: missing item context (itemUuid).\"); return \"\"; }\n  if (!actorUuid) { ui.notifications?.warn?.(\"SinlessCSB: No actor context. Control/target a token.\"); return \"\"; }\n\n  const enabled = !!doc?.system?.props?.[`wepAction${slot}Enabled`];\n  if (!enabled) { ui.notifications?.warn?.(\"This action is not enabled on the item.\"); return \"\"; }\n\n  const bonus = Number(doc?.system?.props?.[`wepAction${slot}BonusDice`] ?? 0) || 0;\n\n  const api = game.modules.get(\"sinlesscsb\")?.api;\n  if (typeof api?.rollItem !== \"function\") { ui.notifications?.error?.(\"SinlessCSB: rollItem API not available.\"); return \"\"; }\n\n  // Pass bonus as an override (requires rollItem to support scope.bonusDiceOverride or bonusDiceDelta).\n  // If your rollItem already reads item.system.props.bonusDice, you can instead write per-slot bonusDice into item props,\n  // but that affects all actions. Better to pass it.\n  api.rollItem({ itemUuid, actorUuid, bonusDiceDelta: bonus });\n\n  return \"\";\n}%\n",
                  "altRollMessage": "",
                  "rollMessageToChat": false,
                  "altRollMessageToChat": false,
                  "style": "button",
                  "align": "left",
                  "colName": "Action 1"
                },
                {
                  "key": "wepAction2",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "wep-action-btn ${ item.wepAction2Enabled ? (item.wepAction2Label ? \"\" : \"wep-action-hidden\") : \"wep-action-hidden\" }$",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "item.wepAction2Enabled",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "label",
                  "size": "full-size",
                  "icon": "",
                  "value": "${ item.wepAction2Enabled ? item.wepAction2Label : \"\" }$\n\n\n",
                  "prefix": "",
                  "suffix": "",
                  "rollMessage": "%{\n  const slot = 2;\n\n  const doc = (typeof linkedEntity !== \"undefined\" && linkedEntity) ? linkedEntity\n            : (typeof entity !== \"undefined\" && entity) ? entity\n            : null;\n\n  const itemUuid = String(doc?.uuid ?? \"\").trim();\n\n  const embeddedActorUuid =\n    (doc?.parent?.documentName === \"Actor\" && doc?.parent?.uuid) ? String(doc.parent.uuid) : \"\";\n\n  const scopeActorUuid =\n    (typeof actor !== \"undefined\" && actor?.documentName === \"Actor\" && actor?.uuid) ? String(actor.uuid) : \"\";\n\n  const controlledActorUuid = (() => {\n    const t = canvas?.tokens?.controlled?.[0];\n    return t?.actor?.uuid ? String(t.actor.uuid) : \"\";\n  })();\n\n  const targetedActorUuid = (() => {\n    const t = game.user?.targets ? Array.from(game.user.targets)[0] : null;\n    return t?.actor?.uuid ? String(t.actor.uuid) : \"\";\n  })();\n\n  const userCharUuid = game.user?.character?.uuid ? String(game.user.character.uuid) : \"\";\n\n  const actorUuid = String(\n    embeddedActorUuid ||\n    scopeActorUuid ||\n    controlledActorUuid ||\n    targetedActorUuid ||\n    userCharUuid ||\n    \"\"\n  ).trim();\n\n  if (!itemUuid) { ui.notifications?.warn?.(\"SinlessCSB: missing item context (itemUuid).\"); return \"\"; }\n  if (!actorUuid) { ui.notifications?.warn?.(\"SinlessCSB: No actor context. Control/target a token.\"); return \"\"; }\n\n  const enabled = !!doc?.system?.props?.[`wepAction${slot}Enabled`];\n  if (!enabled) { ui.notifications?.warn?.(\"This action is not enabled on the item.\"); return \"\"; }\n\n  const bonus = Number(doc?.system?.props?.[`wepAction${slot}BonusDice`] ?? 0) || 0;\n\n  const api = game.modules.get(\"sinlesscsb\")?.api;\n  if (typeof api?.rollItem !== \"function\") { ui.notifications?.error?.(\"SinlessCSB: rollItem API not available.\"); return \"\"; }\n\n  // Pass bonus as an override (requires rollItem to support scope.bonusDiceOverride or bonusDiceDelta).\n  // If your rollItem already reads item.system.props.bonusDice, you can instead write per-slot bonusDice into item props,\n  // but that affects all actions. Better to pass it.\n  api.rollItem({ itemUuid, actorUuid, bonusDiceDelta: bonus });\n\n  return \"\";\n}%\n",
                  "altRollMessage": "",
                  "rollMessageToChat": false,
                  "altRollMessageToChat": false,
                  "style": "button",
                  "align": "left",
                  "colName": "Action 2"
                },
                {
                  "key": "wepAction3",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "wep-action-btn ${ item.wepAction3Enabled ? (item.wepAction3Label ? \"\" : \"wep-action-hidden\") : \"wep-action-hidden\" }$",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "item.wepAction3Enabled",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "label",
                  "size": "full-size",
                  "icon": "",
                  "value": "${ item.wepAction3Enabled ? item.wepAction3Label : \"\" }$\n\n",
                  "prefix": "",
                  "suffix": "",
                  "rollMessage": "%{\n  const slot = 3;\n\n  const doc = (typeof linkedEntity !== \"undefined\" && linkedEntity) ? linkedEntity\n            : (typeof entity !== \"undefined\" && entity) ? entity\n            : null;\n\n  const itemUuid = String(doc?.uuid ?? \"\").trim();\n\n  const embeddedActorUuid =\n    (doc?.parent?.documentName === \"Actor\" && doc?.parent?.uuid) ? String(doc.parent.uuid) : \"\";\n\n  const scopeActorUuid =\n    (typeof actor !== \"undefined\" && actor?.documentName === \"Actor\" && actor?.uuid) ? String(actor.uuid) : \"\";\n\n  const controlledActorUuid = (() => {\n    const t = canvas?.tokens?.controlled?.[0];\n    return t?.actor?.uuid ? String(t.actor.uuid) : \"\";\n  })();\n\n  const targetedActorUuid = (() => {\n    const t = game.user?.targets ? Array.from(game.user.targets)[0] : null;\n    return t?.actor?.uuid ? String(t.actor.uuid) : \"\";\n  })();\n\n  const userCharUuid = game.user?.character?.uuid ? String(game.user.character.uuid) : \"\";\n\n  const actorUuid = String(\n    embeddedActorUuid ||\n    scopeActorUuid ||\n    controlledActorUuid ||\n    targetedActorUuid ||\n    userCharUuid ||\n    \"\"\n  ).trim();\n\n  if (!itemUuid) { ui.notifications?.warn?.(\"SinlessCSB: missing item context (itemUuid).\"); return \"\"; }\n  if (!actorUuid) { ui.notifications?.warn?.(\"SinlessCSB: No actor context. Control/target a token.\"); return \"\"; }\n\n  const enabled = !!doc?.system?.props?.[`wepAction${slot}Enabled`];\n  if (!enabled) { ui.notifications?.warn?.(\"This action is not enabled on the item.\"); return \"\"; }\n\n  const bonus = Number(doc?.system?.props?.[`wepAction${slot}BonusDice`] ?? 0) || 0;\n\n  const api = game.modules.get(\"sinlesscsb\")?.api;\n  if (typeof api?.rollItem !== \"function\") { ui.notifications?.error?.(\"SinlessCSB: rollItem API not available.\"); return \"\"; }\n\n  // Pass bonus as an override (requires rollItem to support scope.bonusDiceOverride or bonusDiceDelta).\n  // If your rollItem already reads item.system.props.bonusDice, you can instead write per-slot bonusDice into item props,\n  // but that affects all actions. Better to pass it.\n  api.rollItem({ itemUuid, actorUuid, bonusDiceDelta: bonus });\n\n  return \"\";\n}%\n",
                  "altRollMessage": "",
                  "rollMessageToChat": false,
                  "altRollMessageToChat": false,
                  "style": "button",
                  "align": "left",
                  "colName": "Action 3"
                },
                {
                  "key": "wepAction4",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "wep-action-btn ${ item.wepAction4Enabled ? (item.wepAction4Label ? \"\" : \"wep-action-hidden\") : \"wep-action-hidden\" }$",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "item.wepAction4Enabled",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "label",
                  "size": "full-size",
                  "icon": "",
                  "value": "${ item.wepAction4Enabled ? item.wepAction4Label : \"\" }$\n\n",
                  "prefix": "",
                  "suffix": "",
                  "rollMessage": "%{\n  const slot = 4;\n\n  const doc = (typeof linkedEntity !== \"undefined\" && linkedEntity) ? linkedEntity\n            : (typeof entity !== \"undefined\" && entity) ? entity\n            : null;\n\n  const itemUuid = String(doc?.uuid ?? \"\").trim();\n\n  const embeddedActorUuid =\n    (doc?.parent?.documentName === \"Actor\" && doc?.parent?.uuid) ? String(doc.parent.uuid) : \"\";\n\n  const scopeActorUuid =\n    (typeof actor !== \"undefined\" && actor?.documentName === \"Actor\" && actor?.uuid) ? String(actor.uuid) : \"\";\n\n  const controlledActorUuid = (() => {\n    const t = canvas?.tokens?.controlled?.[0];\n    return t?.actor?.uuid ? String(t.actor.uuid) : \"\";\n  })();\n\n  const targetedActorUuid = (() => {\n    const t = game.user?.targets ? Array.from(game.user.targets)[0] : null;\n    return t?.actor?.uuid ? String(t.actor.uuid) : \"\";\n  })();\n\n  const userCharUuid = game.user?.character?.uuid ? String(game.user.character.uuid) : \"\";\n\n  const actorUuid = String(\n    embeddedActorUuid ||\n    scopeActorUuid ||\n    controlledActorUuid ||\n    targetedActorUuid ||\n    userCharUuid ||\n    \"\"\n  ).trim();\n\n  if (!itemUuid) { ui.notifications?.warn?.(\"SinlessCSB: missing item context (itemUuid).\"); return \"\"; }\n  if (!actorUuid) { ui.notifications?.warn?.(\"SinlessCSB: No actor context. Control/target a token.\"); return \"\"; }\n\n  const enabled = !!doc?.system?.props?.[`wepAction${slot}Enabled`];\n  if (!enabled) { ui.notifications?.warn?.(\"This action is not enabled on the item.\"); return \"\"; }\n\n  const bonus = Number(doc?.system?.props?.[`wepAction${slot}BonusDice`] ?? 0) || 0;\n\n  const api = game.modules.get(\"sinlesscsb\")?.api;\n  if (typeof api?.rollItem !== \"function\") { ui.notifications?.error?.(\"SinlessCSB: rollItem API not available.\"); return \"\"; }\n\n  // Pass bonus as an override (requires rollItem to support scope.bonusDiceOverride or bonusDiceDelta).\n  // If your rollItem already reads item.system.props.bonusDice, you can instead write per-slot bonusDice into item props,\n  // but that affects all actions. Better to pass it.\n  api.rollItem({ itemUuid, actorUuid, bonusDiceDelta: bonus });\n\n  return \"\";\n}%\n",
                  "altRollMessage": "",
                  "rollMessageToChat": false,
                  "altRollMessageToChat": false,
                  "style": "button",
                  "align": "left",
                  "colName": "Action 4"
                }
              ],
              "head": true,
              "deleteWarning": true,
              "labelWhenEmpty": "drag here from Items or Compendium",
              "title": "Drone Weapons ",
              "hideEmpty": true,
              "hiddenColumns": [],
              "sortOption": "manual",
              "headDisplay": true,
              "showCreate": false,
              "defaultTemplate": "lOAPMavVjtRre3OI",
              "showDelete": true,
              "statusIcon": true,
              "nameAlign": "left",
              "nameLabel": "Name",
              "templateFilter": [
                "8L2WHN9Spx1TyIys",
                "lOAPMavVjtRre3OI"
              ],
              "itemFilterFormula": "",
              "sortPredicates": []
            }
          ],
          "flow": "vertical",
          "align": "left",
          "verticalAlign": "top",
          "collapsible": true,
          "defaultCollapsed": false,
          "title": "Drone Actions",
          "titleStyle": "default"
        },
        {
          "key": "",
          "colSpan": 1,
          "rowSpan": 1,
          "cssClass": "",
          "role": 0,
          "editRole": 0,
          "permission": 0,
          "tooltip": "",
          "visibilityFormula": "",
          "editableFormula": "",
          "escapeHTML": false,
          "type": "panel",
          "contents": [
            {
              "key": "",
              "colSpan": 1,
              "rowSpan": 1,
              "cssClass": "",
              "role": 0,
              "editRole": 0,
              "permission": 0,
              "tooltip": "",
              "visibilityFormula": "",
              "editableFormula": "",
              "escapeHTML": false,
              "type": "panel",
              "contents": [
                {
                  "key": "rigHandling",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "numberField",
                  "size": "medium",
                  "label": "Handling",
                  "defaultValue": "0",
                  "allowDecimal": false,
                  "minVal": "0",
                  "maxVal": "",
                  "allowRelative": false,
                  "showControls": true,
                  "controlsStyle": "hover",
                  "controlsCustomIncrements": "",
                  "inputStyle": "text"
                },
                {
                  "key": "droneHardpoints",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "numberField",
                  "size": "medium",
                  "label": "Hardpoints",
                  "defaultValue": "0",
                  "allowDecimal": false,
                  "minVal": "0",
                  "maxVal": "",
                  "allowRelative": false,
                  "showControls": true,
                  "controlsStyle": "hover",
                  "controlsCustomIncrements": "",
                  "inputStyle": "text"
                },
                {
                  "key": "itemRarity",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "numberField",
                  "size": "medium",
                  "label": "Rarity",
                  "defaultValue": "",
                  "allowDecimal": false,
                  "minVal": "0",
                  "maxVal": "",
                  "allowRelative": false,
                  "showControls": true,
                  "controlsStyle": "hover",
                  "controlsCustomIncrements": "",
                  "inputStyle": "text"
                },
                {
                  "key": "droneFrame",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "select",
                  "size": "medium",
                  "label": "Frame",
                  "defaultValue": "",
                  "selectedOptionType": "custom",
                  "options": [
                    {
                      "key": "droneMicro",
                      "value": "Micro"
                    },
                    {
                      "key": "droneMini",
                      "value": "Mini"
                    },
                    {
                      "key": "droneSmall",
                      "value": "Small"
                    },
                    {
                      "key": "droneMedium",
                      "value": "Medium"
                    },
                    {
                      "key": "droneLarge",
                      "value": "Large"
                    }
                  ]
                },
                {
                  "key": "actorMovement",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "numberField",
                  "size": "full-size",
                  "label": "Movement (meters)",
                  "defaultValue": "6",
                  "allowDecimal": false,
                  "minVal": "0",
                  "maxVal": "",
                  "allowRelative": false,
                  "showControls": true,
                  "controlsStyle": "hover",
                  "controlsCustomIncrements": "",
                  "inputStyle": "text"
                },
                {
                  "key": "armorPanel",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "panel",
                  "contents": [
                    {
                      "key": "droneBallistic",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "full-size",
                      "label": "Ballistic",
                      "defaultValue": "0",
                      "allowDecimal": false,
                      "minVal": "0",
                      "maxVal": "",
                      "allowRelative": false,
                      "showControls": true,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    },
                    {
                      "key": "droneImpact",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "full-size",
                      "label": "Impact",
                      "defaultValue": "0",
                      "allowDecimal": false,
                      "minVal": "0",
                      "maxVal": "",
                      "allowRelative": false,
                      "showControls": true,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    }
                  ],
                  "flow": "vertical",
                  "align": "left",
                  "verticalAlign": "top",
                  "collapsible": true,
                  "defaultCollapsed": false,
                  "title": "Armor",
                  "titleStyle": "default"
                }
              ],
              "flow": "vertical",
              "align": "left",
              "verticalAlign": "top",
              "collapsible": false,
              "defaultCollapsed": false,
              "title": "Stats",
              "titleStyle": "default"
            },
            {
              "key": "",
              "colSpan": 1,
              "rowSpan": 1,
              "cssClass": "",
              "role": 0,
              "editRole": 0,
              "permission": 0,
              "tooltip": "",
              "visibilityFormula": "",
              "editableFormula": "",
              "escapeHTML": false,
              "type": "panel",
              "contents": [
                {
                  "key": "",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "panel",
                  "contents": [
                    {
                      "key": "",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "panel",
                      "contents": [
                        {
                          "key": "",
                          "colSpan": 1,
                          "rowSpan": 1,
                          "cssClass": "",
                          "role": 0,
                          "editRole": 0,
                          "permission": 0,
                          "tooltip": "",
                          "visibilityFormula": "",
                          "editableFormula": "",
                          "escapeHTML": false,
                          "type": "label",
                          "size": "m-large",
                          "icon": "",
                          "value": "Body",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "",
                          "altRollMessage": "",
                          "rollMessageToChat": true,
                          "altRollMessageToChat": true,
                          "style": "subtitle"
                        },
                        {
                          "key": "physicalMax",
                          "colSpan": 1,
                          "rowSpan": 1,
                          "cssClass": "",
                          "role": 0,
                          "editRole": 0,
                          "permission": 0,
                          "tooltip": "",
                          "visibilityFormula": "",
                          "editableFormula": "",
                          "escapeHTML": false,
                          "type": "numberField",
                          "size": "small",
                          "label": "",
                          "defaultValue": "",
                          "allowDecimal": false,
                          "minVal": "0",
                          "maxVal": "",
                          "allowRelative": false,
                          "showControls": true,
                          "controlsStyle": "hover",
                          "controlsCustomIncrements": "",
                          "inputStyle": "text"
                        }
                      ],
                      "flow": "vertical",
                      "align": "left",
                      "verticalAlign": "top",
                      "collapsible": false,
                      "defaultCollapsed": false,
                      "title": "",
                      "titleStyle": "default"
                    },
                    {
                      "key": "",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "panel",
                      "contents": [
                        {
                          "key": "",
                          "colSpan": 1,
                          "rowSpan": 1,
                          "cssClass": "",
                          "role": 0,
                          "editRole": 0,
                          "permission": 0,
                          "tooltip": "",
                          "visibilityFormula": "",
                          "editableFormula": "",
                          "escapeHTML": false,
                          "type": "label",
                          "size": "full-size",
                          "icon": "drone",
                          "value": "Current Body Track:",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "%{\n  (async () => {\n    // ===== CONFIG (edit these two lines per button) =====\n    const PROP_KEY = \"physicalCur\"; // e.g. \"stunCur\", \"Brawn_Cur\", \"Finesse_Cur\", etc.\n    const TITLE = \"Physical Check\"; // label shown on the chat card\n    // ====================================================\n\n    // Local helpers (keep inline for CSB safety)\n    const num = (x, fallback = 0) => {\n      const n = Number(x);\n      return Number.isFinite(n) ? n : fallback;\n    };\n    const escapeHTML = (s) => String(s ?? \"\")\n      .replaceAll(\"&\", \"&amp;\")\n      .replaceAll(\"<\", \"&lt;\")\n      .replaceAll(\">\", \"&gt;\")\n      .replaceAll('\"', \"&quot;\")\n      .replaceAll(\"'\", \"&#039;\");\n\n    // Resolve a usable \"doc\" without ReferenceError (CSB scope-safe)\n    const doc =\n      (typeof linkedEntity !== \"undefined\" && linkedEntity) ? linkedEntity :\n      (typeof entity !== \"undefined\" && entity) ? entity :\n      null;\n\n    // Resolve Actor object (prefer sheet context; then controlled/targeted; then user character)\n    const controlledActor = canvas?.tokens?.controlled?.[0]?.actor ?? null;\n    const targetedActor = (() => {\n      const t = game.user?.targets ? Array.from(game.user.targets)[0] : null;\n      return t?.actor ?? null;\n    })();\n\n    let a =\n      (doc?.documentName === \"Actor\") ? doc :\n      (doc?.actor?.documentName === \"Actor\") ? doc.actor :\n      (doc?.parent?.documentName === \"Actor\") ? doc.parent :\n      (typeof actor !== \"undefined\" && actor?.documentName === \"Actor\") ? actor :\n      controlledActor ||\n      targetedActor ||\n      game.user?.character ||\n      null;\n\n    if (!a || a.documentName !== \"Actor\") {\n      ui.notifications?.warn?.(\"Quick Check: No actor context. Open a sheet, or control/target a token, then try again.\");\n      return;\n    }\n\n    // TN from Session Settings (fallback 4)\n    const sessionActor =\n      game.actors?.getName?.(\"Session Settings\") ||\n      (game.actors?.contents ?? []).find(x => (x.name ?? \"\").trim().toLowerCase() === \"session settings\") ||\n      null;\n\n    const tnRaw = num(sessionActor?.system?.props?.TN_Global, 4);\n    const TN = [4, 5, 6].includes(tnRaw) ? tnRaw : 4;\n\n    // Pull dice count from actor.system.props[PROP_KEY]\n    const props = a.system?.props ?? {};\n    const dice = Math.max(0, Math.floor(num(props?.[PROP_KEY], 0)));\n\n    if (!dice) {\n      ui.notifications?.warn?.(`Quick Check: \"${PROP_KEY}\" is 0 or missing on ${a.name}.`);\n      return;\n    }\n\n    // Roll + count successes\n    const roll = new Roll(`${dice}d6`);\n    await roll.evaluate();\n\n    const dieResults = (roll.dice?.[0]?.results ?? []).map(r => Number(r.result)).filter(Number.isFinite);\n    const successes = dieResults.reduce((acc, v) => acc + (v >= TN ? 1 : 0), 0);\n\n    const diceHTML = await roll.render();\n\n    // Chat card (big successes line, similar structure to your item-roll output)\n    const content = `\n      <div class=\"sinlesscsb item-roll-card\">\n        <h3 style=\"margin:0 0 6px 0;\">${escapeHTML(TITLE)}</h3>\n        <p style=\"margin:0 0 6px 0;\"><strong>Actor:</strong> ${escapeHTML(a.name)}</p>\n        <p style=\"margin:0 0 6px 0;\"><strong>Key:</strong> <code>${escapeHTML(PROP_KEY)}</code></p>\n        <p style=\"margin:0 0 10px 0;\"><strong>Roll:</strong> <strong>${escapeHTML(dice)}d6</strong> vs TN <strong>${escapeHTML(TN)}+</strong></p>\n\n        <div style=\"text-align:center; margin:10px 0 12px 0;\">\n          <div style=\"font-size:28px; font-weight:bold;\">\n            ${escapeHTML(successes)} SUCCESS${successes === 1 ? \"\" : \"ES\"}\n          </div>\n        </div>\n\n        <details>\n          <summary>Dice Results</summary>\n          ${diceHTML}\n        </details>\n      </div>\n    `;\n\n    await ChatMessage.create({\n      speaker: ChatMessage.getSpeaker({ actor: a }),\n      content\n    });\n  })();\n\n  return \"\";\n}%\n",
                          "altRollMessage": "",
                          "rollMessageToChat": true,
                          "altRollMessageToChat": true,
                          "style": "button"
                        },
                        {
                          "key": "physicalCur",
                          "colSpan": 1,
                          "rowSpan": 1,
                          "cssClass": "",
                          "role": 0,
                          "editRole": 0,
                          "permission": 0,
                          "tooltip": "",
                          "visibilityFormula": "",
                          "editableFormula": "",
                          "escapeHTML": false,
                          "type": "numberField",
                          "size": "small",
                          "label": "",
                          "defaultValue": "",
                          "allowDecimal": false,
                          "minVal": "0",
                          "maxVal": "${physicalMax}$",
                          "allowRelative": false,
                          "showControls": true,
                          "controlsStyle": "hover",
                          "controlsCustomIncrements": "",
                          "inputStyle": "text"
                        }
                      ],
                      "flow": "grid-2",
                      "align": "left",
                      "verticalAlign": "top",
                      "collapsible": false,
                      "defaultCollapsed": false,
                      "title": "",
                      "titleStyle": "default"
                    },
                    {
                      "key": "",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "panel",
                      "contents": [],
                      "flow": "vertical",
                      "align": "left",
                      "verticalAlign": "top",
                      "collapsible": false,
                      "defaultCollapsed": false,
                      "title": "",
                      "titleStyle": "default"
                    },
                    {
                      "key": "",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "panel",
                      "contents": [
                        {
                          "key": "Physical_Meter",
                          "colSpan": 1,
                          "rowSpan": 1,
                          "cssClass": "",
                          "role": 0,
                          "editRole": 0,
                          "permission": 0,
                          "tooltip": "",
                          "visibilityFormula": "",
                          "editableFormula": "",
                          "escapeHTML": false,
                          "type": "meter",
                          "size": "full-size",
                          "label": "",
                          "value": "${physicalCur}$",
                          "min": "0",
                          "max": "${physicalMax}$",
                          "low": "${physicalMax * 0.25}$",
                          "high": "${physicalMax * 0.5}$",
                          "optimum": "${physicalMax}$",
                          "textOption": "none"
                        }
                      ],
                      "flow": "vertical",
                      "align": "left",
                      "verticalAlign": "top",
                      "collapsible": false,
                      "defaultCollapsed": false,
                      "title": "",
                      "titleStyle": "default"
                    }
                  ],
                  "flow": "vertical",
                  "align": "left",
                  "verticalAlign": "top",
                  "collapsible": false,
                  "defaultCollapsed": false,
                  "title": "",
                  "titleStyle": "default"
                },
                {
                  "key": "",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "panel",
                  "contents": [],
                  "flow": "grid-2",
                  "align": "left",
                  "verticalAlign": "top",
                  "collapsible": false,
                  "defaultCollapsed": false,
                  "title": "",
                  "titleStyle": "default"
                },
                {
                  "key": "",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "panel",
                  "contents": [
                    {
                      "key": "",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "panel",
                      "contents": [
                        {
                          "key": "",
                          "colSpan": 1,
                          "rowSpan": 1,
                          "cssClass": "",
                          "role": 0,
                          "editRole": 0,
                          "permission": 0,
                          "tooltip": "",
                          "visibilityFormula": "",
                          "editableFormula": "",
                          "escapeHTML": false,
                          "type": "label",
                          "size": "m-large",
                          "icon": "",
                          "value": "Drone Integrity Track",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "",
                          "altRollMessage": "",
                          "rollMessageToChat": true,
                          "altRollMessageToChat": true,
                          "style": "subtitle"
                        },
                        {
                          "key": "stunMax",
                          "colSpan": 1,
                          "rowSpan": 1,
                          "cssClass": "",
                          "role": 0,
                          "editRole": 0,
                          "permission": 0,
                          "tooltip": "",
                          "visibilityFormula": "",
                          "editableFormula": "",
                          "escapeHTML": false,
                          "type": "numberField",
                          "size": "small",
                          "label": "",
                          "defaultValue": "",
                          "allowDecimal": false,
                          "minVal": "0",
                          "maxVal": "",
                          "allowRelative": false,
                          "showControls": true,
                          "controlsStyle": "hover",
                          "controlsCustomIncrements": "",
                          "inputStyle": "text"
                        }
                      ],
                      "flow": "vertical",
                      "align": "left",
                      "verticalAlign": "top",
                      "collapsible": false,
                      "defaultCollapsed": false,
                      "title": "",
                      "titleStyle": "default"
                    },
                    {
                      "key": "stunCur",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "medium",
                      "label": "Current DIT:",
                      "defaultValue": "",
                      "allowDecimal": false,
                      "minVal": "0",
                      "maxVal": "${stunMax}$",
                      "allowRelative": false,
                      "showControls": true,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    },
                    {
                      "key": "",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "panel",
                      "contents": [],
                      "flow": "vertical",
                      "align": "left",
                      "verticalAlign": "top",
                      "collapsible": false,
                      "defaultCollapsed": false,
                      "title": "",
                      "titleStyle": "default"
                    },
                    {
                      "key": "",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "panel",
                      "contents": [
                        {
                          "key": "Stun_Meter",
                          "colSpan": 1,
                          "rowSpan": 1,
                          "cssClass": "",
                          "role": 0,
                          "editRole": 0,
                          "permission": 0,
                          "tooltip": "",
                          "visibilityFormula": "",
                          "editableFormula": "",
                          "escapeHTML": false,
                          "type": "meter",
                          "size": "full-size",
                          "label": "",
                          "value": "${stunCur}$",
                          "min": "0",
                          "max": "${stunMax}$",
                          "low": "${stunMax * 0.25}$",
                          "high": "${stunMax * 0.5}$",
                          "optimum": "${stunMax}$",
                          "textOption": "none"
                        }
                      ],
                      "flow": "vertical",
                      "align": "left",
                      "verticalAlign": "top",
                      "collapsible": false,
                      "defaultCollapsed": false,
                      "title": "",
                      "titleStyle": "default"
                    }
                  ],
                  "flow": "vertical",
                  "align": "left",
                  "verticalAlign": "top",
                  "collapsible": false,
                  "defaultCollapsed": false,
                  "title": "",
                  "titleStyle": "default"
                }
              ],
              "flow": "vertical",
              "align": "left",
              "verticalAlign": "top",
              "collapsible": true,
              "defaultCollapsed": false,
              "title": "Drone Health",
              "titleStyle": "default"
            }
          ],
          "flow": "grid-2",
          "align": "left",
          "verticalAlign": "top",
          "collapsible": true,
          "defaultCollapsed": false,
          "title": "Drone Stats",
          "titleStyle": "default"
        },
        {
          "key": "",
          "colSpan": 1,
          "rowSpan": 1,
          "cssClass": "",
          "role": 0,
          "editRole": 0,
          "permission": 0,
          "tooltip": "",
          "visibilityFormula": "",
          "editableFormula": "",
          "escapeHTML": false,
          "type": "panel",
          "contents": [
            {
              "key": "pilotActorUuid",
              "colSpan": 1,
              "rowSpan": 1,
              "cssClass": "",
              "role": 0,
              "editRole": 0,
              "permission": 0,
              "tooltip": "",
              "visibilityFormula": "",
              "editableFormula": "",
              "escapeHTML": false,
              "type": "textField",
              "size": "full-size",
              "label": "pilotActorUuid",
              "defaultValue": "",
              "charList": "",
              "maxLength": null,
              "autocomplete": ""
            },
            {
              "key": "findDrone",
              "colSpan": 1,
              "rowSpan": 1,
              "cssClass": "",
              "role": 0,
              "editRole": 0,
              "permission": 0,
              "tooltip": "",
              "visibilityFormula": "",
              "editableFormula": "",
              "escapeHTML": false,
              "type": "textField",
              "size": "m-large",
              "label": "findDrone",
              "defaultValue": "",
              "charList": "",
              "maxLength": null,
              "autocomplete": ""
            }
          ],
          "flow": "vertical",
          "align": "left",
          "verticalAlign": "top",
          "collapsible": true,
          "defaultCollapsed": false,
          "title": "Actor Config (past PC Uuid here)",
          "titleStyle": "default"
        }
      ],
      "key": "custom_body",
      "type": "panel"
    },
    "display": {
      "width": 600,
      "height": 600,
      "fix_size": false,
      "pp_width": 64,
      "pp_height": 64
    },
    "header": {
      "contents": [
        {
          "key": "",
          "colSpan": 1,
          "rowSpan": 1,
          "cssClass": "sinlesscsb-marker",
          "role": 0,
          "editRole": 0,
          "permission": 0,
          "tooltip": "",
          "visibilityFormula": "",
          "editableFormula": "",
          "escapeHTML": false,
          "type": "panel",
          "contents": [],
          "flow": "vertical",
          "align": "center",
          "verticalAlign": "top",
          "collapsible": false,
          "defaultCollapsed": false,
          "title": "",
          "titleStyle": "default"
        }
      ],
      "key": "custom_header",
      "type": "panel"
    },
    "hidden": [],
    "attributeBar": {},
    "statusEffects": {},
    "props": {
      "physicalMax": "6",
      "stunCur": "6",
      "stunMax": "6",
      "actorMovement": "6",
      "droneHardpoints": "0",
      "droneBallistic": "0",
      "droneImpact": "0",
      "itemRarity": "0",
      "droneFrame": "droneMedium",
      "rigHandling": "0",
      "pilotActorUuid": "Actor.eMbezua6UThIStwT",
      "inventoryWeapons": {
        "EEbXa6FBS0rfnNGJ": {
          "name": "DroneBallisticTest",
          "id": "EEbXa6FBS0rfnNGJ",
          "uuid": "Actor.8Uh7zPESMQVeRtpd.Item.EEbXa6FBS0rfnNGJ",
          "wepAction1": "SS\n\n",
          "wepAction2": "\n\n\n",
          "wepAction3": "B\n\n",
          "wepAction4": "\n\n"
        },
        "9Ki9l0P42aRGqM1e": {
          "name": "DroneEnergyTEST",
          "id": "9Ki9l0P42aRGqM1e",
          "uuid": "Actor.8Uh7zPESMQVeRtpd.Item.9Ki9l0P42aRGqM1e",
          "wepAction1": "Blast\n\n",
          "wepAction2": "\n\n\n",
          "wepAction3": "\n\n",
          "wepAction4": "\n\n"
        }
      },
      "physicalCur": "0",
      "findDrone": "",
      "ActorUuid": "Actor.8Uh7zPESMQVeRtpd",
      "actorUuid": "Actor.8Uh7zPESMQVeRtpd"
    },
    "activeConditionalModifierGroups": [],
    "template": "lL9MiN64F7mRGhuj",
    "templateSystemUniqueVersion": 3270592533
  },
  "prototypeToken": {
    "name": "DroneTEST",
    "displayName": 0,
    "actorLink": false,
    "width": 1,
    "height": 1,
    "texture": {
      "src": "icons/svg/mystery-man.svg",
      "anchorX": 0.5,
      "anchorY": 0.5,
      "offsetX": 0,
      "offsetY": 0,
      "fit": "contain",
      "scaleX": 1,
      "scaleY": 1,
      "rotation": 0,
      "tint": "#ffffff",
      "alphaThreshold": 0.75
    },
    "lockRotation": false,
    "rotation": 0,
    "alpha": 1,
    "disposition": -1,
    "displayBars": 0,
    "bar1": {
      "attribute": null
    },
    "bar2": {
      "attribute": null
    },
    "light": {
      "negative": false,
      "priority": 0,
      "alpha": 0.5,
      "angle": 360,
      "bright": 0,
      "color": null,
      "coloration": 1,
      "dim": 0,
      "attenuation": 0.5,
      "luminosity": 0.5,
      "saturation": 0,
      "contrast": 0,
      "shadows": 0,
      "animation": {
        "type": null,
        "speed": 5,
        "intensity": 5,
        "reverse": false
      },
      "darkness": {
        "min": 0,
        "max": 1
      }
    },
    "sight": {
      "enabled": false,
      "range": 0,
      "angle": 360,
      "visionMode": "basic",
      "color": null,
      "attenuation": 0.1,
      "brightness": 0,
      "saturation": 0,
      "contrast": 0
    },
    "detectionModes": [],
    "occludable": {
      "radius": 0
    },
    "ring": {
      "enabled": false,
      "colors": {
        "ring": null,
        "background": null
      },
      "effects": 1,
      "subject": {
        "scale": 1,
        "texture": null
      }
    },
    "turnMarker": {
      "mode": 1,
      "animation": null,
      "src": null,
      "disposition": false
    },
    "movementAction": null,
    "flags": {},
    "randomImg": false,
    "appendNumber": false,
    "prependAdjective": false
  },
  "items": [
    {
      "folder": "sBPUaBp6tAKIGW6z",
      "name": "DroneDriveTEST",
      "type": "equippableItem",
      "_id": "wyFzlM6JSSy8qzzb",
      "img": "icons/svg/item-bag.svg",
      "system": {
        "body": {
          "contents": [
            {
              "key": "",
              "colSpan": 1,
              "rowSpan": 1,
              "cssClass": "",
              "role": 0,
              "editRole": 0,
              "permission": 0,
              "tooltip": "",
              "visibilityFormula": "",
              "editableFormula": "",
              "escapeHTML": false,
              "type": "panel",
              "contents": [
                {
                  "key": "driveskillText",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "textArea",
                  "size": "full-size",
                  "label": "",
                  "defaultValue": "",
                  "style": "sheet"
                }
              ],
              "flow": "vertical",
              "align": "left",
              "verticalAlign": "top",
              "collapsible": true,
              "defaultCollapsed": false,
              "title": "Skill Rules",
              "titleStyle": "default"
            },
            {
              "key": "",
              "colSpan": 1,
              "rowSpan": 1,
              "cssClass": "",
              "role": 0,
              "editRole": 0,
              "permission": 0,
              "tooltip": "",
              "visibilityFormula": "",
              "editableFormula": "",
              "escapeHTML": false,
              "type": "panel",
              "contents": [
                {
                  "key": "",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "panel",
                  "contents": [
                    {
                      "key": "bonusDice",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "full-size",
                      "label": "bonusDice",
                      "defaultValue": "0",
                      "allowDecimal": false,
                      "minVal": "",
                      "maxVal": "",
                      "allowRelative": false,
                      "showControls": true,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    },
                    {
                      "key": "diceMod",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "full-size",
                      "label": "diceMod",
                      "defaultValue": "0",
                      "allowDecimal": false,
                      "minVal": "",
                      "maxVal": "",
                      "allowRelative": false,
                      "showControls": true,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    },
                    {
                      "key": "actionLabel",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "textField",
                      "size": "full-size",
                      "label": "actionLabel",
                      "defaultValue": "Drive",
                      "charList": "",
                      "maxLength": null,
                      "autocomplete": ""
                    }
                  ],
                  "flow": "grid-2",
                  "align": "left",
                  "verticalAlign": "top",
                  "collapsible": false,
                  "defaultCollapsed": false,
                  "title": "",
                  "titleStyle": "default"
                }
              ],
              "flow": "vertical",
              "align": "left",
              "verticalAlign": "top",
              "collapsible": true,
              "defaultCollapsed": false,
              "title": "Roll Config",
              "titleStyle": "default"
            },
            {
              "key": "",
              "colSpan": 1,
              "rowSpan": 1,
              "cssClass": "",
              "role": 4,
              "editRole": 0,
              "permission": 0,
              "tooltip": "",
              "visibilityFormula": "",
              "editableFormula": "",
              "escapeHTML": false,
              "type": "panel",
              "contents": [
                {
                  "key": "limitBonusActorKey",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "textField",
                  "size": "full-size",
                  "label": "Limit Bonus Actor Key",
                  "defaultValue": "rigHandling",
                  "charList": "",
                  "maxLength": null,
                  "autocomplete": ""
                },
                {
                  "key": "skillKey",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "textField",
                  "size": "full-size",
                  "label": "skillKey",
                  "defaultValue": "Skill_Drive",
                  "charList": "",
                  "maxLength": null,
                  "autocomplete": ""
                },
                {
                  "key": "poolKey_copy1",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "select",
                  "size": "full-size",
                  "label": "poolKey",
                  "defaultValue": "Focus",
                  "selectedOptionType": "custom",
                  "options": [
                    {
                      "key": "Brawn",
                      "value": "Brawn"
                    },
                    {
                      "key": "Finesse",
                      "value": "Finesse"
                    },
                    {
                      "key": "Resolve",
                      "value": "Resolve"
                    },
                    {
                      "key": "Focus",
                      "value": "Focus"
                    }
                  ]
                }
              ],
              "flow": "vertical",
              "align": "left",
              "verticalAlign": "top",
              "collapsible": true,
              "defaultCollapsed": false,
              "title": "Hidden",
              "titleStyle": "default"
            }
          ],
          "key": "custom_body",
          "type": "panel"
        },
        "display": {
          "width": 600,
          "height": 600,
          "fix_size": false,
          "pp_width": 64,
          "pp_height": 64
        },
        "header": {
          "contents": [
            {
              "key": "",
              "colSpan": 1,
              "rowSpan": 1,
              "cssClass": "",
              "role": 0,
              "editRole": 0,
              "permission": 0,
              "tooltip": "",
              "visibilityFormula": "",
              "editableFormula": "",
              "escapeHTML": false,
              "type": "label",
              "size": "full-size",
              "icon": "gun",
              "value": "${actionLabel ? actionLabel : \"Use\"}$",
              "prefix": "",
              "suffix": "",
              "rollMessage": "%{\n  // Prefer linkedEntity (inventory row) then entity (item sheet)\n  const doc = (typeof linkedEntity !== \"undefined\" && linkedEntity) ? linkedEntity\n            : (typeof entity !== \"undefined\" && entity) ? entity\n            : null;\n\n  const itemUuid = String(doc?.uuid ?? \"\").trim();\n\n  // Pull actor from safe sources only\n  const embeddedActorUuid =\n    (doc?.parent?.documentName === \"Actor\" && doc?.parent?.uuid) ? String(doc.parent.uuid) : \"\";\n\n  const scopeActorUuid =\n    (typeof actor !== \"undefined\" && actor?.documentName === \"Actor\" && actor?.uuid) ? String(actor.uuid) : \"\";\n\n  const controlledActorUuid = (() => {\n    const t = canvas?.tokens?.controlled?.[0];\n    return t?.actor?.uuid ? String(t.actor.uuid) : \"\";\n  })();\n\n  const targetedActorUuid = (() => {\n    const t = game.user?.targets ? Array.from(game.user.targets)[0] : null;\n    return t?.actor?.uuid ? String(t.actor.uuid) : \"\";\n  })();\n\n  const userCharUuid = game.user?.character?.uuid ? String(game.user.character.uuid) : \"\";\n\n  const actorUuid = String(\n    embeddedActorUuid ||\n    scopeActorUuid ||\n    controlledActorUuid ||\n    targetedActorUuid ||\n    userCharUuid ||\n    \"\"\n  ).trim();\n\n  if (!itemUuid) {\n    console.warn(\"SinlessCSB | rollItem: missing itemUuid\", { doc, linkedEntity: (typeof linkedEntity !== \"undefined\" ? linkedEntity : undefined), entity: (typeof entity !== \"undefined\" ? entity : undefined) });\n    ui.notifications?.warn?.(\"SinlessCSB: missing item context (itemUuid).\");\n    return \"\";\n  }\n\n  if (!actorUuid) {\n    console.warn(\"SinlessCSB | rollItem: missing actorUuid (control/target a token)\", {\n      itemUuid,\n      controlled: canvas?.tokens?.controlled?.length ?? 0,\n      targets: game.user?.targets?.size ?? 0\n    });\n    ui.notifications?.warn?.(\"SinlessCSB: No actor context. Control a token (click) or target one, then try again.\");\n    return \"\";\n  }\n\n  const api = game.modules.get(\"sinlesscsb\")?.api;\n  if (typeof api?.rollItem !== \"function\") {\n    console.warn(\"SinlessCSB | rollItem: API not available\", { apiKeys: Object.keys(api ?? {}) });\n    ui.notifications?.error?.(\"SinlessCSB: rollItem API not available (module not ready / not exposed).\");\n    return \"\";\n  }\n\n  console.log(\"SinlessCSB | rollItem (hardened)\", { itemUuid, actorUuid, itemName: doc?.name });\n  api.rollItem({ itemUuid, actorUuid });\n  return \"\";\n}%\n",
              "altRollMessage": "",
              "rollMessageToChat": false,
              "altRollMessageToChat": false,
              "style": "button"
            }
          ],
          "key": "custom_header",
          "type": "panel"
        },
        "hidden": [],
        "modifiers": [],
        "props": {
          "driveskillText": "",
          "bonusDice": "0",
          "diceMod": "0",
          "actionLabel": "Drive",
          "limitBonusActorKey": "rigHandling",
          "skillKey": "Skill_Drive",
          "poolKey_copy1": "Focus"
        },
        "unique": false,
        "templateSystemUniqueVersion": 2544444880,
        "uniqueId": "XeDvGfyyLWIV3W6d",
        "template": "QtMNKYb9rrdKwv0k"
      },
      "effects": [],
      "sort": 0,
      "flags": {
        "custom-system-builder": {
          "version": "5.1.0"
        }
      },
      "_stats": {
        "compendiumSource": "Item.XeDvGfyyLWIV3W6d",
        "duplicateSource": null,
        "exportSource": null,
        "coreVersion": "13.351",
        "systemId": "custom-system-builder",
        "systemVersion": "5.1.0",
        "lastModifiedBy": null
      },
      "ownership": {
        "default": 0
      }
    },
    {
      "folder": "sBPUaBp6tAKIGW6z",
      "name": "DroneBallisticTest",
      "type": "equippableItem",
      "_id": "EEbXa6FBS0rfnNGJ",
      "img": "icons/svg/item-bag.svg",
      "system": {
        "body": {
          "contents": [
            {
              "key": "",
              "colSpan": 1,
              "rowSpan": 1,
              "cssClass": "",
              "role": 0,
              "editRole": 0,
              "permission": 0,
              "tooltip": "",
              "visibilityFormula": "",
              "editableFormula": "",
              "escapeHTML": false,
              "type": "panel",
              "contents": [
                {
                  "key": "weaponCard",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "textArea",
                  "size": "full-size",
                  "label": "",
                  "defaultValue": "",
                  "style": "sheet"
                }
              ],
              "flow": "vertical",
              "align": "left",
              "verticalAlign": "top",
              "collapsible": true,
              "defaultCollapsed": false,
              "title": "Card Display",
              "titleStyle": "default"
            },
            {
              "key": "",
              "colSpan": 1,
              "rowSpan": 1,
              "cssClass": "",
              "role": 0,
              "editRole": 0,
              "permission": 0,
              "tooltip": "",
              "visibilityFormula": "",
              "editableFormula": "",
              "escapeHTML": false,
              "type": "panel",
              "contents": [
                {
                  "key": "",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "panel",
                  "contents": [
                    {
                      "key": "gearFeature",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "medium",
                      "label": "Accuracy",
                      "defaultValue": "0",
                      "allowDecimal": false,
                      "minVal": "",
                      "maxVal": "",
                      "allowRelative": false,
                      "showControls": true,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    },
                    {
                      "key": "weaponDamage",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "medium",
                      "label": "Damage",
                      "defaultValue": "1",
                      "allowDecimal": false,
                      "minVal": "",
                      "maxVal": "",
                      "allowRelative": false,
                      "showControls": true,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    },
                    {
                      "key": "firearmPenetration",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "medium",
                      "label": "Penetration",
                      "defaultValue": "2",
                      "allowDecimal": false,
                      "minVal": "0",
                      "maxVal": "",
                      "allowRelative": false,
                      "showControls": true,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    },
                    {
                      "key": "bonusDice",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "medium",
                      "label": "bonusDice",
                      "defaultValue": "0",
                      "allowDecimal": false,
                      "minVal": "",
                      "maxVal": "",
                      "allowRelative": false,
                      "showControls": true,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    },
                    {
                      "key": "diceMod",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "medium",
                      "label": "diceMod",
                      "defaultValue": "0",
                      "allowDecimal": false,
                      "minVal": "",
                      "maxVal": "",
                      "allowRelative": false,
                      "showControls": true,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    },
                    {
                      "key": "actorMovement",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "m-large",
                      "label": "Movement (meters)",
                      "defaultValue": "6",
                      "allowDecimal": false,
                      "minVal": "0",
                      "maxVal": "",
                      "allowRelative": false,
                      "showControls": true,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    },
                    {
                      "key": "weaponRange",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "medium",
                      "label": "Range",
                      "defaultValue": "500",
                      "allowDecimal": false,
                      "minVal": "0",
                      "maxVal": "",
                      "allowRelative": false,
                      "showControls": true,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    },
                    {
                      "key": "weight",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "medium",
                      "label": "Weight",
                      "defaultValue": "",
                      "allowDecimal": false,
                      "minVal": "0",
                      "maxVal": "",
                      "allowRelative": false,
                      "showControls": true,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    },
                    {
                      "key": "wepHardening",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "medium",
                      "label": "Hardening",
                      "defaultValue": "",
                      "allowDecimal": false,
                      "minVal": "0",
                      "maxVal": "",
                      "allowRelative": false,
                      "showControls": true,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    },
                    {
                      "key": "wepBarrier",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "medium",
                      "label": "Barrier",
                      "defaultValue": "",
                      "allowDecimal": false,
                      "minVal": "",
                      "maxVal": "",
                      "allowRelative": false,
                      "showControls": true,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    },
                    {
                      "key": "itemRarity",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "medium",
                      "label": "Rarity",
                      "defaultValue": "",
                      "allowDecimal": false,
                      "minVal": "0",
                      "maxVal": "",
                      "allowRelative": false,
                      "showControls": true,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    },
                    {
                      "key": "actionLabel",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "textField",
                      "size": "medium",
                      "label": "actionLabel",
                      "defaultValue": "Fire",
                      "charList": "",
                      "maxLength": null,
                      "autocomplete": ""
                    },
                    {
                      "key": "",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "panel",
                      "contents": [
                        {
                          "key": "weaponAmmo",
                          "colSpan": 1,
                          "rowSpan": 1,
                          "cssClass": "",
                          "role": 0,
                          "editRole": 0,
                          "permission": 0,
                          "tooltip": "",
                          "visibilityFormula": "",
                          "editableFormula": "",
                          "escapeHTML": false,
                          "type": "numberField",
                          "size": "medium",
                          "label": "Ammo",
                          "defaultValue": "",
                          "allowDecimal": false,
                          "minVal": "0",
                          "maxVal": "",
                          "allowRelative": false,
                          "showControls": true,
                          "controlsStyle": "hover",
                          "controlsCustomIncrements": "",
                          "inputStyle": "text"
                        },
                        {
                          "key": "ammoType",
                          "colSpan": 1,
                          "rowSpan": 1,
                          "cssClass": "",
                          "role": 0,
                          "editRole": 0,
                          "permission": 0,
                          "tooltip": "",
                          "visibilityFormula": "",
                          "editableFormula": "",
                          "escapeHTML": false,
                          "type": "textField",
                          "size": "full-size",
                          "label": "Ammo Type",
                          "defaultValue": "",
                          "charList": "",
                          "maxLength": null,
                          "autocomplete": ""
                        }
                      ],
                      "flow": "vertical",
                      "align": "left",
                      "verticalAlign": "top",
                      "collapsible": false,
                      "defaultCollapsed": false,
                      "title": "",
                      "titleStyle": "default"
                    }
                  ],
                  "flow": "grid-2",
                  "align": "left",
                  "verticalAlign": "top",
                  "collapsible": false,
                  "defaultCollapsed": false,
                  "title": "",
                  "titleStyle": "default"
                },
                {
                  "key": "weaponTags",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "textField",
                  "size": "full-size",
                  "label": "Tags",
                  "defaultValue": "",
                  "charList": "",
                  "maxLength": null,
                  "autocomplete": ""
                }
              ],
              "flow": "vertical",
              "align": "left",
              "verticalAlign": "top",
              "collapsible": true,
              "defaultCollapsed": false,
              "title": "Roll Config",
              "titleStyle": "default"
            },
            {
              "key": "",
              "colSpan": 1,
              "rowSpan": 1,
              "cssClass": "",
              "role": 0,
              "editRole": 0,
              "permission": 0,
              "tooltip": "",
              "visibilityFormula": "",
              "editableFormula": "",
              "escapeHTML": false,
              "type": "panel",
              "contents": [
                {
                  "key": "modsDrone1",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "textField",
                  "size": "full-size",
                  "label": "Mod 1:",
                  "defaultValue": "",
                  "charList": "",
                  "maxLength": null,
                  "autocomplete": ""
                },
                {
                  "key": "modsDrone2",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "textField",
                  "size": "full-size",
                  "label": "Mod 2:",
                  "defaultValue": "",
                  "charList": "",
                  "maxLength": null,
                  "autocomplete": ""
                },
                {
                  "key": "modsDrone3",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "textField",
                  "size": "full-size",
                  "label": "Mod 3:",
                  "defaultValue": "",
                  "charList": "",
                  "maxLength": null,
                  "autocomplete": ""
                },
                {
                  "key": "modsDrone4",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "textField",
                  "size": "full-size",
                  "label": "Mod 4:",
                  "defaultValue": "",
                  "charList": "",
                  "maxLength": null,
                  "autocomplete": ""
                }
              ],
              "flow": "vertical",
              "align": "left",
              "verticalAlign": "top",
              "collapsible": true,
              "defaultCollapsed": false,
              "title": "Modifications",
              "titleStyle": "default"
            },
            {
              "key": "",
              "colSpan": 1,
              "rowSpan": 1,
              "cssClass": "",
              "role": 4,
              "editRole": 0,
              "permission": 0,
              "tooltip": "",
              "visibilityFormula": "",
              "editableFormula": "",
              "escapeHTML": false,
              "type": "panel",
              "contents": [
                {
                  "key": "",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "panel",
                  "contents": [
                    {
                      "key": "wepAction1Label",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "textField",
                      "size": "full-size",
                      "label": "",
                      "defaultValue": "SS",
                      "charList": "",
                      "maxLength": null,
                      "autocomplete": ""
                    },
                    {
                      "key": "wepAction2Label",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "textField",
                      "size": "full-size",
                      "label": "",
                      "defaultValue": "DT",
                      "charList": "",
                      "maxLength": null,
                      "autocomplete": ""
                    },
                    {
                      "key": "wepAction3Label",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "textField",
                      "size": "full-size",
                      "label": "",
                      "defaultValue": "B",
                      "charList": "",
                      "maxLength": null,
                      "autocomplete": ""
                    },
                    {
                      "key": "wepAction4Label",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "textField",
                      "size": "full-size",
                      "label": "",
                      "defaultValue": "FA",
                      "charList": "",
                      "maxLength": null,
                      "autocomplete": ""
                    }
                  ],
                  "flow": "vertical",
                  "align": "left",
                  "verticalAlign": "top",
                  "collapsible": true,
                  "defaultCollapsed": false,
                  "title": "Action Labels (for Item Displayer)",
                  "titleStyle": "default"
                },
                {
                  "key": "",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "panel",
                  "contents": [
                    {
                      "key": "wepAction1BonusDice",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "full-size",
                      "label": "SS",
                      "defaultValue": "0",
                      "allowDecimal": false,
                      "minVal": "0",
                      "maxVal": "",
                      "allowRelative": false,
                      "showControls": false,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    },
                    {
                      "key": "wepAction2BonusDice",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "full-size",
                      "label": "DT",
                      "defaultValue": "1",
                      "allowDecimal": false,
                      "minVal": "0",
                      "maxVal": "",
                      "allowRelative": false,
                      "showControls": false,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    },
                    {
                      "key": "wepAction3BonusDice",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "full-size",
                      "label": "B",
                      "defaultValue": "3",
                      "allowDecimal": false,
                      "minVal": "0",
                      "maxVal": "",
                      "allowRelative": false,
                      "showControls": false,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    },
                    {
                      "key": "wepAction4BonusDice",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "full-size",
                      "label": "FA",
                      "defaultValue": "20",
                      "allowDecimal": false,
                      "minVal": "0",
                      "maxVal": "",
                      "allowRelative": false,
                      "showControls": false,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    }
                  ],
                  "flow": "vertical",
                  "align": "left",
                  "verticalAlign": "top",
                  "collapsible": true,
                  "defaultCollapsed": false,
                  "title": "# Bonus Dice from Fire Mode",
                  "titleStyle": "default"
                },
                {
                  "key": "skillKey",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "textField",
                  "size": "full-size",
                  "label": "skillKey",
                  "defaultValue": "Skill_Gunnery",
                  "charList": "",
                  "maxLength": null,
                  "autocomplete": ""
                },
                {
                  "key": "poolKey",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "select",
                  "size": "full-size",
                  "label": "poolKey",
                  "defaultValue": "Finesse",
                  "selectedOptionType": "custom",
                  "options": [
                    {
                      "key": "Brawn",
                      "value": "Brawn"
                    },
                    {
                      "key": "Finesse",
                      "value": "Finesse"
                    },
                    {
                      "key": "Resolve",
                      "value": "Resolve"
                    },
                    {
                      "key": "Focus",
                      "value": "Focus"
                    }
                  ]
                }
              ],
              "flow": "vertical",
              "align": "center",
              "verticalAlign": "top",
              "collapsible": true,
              "defaultCollapsed": true,
              "title": "Hidden",
              "titleStyle": "default"
            }
          ],
          "key": "custom_body",
          "type": "panel"
        },
        "display": {
          "width": 600,
          "height": 600,
          "fix_size": false,
          "pp_width": 64,
          "pp_height": 64
        },
        "header": {
          "contents": [
            {
              "key": "",
              "colSpan": 1,
              "rowSpan": 1,
              "cssClass": "sinlesscsb-marker",
              "role": 0,
              "editRole": 0,
              "permission": 0,
              "tooltip": "",
              "visibilityFormula": "",
              "editableFormula": "",
              "escapeHTML": false,
              "type": "panel",
              "contents": [
                {
                  "key": "",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "label",
                  "size": "m-small",
                  "icon": "gun",
                  "value": "${wepAction1Enabled ? wepAction1Label : \"\"}$",
                  "prefix": "",
                  "suffix": "",
                  "rollMessage": "%{\n  // Prefer linkedEntity (inventory row) then entity (item sheet)\n  const doc = (typeof linkedEntity !== \"undefined\" && linkedEntity) ? linkedEntity\n            : (typeof entity !== \"undefined\" && entity) ? entity\n            : null;\n\n  const itemUuid = String(doc?.uuid ?? \"\").trim();\n\n  // Actor resolution: embedded parent wins; otherwise token/character fallbacks.\n  const embeddedActorUuid =\n    (doc?.parent?.documentName === \"Actor\" && doc?.parent?.uuid) ? String(doc.parent.uuid) : \"\";\n\n  const scopeActorUuid =\n    (typeof actor !== \"undefined\" && actor?.documentName === \"Actor\" && actor?.uuid) ? String(actor.uuid) : \"\";\n\n  const controlledActorUuid = (() => {\n    const t = canvas?.tokens?.controlled?.[0];\n    return t?.actor?.uuid ? String(t.actor.uuid) : \"\";\n  })();\n\n  const targetedActorUuid = (() => {\n    const t = game.user?.targets ? Array.from(game.user.targets)[0] : null;\n    return t?.actor?.uuid ? String(t.actor.uuid) : \"\";\n  })();\n\n  const userCharUuid = game.user?.character?.uuid ? String(game.user.character.uuid) : \"\";\n\n  const actorUuid = String(\n    embeddedActorUuid ||\n    scopeActorUuid ||\n    controlledActorUuid ||\n    targetedActorUuid ||\n    userCharUuid ||\n    \"\"\n  ).trim();\n\n  if (!itemUuid) {\n    ui.notifications?.warn?.(\"SinlessCSB: missing item context (itemUuid).\");\n    return \"\";\n  }\n\n  if (!actorUuid) {\n    ui.notifications?.warn?.(\"SinlessCSB: No actor context. Control or target a token, then try again.\");\n    return \"\";\n  }\n\n  const api = game.modules.get(\"sinlesscsb\")?.api;\n  if (typeof api?.rollItem !== \"function\") {\n    ui.notifications?.error?.(\"SinlessCSB: rollItem API not available (module not ready / not exposed).\");\n    return \"\";\n  }\n\n  api.rollItem({ itemUuid, actorUuid, bonusDiceDelta: 0 });\n  return \"\";\n}%\n",
                  "altRollMessage": "",
                  "rollMessageToChat": false,
                  "altRollMessageToChat": false,
                  "style": "button"
                },
                {
                  "key": "",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "label",
                  "size": "m-small",
                  "icon": "gun",
                  "value": "${wepAction2Enabled ? wepAction2Label : \"\"}$",
                  "prefix": "",
                  "suffix": "",
                  "rollMessage": "%{\n  const slot = 3;\n\n  const doc = (typeof linkedEntity !== \"undefined\" && linkedEntity) ? linkedEntity\n            : (typeof entity !== \"undefined\" && entity) ? entity\n            : null;\n\n  const itemUuid = String(doc?.uuid ?? \"\").trim();\n\n  const embeddedActorUuid =\n    (doc?.parent?.documentName === \"Actor\" && doc?.parent?.uuid) ? String(doc.parent.uuid) : \"\";\n\n  const scopeActorUuid =\n    (typeof actor !== \"undefined\" && actor?.documentName === \"Actor\" && actor?.uuid) ? String(actor.uuid) : \"\";\n\n  const controlledActorUuid = (() => {\n    const t = canvas?.tokens?.controlled?.[0];\n    return t?.actor?.uuid ? String(t.actor.uuid) : \"\";\n  })();\n\n  const targetedActorUuid = (() => {\n    const t = game.user?.targets ? Array.from(game.user.targets)[0] : null;\n    return t?.actor?.uuid ? String(t.actor.uuid) : \"\";\n  })();\n\n  const userCharUuid = game.user?.character?.uuid ? String(game.user.character.uuid) : \"\";\n\n  const actorUuid = String(\n    embeddedActorUuid ||\n    scopeActorUuid ||\n    controlledActorUuid ||\n    targetedActorUuid ||\n    userCharUuid ||\n    \"\"\n  ).trim();\n\n  if (!itemUuid) { ui.notifications?.warn?.(\"SinlessCSB: missing item context (itemUuid).\"); return \"\"; }\n  if (!actorUuid) { ui.notifications?.warn?.(\"SinlessCSB: No actor context. Control/target a token.\"); return \"\"; }\n\n  const enabled = !!doc?.system?.props?.[`wepAction${slot}Enabled`];\n  if (!enabled) { ui.notifications?.warn?.(\"This action is not enabled on the item.\"); return \"\"; }\n\n  const bonus = Number(doc?.system?.props?.[`wepAction${slot}BonusDice`] ?? 0) || 0;\n\n  const api = game.modules.get(\"sinlesscsb\")?.api;\n  if (typeof api?.rollItem !== \"function\") { ui.notifications?.error?.(\"SinlessCSB: rollItem API not available.\"); return \"\"; }\n\n  // Pass bonus as an override (requires rollItem to support scope.bonusDiceOverride or bonusDiceDelta).\n  // If your rollItem already reads item.system.props.bonusDice, you can instead write per-slot bonusDice into item props,\n  // but that affects all actions. Better to pass it.\n  api.rollItem({ itemUuid, actorUuid, bonusDiceDelta: bonus });\n\n  return \"\";\n}%\n\n",
                  "altRollMessage": "",
                  "rollMessageToChat": false,
                  "altRollMessageToChat": false,
                  "style": "button"
                },
                {
                  "key": "",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "label",
                  "size": "m-small",
                  "icon": "gun",
                  "value": "${wepAction3Enabled ? wepAction3Label : \"\" }$",
                  "prefix": "",
                  "suffix": "",
                  "rollMessage": "%{\n  const slot = 3;\n\n  const doc = (typeof linkedEntity !== \"undefined\" && linkedEntity) ? linkedEntity\n            : (typeof entity !== \"undefined\" && entity) ? entity\n            : null;\n\n  const itemUuid = String(doc?.uuid ?? \"\").trim();\n\n  const embeddedActorUuid =\n    (doc?.parent?.documentName === \"Actor\" && doc?.parent?.uuid) ? String(doc.parent.uuid) : \"\";\n\n  const scopeActorUuid =\n    (typeof actor !== \"undefined\" && actor?.documentName === \"Actor\" && actor?.uuid) ? String(actor.uuid) : \"\";\n\n  const controlledActorUuid = (() => {\n    const t = canvas?.tokens?.controlled?.[0];\n    return t?.actor?.uuid ? String(t.actor.uuid) : \"\";\n  })();\n\n  const targetedActorUuid = (() => {\n    const t = game.user?.targets ? Array.from(game.user.targets)[0] : null;\n    return t?.actor?.uuid ? String(t.actor.uuid) : \"\";\n  })();\n\n  const userCharUuid = game.user?.character?.uuid ? String(game.user.character.uuid) : \"\";\n\n  const actorUuid = String(\n    embeddedActorUuid ||\n    scopeActorUuid ||\n    controlledActorUuid ||\n    targetedActorUuid ||\n    userCharUuid ||\n    \"\"\n  ).trim();\n\n  if (!itemUuid) { ui.notifications?.warn?.(\"SinlessCSB: missing item context (itemUuid).\"); return \"\"; }\n  if (!actorUuid) { ui.notifications?.warn?.(\"SinlessCSB: No actor context. Control/target a token.\"); return \"\"; }\n\n  const enabled = !!doc?.system?.props?.[`wepAction${slot}Enabled`];\n  if (!enabled) { ui.notifications?.warn?.(\"This action is not enabled on the item.\"); return \"\"; }\n\n  const bonus = Number(doc?.system?.props?.[`wepAction${slot}BonusDice`] ?? 0) || 0;\n\n  const api = game.modules.get(\"sinlesscsb\")?.api;\n  if (typeof api?.rollItem !== \"function\") { ui.notifications?.error?.(\"SinlessCSB: rollItem API not available.\"); return \"\"; }\n\n  // Pass bonus as an override (requires rollItem to support scope.bonusDiceOverride or bonusDiceDelta).\n  // If your rollItem already reads item.system.props.bonusDice, you can instead write per-slot bonusDice into item props,\n  // but that affects all actions. Better to pass it.\n  api.rollItem({ itemUuid, actorUuid, bonusDiceDelta: bonus });\n\n  return \"\";\n}%\n",
                  "altRollMessage": "",
                  "rollMessageToChat": false,
                  "altRollMessageToChat": false,
                  "style": "button"
                },
                {
                  "key": "",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "label",
                  "size": "m-small",
                  "icon": "gun",
                  "value": "${wepAction4Enabled ? wepAction4Label : \"\" }$",
                  "prefix": "",
                  "suffix": "",
                  "rollMessage": "%{\n  const slot = 4;\n\n  const doc = (typeof linkedEntity !== \"undefined\" && linkedEntity) ? linkedEntity\n            : (typeof entity !== \"undefined\" && entity) ? entity\n            : null;\n\n  const itemUuid = String(doc?.uuid ?? \"\").trim();\n\n  const embeddedActorUuid =\n    (doc?.parent?.documentName === \"Actor\" && doc?.parent?.uuid) ? String(doc.parent.uuid) : \"\";\n\n  const scopeActorUuid =\n    (typeof actor !== \"undefined\" && actor?.documentName === \"Actor\" && actor?.uuid) ? String(actor.uuid) : \"\";\n\n  const controlledActorUuid = (() => {\n    const t = canvas?.tokens?.controlled?.[0];\n    return t?.actor?.uuid ? String(t.actor.uuid) : \"\";\n  })();\n\n  const targetedActorUuid = (() => {\n    const t = game.user?.targets ? Array.from(game.user.targets)[0] : null;\n    return t?.actor?.uuid ? String(t.actor.uuid) : \"\";\n  })();\n\n  const userCharUuid = game.user?.character?.uuid ? String(game.user.character.uuid) : \"\";\n\n  const actorUuid = String(\n    embeddedActorUuid ||\n    scopeActorUuid ||\n    controlledActorUuid ||\n    targetedActorUuid ||\n    userCharUuid ||\n    \"\"\n  ).trim();\n\n  if (!itemUuid) { ui.notifications?.warn?.(\"SinlessCSB: missing item context (itemUuid).\"); return \"\"; }\n  if (!actorUuid) { ui.notifications?.warn?.(\"SinlessCSB: No actor context. Control/target a token.\"); return \"\"; }\n\n  const enabled = !!doc?.system?.props?.[`wepAction${slot}Enabled`];\n  if (!enabled) { ui.notifications?.warn?.(\"This action is not enabled on the item.\"); return \"\"; }\n\n  const bonus = Number(doc?.system?.props?.[`wepAction${slot}BonusDice`] ?? 0) || 0;\n\n  const api = game.modules.get(\"sinlesscsb\")?.api;\n  if (typeof api?.rollItem !== \"function\") { ui.notifications?.error?.(\"SinlessCSB: rollItem API not available.\"); return \"\"; }\n\n  // Pass bonus as an override (requires rollItem to support scope.bonusDiceOverride or bonusDiceDelta).\n  // If your rollItem already reads item.system.props.bonusDice, you can instead write per-slot bonusDice into item props,\n  // but that affects all actions. Better to pass it.\n  api.rollItem({ itemUuid, actorUuid, bonusDiceDelta: bonus });\n\n  return \"\";\n}%\n",
                  "altRollMessage": "",
                  "rollMessageToChat": false,
                  "altRollMessageToChat": false,
                  "style": "button"
                }
              ],
              "flow": "grid-4",
              "align": "left",
              "verticalAlign": "top",
              "collapsible": false,
              "defaultCollapsed": false,
              "title": "",
              "titleStyle": "default"
            },
            {
              "key": "",
              "colSpan": 1,
              "rowSpan": 1,
              "cssClass": "sinlesscsb-marker",
              "role": 0,
              "editRole": 0,
              "permission": 0,
              "tooltip": "",
              "visibilityFormula": "",
              "editableFormula": "",
              "escapeHTML": false,
              "type": "panel",
              "contents": [
                {
                  "key": "weaponRecoil",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "numberField",
                  "size": "medium",
                  "label": "Track Recoil",
                  "defaultValue": "0",
                  "allowDecimal": false,
                  "minVal": "0",
                  "maxVal": "",
                  "allowRelative": false,
                  "showControls": true,
                  "controlsStyle": "hover",
                  "controlsCustomIncrements": "",
                  "inputStyle": "text"
                }
              ],
              "flow": "vertical",
              "align": "center",
              "verticalAlign": "top",
              "collapsible": false,
              "defaultCollapsed": false,
              "title": "",
              "titleStyle": "default"
            },
            {
              "key": "",
              "colSpan": 1,
              "rowSpan": 1,
              "cssClass": "",
              "role": 0,
              "editRole": 0,
              "permission": 0,
              "tooltip": "",
              "visibilityFormula": "",
              "editableFormula": "",
              "escapeHTML": false,
              "type": "panel",
              "contents": [
                {
                  "key": "wepAction1Enabled",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "Single Shot. Characters can fire one bullet as a simple action. The player totals their Firearms skill plus accuracy and can use that many dice from their Finesse pool to fire the weapon.",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "checkbox",
                  "size": "m-small",
                  "label": "SS",
                  "defaultChecked": true
                },
                {
                  "key": "wepAction2Enabled",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "Double Tap. Characters can fire two bullets at the same target as a simple action, adding one bonus die to the test.",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "checkbox",
                  "size": "m-small",
                  "label": "DT",
                  "defaultChecked": false
                },
                {
                  "key": "wepAction3Enabled",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "Burst Fire. Characters can fire three bullets at a target per simple action, adding 3 bonus dice to the test.",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "checkbox",
                  "size": "m-small",
                  "label": "B",
                  "defaultChecked": false
                },
                {
                  "key": "wepAction4Enabled",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "Full Auto. In this gun mode, a character fires 20 bullets (assuming the gun has the ammunition to fire). It adds 20 bonus dice (one per bullet). The character may fire at multiple targets, split- ting the dice between targets. Each sequen- tial target adds a penalty die.",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "checkbox",
                  "size": "m-small",
                  "label": "FA",
                  "defaultChecked": false
                }
              ],
              "flow": "horizontal",
              "align": "left",
              "verticalAlign": "top",
              "collapsible": true,
              "defaultCollapsed": false,
              "title": "Attack Modes",
              "titleStyle": "default"
            }
          ],
          "key": "custom_header",
          "type": "panel"
        },
        "hidden": [],
        "modifiers": [],
        "props": {
          "weaponRecoil": "0",
          "weaponCard": "",
          "gearFeature": "2",
          "weaponDamage": "1",
          "firearmPenetration": "2",
          "bonusDice": "0",
          "diceMod": "0",
          "actorMovement": "6",
          "weaponRange": "500",
          "actionLabel": "Fire",
          "skillKey": "Skill_Gunnery",
          "poolKey": "Finesse",
          "weight": "0",
          "wepHardening": "0",
          "wepBarrier": "0",
          "itemRarity": "",
          "weaponAmmo": "",
          "ammoType": "",
          "weaponTags": "",
          "modsDrone1": "",
          "modsDrone2": "",
          "modsDrone3": "",
          "modsDrone4": "",
          "wepAction1Enabled": true,
          "wepAction2Enabled": false,
          "wepAction3Enabled": true,
          "wepAction4Enabled": false,
          "wepAction1Label": "SS",
          "wepAction2Label": "DT",
          "wepAction3Label": "B",
          "wepAction4Label": "FA",
          "wepAction1BonusDice": "0",
          "wepAction2BonusDice": "1",
          "wepAction3BonusDice": "3",
          "wepAction4BonusDice": "20"
        },
        "unique": false,
        "templateSystemUniqueVersion": 529051028,
        "uniqueId": "ECzk3i5M4VDNIvNj",
        "template": "8L2WHN9Spx1TyIys"
      },
      "effects": [],
      "sort": 0,
      "flags": {
        "custom-system-builder": {
          "version": "5.1.0"
        }
      },
      "_stats": {
        "compendiumSource": "Item.ECzk3i5M4VDNIvNj",
        "duplicateSource": null,
        "exportSource": null,
        "coreVersion": "13.351",
        "systemId": "custom-system-builder",
        "systemVersion": "5.1.0",
        "lastModifiedBy": null
      },
      "ownership": {
        "default": 0
      }
    },
    {
      "folder": "rCTnl7myqTtxE5gl",
      "name": "Overdrive",
      "type": "equippableItem",
      "_id": "6lLDEduFp8tElOGO",
      "img": "icons/svg/item-bag.svg",
      "system": {
        "body": {
          "contents": [
            {
              "key": "",
              "colSpan": 1,
              "rowSpan": 1,
              "cssClass": "sinlesscsb-marker",
              "role": 0,
              "editRole": 0,
              "permission": 0,
              "tooltip": "",
              "visibilityFormula": "",
              "editableFormula": "",
              "escapeHTML": false,
              "type": "panel",
              "contents": [
                {
                  "key": "driveskillText",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "textArea",
                  "size": "full-size",
                  "label": "",
                  "defaultValue": "",
                  "style": "sheet"
                }
              ],
              "flow": "vertical",
              "align": "left",
              "verticalAlign": "top",
              "collapsible": true,
              "defaultCollapsed": false,
              "title": "Skill Rules",
              "titleStyle": "default"
            },
            {
              "key": "",
              "colSpan": 1,
              "rowSpan": 1,
              "cssClass": "",
              "role": 0,
              "editRole": 0,
              "permission": 0,
              "tooltip": "",
              "visibilityFormula": "",
              "editableFormula": "",
              "escapeHTML": false,
              "type": "panel",
              "contents": [
                {
                  "key": "",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "panel",
                  "contents": [
                    {
                      "key": "bonusDice",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "full-size",
                      "label": "bonusDice",
                      "defaultValue": "0",
                      "allowDecimal": false,
                      "minVal": "",
                      "maxVal": "",
                      "allowRelative": false,
                      "showControls": true,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    },
                    {
                      "key": "diceMod",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "full-size",
                      "label": "diceMod",
                      "defaultValue": "0",
                      "allowDecimal": false,
                      "minVal": "",
                      "maxVal": "",
                      "allowRelative": false,
                      "showControls": true,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    },
                    {
                      "key": "actionLabel",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "textField",
                      "size": "full-size",
                      "label": "actionLabel",
                      "defaultValue": "Drive",
                      "charList": "",
                      "maxLength": null,
                      "autocomplete": ""
                    }
                  ],
                  "flow": "grid-2",
                  "align": "left",
                  "verticalAlign": "top",
                  "collapsible": false,
                  "defaultCollapsed": false,
                  "title": "",
                  "titleStyle": "default"
                }
              ],
              "flow": "vertical",
              "align": "left",
              "verticalAlign": "top",
              "collapsible": true,
              "defaultCollapsed": false,
              "title": "Roll Config",
              "titleStyle": "default"
            },
            {
              "key": "",
              "colSpan": 1,
              "rowSpan": 1,
              "cssClass": "",
              "role": 4,
              "editRole": 0,
              "permission": 0,
              "tooltip": "",
              "visibilityFormula": "",
              "editableFormula": "",
              "escapeHTML": false,
              "type": "panel",
              "contents": [
                {
                  "key": "limitBonusActorKey",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "textField",
                  "size": "full-size",
                  "label": "Limit Bonus Actor Key",
                  "defaultValue": "rigHandling",
                  "charList": "",
                  "maxLength": null,
                  "autocomplete": ""
                },
                {
                  "key": "skillKey",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "textField",
                  "size": "full-size",
                  "label": "skillKey",
                  "defaultValue": "Skill_Drive",
                  "charList": "",
                  "maxLength": null,
                  "autocomplete": ""
                },
                {
                  "key": "poolKey",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "select",
                  "size": "full-size",
                  "label": "poolKey",
                  "defaultValue": "Focus",
                  "selectedOptionType": "custom",
                  "options": [
                    {
                      "key": "Brawn",
                      "value": "Brawn"
                    },
                    {
                      "key": "Finesse",
                      "value": "Finesse"
                    },
                    {
                      "key": "Resolve",
                      "value": "Resolve"
                    },
                    {
                      "key": "Focus",
                      "value": "Focus"
                    }
                  ]
                }
              ],
              "flow": "vertical",
              "align": "left",
              "verticalAlign": "top",
              "collapsible": true,
              "defaultCollapsed": false,
              "title": "Hidden",
              "titleStyle": "default"
            }
          ],
          "key": "custom_body",
          "type": "panel"
        },
        "display": {
          "width": 600,
          "height": 600,
          "fix_size": false,
          "pp_width": 64,
          "pp_height": 64
        },
        "header": {
          "contents": [
            {
              "key": "",
              "colSpan": 1,
              "rowSpan": 1,
              "cssClass": "",
              "role": 0,
              "editRole": 0,
              "permission": 0,
              "tooltip": "",
              "visibilityFormula": "",
              "editableFormula": "",
              "escapeHTML": false,
              "type": "label",
              "size": "full-size",
              "icon": "road",
              "value": "${actionLabel ? actionLabel : \"Use\"}$",
              "prefix": "",
              "suffix": "",
              "rollMessage": "%{\n  // Prefer linkedEntity (inventory row) then entity (item sheet)\n  const doc = (typeof linkedEntity !== \"undefined\" && linkedEntity) ? linkedEntity\n            : (typeof entity !== \"undefined\" && entity) ? entity\n            : null;\n\n  const itemUuid = String(doc?.uuid ?? \"\").trim();\n\n  // Pull actor from safe sources only\n  const embeddedActorUuid =\n    (doc?.parent?.documentName === \"Actor\" && doc?.parent?.uuid) ? String(doc.parent.uuid) : \"\";\n\n  const scopeActorUuid =\n    (typeof actor !== \"undefined\" && actor?.documentName === \"Actor\" && actor?.uuid) ? String(actor.uuid) : \"\";\n\n  const controlledActorUuid = (() => {\n    const t = canvas?.tokens?.controlled?.[0];\n    return t?.actor?.uuid ? String(t.actor.uuid) : \"\";\n  })();\n\n  const targetedActorUuid = (() => {\n    const t = game.user?.targets ? Array.from(game.user.targets)[0] : null;\n    return t?.actor?.uuid ? String(t.actor.uuid) : \"\";\n  })();\n\n  const userCharUuid = game.user?.character?.uuid ? String(game.user.character.uuid) : \"\";\n\n  const actorUuid = String(\n    embeddedActorUuid ||\n    scopeActorUuid ||\n    controlledActorUuid ||\n    targetedActorUuid ||\n    userCharUuid ||\n    \"\"\n  ).trim();\n\n  if (!itemUuid) {\n    console.warn(\"SinlessCSB | rollItem: missing itemUuid\", { doc, linkedEntity: (typeof linkedEntity !== \"undefined\" ? linkedEntity : undefined), entity: (typeof entity !== \"undefined\" ? entity : undefined) });\n    ui.notifications?.warn?.(\"SinlessCSB: missing item context (itemUuid).\");\n    return \"\";\n  }\n\n  if (!actorUuid) {\n    console.warn(\"SinlessCSB | rollItem: missing actorUuid (control/target a token)\", {\n      itemUuid,\n      controlled: canvas?.tokens?.controlled?.length ?? 0,\n      targets: game.user?.targets?.size ?? 0\n    });\n    ui.notifications?.warn?.(\"SinlessCSB: No actor context. Control a token (click) or target one, then try again.\");\n    return \"\";\n  }\n\n  const api = game.modules.get(\"sinlesscsb\")?.api;\n  if (typeof api?.rollItem !== \"function\") {\n    console.warn(\"SinlessCSB | rollItem: API not available\", { apiKeys: Object.keys(api ?? {}) });\n    ui.notifications?.error?.(\"SinlessCSB: rollItem API not available (module not ready / not exposed).\");\n    return \"\";\n  }\n\n  console.log(\"SinlessCSB | rollItem (hardened)\", { itemUuid, actorUuid, itemName: doc?.name });\n  api.rollItem({ itemUuid, actorUuid });\n  return \"\";\n}%\n",
              "altRollMessage": "",
              "rollMessageToChat": false,
              "altRollMessageToChat": false,
              "style": "button"
            }
          ],
          "key": "custom_header",
          "type": "panel"
        },
        "hidden": [],
        "modifiers": [],
        "props": {
          "driveskillText": "<p>The rigger can increase movement by making the appropriate Drive/Fly + handling test as a simple action. </p><p>The vehicle then moves its normal movement in addition to 2 m (1\") per success. </p><p>This bonus applies to every simple action used for movement by this drone or</p><p>vehicle this round. </p><p>For every simple action in overdrive used to move, the vehicle accumulates</p><p>one inertia. </p><p></p><p>Drones do not accumulate inertia.</p>",
          "bonusDice": "0",
          "diceMod": "0",
          "actionLabel": "Overdrive!",
          "limitBonusActorKey": "rigHandling",
          "skillKey": "Skill_Drive",
          "poolKey": "Focus"
        },
        "unique": false,
        "templateSystemUniqueVersion": 1055608595,
        "uniqueId": "D2MVrqrWzJz1gzHi",
        "template": "QtMNKYb9rrdKwv0k"
      },
      "effects": [],
      "sort": 0,
      "flags": {
        "custom-system-builder": {
          "version": "5.1.0"
        }
      },
      "_stats": {
        "compendiumSource": "Item.D2MVrqrWzJz1gzHi",
        "duplicateSource": null,
        "exportSource": null,
        "coreVersion": "13.351",
        "systemId": "custom-system-builder",
        "systemVersion": "5.1.0",
        "lastModifiedBy": null
      },
      "ownership": {
        "default": 0
      }
    },
    {
      "folder": "rCTnl7myqTtxE5gl",
      "name": "DroneEnergyTEST",
      "type": "equippableItem",
      "_id": "9Ki9l0P42aRGqM1e",
      "img": "icons/svg/item-bag.svg",
      "system": {
        "body": {
          "contents": [
            {
              "key": "",
              "colSpan": 1,
              "rowSpan": 1,
              "cssClass": "",
              "role": 0,
              "editRole": 0,
              "permission": 0,
              "tooltip": "",
              "visibilityFormula": "",
              "editableFormula": "",
              "escapeHTML": false,
              "type": "panel",
              "contents": [
                {
                  "key": "weaponCard",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "textArea",
                  "size": "full-size",
                  "label": "",
                  "defaultValue": "",
                  "style": "sheet"
                }
              ],
              "flow": "vertical",
              "align": "left",
              "verticalAlign": "top",
              "collapsible": true,
              "defaultCollapsed": false,
              "title": "Card Display",
              "titleStyle": "default"
            },
            {
              "key": "",
              "colSpan": 1,
              "rowSpan": 1,
              "cssClass": "",
              "role": 0,
              "editRole": 0,
              "permission": 0,
              "tooltip": "",
              "visibilityFormula": "",
              "editableFormula": "",
              "escapeHTML": false,
              "type": "panel",
              "contents": [
                {
                  "key": "",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "panel",
                  "contents": [
                    {
                      "key": "gearFeature",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "medium",
                      "label": "Accuracy",
                      "defaultValue": "0",
                      "allowDecimal": false,
                      "minVal": "",
                      "maxVal": "",
                      "allowRelative": false,
                      "showControls": true,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    },
                    {
                      "key": "weaponDamage",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "medium",
                      "label": "Damage",
                      "defaultValue": "1",
                      "allowDecimal": false,
                      "minVal": "",
                      "maxVal": "",
                      "allowRelative": false,
                      "showControls": true,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    },
                    {
                      "key": "bonusDice",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "medium",
                      "label": "bonusDice",
                      "defaultValue": "0",
                      "allowDecimal": false,
                      "minVal": "",
                      "maxVal": "",
                      "allowRelative": false,
                      "showControls": true,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    },
                    {
                      "key": "diceMod",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "medium",
                      "label": "diceMod",
                      "defaultValue": "0",
                      "allowDecimal": false,
                      "minVal": "",
                      "maxVal": "",
                      "allowRelative": false,
                      "showControls": true,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    },
                    {
                      "key": "weaponRange",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "medium",
                      "label": "Range",
                      "defaultValue": "500",
                      "allowDecimal": false,
                      "minVal": "0",
                      "maxVal": "",
                      "allowRelative": false,
                      "showControls": true,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    },
                    {
                      "key": "wepHardening",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "medium",
                      "label": "Hardening",
                      "defaultValue": "",
                      "allowDecimal": false,
                      "minVal": "0",
                      "maxVal": "",
                      "allowRelative": false,
                      "showControls": true,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    },
                    {
                      "key": "wepBarrier",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "medium",
                      "label": "Barrier",
                      "defaultValue": "0",
                      "allowDecimal": false,
                      "minVal": "0",
                      "maxVal": "",
                      "allowRelative": false,
                      "showControls": true,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    },
                    {
                      "key": "weight",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "medium",
                      "label": "Weight (Total)",
                      "defaultValue": "",
                      "allowDecimal": false,
                      "minVal": "0",
                      "maxVal": "",
                      "allowRelative": false,
                      "showControls": true,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    },
                    {
                      "key": "itemRarity",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "medium",
                      "label": "Rarity",
                      "defaultValue": "",
                      "allowDecimal": false,
                      "minVal": "0",
                      "maxVal": "",
                      "allowRelative": false,
                      "showControls": true,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    },
                    {
                      "key": "actionLabel",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "textField",
                      "size": "medium",
                      "label": "actionLabel",
                      "defaultValue": "Blast",
                      "charList": "",
                      "maxLength": null,
                      "autocomplete": ""
                    },
                    {
                      "key": "wepAction1Label",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "textField",
                      "size": "full-size",
                      "label": "Action Label (for I.D.)",
                      "defaultValue": "Blast",
                      "charList": "",
                      "maxLength": null,
                      "autocomplete": ""
                    }
                  ],
                  "flow": "grid-2",
                  "align": "left",
                  "verticalAlign": "top",
                  "collapsible": false,
                  "defaultCollapsed": false,
                  "title": "",
                  "titleStyle": "default"
                },
                {
                  "key": "",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "panel",
                  "contents": [
                    {
                      "key": "firearmPenetration",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "full-size",
                      "label": "Penetration (RG and PG only)",
                      "defaultValue": "2",
                      "allowDecimal": false,
                      "minVal": "0",
                      "maxVal": "",
                      "allowRelative": false,
                      "showControls": true,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    },
                    {
                      "key": "energyPen",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "textArea",
                      "size": "full-size",
                      "label": "",
                      "defaultValue": "<p>Energy weapons, except railguns and particle</p><p>cannons, have no penetration. Note that</p><p>weapons that do no penetration cannot fire</p><p>through transparent surfaces, instead needing</p><p>to melt or destroy the surface before firing</p><p>through.</p><p>When firing through gaseous substances</p><p>(mist, smoke, water mist, etc.) damage is re-</p><p>duced by 1 per 2 m (1\") that the beam travels</p><p>through the obstruction, except for railguns</p><p>which fire a physical projectile. Subtract this</p><p>damage right after the dodge roll is made or</p><p>declined. If it reduces the damage to 0 or less,</p><p>the shot \"misses\".</p>",
                      "style": "sheet"
                    }
                  ],
                  "flow": "vertical",
                  "align": "left",
                  "verticalAlign": "top",
                  "collapsible": true,
                  "defaultCollapsed": false,
                  "title": "Penetration",
                  "titleStyle": "default"
                },
                {
                  "key": "weaponTags",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "textField",
                  "size": "full-size",
                  "label": "Tags",
                  "defaultValue": "",
                  "charList": "",
                  "maxLength": null,
                  "autocomplete": ""
                }
              ],
              "flow": "vertical",
              "align": "left",
              "verticalAlign": "top",
              "collapsible": true,
              "defaultCollapsed": false,
              "title": "Roll Config",
              "titleStyle": "default"
            },
            {
              "key": "",
              "colSpan": 1,
              "rowSpan": 1,
              "cssClass": "",
              "role": 0,
              "editRole": 0,
              "permission": 0,
              "tooltip": "",
              "visibilityFormula": "",
              "editableFormula": "",
              "escapeHTML": false,
              "type": "panel",
              "contents": [
                {
                  "key": "modsDrone1",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "textField",
                  "size": "full-size",
                  "label": "Mod 1:",
                  "defaultValue": "",
                  "charList": "",
                  "maxLength": null,
                  "autocomplete": ""
                },
                {
                  "key": "modsDrone2",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "textField",
                  "size": "full-size",
                  "label": "Mod 2:",
                  "defaultValue": "",
                  "charList": "",
                  "maxLength": null,
                  "autocomplete": ""
                },
                {
                  "key": "modsDrone3",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "textField",
                  "size": "full-size",
                  "label": "Mod 3:",
                  "defaultValue": "",
                  "charList": "",
                  "maxLength": null,
                  "autocomplete": ""
                },
                {
                  "key": "modsDrone4",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "textField",
                  "size": "full-size",
                  "label": "Mod 4:",
                  "defaultValue": "",
                  "charList": "",
                  "maxLength": null,
                  "autocomplete": ""
                }
              ],
              "flow": "vertical",
              "align": "left",
              "verticalAlign": "top",
              "collapsible": true,
              "defaultCollapsed": false,
              "title": "Modifications",
              "titleStyle": "default"
            },
            {
              "key": "",
              "colSpan": 1,
              "rowSpan": 1,
              "cssClass": "",
              "role": 4,
              "editRole": 0,
              "permission": 0,
              "tooltip": "",
              "visibilityFormula": "",
              "editableFormula": "",
              "escapeHTML": false,
              "type": "panel",
              "contents": [
                {
                  "key": "",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "panel",
                  "contents": [
                    {
                      "key": "wepAction2Label",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "textField",
                      "size": "full-size",
                      "label": "",
                      "defaultValue": "DT",
                      "charList": "",
                      "maxLength": null,
                      "autocomplete": ""
                    },
                    {
                      "key": "wepAction3Label",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "textField",
                      "size": "full-size",
                      "label": "",
                      "defaultValue": "B",
                      "charList": "",
                      "maxLength": null,
                      "autocomplete": ""
                    },
                    {
                      "key": "wepAction4Label",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "textField",
                      "size": "full-size",
                      "label": "",
                      "defaultValue": "FA",
                      "charList": "",
                      "maxLength": null,
                      "autocomplete": ""
                    }
                  ],
                  "flow": "vertical",
                  "align": "left",
                  "verticalAlign": "top",
                  "collapsible": true,
                  "defaultCollapsed": false,
                  "title": "Action Labels (for Item Displayer)",
                  "titleStyle": "default"
                },
                {
                  "key": "",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "panel",
                  "contents": [
                    {
                      "key": "wepAction1BonusDice",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "full-size",
                      "label": "SS",
                      "defaultValue": "0",
                      "allowDecimal": false,
                      "minVal": "0",
                      "maxVal": "",
                      "allowRelative": false,
                      "showControls": false,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    },
                    {
                      "key": "wepAction2BonusDice",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "full-size",
                      "label": "DT",
                      "defaultValue": "1",
                      "allowDecimal": false,
                      "minVal": "0",
                      "maxVal": "",
                      "allowRelative": false,
                      "showControls": false,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    },
                    {
                      "key": "wepAction3BonusDice",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "full-size",
                      "label": "B",
                      "defaultValue": "3",
                      "allowDecimal": false,
                      "minVal": "0",
                      "maxVal": "",
                      "allowRelative": false,
                      "showControls": false,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    },
                    {
                      "key": "wepAction4BonusDice",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "full-size",
                      "label": "FA",
                      "defaultValue": "20",
                      "allowDecimal": false,
                      "minVal": "0",
                      "maxVal": "",
                      "allowRelative": false,
                      "showControls": false,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    }
                  ],
                  "flow": "vertical",
                  "align": "left",
                  "verticalAlign": "top",
                  "collapsible": true,
                  "defaultCollapsed": false,
                  "title": "# Bonus Dice from Fire Mode",
                  "titleStyle": "default"
                },
                {
                  "key": "wepAction1Enabled",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "Single Shot. Characters can fire one bullet as a simple action. The player totals their Firearms skill plus accuracy and can use that many dice from their Finesse pool to fire the weapon.",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "checkbox",
                  "size": "m-small",
                  "label": "Blast",
                  "defaultChecked": true
                },
                {
                  "key": "skillKey",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "textField",
                  "size": "full-size",
                  "label": "skillKey",
                  "defaultValue": "Skill_Gunnery",
                  "charList": "",
                  "maxLength": null,
                  "autocomplete": ""
                },
                {
                  "key": "poolKey",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "select",
                  "size": "full-size",
                  "label": "poolKey",
                  "defaultValue": "Finesse",
                  "selectedOptionType": "custom",
                  "options": [
                    {
                      "key": "Brawn",
                      "value": "Brawn"
                    },
                    {
                      "key": "Finesse",
                      "value": "Finesse"
                    },
                    {
                      "key": "Resolve",
                      "value": "Resolve"
                    },
                    {
                      "key": "Focus",
                      "value": "Focus"
                    }
                  ]
                }
              ],
              "flow": "vertical",
              "align": "center",
              "verticalAlign": "top",
              "collapsible": true,
              "defaultCollapsed": true,
              "title": "Hidden",
              "titleStyle": "default"
            }
          ],
          "key": "custom_body",
          "type": "panel"
        },
        "display": {
          "width": 600,
          "height": 600,
          "fix_size": false,
          "pp_width": 64,
          "pp_height": 64
        },
        "header": {
          "contents": [
            {
              "key": "",
              "colSpan": 1,
              "rowSpan": 1,
              "cssClass": "sinlesscsb-marker",
              "role": 0,
              "editRole": 0,
              "permission": 0,
              "tooltip": "",
              "visibilityFormula": "",
              "editableFormula": "",
              "escapeHTML": false,
              "type": "panel",
              "contents": [
                {
                  "key": "",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "label",
                  "size": "m-small",
                  "icon": "gun",
                  "value": "${wepAction1Enabled ? wepAction1Label : \"\"}$",
                  "prefix": "",
                  "suffix": "",
                  "rollMessage": "%{\n  // Prefer linkedEntity (inventory row) then entity (item sheet)\n  const doc = (typeof linkedEntity !== \"undefined\" && linkedEntity) ? linkedEntity\n            : (typeof entity !== \"undefined\" && entity) ? entity\n            : null;\n\n  const itemUuid = String(doc?.uuid ?? \"\").trim();\n\n  // Actor resolution: embedded parent wins; otherwise token/character fallbacks.\n  const embeddedActorUuid =\n    (doc?.parent?.documentName === \"Actor\" && doc?.parent?.uuid) ? String(doc.parent.uuid) : \"\";\n\n  const scopeActorUuid =\n    (typeof actor !== \"undefined\" && actor?.documentName === \"Actor\" && actor?.uuid) ? String(actor.uuid) : \"\";\n\n  const controlledActorUuid = (() => {\n    const t = canvas?.tokens?.controlled?.[0];\n    return t?.actor?.uuid ? String(t.actor.uuid) : \"\";\n  })();\n\n  const targetedActorUuid = (() => {\n    const t = game.user?.targets ? Array.from(game.user.targets)[0] : null;\n    return t?.actor?.uuid ? String(t.actor.uuid) : \"\";\n  })();\n\n  const userCharUuid = game.user?.character?.uuid ? String(game.user.character.uuid) : \"\";\n\n  const actorUuid = String(\n    embeddedActorUuid ||\n    scopeActorUuid ||\n    controlledActorUuid ||\n    targetedActorUuid ||\n    userCharUuid ||\n    \"\"\n  ).trim();\n\n  if (!itemUuid) {\n    ui.notifications?.warn?.(\"SinlessCSB: missing item context (itemUuid).\");\n    return \"\";\n  }\n\n  if (!actorUuid) {\n    ui.notifications?.warn?.(\"SinlessCSB: No actor context. Control or target a token, then try again.\");\n    return \"\";\n  }\n\n  const api = game.modules.get(\"sinlesscsb\")?.api;\n  if (typeof api?.rollItem !== \"function\") {\n    ui.notifications?.error?.(\"SinlessCSB: rollItem API not available (module not ready / not exposed).\");\n    return \"\";\n  }\n\n  api.rollItem({ itemUuid, actorUuid, bonusDiceDelta: 0 });\n  return \"\";\n}%\n",
                  "altRollMessage": "",
                  "rollMessageToChat": false,
                  "altRollMessageToChat": false,
                  "style": "button"
                },
                {
                  "key": "",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "panel",
                  "contents": [
                    {
                      "key": "wepHeat",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "medium",
                      "label": "Current Heat",
                      "defaultValue": "",
                      "allowDecimal": false,
                      "minVal": "0",
                      "maxVal": "",
                      "allowRelative": false,
                      "showControls": true,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    },
                    {
                      "key": "heatLimit",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "medium",
                      "label": "Heat Limit",
                      "defaultValue": "1",
                      "allowDecimal": false,
                      "minVal": "1",
                      "maxVal": "",
                      "allowRelative": false,
                      "showControls": true,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    }
                  ],
                  "flow": "grid-2",
                  "align": "left",
                  "verticalAlign": "top",
                  "collapsible": false,
                  "defaultCollapsed": false,
                  "title": "",
                  "titleStyle": "default"
                }
              ],
              "flow": "vertical",
              "align": "center",
              "verticalAlign": "top",
              "collapsible": false,
              "defaultCollapsed": false,
              "title": "",
              "titleStyle": "default"
            }
          ],
          "key": "custom_header",
          "type": "panel"
        },
        "hidden": [],
        "modifiers": [],
        "props": {
          "heatLimit": "1",
          "weaponCard": "",
          "gearFeature": "0",
          "weaponDamage": "1",
          "bonusDice": "0",
          "diceMod": "0",
          "weaponRange": "500",
          "wepBarrier": "0",
          "actionLabel": "Blast",
          "firearmPenetration": "2",
          "energyPen": "<p>Energy weapons, except railguns and particle</p><p>cannons, have no penetration. Note that</p><p>weapons that do no penetration cannot fire</p><p>through transparent surfaces, instead needing</p><p>to melt or destroy the surface before firing</p><p>through.</p><p>When firing through gaseous substances</p><p>(mist, smoke, water mist, etc.) damage is re-</p><p>duced by 1 per 2 m (1\") that the beam travels</p><p>through the obstruction, except for railguns</p><p>which fire a physical projectile. Subtract this</p><p>damage right after the dodge roll is made or</p><p>declined. If it reduces the damage to 0 or less,</p><p>the shot \"misses\".</p>",
          "skillKey": "Skill_Gunnery",
          "poolKey": "Finesse",
          "wepHeat": "0",
          "wepHardening": "0",
          "weight": "",
          "itemRarity": "",
          "weaponTags": "",
          "modsDrone1": "",
          "modsDrone2": "",
          "modsDrone3": "",
          "modsDrone4": "",
          "wepAction1Label": "Blast",
          "wepAction2Label": "DT",
          "wepAction3Label": "B",
          "wepAction4Label": "FA",
          "wepAction1BonusDice": "0",
          "wepAction2BonusDice": "1",
          "wepAction3BonusDice": "3",
          "wepAction4BonusDice": "20",
          "wepAction1Enabled": true
        },
        "unique": false,
        "templateSystemUniqueVersion": 361375404,
        "uniqueId": "IyP6t6yznhtRkSCp",
        "template": "lOAPMavVjtRre3OI"
      },
      "effects": [],
      "sort": 0,
      "flags": {
        "custom-system-builder": {
          "version": "5.1.0"
        }
      },
      "_stats": {
        "compendiumSource": "Item.IyP6t6yznhtRkSCp",
        "duplicateSource": null,
        "exportSource": null,
        "coreVersion": "13.351",
        "systemId": "custom-system-builder",
        "systemVersion": "5.1.0",
        "lastModifiedBy": null
      },
      "ownership": {
        "default": 0
      }
    }
  ],
  "effects": [],
  "folder": "C9SZJMPMSIoSKI67",
  "flags": {
    "custom-system-builder": {
      "version": "5.1.0"
    },
    "sinlesscsb": {
      "tracksInitialized": true,
      "tracksInitPending": true
    }
  },
  "_stats": {
    "compendiumSource": "Actor.8Uh7zPESMQVeRtpd",
    "duplicateSource": "Actor.uZC1brtyb8oeS8PT",
    "exportSource": {
      "worldId": "sinless",
      "uuid": "Actor.8Uh7zPESMQVeRtpd",
      "coreVersion": "13.351",
      "systemId": "custom-system-builder",
      "systemVersion": "5.1.0"
    },
    "coreVersion": "13.351",
    "systemId": "custom-system-builder",
    "systemVersion": "5.1.0",
    "createdTime": 1769187564605,
    "modifiedTime": 1769662666251,
    "lastModifiedBy": "KoiB8oaGNkPdgzdM"
  },
  "_id": "8Uh7zPESMQVeRtpd",
  "ownership": {
    "default": 0
  }
}