{
  "name": "TestSpell",
  "type": "character",
  "_id": "eMbezua6UThIStwT",
  "img": "icons/svg/mystery-man.svg",
  "system": {
    "body": {
      "contents": [
        {
          "key": "",
          "colSpan": 1,
          "rowSpan": 1,
          "cssClass": "",
          "role": 0,
          "editRole": 0,
          "permission": 0,
          "tooltip": "",
          "visibilityFormula": "",
          "editableFormula": "",
          "escapeHTML": false,
          "type": "panel",
          "contents": [
            {
              "key": "Attributes_Panel",
              "colSpan": 1,
              "rowSpan": 1,
              "cssClass": "",
              "role": 0,
              "editRole": 0,
              "permission": 0,
              "tooltip": "",
              "visibilityFormula": "",
              "editableFormula": "",
              "escapeHTML": false,
              "type": "panel",
              "contents": [
                {
                  "key": "",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "panel",
                  "contents": [
                    {
                      "key": "",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "panel",
                      "contents": [
                        {
                          "key": "Attributes",
                          "colSpan": 1,
                          "rowSpan": 1,
                          "cssClass": "",
                          "role": 0,
                          "editRole": 0,
                          "permission": 0,
                          "tooltip": "",
                          "visibilityFormula": "",
                          "editableFormula": "",
                          "escapeHTML": false,
                          "type": "panel",
                          "contents": [
                            {
                              "key": "",
                              "colSpan": 1,
                              "rowSpan": 1,
                              "cssClass": "",
                              "role": 0,
                              "editRole": 0,
                              "permission": 0,
                              "tooltip": "",
                              "visibilityFormula": "",
                              "editableFormula": "",
                              "escapeHTML": false,
                              "type": "panel",
                              "contents": [
                                {
                                  "key": "",
                                  "colSpan": 1,
                                  "rowSpan": 1,
                                  "cssClass": "",
                                  "role": 0,
                                  "editRole": 0,
                                  "permission": 0,
                                  "tooltip": "",
                                  "visibilityFormula": "",
                                  "editableFormula": "",
                                  "escapeHTML": false,
                                  "type": "label",
                                  "size": "x-small",
                                  "icon": "",
                                  "value": "Strength",
                                  "prefix": "",
                                  "suffix": "",
                                  "rollMessage": "",
                                  "altRollMessage": "",
                                  "rollMessageToChat": true,
                                  "altRollMessageToChat": true,
                                  "style": "bold"
                                },
                                {
                                  "key": "STR",
                                  "colSpan": 1,
                                  "rowSpan": 1,
                                  "cssClass": "",
                                  "role": 0,
                                  "editRole": 0,
                                  "permission": 0,
                                  "tooltip": "",
                                  "visibilityFormula": "",
                                  "editableFormula": "",
                                  "escapeHTML": false,
                                  "type": "numberField",
                                  "size": "small",
                                  "label": "",
                                  "defaultValue": "1",
                                  "allowDecimal": false,
                                  "minVal": "",
                                  "maxVal": "",
                                  "allowRelative": false,
                                  "showControls": true,
                                  "controlsStyle": "hover",
                                  "controlsCustomIncrements": "",
                                  "inputStyle": "text"
                                }
                              ],
                              "flow": "grid-2",
                              "align": "center",
                              "verticalAlign": "top",
                              "collapsible": false,
                              "defaultCollapsed": false,
                              "title": "",
                              "titleStyle": "default"
                            },
                            {
                              "key": "",
                              "colSpan": 1,
                              "rowSpan": 1,
                              "cssClass": "",
                              "role": 0,
                              "editRole": 0,
                              "permission": 0,
                              "tooltip": "",
                              "visibilityFormula": "",
                              "editableFormula": "",
                              "escapeHTML": false,
                              "type": "panel",
                              "contents": [
                                {
                                  "key": "",
                                  "colSpan": 1,
                                  "rowSpan": 1,
                                  "cssClass": "",
                                  "role": 0,
                                  "editRole": 0,
                                  "permission": 0,
                                  "tooltip": "",
                                  "visibilityFormula": "",
                                  "editableFormula": "",
                                  "escapeHTML": false,
                                  "type": "label",
                                  "size": "x-small",
                                  "icon": "",
                                  "value": "Body",
                                  "prefix": "",
                                  "suffix": "",
                                  "rollMessage": "",
                                  "altRollMessage": "",
                                  "rollMessageToChat": true,
                                  "altRollMessageToChat": true,
                                  "style": "bold"
                                },
                                {
                                  "key": "BOD",
                                  "colSpan": 1,
                                  "rowSpan": 1,
                                  "cssClass": "",
                                  "role": 0,
                                  "editRole": 0,
                                  "permission": 0,
                                  "tooltip": "",
                                  "visibilityFormula": "",
                                  "editableFormula": "",
                                  "escapeHTML": false,
                                  "type": "numberField",
                                  "size": "small",
                                  "label": "",
                                  "defaultValue": "1",
                                  "allowDecimal": false,
                                  "minVal": "",
                                  "maxVal": "",
                                  "allowRelative": false,
                                  "showControls": true,
                                  "controlsStyle": "hover",
                                  "controlsCustomIncrements": "",
                                  "inputStyle": "text"
                                }
                              ],
                              "flow": "grid-2",
                              "align": "center",
                              "verticalAlign": "top",
                              "collapsible": false,
                              "defaultCollapsed": false,
                              "title": "",
                              "titleStyle": "default"
                            },
                            {
                              "key": "",
                              "colSpan": 1,
                              "rowSpan": 1,
                              "cssClass": "",
                              "role": 0,
                              "editRole": 0,
                              "permission": 0,
                              "tooltip": "",
                              "visibilityFormula": "",
                              "editableFormula": "",
                              "escapeHTML": false,
                              "type": "panel",
                              "contents": [
                                {
                                  "key": "",
                                  "colSpan": 1,
                                  "rowSpan": 1,
                                  "cssClass": "",
                                  "role": 0,
                                  "editRole": 0,
                                  "permission": 0,
                                  "tooltip": "",
                                  "visibilityFormula": "",
                                  "editableFormula": "",
                                  "escapeHTML": false,
                                  "type": "label",
                                  "size": "x-small",
                                  "icon": "",
                                  "value": "Reaction",
                                  "prefix": "",
                                  "suffix": "",
                                  "rollMessage": "",
                                  "altRollMessage": "",
                                  "rollMessageToChat": true,
                                  "altRollMessageToChat": true,
                                  "style": "bold"
                                },
                                {
                                  "key": "REA",
                                  "colSpan": 1,
                                  "rowSpan": 1,
                                  "cssClass": "",
                                  "role": 0,
                                  "editRole": 0,
                                  "permission": 0,
                                  "tooltip": "",
                                  "visibilityFormula": "",
                                  "editableFormula": "",
                                  "escapeHTML": false,
                                  "type": "numberField",
                                  "size": "small",
                                  "label": "",
                                  "defaultValue": "1",
                                  "allowDecimal": false,
                                  "minVal": "",
                                  "maxVal": "",
                                  "allowRelative": false,
                                  "showControls": true,
                                  "controlsStyle": "hover",
                                  "controlsCustomIncrements": "",
                                  "inputStyle": "text"
                                }
                              ],
                              "flow": "grid-2",
                              "align": "center",
                              "verticalAlign": "top",
                              "collapsible": false,
                              "defaultCollapsed": false,
                              "title": "",
                              "titleStyle": "default"
                            },
                            {
                              "key": "",
                              "colSpan": 1,
                              "rowSpan": 1,
                              "cssClass": "",
                              "role": 0,
                              "editRole": 0,
                              "permission": 0,
                              "tooltip": "",
                              "visibilityFormula": "",
                              "editableFormula": "",
                              "escapeHTML": false,
                              "type": "panel",
                              "contents": [
                                {
                                  "key": "",
                                  "colSpan": 1,
                                  "rowSpan": 1,
                                  "cssClass": "",
                                  "role": 0,
                                  "editRole": 0,
                                  "permission": 0,
                                  "tooltip": "",
                                  "visibilityFormula": "",
                                  "editableFormula": "",
                                  "escapeHTML": false,
                                  "type": "label",
                                  "size": "x-small",
                                  "icon": "",
                                  "value": "Intelligence",
                                  "prefix": "",
                                  "suffix": "",
                                  "rollMessage": "",
                                  "altRollMessage": "",
                                  "rollMessageToChat": true,
                                  "altRollMessageToChat": true,
                                  "style": "bold"
                                },
                                {
                                  "key": "INT",
                                  "colSpan": 1,
                                  "rowSpan": 1,
                                  "cssClass": "",
                                  "role": 0,
                                  "editRole": 0,
                                  "permission": 0,
                                  "tooltip": "",
                                  "visibilityFormula": "",
                                  "editableFormula": "",
                                  "escapeHTML": false,
                                  "type": "numberField",
                                  "size": "small",
                                  "label": "",
                                  "defaultValue": "1",
                                  "allowDecimal": false,
                                  "minVal": "",
                                  "maxVal": "",
                                  "allowRelative": false,
                                  "showControls": true,
                                  "controlsStyle": "hover",
                                  "controlsCustomIncrements": "",
                                  "inputStyle": "text"
                                }
                              ],
                              "flow": "grid-2",
                              "align": "center",
                              "verticalAlign": "top",
                              "collapsible": false,
                              "defaultCollapsed": false,
                              "title": "",
                              "titleStyle": "default"
                            },
                            {
                              "key": "",
                              "colSpan": 1,
                              "rowSpan": 1,
                              "cssClass": "",
                              "role": 0,
                              "editRole": 0,
                              "permission": 0,
                              "tooltip": "",
                              "visibilityFormula": "",
                              "editableFormula": "",
                              "escapeHTML": false,
                              "type": "panel",
                              "contents": [
                                {
                                  "key": "",
                                  "colSpan": 1,
                                  "rowSpan": 1,
                                  "cssClass": "",
                                  "role": 0,
                                  "editRole": 0,
                                  "permission": 0,
                                  "tooltip": "",
                                  "visibilityFormula": "",
                                  "editableFormula": "",
                                  "escapeHTML": false,
                                  "type": "label",
                                  "size": "x-small",
                                  "icon": "",
                                  "value": "Willpower",
                                  "prefix": "",
                                  "suffix": "",
                                  "rollMessage": "",
                                  "altRollMessage": "",
                                  "rollMessageToChat": true,
                                  "altRollMessageToChat": true,
                                  "style": "bold"
                                },
                                {
                                  "key": "WIL",
                                  "colSpan": 1,
                                  "rowSpan": 1,
                                  "cssClass": "",
                                  "role": 0,
                                  "editRole": 0,
                                  "permission": 0,
                                  "tooltip": "",
                                  "visibilityFormula": "",
                                  "editableFormula": "",
                                  "escapeHTML": false,
                                  "type": "numberField",
                                  "size": "small",
                                  "label": "",
                                  "defaultValue": "1",
                                  "allowDecimal": false,
                                  "minVal": "",
                                  "maxVal": "",
                                  "allowRelative": false,
                                  "showControls": true,
                                  "controlsStyle": "hover",
                                  "controlsCustomIncrements": "",
                                  "inputStyle": "text"
                                }
                              ],
                              "flow": "grid-2",
                              "align": "center",
                              "verticalAlign": "top",
                              "collapsible": false,
                              "defaultCollapsed": false,
                              "title": "",
                              "titleStyle": "default"
                            },
                            {
                              "key": "",
                              "colSpan": 1,
                              "rowSpan": 1,
                              "cssClass": "",
                              "role": 0,
                              "editRole": 0,
                              "permission": 0,
                              "tooltip": "",
                              "visibilityFormula": "",
                              "editableFormula": "",
                              "escapeHTML": false,
                              "type": "panel",
                              "contents": [
                                {
                                  "key": "",
                                  "colSpan": 1,
                                  "rowSpan": 1,
                                  "cssClass": "",
                                  "role": 0,
                                  "editRole": 0,
                                  "permission": 0,
                                  "tooltip": "",
                                  "visibilityFormula": "",
                                  "editableFormula": "",
                                  "escapeHTML": false,
                                  "type": "label",
                                  "size": "x-small",
                                  "icon": "",
                                  "value": "Charisma",
                                  "prefix": "",
                                  "suffix": "",
                                  "rollMessage": "",
                                  "altRollMessage": "",
                                  "rollMessageToChat": true,
                                  "altRollMessageToChat": true,
                                  "style": "bold"
                                },
                                {
                                  "key": "CHA",
                                  "colSpan": 1,
                                  "rowSpan": 1,
                                  "cssClass": "",
                                  "role": 0,
                                  "editRole": 0,
                                  "permission": 0,
                                  "tooltip": "",
                                  "visibilityFormula": "",
                                  "editableFormula": "",
                                  "escapeHTML": false,
                                  "type": "numberField",
                                  "size": "small",
                                  "label": "",
                                  "defaultValue": "1",
                                  "allowDecimal": false,
                                  "minVal": "",
                                  "maxVal": "",
                                  "allowRelative": false,
                                  "showControls": true,
                                  "controlsStyle": "hover",
                                  "controlsCustomIncrements": "",
                                  "inputStyle": "text"
                                }
                              ],
                              "flow": "grid-2",
                              "align": "center",
                              "verticalAlign": "top",
                              "collapsible": false,
                              "defaultCollapsed": false,
                              "title": "",
                              "titleStyle": "default"
                            },
                            {
                              "key": "",
                              "colSpan": 1,
                              "rowSpan": 1,
                              "cssClass": "",
                              "role": 0,
                              "editRole": 0,
                              "permission": 0,
                              "tooltip": "",
                              "visibilityFormula": "",
                              "editableFormula": "",
                              "escapeHTML": false,
                              "type": "panel",
                              "contents": [
                                {
                                  "key": "chaQuarterPoolN",
                                  "colSpan": 1,
                                  "rowSpan": 1,
                                  "cssClass": "",
                                  "role": 0,
                                  "editRole": 0,
                                  "permission": 0,
                                  "tooltip": "",
                                  "visibilityFormula": "",
                                  "editableFormula": "",
                                  "escapeHTML": false,
                                  "type": "select",
                                  "size": "m-small",
                                  "label": "Charisma +25% to:",
                                  "defaultValue": "3",
                                  "selectedOptionType": "custom",
                                  "options": [
                                    {
                                      "key": "1",
                                      "value": "Brawn"
                                    },
                                    {
                                      "key": "2",
                                      "value": "Finesse"
                                    },
                                    {
                                      "key": "3",
                                      "value": "Resolve"
                                    },
                                    {
                                      "key": "4",
                                      "value": "Focus"
                                    }
                                  ]
                                }
                              ],
                              "flow": "vertical",
                              "align": "left",
                              "verticalAlign": "top",
                              "collapsible": true,
                              "defaultCollapsed": false,
                              "title": "",
                              "titleStyle": "default"
                            }
                          ],
                          "flow": "vertical",
                          "align": "left",
                          "verticalAlign": "top",
                          "collapsible": false,
                          "defaultCollapsed": true,
                          "title": "Attributes",
                          "titleStyle": "default"
                        }
                      ],
                      "flow": "vertical",
                      "align": "left",
                      "verticalAlign": "top",
                      "collapsible": true,
                      "defaultCollapsed": false,
                      "title": "",
                      "titleStyle": "default"
                    },
                    {
                      "key": "",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "panel",
                      "contents": [
                        {
                          "key": "",
                          "colSpan": 1,
                          "rowSpan": 1,
                          "cssClass": "",
                          "role": 0,
                          "editRole": 0,
                          "permission": 0,
                          "tooltip": "",
                          "visibilityFormula": "",
                          "editableFormula": "",
                          "escapeHTML": false,
                          "type": "panel",
                          "contents": [
                            {
                              "key": "",
                              "colSpan": 1,
                              "rowSpan": 1,
                              "cssClass": "",
                              "role": 0,
                              "editRole": 0,
                              "permission": 0,
                              "tooltip": "",
                              "visibilityFormula": "",
                              "editableFormula": "",
                              "escapeHTML": false,
                              "type": "panel",
                              "contents": [
                                {
                                  "key": "",
                                  "colSpan": 1,
                                  "rowSpan": 1,
                                  "cssClass": "",
                                  "role": 0,
                                  "editRole": 0,
                                  "permission": 0,
                                  "tooltip": "",
                                  "visibilityFormula": "",
                                  "editableFormula": "",
                                  "escapeHTML": false,
                                  "type": "panel",
                                  "contents": [
                                    {
                                      "key": "",
                                      "colSpan": 1,
                                      "rowSpan": 1,
                                      "cssClass": "",
                                      "role": 0,
                                      "editRole": 0,
                                      "permission": 0,
                                      "tooltip": "",
                                      "visibilityFormula": "",
                                      "editableFormula": "",
                                      "escapeHTML": false,
                                      "type": "panel",
                                      "contents": [
                                        {
                                          "key": "",
                                          "colSpan": 1,
                                          "rowSpan": 1,
                                          "cssClass": "",
                                          "role": 0,
                                          "editRole": 0,
                                          "permission": 0,
                                          "tooltip": "",
                                          "visibilityFormula": "",
                                          "editableFormula": "",
                                          "escapeHTML": false,
                                          "type": "panel",
                                          "contents": [
                                            {
                                              "key": "",
                                              "colSpan": 1,
                                              "rowSpan": 1,
                                              "cssClass": "",
                                              "role": 0,
                                              "editRole": 0,
                                              "permission": 0,
                                              "tooltip": "",
                                              "visibilityFormula": "",
                                              "editableFormula": "",
                                              "escapeHTML": false,
                                              "type": "label",
                                              "size": "small",
                                              "icon": "",
                                              "value": "PHYSICAL\n(MAX)",
                                              "prefix": "",
                                              "suffix": "",
                                              "rollMessage": "",
                                              "altRollMessage": "",
                                              "rollMessageToChat": true,
                                              "altRollMessageToChat": true,
                                              "style": "subtitle"
                                            }
                                          ],
                                          "flow": "vertical",
                                          "align": "left",
                                          "verticalAlign": "top",
                                          "collapsible": false,
                                          "defaultCollapsed": false,
                                          "title": "",
                                          "titleStyle": "default"
                                        },
                                        {
                                          "key": "",
                                          "colSpan": 1,
                                          "rowSpan": 1,
                                          "cssClass": "",
                                          "role": 0,
                                          "editRole": 0,
                                          "permission": 0,
                                          "tooltip": "",
                                          "visibilityFormula": "",
                                          "editableFormula": "",
                                          "escapeHTML": false,
                                          "type": "panel",
                                          "contents": [
                                            {
                                              "key": "physicalMax",
                                              "colSpan": 1,
                                              "rowSpan": 1,
                                              "cssClass": "",
                                              "role": 0,
                                              "editRole": 0,
                                              "permission": 0,
                                              "tooltip": "",
                                              "visibilityFormula": "",
                                              "editableFormula": "",
                                              "escapeHTML": false,
                                              "type": "label",
                                              "size": "x-small",
                                              "icon": "",
                                              "value": "${sum(\n  6,\n  ((BOD - (BOD % 2)) / 2)\n)}$\n",
                                              "prefix": "",
                                              "suffix": "",
                                              "rollMessage": "",
                                              "altRollMessage": "",
                                              "rollMessageToChat": true,
                                              "altRollMessageToChat": true,
                                              "style": "title"
                                            }
                                          ],
                                          "flow": "vertical",
                                          "align": "left",
                                          "verticalAlign": "top",
                                          "collapsible": false,
                                          "defaultCollapsed": false,
                                          "title": "",
                                          "titleStyle": "default"
                                        },
                                        {
                                          "key": "",
                                          "colSpan": 1,
                                          "rowSpan": 1,
                                          "cssClass": "",
                                          "role": 0,
                                          "editRole": 0,
                                          "permission": 0,
                                          "tooltip": "",
                                          "visibilityFormula": "",
                                          "editableFormula": "",
                                          "escapeHTML": false,
                                          "type": "panel",
                                          "contents": [],
                                          "flow": "vertical",
                                          "align": "left",
                                          "verticalAlign": "top",
                                          "collapsible": false,
                                          "defaultCollapsed": false,
                                          "title": "",
                                          "titleStyle": "default"
                                        }
                                      ],
                                      "flow": "grid-3",
                                      "align": "left",
                                      "verticalAlign": "top",
                                      "collapsible": false,
                                      "defaultCollapsed": false,
                                      "title": "",
                                      "titleStyle": "default"
                                    }
                                  ],
                                  "flow": "horizontal",
                                  "align": "left",
                                  "verticalAlign": "top",
                                  "collapsible": false,
                                  "defaultCollapsed": false,
                                  "title": "",
                                  "titleStyle": "default"
                                },
                                {
                                  "key": "",
                                  "colSpan": 1,
                                  "rowSpan": 1,
                                  "cssClass": "",
                                  "role": 0,
                                  "editRole": 0,
                                  "permission": 0,
                                  "tooltip": "",
                                  "visibilityFormula": "",
                                  "editableFormula": "",
                                  "escapeHTML": false,
                                  "type": "panel",
                                  "contents": [
                                    {
                                      "key": "physicalCur",
                                      "colSpan": 1,
                                      "rowSpan": 1,
                                      "cssClass": "",
                                      "role": 0,
                                      "editRole": 0,
                                      "permission": 0,
                                      "tooltip": "",
                                      "visibilityFormula": "",
                                      "editableFormula": "",
                                      "escapeHTML": false,
                                      "type": "numberField",
                                      "size": "medium",
                                      "label": "Current Physical:",
                                      "defaultValue": "",
                                      "allowDecimal": false,
                                      "minVal": "0",
                                      "maxVal": "${physicalMax}$",
                                      "allowRelative": false,
                                      "showControls": true,
                                      "controlsStyle": "hover",
                                      "controlsCustomIncrements": "",
                                      "inputStyle": "text"
                                    },
                                    {
                                      "key": "overflowDamage",
                                      "colSpan": 1,
                                      "rowSpan": 1,
                                      "cssClass": "",
                                      "role": 0,
                                      "editRole": 0,
                                      "permission": 0,
                                      "tooltip": "",
                                      "visibilityFormula": "",
                                      "editableFormula": "",
                                      "escapeHTML": false,
                                      "type": "numberField",
                                      "size": "m-small",
                                      "label": "     Overflow:",
                                      "defaultValue": "0",
                                      "allowDecimal": false,
                                      "minVal": "0",
                                      "maxVal": "",
                                      "allowRelative": false,
                                      "showControls": true,
                                      "controlsStyle": "hover",
                                      "controlsCustomIncrements": "",
                                      "inputStyle": "text"
                                    }
                                  ],
                                  "flow": "grid-2",
                                  "align": "left",
                                  "verticalAlign": "top",
                                  "collapsible": false,
                                  "defaultCollapsed": false,
                                  "title": "",
                                  "titleStyle": "default"
                                }
                              ],
                              "flow": "vertical",
                              "align": "left",
                              "verticalAlign": "top",
                              "collapsible": false,
                              "defaultCollapsed": false,
                              "title": "",
                              "titleStyle": "default"
                            },
                            {
                              "key": "",
                              "colSpan": 1,
                              "rowSpan": 1,
                              "cssClass": "",
                              "role": 0,
                              "editRole": 0,
                              "permission": 0,
                              "tooltip": "",
                              "visibilityFormula": "",
                              "editableFormula": "",
                              "escapeHTML": false,
                              "type": "panel",
                              "contents": [
                                {
                                  "key": "Physical_Meter",
                                  "colSpan": 1,
                                  "rowSpan": 1,
                                  "cssClass": "",
                                  "role": 0,
                                  "editRole": 0,
                                  "permission": 0,
                                  "tooltip": "",
                                  "visibilityFormula": "",
                                  "editableFormula": "",
                                  "escapeHTML": false,
                                  "type": "meter",
                                  "size": "full-size",
                                  "label": "",
                                  "value": "${physicalCur}$",
                                  "min": "0",
                                  "max": "${physicalMax}$",
                                  "low": "${physicalMax * 0.25}$",
                                  "high": "${physicalMax * 0.5}$",
                                  "optimum": "${physicalMax}$",
                                  "textOption": "none"
                                }
                              ],
                              "flow": "vertical",
                              "align": "left",
                              "verticalAlign": "top",
                              "collapsible": false,
                              "defaultCollapsed": false,
                              "title": "",
                              "titleStyle": "default"
                            }
                          ],
                          "flow": "vertical",
                          "align": "left",
                          "verticalAlign": "top",
                          "collapsible": false,
                          "defaultCollapsed": false,
                          "title": "",
                          "titleStyle": "default"
                        },
                        {
                          "key": "",
                          "colSpan": 1,
                          "rowSpan": 1,
                          "cssClass": "",
                          "role": 0,
                          "editRole": 0,
                          "permission": 0,
                          "tooltip": "",
                          "visibilityFormula": "",
                          "editableFormula": "",
                          "escapeHTML": false,
                          "type": "panel",
                          "contents": [
                            {
                              "key": "",
                              "colSpan": 1,
                              "rowSpan": 1,
                              "cssClass": "",
                              "role": 0,
                              "editRole": 0,
                              "permission": 0,
                              "tooltip": "",
                              "visibilityFormula": "",
                              "editableFormula": "",
                              "escapeHTML": false,
                              "type": "panel",
                              "contents": [
                                {
                                  "key": "",
                                  "colSpan": 1,
                                  "rowSpan": 1,
                                  "cssClass": "",
                                  "role": 0,
                                  "editRole": 0,
                                  "permission": 0,
                                  "tooltip": "",
                                  "visibilityFormula": "",
                                  "editableFormula": "",
                                  "escapeHTML": false,
                                  "type": "panel",
                                  "contents": [
                                    {
                                      "key": "",
                                      "colSpan": 1,
                                      "rowSpan": 1,
                                      "cssClass": "",
                                      "role": 0,
                                      "editRole": 0,
                                      "permission": 0,
                                      "tooltip": "",
                                      "visibilityFormula": "",
                                      "editableFormula": "",
                                      "escapeHTML": false,
                                      "type": "panel",
                                      "contents": [
                                        {
                                          "key": "",
                                          "colSpan": 1,
                                          "rowSpan": 1,
                                          "cssClass": "",
                                          "role": 0,
                                          "editRole": 0,
                                          "permission": 0,
                                          "tooltip": "",
                                          "visibilityFormula": "",
                                          "editableFormula": "",
                                          "escapeHTML": false,
                                          "type": "label",
                                          "size": "small",
                                          "icon": "",
                                          "value": "STUN\n(MAX)",
                                          "prefix": "",
                                          "suffix": "",
                                          "rollMessage": "",
                                          "altRollMessage": "",
                                          "rollMessageToChat": true,
                                          "altRollMessageToChat": true,
                                          "style": "subtitle"
                                        }
                                      ],
                                      "flow": "vertical",
                                      "align": "left",
                                      "verticalAlign": "top",
                                      "collapsible": false,
                                      "defaultCollapsed": false,
                                      "title": "",
                                      "titleStyle": "default"
                                    },
                                    {
                                      "key": "",
                                      "colSpan": 1,
                                      "rowSpan": 1,
                                      "cssClass": "",
                                      "role": 0,
                                      "editRole": 0,
                                      "permission": 0,
                                      "tooltip": "",
                                      "visibilityFormula": "",
                                      "editableFormula": "",
                                      "escapeHTML": false,
                                      "type": "panel",
                                      "contents": [
                                        {
                                          "key": "stunMax",
                                          "colSpan": 1,
                                          "rowSpan": 1,
                                          "cssClass": "",
                                          "role": 0,
                                          "editRole": 0,
                                          "permission": 0,
                                          "tooltip": "",
                                          "visibilityFormula": "",
                                          "editableFormula": "",
                                          "escapeHTML": false,
                                          "type": "label",
                                          "size": "x-small",
                                          "icon": "",
                                          "value": "${sum(\n  6,\n  ((WIL - (WIL % 2)) / 2)\n)}$\n",
                                          "prefix": "",
                                          "suffix": "",
                                          "rollMessage": "",
                                          "altRollMessage": "",
                                          "rollMessageToChat": true,
                                          "altRollMessageToChat": true,
                                          "style": "title"
                                        }
                                      ],
                                      "flow": "grid-2",
                                      "align": "right",
                                      "verticalAlign": "top",
                                      "collapsible": false,
                                      "defaultCollapsed": false,
                                      "title": "",
                                      "titleStyle": "default"
                                    },
                                    {
                                      "key": "",
                                      "colSpan": 1,
                                      "rowSpan": 1,
                                      "cssClass": "",
                                      "role": 0,
                                      "editRole": 0,
                                      "permission": 0,
                                      "tooltip": "",
                                      "visibilityFormula": "",
                                      "editableFormula": "",
                                      "escapeHTML": false,
                                      "type": "panel",
                                      "contents": [],
                                      "flow": "vertical",
                                      "align": "left",
                                      "verticalAlign": "top",
                                      "collapsible": false,
                                      "defaultCollapsed": false,
                                      "title": "",
                                      "titleStyle": "default"
                                    }
                                  ],
                                  "flow": "grid-3",
                                  "align": "left",
                                  "verticalAlign": "top",
                                  "collapsible": false,
                                  "defaultCollapsed": false,
                                  "title": "",
                                  "titleStyle": "default"
                                }
                              ],
                              "flow": "horizontal",
                              "align": "left",
                              "verticalAlign": "top",
                              "collapsible": false,
                              "defaultCollapsed": false,
                              "title": "",
                              "titleStyle": "default"
                            },
                            {
                              "key": "",
                              "colSpan": 1,
                              "rowSpan": 1,
                              "cssClass": "",
                              "role": 0,
                              "editRole": 0,
                              "permission": 0,
                              "tooltip": "",
                              "visibilityFormula": "",
                              "editableFormula": "",
                              "escapeHTML": false,
                              "type": "panel",
                              "contents": [
                                {
                                  "key": "stunCur",
                                  "colSpan": 1,
                                  "rowSpan": 1,
                                  "cssClass": "",
                                  "role": 0,
                                  "editRole": 0,
                                  "permission": 0,
                                  "tooltip": "",
                                  "visibilityFormula": "",
                                  "editableFormula": "",
                                  "escapeHTML": false,
                                  "type": "numberField",
                                  "size": "medium",
                                  "label": "Current Stun:",
                                  "defaultValue": "",
                                  "allowDecimal": false,
                                  "minVal": "0",
                                  "maxVal": "${stunMax}$",
                                  "allowRelative": false,
                                  "showControls": true,
                                  "controlsStyle": "hover",
                                  "controlsCustomIncrements": "",
                                  "inputStyle": "text"
                                },
                                {
                                  "key": "deathSpiral",
                                  "colSpan": 1,
                                  "rowSpan": 1,
                                  "cssClass": "",
                                  "role": 0,
                                  "editRole": 0,
                                  "permission": 0,
                                  "tooltip": "",
                                  "visibilityFormula": "",
                                  "editableFormula": "",
                                  "escapeHTML": false,
                                  "type": "label",
                                  "size": "full-size",
                                  "icon": "",
                                  "value": "Death Spiral (to be coded)",
                                  "prefix": "",
                                  "suffix": "",
                                  "rollMessage": "",
                                  "altRollMessage": "",
                                  "rollMessageToChat": true,
                                  "altRollMessageToChat": true,
                                  "style": "label"
                                }
                              ],
                              "flow": "grid-2",
                              "align": "left",
                              "verticalAlign": "top",
                              "collapsible": false,
                              "defaultCollapsed": false,
                              "title": "",
                              "titleStyle": "default"
                            }
                          ],
                          "flow": "vertical",
                          "align": "left",
                          "verticalAlign": "top",
                          "collapsible": false,
                          "defaultCollapsed": false,
                          "title": "",
                          "titleStyle": "default"
                        },
                        {
                          "key": "",
                          "colSpan": 1,
                          "rowSpan": 1,
                          "cssClass": "",
                          "role": 0,
                          "editRole": 0,
                          "permission": 0,
                          "tooltip": "",
                          "visibilityFormula": "",
                          "editableFormula": "",
                          "escapeHTML": false,
                          "type": "panel",
                          "contents": [
                            {
                              "key": "Stun_Meter",
                              "colSpan": 1,
                              "rowSpan": 1,
                              "cssClass": "",
                              "role": 0,
                              "editRole": 0,
                              "permission": 0,
                              "tooltip": "",
                              "visibilityFormula": "",
                              "editableFormula": "",
                              "escapeHTML": false,
                              "type": "meter",
                              "size": "full-size",
                              "label": "",
                              "value": "${stunCur}$",
                              "min": "0",
                              "max": "${stunMax}$",
                              "low": "${stunMax * 0.25}$",
                              "high": "${stunMax * 0.5}$",
                              "optimum": "${stunMax}$",
                              "textOption": "none"
                            }
                          ],
                          "flow": "vertical",
                          "align": "left",
                          "verticalAlign": "top",
                          "collapsible": false,
                          "defaultCollapsed": false,
                          "title": "",
                          "titleStyle": "default"
                        }
                      ],
                      "flow": "vertical",
                      "align": "left",
                      "verticalAlign": "top",
                      "collapsible": false,
                      "defaultCollapsed": false,
                      "title": "",
                      "titleStyle": "default"
                    }
                  ],
                  "flow": "horizontal",
                  "align": "left",
                  "verticalAlign": "top",
                  "collapsible": false,
                  "defaultCollapsed": false,
                  "title": "",
                  "titleStyle": "default"
                }
              ],
              "flow": "horizontal",
              "align": "left",
              "verticalAlign": "top",
              "collapsible": true,
              "defaultCollapsed": false,
              "title": "Attributes",
              "titleStyle": "title"
            },
            {
              "key": "poolControlpanel",
              "colSpan": 1,
              "rowSpan": 1,
              "cssClass": "",
              "role": 0,
              "editRole": 0,
              "permission": 0,
              "tooltip": "",
              "visibilityFormula": "",
              "editableFormula": "",
              "escapeHTML": false,
              "type": "panel",
              "contents": [
                {
                  "key": "",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "label",
                  "size": "full-size",
                  "icon": "recycle",
                  "value": "Refresh Pools",
                  "prefix": "",
                  "suffix": "",
                  "rollMessage": "%{\n  const doc = linkedEntity ?? entity ?? rollActor ?? actor ?? null;\n\n  // Resolve the actorUuid from the most reliable sources first.\n  const actorUuid = String(\n    (doc?.documentName === \"Actor\" ? doc.uuid : \"\") ||\n    (doc?.parent?.documentName === \"Actor\" ? doc.parent.uuid : \"\") ||\n    rollActor?.uuid ||\n    actor?.uuid ||\n    canvas?.tokens?.controlled?.[0]?.actor?.uuid ||\n    game.user?.character?.uuid ||\n    \"\"\n  ).trim();\n\n  if (!actorUuid) {\n    console.warn(\"SinlessCSB | refreshPools: missing actorUuid\", { linkedEntity, entity, rollActor, actor, doc });\n    ui.notifications?.warn?.(\"SinlessCSB: refreshPools missing actorUuid (check button context).\");\n    return \"\";\n  }\n\n  const api = game.modules.get(\"sinlesscsb\")?.api;\n  if (typeof api?.refreshPools !== \"function\") {\n    console.warn(\"SinlessCSB | refreshPools: API not available\", { apiKeys: Object.keys(api ?? {}) });\n    ui.notifications?.error?.(\"SinlessCSB: refreshPools API not available (module not ready / not exposed?).\");\n    return \"\";\n  }\n\n  console.log(\"SinlessCSB | refreshPools button\", { actorUuid, docName: doc?.name, docType: doc?.documentName });\n  api.refreshPools({ actorUuid });\n\n  return \"\";\n}%\n",
                  "altRollMessage": "",
                  "rollMessageToChat": false,
                  "altRollMessageToChat": false,
                  "style": "button"
                },
                {
                  "key": "",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "label",
                  "size": "full-size",
                  "icon": "dice",
                  "value": "Pool Roll",
                  "prefix": "",
                  "suffix": "",
                  "rollMessage": "%{\n  const doc = linkedEntity ?? entity ?? rollActor ?? actor ?? null;\n\n  // Resolve the actorUuid from the most reliable sources first.\n  const actorUuid = String(\n    (doc?.documentName === \"Actor\" ? doc.uuid : \"\") ||\n    (doc?.parent?.documentName === \"Actor\" ? doc.parent.uuid : \"\") ||\n    rollActor?.uuid ||\n    actor?.uuid ||\n    canvas?.tokens?.controlled?.[0]?.actor?.uuid ||\n    game.user?.character?.uuid ||\n    \"\"\n  ).trim();\n\n  if (!actorUuid) {\n    console.warn(\"SinlessCSB | rollPools: missing actorUuid\", { linkedEntity, entity, rollActor, actor, doc });\n    ui.notifications?.warn?.(\"SinlessCSB: rollPools missing actorUuid (check button context).\");\n    return \"\";\n  }\n\n  const api = game.modules.get(\"sinlesscsb\")?.api;\n  if (typeof api?.rollPools !== \"function\") {\n    console.warn(\"SinlessCSB | rollPools: API not available\", { apiKeys: Object.keys(api ?? {}) });\n    ui.notifications?.error?.(\"SinlessCSB: rollPools API not available (module not ready / not exposed?).\");\n    return \"\";\n  }\n\n  console.log(\"SinlessCSB | rollPools button\", { actorUuid, docName: doc?.name, docType: doc?.documentName });\n  api.rollPools({ actorUuid });\n\n  return \"\";\n}%\n",
                  "altRollMessage": "",
                  "rollMessageToChat": false,
                  "altRollMessageToChat": false,
                  "style": "button"
                },
                {
                  "key": "",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "label",
                  "size": "full-size",
                  "icon": "gun",
                  "value": "Roll Initiative",
                  "prefix": "",
                  "suffix": "",
                  "rollMessage": "%{\n  const doc = linkedEntity ?? entity;\n\n  // doc may be Actor, TokenDocument, or something whose parent is Actor\n  const actorUuid =\n    String(doc?.uuid ?? \"\")?.startsWith(\"Actor.\") ? String(doc.uuid) :\n    String(doc?.actor?.uuid ?? \"\") ||\n    String(doc?.parent?.uuid ?? \"\");\n\n  if (!actorUuid) {\n    ui.notifications?.warn(\"Roll Initiative: no actor context (linkedEntity/entity missing).\");\n    return \"\";\n  }\n\n  game.modules.get(\"sinlesscsb\")?.api?.rollInitiative?.({ actorUuid });\n  return \"\";\n}%\n\n",
                  "altRollMessage": "",
                  "rollMessageToChat": false,
                  "altRollMessageToChat": false,
                  "style": "button"
                },
                {
                  "key": "",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "label",
                  "size": "full-size",
                  "icon": "plus",
                  "value": "Full Heal",
                  "prefix": "",
                  "suffix": "",
                  "rollMessage": "%{\n  (async () => {\n    const propsPath = (k) => `system.props.${k}`;\n\n    const num = (x, fallback = 0) => {\n      const n = Number(x);\n      return Number.isFinite(n) ? n : fallback;\n    };\n\n    const escapeHTML = (s) => String(s ?? \"\")\n      .replaceAll(\"&\", \"&amp;\")\n      .replaceAll(\"<\", \"&lt;\")\n      .replaceAll(\">\", \"&gt;\")\n      .replaceAll('\"', \"&quot;\")\n      .replaceAll(\"'\", \"&#039;\");\n\n    // 1) Prefer injected sheet actor if available\n    let scopeActor =\n      (typeof actor !== \"undefined\" && actor?.documentName === \"Actor\") ? actor : null;\n\n    // 2) If not, resolve from CSB-stored actorUuid like \"Actor.eMbezua6UThIStwT\"\n    if (!scopeActor) {\n      const au =\n        (typeof actorUuid !== \"undefined\" && actorUuid) ? String(actorUuid).trim() : \"\";\n\n      if (au) {\n        try {\n          const doc = await fromUuid(au);\n          if (doc?.documentName === \"Actor\") scopeActor = doc;\n        } catch (_e) {}\n      }\n    }\n\n    // 3) Only if neither sheet actor nor actorUuid works, fall back to token/target/character\n    if (!scopeActor) {\n      const controlledActor = canvas?.tokens?.controlled?.[0]?.actor ?? null;\n      const targetedActor = (() => {\n        const t = game.user?.targets ? Array.from(game.user.targets)[0] : null;\n        return t?.actor ?? null;\n      })();\n\n      scopeActor = controlledActor || targetedActor || game.user?.character || null;\n    }\n\n    if (!scopeActor) {\n      ui.notifications?.warn?.(\"Full Heal: No actor context. Open a sheet or control/target a token.\");\n      return;\n    }\n\n    const props = scopeActor.system?.props ?? {};\n    const physicalMax = Math.max(0, Math.floor(num(props.physicalMax, 0)));\n    const stunMax     = Math.max(0, Math.floor(num(props.stunMax, 0)));\n\n    await scopeActor.update({\n      [propsPath(\"physicalCur\")]: physicalMax,\n      [propsPath(\"stunCur\")]: stunMax\n    });\n\n    ui.notifications?.info?.(`Healed ${scopeActor.name}: Physical ${physicalMax}, Stun ${stunMax}.`);\n\n    await ChatMessage.create({\n      speaker: ChatMessage.getSpeaker({ actor: scopeActor }),\n      content: `\n        <div class=\"sinlesscsb item-roll-card\">\n          <h3 style=\"margin:0 0 6px 0;\">Full Heal</h3>\n          <p style=\"margin:0 0 6px 0;\"><strong>Actor:</strong> ${escapeHTML(scopeActor.name)}</p>\n          <p style=\"margin:0 0 6px 0;\"><strong>Physical:</strong> set to ${escapeHTML(physicalMax)}</p>\n          <p style=\"margin:0 0 6px 0;\"><strong>Stun:</strong> set to ${escapeHTML(stunMax)}</p>\n        </div>\n      `\n    });\n  })();\n\n  return \"\";\n}%\n\n",
                  "altRollMessage": "",
                  "rollMessageToChat": true,
                  "altRollMessageToChat": true,
                  "style": "button"
                }
              ],
              "flow": "grid-4",
              "align": "center",
              "verticalAlign": "top",
              "collapsible": false,
              "defaultCollapsed": false,
              "title": "",
              "titleStyle": "default"
            },
            {
              "key": "masterActionpanel",
              "colSpan": 1,
              "rowSpan": 1,
              "cssClass": "",
              "role": 0,
              "editRole": 0,
              "permission": 0,
              "tooltip": "",
              "visibilityFormula": "",
              "editableFormula": "",
              "escapeHTML": false,
              "type": "tabbedPanel",
              "contents": [
                {
                  "key": "poolstab",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "tab",
                  "contents": [
                    {
                      "key": "",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "panel",
                      "contents": [
                        {
                          "key": "",
                          "colSpan": 1,
                          "rowSpan": 1,
                          "cssClass": "",
                          "role": 0,
                          "editRole": 0,
                          "permission": 0,
                          "tooltip": "",
                          "visibilityFormula": "",
                          "editableFormula": "",
                          "escapeHTML": false,
                          "type": "panel",
                          "contents": [],
                          "flow": "vertical",
                          "align": "center",
                          "verticalAlign": "top",
                          "collapsible": false,
                          "defaultCollapsed": true,
                          "title": "",
                          "titleStyle": "default"
                        },
                        {
                          "key": "pools_skills",
                          "colSpan": 1,
                          "rowSpan": 1,
                          "cssClass": "",
                          "role": 0,
                          "editRole": 0,
                          "permission": 0,
                          "tooltip": "",
                          "visibilityFormula": "",
                          "editableFormula": "",
                          "escapeHTML": false,
                          "type": "panel",
                          "contents": [
                            {
                              "key": "Pools",
                              "colSpan": 1,
                              "rowSpan": 1,
                              "cssClass": "",
                              "role": 0,
                              "editRole": 0,
                              "permission": 0,
                              "tooltip": "",
                              "visibilityFormula": "",
                              "editableFormula": "",
                              "escapeHTML": false,
                              "type": "panel",
                              "contents": [
                                {
                                  "key": "Brawn_Panel",
                                  "colSpan": 1,
                                  "rowSpan": 1,
                                  "cssClass": "",
                                  "role": 0,
                                  "editRole": 0,
                                  "permission": 0,
                                  "tooltip": "",
                                  "visibilityFormula": "",
                                  "editableFormula": "",
                                  "escapeHTML": false,
                                  "type": "panel",
                                  "contents": [
                                    {
                                      "key": "",
                                      "colSpan": 1,
                                      "rowSpan": 1,
                                      "cssClass": "",
                                      "role": 0,
                                      "editRole": 0,
                                      "permission": 0,
                                      "tooltip": "",
                                      "visibilityFormula": "",
                                      "editableFormula": "",
                                      "escapeHTML": false,
                                      "type": "panel",
                                      "contents": [
                                        {
                                          "key": "",
                                          "colSpan": 1,
                                          "rowSpan": 1,
                                          "cssClass": "",
                                          "role": 0,
                                          "editRole": 0,
                                          "permission": 0,
                                          "tooltip": "",
                                          "visibilityFormula": "",
                                          "editableFormula": "",
                                          "escapeHTML": false,
                                          "type": "label",
                                          "size": "small",
                                          "icon": "",
                                          "value": "Brawn Pool   [SOAK]",
                                          "prefix": "",
                                          "suffix": "",
                                          "rollMessage": "",
                                          "altRollMessage": "",
                                          "rollMessageToChat": true,
                                          "altRollMessageToChat": true,
                                          "style": "subtitle"
                                        },
                                        {
                                          "key": "Brawn_Max",
                                          "colSpan": 1,
                                          "rowSpan": 1,
                                          "cssClass": "",
                                          "role": 0,
                                          "editRole": 0,
                                          "permission": 0,
                                          "tooltip": "",
                                          "visibilityFormula": "",
                                          "editableFormula": "",
                                          "escapeHTML": false,
                                          "type": "label",
                                          "size": "m-small",
                                          "icon": "",
                                          "value": "${sum(\n  STR,\n  ((BOD - (BOD % 2)) / 2),\n  ((WIL - (WIL % 4)) / 4),\n  (chaQuarterPoolN == 1 ? ((CHA - (CHA % 4)) / 4) : 0)\n)}$\n",
                                          "prefix": "",
                                          "suffix": "",
                                          "rollMessage": "",
                                          "altRollMessage": "",
                                          "rollMessageToChat": true,
                                          "altRollMessageToChat": true,
                                          "style": "subtitle"
                                        }
                                      ],
                                      "flow": "horizontal",
                                      "align": "center",
                                      "verticalAlign": "top",
                                      "collapsible": false,
                                      "defaultCollapsed": false,
                                      "title": "",
                                      "titleStyle": "default"
                                    },
                                    {
                                      "key": "Brawn_Cur",
                                      "colSpan": 1,
                                      "rowSpan": 1,
                                      "cssClass": "",
                                      "role": 0,
                                      "editRole": 3,
                                      "permission": 0,
                                      "tooltip": "",
                                      "visibilityFormula": "",
                                      "editableFormula": "",
                                      "escapeHTML": false,
                                      "type": "numberField",
                                      "size": "medium",
                                      "label": "Brawn Current",
                                      "defaultValue": "0",
                                      "allowDecimal": false,
                                      "minVal": "",
                                      "maxVal": "",
                                      "allowRelative": false,
                                      "showControls": true,
                                      "controlsStyle": "hover",
                                      "controlsCustomIncrements": "-1,1",
                                      "inputStyle": "text"
                                    }
                                  ],
                                  "flow": "vertical",
                                  "align": "left",
                                  "verticalAlign": "top",
                                  "collapsible": false,
                                  "defaultCollapsed": false,
                                  "title": "Brawn",
                                  "titleStyle": "default"
                                },
                                {
                                  "key": "Brawn_Skills",
                                  "colSpan": 1,
                                  "rowSpan": 1,
                                  "cssClass": "",
                                  "role": 0,
                                  "editRole": 0,
                                  "permission": 0,
                                  "tooltip": "",
                                  "visibilityFormula": "",
                                  "editableFormula": "",
                                  "escapeHTML": false,
                                  "type": "panel",
                                  "contents": [
                                    {
                                      "key": "Skill_Athletics",
                                      "colSpan": 1,
                                      "rowSpan": 1,
                                      "cssClass": "",
                                      "role": 0,
                                      "editRole": 0,
                                      "permission": 0,
                                      "tooltip": "",
                                      "visibilityFormula": "",
                                      "editableFormula": "",
                                      "escapeHTML": false,
                                      "type": "numberField",
                                      "size": "medium",
                                      "label": "Athletics",
                                      "defaultValue": "0",
                                      "allowDecimal": false,
                                      "minVal": "0",
                                      "maxVal": "",
                                      "allowRelative": false,
                                      "showControls": true,
                                      "controlsStyle": "hover",
                                      "controlsCustomIncrements": "-1,1",
                                      "inputStyle": "text"
                                    },
                                    {
                                      "key": "Skill_CyberCombat",
                                      "colSpan": 1,
                                      "rowSpan": 1,
                                      "cssClass": "",
                                      "role": 0,
                                      "editRole": 0,
                                      "permission": 0,
                                      "tooltip": "",
                                      "visibilityFormula": "",
                                      "editableFormula": "",
                                      "escapeHTML": false,
                                      "type": "numberField",
                                      "size": "medium",
                                      "label": "Cyber Combat",
                                      "defaultValue": "0",
                                      "allowDecimal": false,
                                      "minVal": "0",
                                      "maxVal": "",
                                      "allowRelative": false,
                                      "showControls": true,
                                      "controlsStyle": "hover",
                                      "controlsCustomIncrements": "-1,1",
                                      "inputStyle": "text"
                                    },
                                    {
                                      "key": "Skill_MartialArts",
                                      "colSpan": 1,
                                      "rowSpan": 1,
                                      "cssClass": "",
                                      "role": 0,
                                      "editRole": 0,
                                      "permission": 0,
                                      "tooltip": "",
                                      "visibilityFormula": "",
                                      "editableFormula": "",
                                      "escapeHTML": false,
                                      "type": "numberField",
                                      "size": "medium",
                                      "label": "Martial Arts",
                                      "defaultValue": "0",
                                      "allowDecimal": false,
                                      "minVal": "0",
                                      "maxVal": "",
                                      "allowRelative": false,
                                      "showControls": true,
                                      "controlsStyle": "hover",
                                      "controlsCustomIncrements": "-1,1",
                                      "inputStyle": "text"
                                    },
                                    {
                                      "key": "Skill_MeleeWeapons",
                                      "colSpan": 1,
                                      "rowSpan": 1,
                                      "cssClass": "",
                                      "role": 0,
                                      "editRole": 0,
                                      "permission": 0,
                                      "tooltip": "Melee Weapons",
                                      "visibilityFormula": "",
                                      "editableFormula": "",
                                      "escapeHTML": false,
                                      "type": "numberField",
                                      "size": "medium",
                                      "label": "Melee Wpns",
                                      "defaultValue": "0",
                                      "allowDecimal": false,
                                      "minVal": "0",
                                      "maxVal": "",
                                      "allowRelative": false,
                                      "showControls": true,
                                      "controlsStyle": "hover",
                                      "controlsCustomIncrements": "-1,1",
                                      "inputStyle": "text"
                                    },
                                    {
                                      "key": "Skill_ThrowingWeapons",
                                      "colSpan": 1,
                                      "rowSpan": 1,
                                      "cssClass": "",
                                      "role": 0,
                                      "editRole": 0,
                                      "permission": 0,
                                      "tooltip": "Thrown Weapons",
                                      "visibilityFormula": "",
                                      "editableFormula": "",
                                      "escapeHTML": false,
                                      "type": "numberField",
                                      "size": "medium",
                                      "label": "Thrown Wpns",
                                      "defaultValue": "0",
                                      "allowDecimal": false,
                                      "minVal": "0",
                                      "maxVal": "",
                                      "allowRelative": false,
                                      "showControls": true,
                                      "controlsStyle": "hover",
                                      "controlsCustomIncrements": "-1,1",
                                      "inputStyle": "text"
                                    },
                                    {
                                      "key": "Skill_UnarmedCombat",
                                      "colSpan": 1,
                                      "rowSpan": 1,
                                      "cssClass": "",
                                      "role": 0,
                                      "editRole": 0,
                                      "permission": 0,
                                      "tooltip": "Unarmed Combat",
                                      "visibilityFormula": "",
                                      "editableFormula": "",
                                      "escapeHTML": false,
                                      "type": "numberField",
                                      "size": "medium",
                                      "label": "Unarmed Cmbt",
                                      "defaultValue": "0",
                                      "allowDecimal": false,
                                      "minVal": "0",
                                      "maxVal": "",
                                      "allowRelative": false,
                                      "showControls": true,
                                      "controlsStyle": "hover",
                                      "controlsCustomIncrements": "-1,1",
                                      "inputStyle": "text"
                                    }
                                  ],
                                  "flow": "vertical",
                                  "align": "left",
                                  "verticalAlign": "top",
                                  "collapsible": false,
                                  "defaultCollapsed": false,
                                  "title": "",
                                  "titleStyle": "default"
                                }
                              ],
                              "flow": "vertical",
                              "align": "left",
                              "verticalAlign": "top",
                              "collapsible": false,
                              "defaultCollapsed": false,
                              "title": "Dice Pools",
                              "titleStyle": "default"
                            },
                            {
                              "key": "Finesse",
                              "colSpan": 1,
                              "rowSpan": 1,
                              "cssClass": "",
                              "role": 0,
                              "editRole": 0,
                              "permission": 0,
                              "tooltip": "",
                              "visibilityFormula": "",
                              "editableFormula": "",
                              "escapeHTML": false,
                              "type": "panel",
                              "contents": [
                                {
                                  "key": "Finesse_Panel",
                                  "colSpan": 1,
                                  "rowSpan": 1,
                                  "cssClass": "",
                                  "role": 0,
                                  "editRole": 0,
                                  "permission": 0,
                                  "tooltip": "",
                                  "visibilityFormula": "",
                                  "editableFormula": "",
                                  "escapeHTML": false,
                                  "type": "panel",
                                  "contents": [
                                    {
                                      "key": "",
                                      "colSpan": 1,
                                      "rowSpan": 1,
                                      "cssClass": "",
                                      "role": 0,
                                      "editRole": 0,
                                      "permission": 0,
                                      "tooltip": "",
                                      "visibilityFormula": "",
                                      "editableFormula": "",
                                      "escapeHTML": false,
                                      "type": "panel",
                                      "contents": [
                                        {
                                          "key": "",
                                          "colSpan": 1,
                                          "rowSpan": 1,
                                          "cssClass": "",
                                          "role": 0,
                                          "editRole": 0,
                                          "permission": 0,
                                          "tooltip": "",
                                          "visibilityFormula": "",
                                          "editableFormula": "",
                                          "escapeHTML": false,
                                          "type": "label",
                                          "size": "small",
                                          "icon": "",
                                          "value": "Finesse Pool   [Dodge]",
                                          "prefix": "",
                                          "suffix": "",
                                          "rollMessage": "",
                                          "altRollMessage": "",
                                          "rollMessageToChat": true,
                                          "altRollMessageToChat": true,
                                          "style": "subtitle"
                                        },
                                        {
                                          "key": "Finesse_Max",
                                          "colSpan": 1,
                                          "rowSpan": 1,
                                          "cssClass": "",
                                          "role": 0,
                                          "editRole": 0,
                                          "permission": 0,
                                          "tooltip": "",
                                          "visibilityFormula": "",
                                          "editableFormula": "",
                                          "escapeHTML": false,
                                          "type": "label",
                                          "size": "small",
                                          "icon": "",
                                          "value": "${sum(\n  REA,\n  ((BOD - (BOD % 2)) / 2),\n  ((INT - (INT % 4)) / 4),\n  (chaQuarterPoolN == 2 ? ((CHA - (CHA % 4)) / 4) : 0)\n)}$\n\n\n",
                                          "prefix": "",
                                          "suffix": "",
                                          "rollMessage": "",
                                          "altRollMessage": "",
                                          "rollMessageToChat": false,
                                          "altRollMessageToChat": false,
                                          "style": "subtitle"
                                        }
                                      ],
                                      "flow": "horizontal",
                                      "align": "center",
                                      "verticalAlign": "top",
                                      "collapsible": false,
                                      "defaultCollapsed": false,
                                      "title": "",
                                      "titleStyle": "default"
                                    },
                                    {
                                      "key": "Finesse_Cur",
                                      "colSpan": 1,
                                      "rowSpan": 1,
                                      "cssClass": "",
                                      "role": 0,
                                      "editRole": 0,
                                      "permission": 0,
                                      "tooltip": "",
                                      "visibilityFormula": "",
                                      "editableFormula": "",
                                      "escapeHTML": false,
                                      "type": "numberField",
                                      "size": "medium",
                                      "label": "Finesse Current",
                                      "defaultValue": "0",
                                      "allowDecimal": false,
                                      "minVal": "",
                                      "maxVal": "",
                                      "allowRelative": false,
                                      "showControls": true,
                                      "controlsStyle": "hover",
                                      "controlsCustomIncrements": "",
                                      "inputStyle": "text"
                                    }
                                  ],
                                  "flow": "vertical",
                                  "align": "left",
                                  "verticalAlign": "top",
                                  "collapsible": false,
                                  "defaultCollapsed": false,
                                  "title": "Finesse",
                                  "titleStyle": "default"
                                },
                                {
                                  "key": "Finesse_Skills",
                                  "colSpan": 1,
                                  "rowSpan": 1,
                                  "cssClass": "",
                                  "role": 0,
                                  "editRole": 0,
                                  "permission": 0,
                                  "tooltip": "",
                                  "visibilityFormula": "",
                                  "editableFormula": "",
                                  "escapeHTML": false,
                                  "type": "panel",
                                  "contents": [
                                    {
                                      "key": "Skill_Archery",
                                      "colSpan": 1,
                                      "rowSpan": 1,
                                      "cssClass": "",
                                      "role": 0,
                                      "editRole": 0,
                                      "permission": 0,
                                      "tooltip": "",
                                      "visibilityFormula": "",
                                      "editableFormula": "",
                                      "escapeHTML": false,
                                      "type": "numberField",
                                      "size": "medium",
                                      "label": "Archery",
                                      "defaultValue": "0",
                                      "allowDecimal": false,
                                      "minVal": "0",
                                      "maxVal": "",
                                      "allowRelative": false,
                                      "showControls": true,
                                      "controlsStyle": "hover",
                                      "controlsCustomIncrements": "-1,1",
                                      "inputStyle": "text"
                                    },
                                    {
                                      "key": "Skill_ArticulatedManeuvers",
                                      "colSpan": 1,
                                      "rowSpan": 1,
                                      "cssClass": "",
                                      "role": 0,
                                      "editRole": 0,
                                      "permission": 0,
                                      "tooltip": "",
                                      "visibilityFormula": "",
                                      "editableFormula": "",
                                      "escapeHTML": false,
                                      "type": "numberField",
                                      "size": "medium",
                                      "label": "Artic. Mnvrs",
                                      "defaultValue": "0",
                                      "allowDecimal": false,
                                      "minVal": "0",
                                      "maxVal": "",
                                      "allowRelative": false,
                                      "showControls": true,
                                      "controlsStyle": "hover",
                                      "controlsCustomIncrements": "-1,1",
                                      "inputStyle": "text"
                                    },
                                    {
                                      "key": "Skill_EnergyWeapons",
                                      "colSpan": 1,
                                      "rowSpan": 1,
                                      "cssClass": "",
                                      "role": 0,
                                      "editRole": 0,
                                      "permission": 0,
                                      "tooltip": "Energy Weapons",
                                      "visibilityFormula": "",
                                      "editableFormula": "",
                                      "escapeHTML": false,
                                      "type": "numberField",
                                      "size": "medium",
                                      "label": "Energy Wpns",
                                      "defaultValue": "0",
                                      "allowDecimal": false,
                                      "minVal": "0",
                                      "maxVal": "",
                                      "allowRelative": false,
                                      "showControls": true,
                                      "controlsStyle": "hover",
                                      "controlsCustomIncrements": "-1,1",
                                      "inputStyle": "text"
                                    },
                                    {
                                      "key": "Skill_Firearms",
                                      "colSpan": 1,
                                      "rowSpan": 1,
                                      "cssClass": "",
                                      "role": 0,
                                      "editRole": 0,
                                      "permission": 0,
                                      "tooltip": "",
                                      "visibilityFormula": "",
                                      "editableFormula": "",
                                      "escapeHTML": false,
                                      "type": "numberField",
                                      "size": "medium",
                                      "label": "Firearms",
                                      "defaultValue": "0",
                                      "allowDecimal": false,
                                      "minVal": "0",
                                      "maxVal": "",
                                      "allowRelative": false,
                                      "showControls": true,
                                      "controlsStyle": "hover",
                                      "controlsCustomIncrements": "-1,1",
                                      "inputStyle": "text"
                                    },
                                    {
                                      "key": "Skill_Gunnery",
                                      "colSpan": 1,
                                      "rowSpan": 1,
                                      "cssClass": "",
                                      "role": 0,
                                      "editRole": 0,
                                      "permission": 0,
                                      "tooltip": "",
                                      "visibilityFormula": "",
                                      "editableFormula": "",
                                      "escapeHTML": false,
                                      "type": "numberField",
                                      "size": "medium",
                                      "label": "Gunnery",
                                      "defaultValue": "0",
                                      "allowDecimal": false,
                                      "minVal": "0",
                                      "maxVal": "",
                                      "allowRelative": false,
                                      "showControls": true,
                                      "controlsStyle": "hover",
                                      "controlsCustomIncrements": "-1,1",
                                      "inputStyle": "text"
                                    },
                                    {
                                      "key": "Skill_HeavyWeapons",
                                      "colSpan": 1,
                                      "rowSpan": 1,
                                      "cssClass": "",
                                      "role": 0,
                                      "editRole": 0,
                                      "permission": 0,
                                      "tooltip": "",
                                      "visibilityFormula": "",
                                      "editableFormula": "",
                                      "escapeHTML": false,
                                      "type": "numberField",
                                      "size": "medium",
                                      "label": "Heavy Weapons",
                                      "defaultValue": "0",
                                      "allowDecimal": false,
                                      "minVal": "0",
                                      "maxVal": "",
                                      "allowRelative": false,
                                      "showControls": true,
                                      "controlsStyle": "hover",
                                      "controlsCustomIncrements": "-1,1",
                                      "inputStyle": "text"
                                    }
                                  ],
                                  "flow": "vertical",
                                  "align": "left",
                                  "verticalAlign": "top",
                                  "collapsible": false,
                                  "defaultCollapsed": false,
                                  "title": "",
                                  "titleStyle": "default"
                                }
                              ],
                              "flow": "vertical",
                              "align": "left",
                              "verticalAlign": "top",
                              "collapsible": false,
                              "defaultCollapsed": false,
                              "title": "",
                              "titleStyle": "default"
                            },
                            {
                              "key": "Resolve",
                              "colSpan": 1,
                              "rowSpan": 1,
                              "cssClass": "",
                              "role": 0,
                              "editRole": 0,
                              "permission": 0,
                              "tooltip": "",
                              "visibilityFormula": "",
                              "editableFormula": "",
                              "escapeHTML": false,
                              "type": "panel",
                              "contents": [
                                {
                                  "key": "Resolve_Panel",
                                  "colSpan": 1,
                                  "rowSpan": 1,
                                  "cssClass": "",
                                  "role": 0,
                                  "editRole": 0,
                                  "permission": 0,
                                  "tooltip": "",
                                  "visibilityFormula": "",
                                  "editableFormula": "",
                                  "escapeHTML": false,
                                  "type": "panel",
                                  "contents": [
                                    {
                                      "key": "",
                                      "colSpan": 1,
                                      "rowSpan": 1,
                                      "cssClass": "",
                                      "role": 0,
                                      "editRole": 0,
                                      "permission": 0,
                                      "tooltip": "",
                                      "visibilityFormula": "",
                                      "editableFormula": "",
                                      "escapeHTML": false,
                                      "type": "panel",
                                      "contents": [
                                        {
                                          "key": "",
                                          "colSpan": 1,
                                          "rowSpan": 1,
                                          "cssClass": "",
                                          "role": 0,
                                          "editRole": 0,
                                          "permission": 0,
                                          "tooltip": "",
                                          "visibilityFormula": "",
                                          "editableFormula": "",
                                          "escapeHTML": false,
                                          "type": "label",
                                          "size": "small",
                                          "icon": "",
                                          "value": "Resolve Pool",
                                          "prefix": "",
                                          "suffix": "",
                                          "rollMessage": "",
                                          "altRollMessage": "",
                                          "rollMessageToChat": true,
                                          "altRollMessageToChat": true,
                                          "style": "subtitle"
                                        },
                                        {
                                          "key": "Resolve_Max",
                                          "colSpan": 1,
                                          "rowSpan": 1,
                                          "cssClass": "",
                                          "role": 0,
                                          "editRole": 0,
                                          "permission": 0,
                                          "tooltip": "",
                                          "visibilityFormula": "",
                                          "editableFormula": "",
                                          "escapeHTML": false,
                                          "type": "label",
                                          "size": "small",
                                          "icon": "",
                                          "value": "${sum(\n  WIL,\n  ((INT - (INT % 2)) / 2),\n  ((CHA - (CHA % 2)) / 2),\n  (chaQuarterPoolN == 3 ? ((CHA - (CHA % 4)) / 4) : 0)\n)}$\n\n",
                                          "prefix": "",
                                          "suffix": "",
                                          "rollMessage": "",
                                          "altRollMessage": "",
                                          "rollMessageToChat": false,
                                          "altRollMessageToChat": false,
                                          "style": "subtitle"
                                        }
                                      ],
                                      "flow": "horizontal",
                                      "align": "center",
                                      "verticalAlign": "top",
                                      "collapsible": false,
                                      "defaultCollapsed": false,
                                      "title": "",
                                      "titleStyle": "default"
                                    },
                                    {
                                      "key": "Resolve_Cur",
                                      "colSpan": 1,
                                      "rowSpan": 1,
                                      "cssClass": "",
                                      "role": 0,
                                      "editRole": 0,
                                      "permission": 0,
                                      "tooltip": "",
                                      "visibilityFormula": "",
                                      "editableFormula": "",
                                      "escapeHTML": false,
                                      "type": "numberField",
                                      "size": "medium",
                                      "label": "Resolve Current",
                                      "defaultValue": "0",
                                      "allowDecimal": false,
                                      "minVal": "",
                                      "maxVal": "",
                                      "allowRelative": false,
                                      "showControls": true,
                                      "controlsStyle": "hover",
                                      "controlsCustomIncrements": "",
                                      "inputStyle": "text"
                                    }
                                  ],
                                  "flow": "vertical",
                                  "align": "left",
                                  "verticalAlign": "top",
                                  "collapsible": false,
                                  "defaultCollapsed": false,
                                  "title": "Resolve",
                                  "titleStyle": "default"
                                },
                                {
                                  "key": "Resolve_Skills",
                                  "colSpan": 1,
                                  "rowSpan": 1,
                                  "cssClass": "",
                                  "role": 0,
                                  "editRole": 0,
                                  "permission": 0,
                                  "tooltip": "",
                                  "visibilityFormula": "",
                                  "editableFormula": "",
                                  "escapeHTML": false,
                                  "type": "panel",
                                  "contents": [
                                    {
                                      "key": "Skill_AstralSenses",
                                      "colSpan": 1,
                                      "rowSpan": 1,
                                      "cssClass": "",
                                      "role": 0,
                                      "editRole": 0,
                                      "permission": 0,
                                      "tooltip": "",
                                      "visibilityFormula": "",
                                      "editableFormula": "",
                                      "escapeHTML": false,
                                      "type": "numberField",
                                      "size": "medium",
                                      "label": "Astral Senses",
                                      "defaultValue": "0",
                                      "allowDecimal": false,
                                      "minVal": "0",
                                      "maxVal": "",
                                      "allowRelative": false,
                                      "showControls": true,
                                      "controlsStyle": "hover",
                                      "controlsCustomIncrements": "-1,1",
                                      "inputStyle": "text"
                                    },
                                    {
                                      "key": "Skill_Channeling",
                                      "colSpan": 1,
                                      "rowSpan": 1,
                                      "cssClass": "",
                                      "role": 0,
                                      "editRole": 0,
                                      "permission": 0,
                                      "tooltip": "",
                                      "visibilityFormula": "",
                                      "editableFormula": "",
                                      "escapeHTML": false,
                                      "type": "numberField",
                                      "size": "medium",
                                      "label": "Channeling",
                                      "defaultValue": "0",
                                      "allowDecimal": false,
                                      "minVal": "0",
                                      "maxVal": "",
                                      "allowRelative": false,
                                      "showControls": true,
                                      "controlsStyle": "hover",
                                      "controlsCustomIncrements": "-1,1",
                                      "inputStyle": "text"
                                    },
                                    {
                                      "key": "Skill_Coercion",
                                      "colSpan": 1,
                                      "rowSpan": 1,
                                      "cssClass": "",
                                      "role": 0,
                                      "editRole": 0,
                                      "permission": 0,
                                      "tooltip": "",
                                      "visibilityFormula": "",
                                      "editableFormula": "",
                                      "escapeHTML": false,
                                      "type": "numberField",
                                      "size": "medium",
                                      "label": "Coercion",
                                      "defaultValue": "0",
                                      "allowDecimal": false,
                                      "minVal": "0",
                                      "maxVal": "",
                                      "allowRelative": false,
                                      "showControls": true,
                                      "controlsStyle": "hover",
                                      "controlsCustomIncrements": "-1,1",
                                      "inputStyle": "text"
                                    },
                                    {
                                      "key": "Skill_Conjuring",
                                      "colSpan": 1,
                                      "rowSpan": 1,
                                      "cssClass": "",
                                      "role": 0,
                                      "editRole": 0,
                                      "permission": 0,
                                      "tooltip": "",
                                      "visibilityFormula": "",
                                      "editableFormula": "",
                                      "escapeHTML": false,
                                      "type": "numberField",
                                      "size": "medium",
                                      "label": "Conjuring",
                                      "defaultValue": "0",
                                      "allowDecimal": false,
                                      "minVal": "0",
                                      "maxVal": "",
                                      "allowRelative": false,
                                      "showControls": true,
                                      "controlsStyle": "hover",
                                      "controlsCustomIncrements": "-1,1",
                                      "inputStyle": "text"
                                    },
                                    {
                                      "key": "Skill_Fascination",
                                      "colSpan": 1,
                                      "rowSpan": 1,
                                      "cssClass": "",
                                      "role": 0,
                                      "editRole": 0,
                                      "permission": 0,
                                      "tooltip": "",
                                      "visibilityFormula": "",
                                      "editableFormula": "",
                                      "escapeHTML": false,
                                      "type": "numberField",
                                      "size": "medium",
                                      "label": "Fascination",
                                      "defaultValue": "0",
                                      "allowDecimal": false,
                                      "minVal": "0",
                                      "maxVal": "",
                                      "allowRelative": false,
                                      "showControls": true,
                                      "controlsStyle": "hover",
                                      "controlsCustomIncrements": "-1,1",
                                      "inputStyle": "text"
                                    },
                                    {
                                      "key": "Skill_Leadership",
                                      "colSpan": 1,
                                      "rowSpan": 1,
                                      "cssClass": "",
                                      "role": 0,
                                      "editRole": 0,
                                      "permission": 0,
                                      "tooltip": "",
                                      "visibilityFormula": "",
                                      "editableFormula": "",
                                      "escapeHTML": false,
                                      "type": "numberField",
                                      "size": "medium",
                                      "label": "Leadership",
                                      "defaultValue": "0",
                                      "allowDecimal": false,
                                      "minVal": "0",
                                      "maxVal": "",
                                      "allowRelative": false,
                                      "showControls": true,
                                      "controlsStyle": "hover",
                                      "controlsCustomIncrements": "-1,1",
                                      "inputStyle": "text"
                                    },
                                    {
                                      "key": "Skill_Sorcery",
                                      "colSpan": 1,
                                      "rowSpan": 1,
                                      "cssClass": "",
                                      "role": 0,
                                      "editRole": 0,
                                      "permission": 0,
                                      "tooltip": "",
                                      "visibilityFormula": "",
                                      "editableFormula": "",
                                      "escapeHTML": false,
                                      "type": "numberField",
                                      "size": "medium",
                                      "label": "Sorcery",
                                      "defaultValue": "0",
                                      "allowDecimal": false,
                                      "minVal": "0",
                                      "maxVal": "",
                                      "allowRelative": false,
                                      "showControls": true,
                                      "controlsStyle": "hover",
                                      "controlsCustomIncrements": "-1,1",
                                      "inputStyle": "text"
                                    },
                                    {
                                      "key": "Skill_Subterfuge",
                                      "colSpan": 1,
                                      "rowSpan": 1,
                                      "cssClass": "",
                                      "role": 0,
                                      "editRole": 0,
                                      "permission": 0,
                                      "tooltip": "",
                                      "visibilityFormula": "",
                                      "editableFormula": "",
                                      "escapeHTML": false,
                                      "type": "numberField",
                                      "size": "medium",
                                      "label": "Subterfuge",
                                      "defaultValue": "0",
                                      "allowDecimal": false,
                                      "minVal": "0",
                                      "maxVal": "",
                                      "allowRelative": false,
                                      "showControls": true,
                                      "controlsStyle": "hover",
                                      "controlsCustomIncrements": "-1,1",
                                      "inputStyle": "text"
                                    },
                                    {
                                      "key": "Skill_Survival",
                                      "colSpan": 1,
                                      "rowSpan": 1,
                                      "cssClass": "",
                                      "role": 0,
                                      "editRole": 0,
                                      "permission": 0,
                                      "tooltip": "",
                                      "visibilityFormula": "",
                                      "editableFormula": "",
                                      "escapeHTML": false,
                                      "type": "numberField",
                                      "size": "medium",
                                      "label": "Survival",
                                      "defaultValue": "0",
                                      "allowDecimal": false,
                                      "minVal": "0",
                                      "maxVal": "",
                                      "allowRelative": false,
                                      "showControls": true,
                                      "controlsStyle": "hover",
                                      "controlsCustomIncrements": "-1,1",
                                      "inputStyle": "text"
                                    }
                                  ],
                                  "flow": "vertical",
                                  "align": "left",
                                  "verticalAlign": "top",
                                  "collapsible": false,
                                  "defaultCollapsed": false,
                                  "title": "",
                                  "titleStyle": "default"
                                }
                              ],
                              "flow": "vertical",
                              "align": "left",
                              "verticalAlign": "top",
                              "collapsible": false,
                              "defaultCollapsed": false,
                              "title": "",
                              "titleStyle": "default"
                            },
                            {
                              "key": "Focus",
                              "colSpan": 1,
                              "rowSpan": 1,
                              "cssClass": "",
                              "role": 0,
                              "editRole": 0,
                              "permission": 0,
                              "tooltip": "",
                              "visibilityFormula": "",
                              "editableFormula": "",
                              "escapeHTML": false,
                              "type": "panel",
                              "contents": [
                                {
                                  "key": "Focus_Panel",
                                  "colSpan": 1,
                                  "rowSpan": 1,
                                  "cssClass": "",
                                  "role": 0,
                                  "editRole": 0,
                                  "permission": 0,
                                  "tooltip": "",
                                  "visibilityFormula": "",
                                  "editableFormula": "",
                                  "escapeHTML": false,
                                  "type": "panel",
                                  "contents": [
                                    {
                                      "key": "",
                                      "colSpan": 1,
                                      "rowSpan": 1,
                                      "cssClass": "",
                                      "role": 0,
                                      "editRole": 0,
                                      "permission": 0,
                                      "tooltip": "",
                                      "visibilityFormula": "",
                                      "editableFormula": "",
                                      "escapeHTML": false,
                                      "type": "panel",
                                      "contents": [
                                        {
                                          "key": "",
                                          "colSpan": 1,
                                          "rowSpan": 1,
                                          "cssClass": "",
                                          "role": 0,
                                          "editRole": 0,
                                          "permission": 0,
                                          "tooltip": "",
                                          "visibilityFormula": "",
                                          "editableFormula": "",
                                          "escapeHTML": false,
                                          "type": "label",
                                          "size": "small",
                                          "icon": "",
                                          "value": "Focus Pool",
                                          "prefix": "",
                                          "suffix": "",
                                          "rollMessage": "",
                                          "altRollMessage": "",
                                          "rollMessageToChat": true,
                                          "altRollMessageToChat": true,
                                          "style": "subtitle"
                                        },
                                        {
                                          "key": "Focus_Max",
                                          "colSpan": 1,
                                          "rowSpan": 1,
                                          "cssClass": "",
                                          "role": 0,
                                          "editRole": 0,
                                          "permission": 0,
                                          "tooltip": "",
                                          "visibilityFormula": "",
                                          "editableFormula": "",
                                          "escapeHTML": false,
                                          "type": "label",
                                          "size": "small",
                                          "icon": "",
                                          "value": "${sum(\n  INT,\n  ((REA - (REA % 2)) / 2),\n  ((WIL - (WIL % 4)) / 4),\n  (chaQuarterPoolN == 4 ? ((CHA - (CHA % 4)) / 4) : 0)\n)}$\n\n",
                                          "prefix": "",
                                          "suffix": "",
                                          "rollMessage": "",
                                          "altRollMessage": "",
                                          "rollMessageToChat": false,
                                          "altRollMessageToChat": false,
                                          "style": "subtitle"
                                        }
                                      ],
                                      "flow": "horizontal",
                                      "align": "center",
                                      "verticalAlign": "top",
                                      "collapsible": false,
                                      "defaultCollapsed": false,
                                      "title": "",
                                      "titleStyle": "default"
                                    },
                                    {
                                      "key": "Focus_Cur",
                                      "colSpan": 1,
                                      "rowSpan": 1,
                                      "cssClass": "",
                                      "role": 0,
                                      "editRole": 0,
                                      "permission": 0,
                                      "tooltip": "",
                                      "visibilityFormula": "",
                                      "editableFormula": "",
                                      "escapeHTML": false,
                                      "type": "numberField",
                                      "size": "medium",
                                      "label": "Focus Current",
                                      "defaultValue": "0",
                                      "allowDecimal": false,
                                      "minVal": "",
                                      "maxVal": "",
                                      "allowRelative": false,
                                      "showControls": true,
                                      "controlsStyle": "hover",
                                      "controlsCustomIncrements": "",
                                      "inputStyle": "text"
                                    }
                                  ],
                                  "flow": "vertical",
                                  "align": "left",
                                  "verticalAlign": "top",
                                  "collapsible": false,
                                  "defaultCollapsed": false,
                                  "title": "Focus",
                                  "titleStyle": "default"
                                },
                                {
                                  "key": "Focus_Skills",
                                  "colSpan": 1,
                                  "rowSpan": 1,
                                  "cssClass": "",
                                  "role": 0,
                                  "editRole": 0,
                                  "permission": 0,
                                  "tooltip": "",
                                  "visibilityFormula": "",
                                  "editableFormula": "",
                                  "escapeHTML": false,
                                  "type": "panel",
                                  "contents": [
                                    {
                                      "key": "Skill_Artificing",
                                      "colSpan": 1,
                                      "rowSpan": 1,
                                      "cssClass": "",
                                      "role": 0,
                                      "editRole": 0,
                                      "permission": 0,
                                      "tooltip": "",
                                      "visibilityFormula": "",
                                      "editableFormula": "",
                                      "escapeHTML": false,
                                      "type": "numberField",
                                      "size": "medium",
                                      "label": "Artificing",
                                      "defaultValue": "0",
                                      "allowDecimal": false,
                                      "minVal": "0",
                                      "maxVal": "",
                                      "allowRelative": false,
                                      "showControls": true,
                                      "controlsStyle": "hover",
                                      "controlsCustomIncrements": "-1,1",
                                      "inputStyle": "text"
                                    },
                                    {
                                      "key": "Skill_Biotech",
                                      "colSpan": 1,
                                      "rowSpan": 1,
                                      "cssClass": "",
                                      "role": 0,
                                      "editRole": 0,
                                      "permission": 0,
                                      "tooltip": "",
                                      "visibilityFormula": "",
                                      "editableFormula": "",
                                      "escapeHTML": false,
                                      "type": "numberField",
                                      "size": "medium",
                                      "label": "Biotech",
                                      "defaultValue": "0",
                                      "allowDecimal": false,
                                      "minVal": "0",
                                      "maxVal": "",
                                      "allowRelative": false,
                                      "showControls": true,
                                      "controlsStyle": "hover",
                                      "controlsCustomIncrements": "-1,1",
                                      "inputStyle": "text"
                                    },
                                    {
                                      "key": "Skill_Hacking",
                                      "colSpan": 1,
                                      "rowSpan": 1,
                                      "cssClass": "",
                                      "role": 0,
                                      "editRole": 0,
                                      "permission": 0,
                                      "tooltip": "",
                                      "visibilityFormula": "",
                                      "editableFormula": "",
                                      "escapeHTML": false,
                                      "type": "numberField",
                                      "size": "medium",
                                      "label": "Hacking",
                                      "defaultValue": "0",
                                      "allowDecimal": false,
                                      "minVal": "0",
                                      "maxVal": "",
                                      "allowRelative": false,
                                      "showControls": true,
                                      "controlsStyle": "hover",
                                      "controlsCustomIncrements": "-1,1",
                                      "inputStyle": "text"
                                    },
                                    {
                                      "key": "Skill_Drive",
                                      "colSpan": 1,
                                      "rowSpan": 1,
                                      "cssClass": "",
                                      "role": 0,
                                      "editRole": 0,
                                      "permission": 0,
                                      "tooltip": "",
                                      "visibilityFormula": "",
                                      "editableFormula": "",
                                      "escapeHTML": false,
                                      "type": "numberField",
                                      "size": "medium",
                                      "label": "Drive",
                                      "defaultValue": "0",
                                      "allowDecimal": false,
                                      "minVal": "0",
                                      "maxVal": "",
                                      "allowRelative": false,
                                      "showControls": true,
                                      "controlsStyle": "hover",
                                      "controlsCustomIncrements": "-1,1",
                                      "inputStyle": "text"
                                    },
                                    {
                                      "key": "Skill_EWarfare",
                                      "colSpan": 1,
                                      "rowSpan": 1,
                                      "cssClass": "",
                                      "role": 0,
                                      "editRole": 0,
                                      "permission": 0,
                                      "tooltip": "",
                                      "visibilityFormula": "",
                                      "editableFormula": "",
                                      "escapeHTML": false,
                                      "type": "numberField",
                                      "size": "medium",
                                      "label": "E Warfare",
                                      "defaultValue": "0",
                                      "allowDecimal": false,
                                      "minVal": "0",
                                      "maxVal": "",
                                      "allowRelative": false,
                                      "showControls": true,
                                      "controlsStyle": "hover",
                                      "controlsCustomIncrements": "-1,1",
                                      "inputStyle": "text"
                                    },
                                    {
                                      "key": "Skill_Engineering",
                                      "colSpan": 1,
                                      "rowSpan": 1,
                                      "cssClass": "",
                                      "role": 0,
                                      "editRole": 0,
                                      "permission": 0,
                                      "tooltip": "",
                                      "visibilityFormula": "",
                                      "editableFormula": "",
                                      "escapeHTML": false,
                                      "type": "numberField",
                                      "size": "medium",
                                      "label": "Engineering",
                                      "defaultValue": "0",
                                      "allowDecimal": false,
                                      "minVal": "0",
                                      "maxVal": "",
                                      "allowRelative": false,
                                      "showControls": true,
                                      "controlsStyle": "hover",
                                      "controlsCustomIncrements": "-1,1",
                                      "inputStyle": "text"
                                    },
                                    {
                                      "key": "Skill_Fly",
                                      "colSpan": 1,
                                      "rowSpan": 1,
                                      "cssClass": "",
                                      "role": 0,
                                      "editRole": 0,
                                      "permission": 0,
                                      "tooltip": "",
                                      "visibilityFormula": "",
                                      "editableFormula": "",
                                      "escapeHTML": false,
                                      "type": "numberField",
                                      "size": "medium",
                                      "label": "Fly",
                                      "defaultValue": "0",
                                      "allowDecimal": false,
                                      "minVal": "0",
                                      "maxVal": "",
                                      "allowRelative": false,
                                      "showControls": true,
                                      "controlsStyle": "hover",
                                      "controlsCustomIncrements": "-1,1",
                                      "inputStyle": "text"
                                    },
                                    {
                                      "key": "Skill_Negotiation",
                                      "colSpan": 1,
                                      "rowSpan": 1,
                                      "cssClass": "",
                                      "role": 0,
                                      "editRole": 0,
                                      "permission": 0,
                                      "tooltip": "",
                                      "visibilityFormula": "",
                                      "editableFormula": "",
                                      "escapeHTML": false,
                                      "type": "numberField",
                                      "size": "medium",
                                      "label": "Negotiation",
                                      "defaultValue": "0",
                                      "allowDecimal": false,
                                      "minVal": "0",
                                      "maxVal": "",
                                      "allowRelative": false,
                                      "showControls": true,
                                      "controlsStyle": "hover",
                                      "controlsCustomIncrements": "-1,1",
                                      "inputStyle": "text"
                                    },
                                    {
                                      "key": "Skill_Observation",
                                      "colSpan": 1,
                                      "rowSpan": 1,
                                      "cssClass": "",
                                      "role": 0,
                                      "editRole": 0,
                                      "permission": 0,
                                      "tooltip": "",
                                      "visibilityFormula": "",
                                      "editableFormula": "",
                                      "escapeHTML": false,
                                      "type": "numberField",
                                      "size": "medium",
                                      "label": "Observation",
                                      "defaultValue": "0",
                                      "allowDecimal": false,
                                      "minVal": "0",
                                      "maxVal": "",
                                      "allowRelative": false,
                                      "showControls": true,
                                      "controlsStyle": "hover",
                                      "controlsCustomIncrements": "-1,1",
                                      "inputStyle": "text"
                                    },
                                    {
                                      "key": "Skill_Reconnaissance",
                                      "colSpan": 1,
                                      "rowSpan": 1,
                                      "cssClass": "",
                                      "role": 0,
                                      "editRole": 0,
                                      "permission": 0,
                                      "tooltip": "",
                                      "visibilityFormula": "",
                                      "editableFormula": "",
                                      "escapeHTML": false,
                                      "type": "numberField",
                                      "size": "medium",
                                      "label": "Reconnaissance",
                                      "defaultValue": "0",
                                      "allowDecimal": false,
                                      "minVal": "0",
                                      "maxVal": "",
                                      "allowRelative": false,
                                      "showControls": true,
                                      "controlsStyle": "hover",
                                      "controlsCustomIncrements": "-1,1",
                                      "inputStyle": "text"
                                    },
                                    {
                                      "key": "Skill_Safecracking",
                                      "colSpan": 1,
                                      "rowSpan": 1,
                                      "cssClass": "",
                                      "role": 0,
                                      "editRole": 0,
                                      "permission": 0,
                                      "tooltip": "",
                                      "visibilityFormula": "",
                                      "editableFormula": "",
                                      "escapeHTML": false,
                                      "type": "numberField",
                                      "size": "medium",
                                      "label": "Safecracking",
                                      "defaultValue": "0",
                                      "allowDecimal": false,
                                      "minVal": "0",
                                      "maxVal": "",
                                      "allowRelative": false,
                                      "showControls": true,
                                      "controlsStyle": "hover",
                                      "controlsCustomIncrements": "-1,1",
                                      "inputStyle": "text"
                                    },
                                    {
                                      "key": "Skill_Shadow",
                                      "colSpan": 1,
                                      "rowSpan": 1,
                                      "cssClass": "",
                                      "role": 0,
                                      "editRole": 0,
                                      "permission": 0,
                                      "tooltip": "",
                                      "visibilityFormula": "",
                                      "editableFormula": "",
                                      "escapeHTML": false,
                                      "type": "numberField",
                                      "size": "medium",
                                      "label": "Shadow",
                                      "defaultValue": "0",
                                      "allowDecimal": false,
                                      "minVal": "0",
                                      "maxVal": "",
                                      "allowRelative": false,
                                      "showControls": true,
                                      "controlsStyle": "hover",
                                      "controlsCustomIncrements": "-1,1",
                                      "inputStyle": "text"
                                    }
                                  ],
                                  "flow": "vertical",
                                  "align": "left",
                                  "verticalAlign": "top",
                                  "collapsible": false,
                                  "defaultCollapsed": false,
                                  "title": "",
                                  "titleStyle": "default"
                                }
                              ],
                              "flow": "vertical",
                              "align": "left",
                              "verticalAlign": "top",
                              "collapsible": false,
                              "defaultCollapsed": false,
                              "title": "",
                              "titleStyle": "default"
                            }
                          ],
                          "flow": "grid-2",
                          "align": "left",
                          "verticalAlign": "top",
                          "collapsible": false,
                          "defaultCollapsed": false,
                          "title": "",
                          "titleStyle": "title"
                        }
                      ],
                      "flow": "vertical",
                      "align": "left",
                      "verticalAlign": "top",
                      "collapsible": true,
                      "defaultCollapsed": false,
                      "title": "Pools & Skills",
                      "titleStyle": "title"
                    }
                  ],
                  "name": "Pools & Skills"
                },
                {
                  "key": "inventorytab",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "tab",
                  "contents": [
                    {
                      "key": "",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "panel",
                      "contents": [
                        {
                          "key": "armorPanel",
                          "colSpan": 1,
                          "rowSpan": 1,
                          "cssClass": "",
                          "role": 0,
                          "editRole": 0,
                          "permission": 0,
                          "tooltip": "",
                          "visibilityFormula": "",
                          "editableFormula": "",
                          "escapeHTML": false,
                          "type": "panel",
                          "contents": [
                            {
                              "key": "armorInternal",
                              "colSpan": 1,
                              "rowSpan": 1,
                              "cssClass": "",
                              "role": 0,
                              "editRole": 0,
                              "permission": 0,
                              "tooltip": "",
                              "visibilityFormula": "",
                              "editableFormula": "",
                              "escapeHTML": false,
                              "type": "textField",
                              "size": "full-size",
                              "label": "Internal",
                              "defaultValue": "",
                              "charList": "",
                              "maxLength": null,
                              "autocomplete": ""
                            },
                            {
                              "key": "armorUnder",
                              "colSpan": 1,
                              "rowSpan": 1,
                              "cssClass": "",
                              "role": 0,
                              "editRole": 0,
                              "permission": 0,
                              "tooltip": "",
                              "visibilityFormula": "",
                              "editableFormula": "",
                              "escapeHTML": false,
                              "type": "textField",
                              "size": "full-size",
                              "label": "Under",
                              "defaultValue": "",
                              "charList": "",
                              "maxLength": null,
                              "autocomplete": ""
                            },
                            {
                              "key": "armorOuter",
                              "colSpan": 1,
                              "rowSpan": 1,
                              "cssClass": "",
                              "role": 0,
                              "editRole": 0,
                              "permission": 0,
                              "tooltip": "",
                              "visibilityFormula": "",
                              "editableFormula": "",
                              "escapeHTML": false,
                              "type": "textField",
                              "size": "full-size",
                              "label": "Outer",
                              "defaultValue": "",
                              "charList": "",
                              "maxLength": null,
                              "autocomplete": ""
                            }
                          ],
                          "flow": "vertical",
                          "align": "left",
                          "verticalAlign": "top",
                          "collapsible": true,
                          "defaultCollapsed": false,
                          "title": "Armor Ballistic / Impact",
                          "titleStyle": "default"
                        },
                        {
                          "key": "",
                          "colSpan": 1,
                          "rowSpan": 1,
                          "cssClass": "",
                          "role": 0,
                          "editRole": 0,
                          "permission": 0,
                          "tooltip": "",
                          "visibilityFormula": "",
                          "editableFormula": "",
                          "escapeHTML": false,
                          "type": "panel",
                          "contents": [
                            {
                              "key": "",
                              "colSpan": 1,
                              "rowSpan": 1,
                              "cssClass": "",
                              "role": 0,
                              "editRole": 0,
                              "permission": 0,
                              "tooltip": "",
                              "visibilityFormula": "",
                              "editableFormula": "",
                              "escapeHTML": false,
                              "type": "panel",
                              "contents": [],
                              "flow": "vertical",
                              "align": "center",
                              "verticalAlign": "top",
                              "collapsible": false,
                              "defaultCollapsed": false,
                              "title": "",
                              "titleStyle": "default"
                            },
                            {
                              "key": "",
                              "colSpan": 1,
                              "rowSpan": 1,
                              "cssClass": "",
                              "role": 0,
                              "editRole": 0,
                              "permission": 0,
                              "tooltip": "",
                              "visibilityFormula": "",
                              "editableFormula": "",
                              "escapeHTML": false,
                              "type": "label",
                              "size": "m-large",
                              "icon": "",
                              "value": "Drag Action items here.",
                              "prefix": "",
                              "suffix": "",
                              "rollMessage": "",
                              "altRollMessage": "",
                              "rollMessageToChat": true,
                              "altRollMessageToChat": true,
                              "style": "label"
                            }
                          ],
                          "flow": "grid-2",
                          "align": "right",
                          "verticalAlign": "top",
                          "collapsible": false,
                          "defaultCollapsed": false,
                          "title": "",
                          "titleStyle": "default"
                        },
                        {
                          "key": "inventoryWeapons",
                          "colSpan": 1,
                          "rowSpan": 1,
                          "cssClass": "",
                          "role": 0,
                          "editRole": 0,
                          "permission": 0,
                          "tooltip": "",
                          "visibilityFormula": "",
                          "editableFormula": "",
                          "escapeHTML": false,
                          "type": "itemContainer",
                          "contents": [],
                          "rowLayout": [
                            {
                              "key": "wepAction1",
                              "colSpan": 1,
                              "rowSpan": 1,
                              "cssClass": "wep-action-btn ${ item.wepAction1Enabled ? (item.wepAction1Label ? \"\" : \"wep-action-hidden\") : \"wep-action-hidden\" }$",
                              "role": 0,
                              "editRole": 0,
                              "permission": 0,
                              "tooltip": "",
                              "visibilityFormula": "item.wepAction1Enabled",
                              "editableFormula": "",
                              "escapeHTML": false,
                              "type": "label",
                              "size": "full-size",
                              "icon": "dice",
                              "value": "${ item.wepAction1Enabled ? item.wepAction1Label : \"\" }$\n\n\n",
                              "prefix": "",
                              "suffix": "",
                              "rollMessage": "%{\n  const slot = 1;\n\n  const doc = (typeof linkedEntity !== \"undefined\" && linkedEntity) ? linkedEntity\n            : (typeof entity !== \"undefined\" && entity) ? entity\n            : null;\n\n  const itemUuid = String(doc?.uuid ?? \"\").trim();\n\n  const embeddedActorUuid =\n    (doc?.parent?.documentName === \"Actor\" && doc?.parent?.uuid) ? String(doc.parent.uuid) : \"\";\n\n  const scopeActorUuid =\n    (typeof actor !== \"undefined\" && actor?.documentName === \"Actor\" && actor?.uuid) ? String(actor.uuid) : \"\";\n\n  const controlledActorUuid = (() => {\n    const t = canvas?.tokens?.controlled?.[0];\n    return t?.actor?.uuid ? String(t.actor.uuid) : \"\";\n  })();\n\n  const targetedActorUuid = (() => {\n    const t = game.user?.targets ? Array.from(game.user.targets)[0] : null;\n    return t?.actor?.uuid ? String(t.actor.uuid) : \"\";\n  })();\n\n  const userCharUuid = game.user?.character?.uuid ? String(game.user.character.uuid) : \"\";\n\n  const actorUuid = String(\n    embeddedActorUuid ||\n    scopeActorUuid ||\n    controlledActorUuid ||\n    targetedActorUuid ||\n    userCharUuid ||\n    \"\"\n  ).trim();\n\n  if (!itemUuid) { ui.notifications?.warn?.(\"SinlessCSB: missing item context (itemUuid).\"); return \"\"; }\n  if (!actorUuid) { ui.notifications?.warn?.(\"SinlessCSB: No actor context. Control/target a token.\"); return \"\"; }\n\n  const enabled = !!doc?.system?.props?.[`wepAction${slot}Enabled`];\n  if (!enabled) { ui.notifications?.warn?.(\"This action is not enabled on the item.\"); return \"\"; }\n\n  const bonus = Number(doc?.system?.props?.[`wepAction${slot}BonusDice`] ?? 0) || 0;\n\n  const api = game.modules.get(\"sinlesscsb\")?.api;\n  if (typeof api?.rollItem !== \"function\") { ui.notifications?.error?.(\"SinlessCSB: rollItem API not available.\"); return \"\"; }\n\n  // Pass bonus as an override (requires rollItem to support scope.bonusDiceOverride or bonusDiceDelta).\n  // If your rollItem already reads item.system.props.bonusDice, you can instead write per-slot bonusDice into item props,\n  // but that affects all actions. Better to pass it.\n  api.rollItem({ itemUuid, actorUuid, bonusDiceDelta: bonus });\n\n  return \"\";\n}%\n",
                              "altRollMessage": "",
                              "rollMessageToChat": false,
                              "altRollMessageToChat": false,
                              "style": "button",
                              "align": "left",
                              "colName": "Action 1"
                            },
                            {
                              "key": "wepAction2",
                              "colSpan": 1,
                              "rowSpan": 1,
                              "cssClass": "wep-action-btn ${ item.wepAction2Enabled ? (item.wepAction2Label ? \"\" : \"wep-action-hidden\") : \"wep-action-hidden\" }$",
                              "role": 0,
                              "editRole": 0,
                              "permission": 0,
                              "tooltip": "",
                              "visibilityFormula": "item.wepAction2Enabled",
                              "editableFormula": "",
                              "escapeHTML": false,
                              "type": "label",
                              "size": "full-size",
                              "icon": "",
                              "value": "${ item.wepAction2Enabled ? item.wepAction2Label : \"\" }$\n\n\n",
                              "prefix": "",
                              "suffix": "",
                              "rollMessage": "%{\n  const slot = 2;\n\n  const doc = (typeof linkedEntity !== \"undefined\" && linkedEntity) ? linkedEntity\n            : (typeof entity !== \"undefined\" && entity) ? entity\n            : null;\n\n  const itemUuid = String(doc?.uuid ?? \"\").trim();\n\n  const embeddedActorUuid =\n    (doc?.parent?.documentName === \"Actor\" && doc?.parent?.uuid) ? String(doc.parent.uuid) : \"\";\n\n  const scopeActorUuid =\n    (typeof actor !== \"undefined\" && actor?.documentName === \"Actor\" && actor?.uuid) ? String(actor.uuid) : \"\";\n\n  const controlledActorUuid = (() => {\n    const t = canvas?.tokens?.controlled?.[0];\n    return t?.actor?.uuid ? String(t.actor.uuid) : \"\";\n  })();\n\n  const targetedActorUuid = (() => {\n    const t = game.user?.targets ? Array.from(game.user.targets)[0] : null;\n    return t?.actor?.uuid ? String(t.actor.uuid) : \"\";\n  })();\n\n  const userCharUuid = game.user?.character?.uuid ? String(game.user.character.uuid) : \"\";\n\n  const actorUuid = String(\n    embeddedActorUuid ||\n    scopeActorUuid ||\n    controlledActorUuid ||\n    targetedActorUuid ||\n    userCharUuid ||\n    \"\"\n  ).trim();\n\n  if (!itemUuid) { ui.notifications?.warn?.(\"SinlessCSB: missing item context (itemUuid).\"); return \"\"; }\n  if (!actorUuid) { ui.notifications?.warn?.(\"SinlessCSB: No actor context. Control/target a token.\"); return \"\"; }\n\n  const enabled = !!doc?.system?.props?.[`wepAction${slot}Enabled`];\n  if (!enabled) { ui.notifications?.warn?.(\"This action is not enabled on the item.\"); return \"\"; }\n\n  const bonus = Number(doc?.system?.props?.[`wepAction${slot}BonusDice`] ?? 0) || 0;\n\n  const api = game.modules.get(\"sinlesscsb\")?.api;\n  if (typeof api?.rollItem !== \"function\") { ui.notifications?.error?.(\"SinlessCSB: rollItem API not available.\"); return \"\"; }\n\n  // Pass bonus as an override (requires rollItem to support scope.bonusDiceOverride or bonusDiceDelta).\n  // If your rollItem already reads item.system.props.bonusDice, you can instead write per-slot bonusDice into item props,\n  // but that affects all actions. Better to pass it.\n  api.rollItem({ itemUuid, actorUuid, bonusDiceDelta: bonus });\n\n  return \"\";\n}%\n",
                              "altRollMessage": "",
                              "rollMessageToChat": false,
                              "altRollMessageToChat": false,
                              "style": "button",
                              "align": "left",
                              "colName": "Action 2"
                            },
                            {
                              "key": "wepAction3",
                              "colSpan": 1,
                              "rowSpan": 1,
                              "cssClass": "wep-action-btn ${ item.wepAction3Enabled ? (item.wepAction3Label ? \"\" : \"wep-action-hidden\") : \"wep-action-hidden\" }$",
                              "role": 0,
                              "editRole": 0,
                              "permission": 0,
                              "tooltip": "",
                              "visibilityFormula": "item.wepAction3Enabled",
                              "editableFormula": "",
                              "escapeHTML": false,
                              "type": "label",
                              "size": "full-size",
                              "icon": "",
                              "value": "${ item.wepAction3Enabled ? item.wepAction3Label : \"\" }$\n\n",
                              "prefix": "",
                              "suffix": "",
                              "rollMessage": "%{\n  const slot = 3;\n\n  const doc = (typeof linkedEntity !== \"undefined\" && linkedEntity) ? linkedEntity\n            : (typeof entity !== \"undefined\" && entity) ? entity\n            : null;\n\n  const itemUuid = String(doc?.uuid ?? \"\").trim();\n\n  const embeddedActorUuid =\n    (doc?.parent?.documentName === \"Actor\" && doc?.parent?.uuid) ? String(doc.parent.uuid) : \"\";\n\n  const scopeActorUuid =\n    (typeof actor !== \"undefined\" && actor?.documentName === \"Actor\" && actor?.uuid) ? String(actor.uuid) : \"\";\n\n  const controlledActorUuid = (() => {\n    const t = canvas?.tokens?.controlled?.[0];\n    return t?.actor?.uuid ? String(t.actor.uuid) : \"\";\n  })();\n\n  const targetedActorUuid = (() => {\n    const t = game.user?.targets ? Array.from(game.user.targets)[0] : null;\n    return t?.actor?.uuid ? String(t.actor.uuid) : \"\";\n  })();\n\n  const userCharUuid = game.user?.character?.uuid ? String(game.user.character.uuid) : \"\";\n\n  const actorUuid = String(\n    embeddedActorUuid ||\n    scopeActorUuid ||\n    controlledActorUuid ||\n    targetedActorUuid ||\n    userCharUuid ||\n    \"\"\n  ).trim();\n\n  if (!itemUuid) { ui.notifications?.warn?.(\"SinlessCSB: missing item context (itemUuid).\"); return \"\"; }\n  if (!actorUuid) { ui.notifications?.warn?.(\"SinlessCSB: No actor context. Control/target a token.\"); return \"\"; }\n\n  const enabled = !!doc?.system?.props?.[`wepAction${slot}Enabled`];\n  if (!enabled) { ui.notifications?.warn?.(\"This action is not enabled on the item.\"); return \"\"; }\n\n  const bonus = Number(doc?.system?.props?.[`wepAction${slot}BonusDice`] ?? 0) || 0;\n\n  const api = game.modules.get(\"sinlesscsb\")?.api;\n  if (typeof api?.rollItem !== \"function\") { ui.notifications?.error?.(\"SinlessCSB: rollItem API not available.\"); return \"\"; }\n\n  // Pass bonus as an override (requires rollItem to support scope.bonusDiceOverride or bonusDiceDelta).\n  // If your rollItem already reads item.system.props.bonusDice, you can instead write per-slot bonusDice into item props,\n  // but that affects all actions. Better to pass it.\n  api.rollItem({ itemUuid, actorUuid, bonusDiceDelta: bonus });\n\n  return \"\";\n}%\n",
                              "altRollMessage": "",
                              "rollMessageToChat": false,
                              "altRollMessageToChat": false,
                              "style": "button",
                              "align": "left",
                              "colName": "Action 3"
                            },
                            {
                              "key": "wepAction4",
                              "colSpan": 1,
                              "rowSpan": 1,
                              "cssClass": "wep-action-btn ${ item.wepAction4Enabled ? (item.wepAction4Label ? \"\" : \"wep-action-hidden\") : \"wep-action-hidden\" }$",
                              "role": 0,
                              "editRole": 0,
                              "permission": 0,
                              "tooltip": "",
                              "visibilityFormula": "item.wepAction4Enabled",
                              "editableFormula": "",
                              "escapeHTML": false,
                              "type": "label",
                              "size": "full-size",
                              "icon": "",
                              "value": "${ item.wepAction4Enabled ? item.wepAction4Label : \"\" }$\n\n",
                              "prefix": "",
                              "suffix": "",
                              "rollMessage": "%{\n  const slot = 4;\n\n  const doc = (typeof linkedEntity !== \"undefined\" && linkedEntity) ? linkedEntity\n            : (typeof entity !== \"undefined\" && entity) ? entity\n            : null;\n\n  const itemUuid = String(doc?.uuid ?? \"\").trim();\n\n  const embeddedActorUuid =\n    (doc?.parent?.documentName === \"Actor\" && doc?.parent?.uuid) ? String(doc.parent.uuid) : \"\";\n\n  const scopeActorUuid =\n    (typeof actor !== \"undefined\" && actor?.documentName === \"Actor\" && actor?.uuid) ? String(actor.uuid) : \"\";\n\n  const controlledActorUuid = (() => {\n    const t = canvas?.tokens?.controlled?.[0];\n    return t?.actor?.uuid ? String(t.actor.uuid) : \"\";\n  })();\n\n  const targetedActorUuid = (() => {\n    const t = game.user?.targets ? Array.from(game.user.targets)[0] : null;\n    return t?.actor?.uuid ? String(t.actor.uuid) : \"\";\n  })();\n\n  const userCharUuid = game.user?.character?.uuid ? String(game.user.character.uuid) : \"\";\n\n  const actorUuid = String(\n    embeddedActorUuid ||\n    scopeActorUuid ||\n    controlledActorUuid ||\n    targetedActorUuid ||\n    userCharUuid ||\n    \"\"\n  ).trim();\n\n  if (!itemUuid) { ui.notifications?.warn?.(\"SinlessCSB: missing item context (itemUuid).\"); return \"\"; }\n  if (!actorUuid) { ui.notifications?.warn?.(\"SinlessCSB: No actor context. Control/target a token.\"); return \"\"; }\n\n  const enabled = !!doc?.system?.props?.[`wepAction${slot}Enabled`];\n  if (!enabled) { ui.notifications?.warn?.(\"This action is not enabled on the item.\"); return \"\"; }\n\n  const bonus = Number(doc?.system?.props?.[`wepAction${slot}BonusDice`] ?? 0) || 0;\n\n  const api = game.modules.get(\"sinlesscsb\")?.api;\n  if (typeof api?.rollItem !== \"function\") { ui.notifications?.error?.(\"SinlessCSB: rollItem API not available.\"); return \"\"; }\n\n  // Pass bonus as an override (requires rollItem to support scope.bonusDiceOverride or bonusDiceDelta).\n  // If your rollItem already reads item.system.props.bonusDice, you can instead write per-slot bonusDice into item props,\n  // but that affects all actions. Better to pass it.\n  api.rollItem({ itemUuid, actorUuid, bonusDiceDelta: bonus });\n\n  return \"\";\n}%\n",
                              "altRollMessage": "",
                              "rollMessageToChat": false,
                              "altRollMessageToChat": false,
                              "style": "button",
                              "align": "left",
                              "colName": "Action 4"
                            }
                          ],
                          "head": true,
                          "deleteWarning": true,
                          "labelWhenEmpty": "drag here from Items or Compendium",
                          "title": "Weapons / Attacks / Actions",
                          "hideEmpty": true,
                          "hiddenColumns": [],
                          "sortOption": "manual",
                          "headDisplay": true,
                          "showCreate": false,
                          "defaultTemplate": "WpDhy1PMWFkO6tOc",
                          "showDelete": true,
                          "statusIcon": true,
                          "nameAlign": "left",
                          "nameLabel": "Name",
                          "templateFilter": [
                            "dsFXOOLAla95Lj3y",
                            "hMNA1M25JzNfOz0c",
                            "WpDhy1PMWFkO6tOc",
                            "beEN7M4Y3hg8U06n",
                            "J7lCjK5RwvIF4gUw"
                          ],
                          "itemFilterFormula": "",
                          "sortPredicates": []
                        },
                        {
                          "key": "",
                          "colSpan": 1,
                          "rowSpan": 1,
                          "cssClass": "",
                          "role": 0,
                          "editRole": 0,
                          "permission": 0,
                          "tooltip": "",
                          "visibilityFormula": "",
                          "editableFormula": "",
                          "escapeHTML": false,
                          "type": "panel",
                          "contents": [
                            {
                              "key": "invTxt",
                              "colSpan": 1,
                              "rowSpan": 1,
                              "cssClass": "",
                              "role": 0,
                              "editRole": 0,
                              "permission": 0,
                              "tooltip": "",
                              "visibilityFormula": "",
                              "editableFormula": "",
                              "escapeHTML": false,
                              "type": "textArea",
                              "size": "full-size",
                              "label": "",
                              "defaultValue": "",
                              "style": "sheet"
                            }
                          ],
                          "flow": "vertical",
                          "align": "left",
                          "verticalAlign": "top",
                          "collapsible": true,
                          "defaultCollapsed": false,
                          "title": "Inventory (non action)",
                          "titleStyle": "default"
                        }
                      ],
                      "flow": "vertical",
                      "align": "left",
                      "verticalAlign": "top",
                      "collapsible": true,
                      "defaultCollapsed": false,
                      "title": "Inventory",
                      "titleStyle": "title"
                    }
                  ],
                  "name": "Inventory"
                },
                {
                  "key": "magictab",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "tab",
                  "contents": [
                    {
                      "key": "magicPanel",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "panel",
                      "contents": [
                        {
                          "key": "inventorySpells",
                          "colSpan": 1,
                          "rowSpan": 1,
                          "cssClass": "",
                          "role": 0,
                          "editRole": 0,
                          "permission": 0,
                          "tooltip": "",
                          "visibilityFormula": "",
                          "editableFormula": "",
                          "escapeHTML": false,
                          "type": "itemContainer",
                          "contents": [],
                          "rowLayout": [
                            {
                              "key": "action",
                              "colSpan": 1,
                              "rowSpan": 1,
                              "cssClass": "",
                              "role": 0,
                              "editRole": 0,
                              "permission": 0,
                              "tooltip": "",
                              "visibilityFormula": "",
                              "editableFormula": "",
                              "escapeHTML": false,
                              "type": "label",
                              "size": "full-size",
                              "icon": "star",
                              "value": "\"%{ return (linkedEntity?.system?.props?.actionLabel ?? 'Use'); }%\"",
                              "prefix": "",
                              "suffix": "",
                              "rollMessage": "%{\n  const doc = linkedEntity ?? entity;\n  const itemUuid = String(doc?.uuid ?? \"\");\n  const actorUuid = String(doc?.parent?.uuid ?? \"\");\n\n  if (!itemUuid) {\n    ui.notifications?.warn(\"Cast Spell: no item context (linkedEntity/entity missing).\");\n    return \"\";\n  }\n\n  game.modules.get(\"sinlesscsb\")?.api?.castSpell?.({ itemUuid, actorUuid });\n  return \"\";\n}%\n",
                              "altRollMessage": "",
                              "rollMessageToChat": false,
                              "altRollMessageToChat": false,
                              "style": "button",
                              "align": "left",
                              "colName": "Action"
                            }
                          ],
                          "head": true,
                          "deleteWarning": false,
                          "labelWhenEmpty": "drag Spell here from Items or Compendium",
                          "title": "Known Spells",
                          "hideEmpty": false,
                          "hiddenColumns": [],
                          "sortOption": "manual",
                          "headDisplay": true,
                          "showCreate": false,
                          "defaultTemplate": "SpelTplSinlssA1X",
                          "showDelete": true,
                          "statusIcon": true,
                          "nameAlign": "left",
                          "nameLabel": "Name",
                          "templateFilter": [
                            "SpelTplSinlssA1X"
                          ],
                          "itemFilterFormula": "",
                          "sortPredicates": []
                        },
                        {
                          "key": "inventoryRituals",
                          "colSpan": 1,
                          "rowSpan": 1,
                          "cssClass": "",
                          "role": 0,
                          "editRole": 0,
                          "permission": 0,
                          "tooltip": "",
                          "visibilityFormula": "",
                          "editableFormula": "",
                          "escapeHTML": false,
                          "type": "itemContainer",
                          "contents": [],
                          "rowLayout": [
                            {
                              "key": "action",
                              "colSpan": 1,
                              "rowSpan": 1,
                              "cssClass": "",
                              "role": 0,
                              "editRole": 0,
                              "permission": 0,
                              "tooltip": "",
                              "visibilityFormula": "",
                              "editableFormula": "",
                              "escapeHTML": false,
                              "type": "label",
                              "size": "full-size",
                              "icon": "star",
                              "value": "\"%{ return (linkedEntity?.system?.props?.actionLabel ?? 'Use'); }%\"",
                              "prefix": "",
                              "suffix": "",
                              "rollMessage": "%{\n  const doc = linkedEntity ?? entity;\n  const itemUuid = String(doc?.uuid ?? \"\");\n  const actorUuid = String(doc?.parent?.uuid ?? \"\");\n\n  if (!itemUuid) {\n    ui.notifications?.warn(\"Cast Spell: no item context (linkedEntity/entity missing).\");\n    return \"\";\n  }\n\n  game.modules.get(\"sinlesscsb\")?.api?.castSpell?.({ itemUuid, actorUuid });\n  return \"\";\n}%\n",
                              "altRollMessage": "",
                              "rollMessageToChat": false,
                              "altRollMessageToChat": false,
                              "style": "button",
                              "align": "left",
                              "colName": "Action"
                            }
                          ],
                          "head": true,
                          "deleteWarning": true,
                          "labelWhenEmpty": "drag Ritual here from Items or Compendium",
                          "title": "Known Rituals",
                          "hideEmpty": false,
                          "hiddenColumns": [],
                          "sortOption": "manual",
                          "headDisplay": true,
                          "showCreate": false,
                          "defaultTemplate": "BAvPgoXznM6sfm7M",
                          "showDelete": true,
                          "statusIcon": true,
                          "nameAlign": "left",
                          "nameLabel": "Name",
                          "templateFilter": [
                            "BAvPgoXznM6sfm7M"
                          ],
                          "itemFilterFormula": "",
                          "sortPredicates": []
                        }
                      ],
                      "flow": "vertical",
                      "align": "left",
                      "verticalAlign": "top",
                      "collapsible": true,
                      "defaultCollapsed": false,
                      "title": "Magic",
                      "titleStyle": "title"
                    }
                  ],
                  "name": "Magic"
                },
                {
                  "key": "deckrigtab",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "tab",
                  "contents": [
                    {
                      "key": "",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "panel",
                      "contents": [
                        {
                          "key": "",
                          "colSpan": 1,
                          "rowSpan": 1,
                          "cssClass": "",
                          "role": 0,
                          "editRole": 0,
                          "permission": 0,
                          "tooltip": "",
                          "visibilityFormula": "",
                          "editableFormula": "",
                          "escapeHTML": false,
                          "type": "panel",
                          "contents": [
                            {
                              "key": "deckCyberdeck",
                              "colSpan": 1,
                              "rowSpan": 1,
                              "cssClass": "hacking-box",
                              "role": 0,
                              "editRole": 0,
                              "permission": 0,
                              "tooltip": "",
                              "visibilityFormula": "",
                              "editableFormula": "",
                              "escapeHTML": false,
                              "type": "itemContainer",
                              "contents": [],
                              "rowLayout": [],
                              "head": true,
                              "deleteWarning": true,
                              "labelWhenEmpty": "drag Cyberdeck here",
                              "title": "Cyberdeck",
                              "hideEmpty": false,
                              "hiddenColumns": [],
                              "sortOption": "manual",
                              "headDisplay": true,
                              "showCreate": false,
                              "defaultTemplate": "b2F3cWZSzUeZvam8",
                              "showDelete": true,
                              "statusIcon": false,
                              "nameAlign": "left",
                              "nameLabel": "Name",
                              "templateFilter": [
                                "b2F3cWZSzUeZvam8"
                              ],
                              "itemFilterFormula": "",
                              "sortPredicates": []
                            },
                            {
                              "key": "activeThreads",
                              "colSpan": 1,
                              "rowSpan": 1,
                              "cssClass": "",
                              "role": 0,
                              "editRole": 0,
                              "permission": 0,
                              "tooltip": "",
                              "visibilityFormula": "",
                              "editableFormula": "",
                              "escapeHTML": false,
                              "type": "itemContainer",
                              "contents": [],
                              "rowLayout": [
                                {
                                  "key": "action1",
                                  "colSpan": 1,
                                  "rowSpan": 1,
                                  "cssClass": "",
                                  "role": 0,
                                  "editRole": 0,
                                  "permission": 0,
                                  "tooltip": "",
                                  "visibilityFormula": "",
                                  "editableFormula": "",
                                  "escapeHTML": false,
                                  "type": "label",
                                  "size": "full-size",
                                  "icon": "dice",
                                  "value": "\"%{ return (linkedEntity?.system?.props?.actionLabel ?? 'Use'); }%\"",
                                  "prefix": "",
                                  "suffix": "",
                                  "rollMessage": "%{\n  const itemUuid = String(linkedEntity?.uuid ?? entity?.uuid ?? \"\").trim();\n\n  // Prefer the items parent actor when possible (most correct).\n  // Then fall back to the sheet actor, then controlled token, then user character.\n  const actorUuid = String(\n    linkedEntity?.parent?.uuid ??\n    entity?.parent?.uuid ??\n    rollActor?.uuid ??\n    actor?.uuid ??\n    canvas?.tokens?.controlled?.[0]?.actor?.uuid ??\n    game.user?.character?.uuid ??\n    \"\"\n  ).trim();\n\n  if (!itemUuid) {\n    console.warn(\"SinlessCSB | rollItem: missing itemUuid\", { linkedEntity, entity });\n    ui.notifications?.warn?.(\"SinlessCSB: rollItem missing itemUuid (check your button context).\");\n    return \"\";\n  }\n\n  const api = game.modules.get(\"sinlesscsb\")?.api;\n  if (typeof api?.rollItem !== \"function\") {\n    console.warn(\"SinlessCSB | rollItem: API not available\", { apiKeys: Object.keys(api ?? {}) });\n    ui.notifications?.error?.(\"SinlessCSB: rollItem API not available (module not ready?).\");\n    return \"\";\n  }\n\n  api.rollItem({ itemUuid, actorUuid });\n  return \"\";\n}%\n",
                                  "altRollMessage": "",
                                  "rollMessageToChat": false,
                                  "altRollMessageToChat": false,
                                  "style": "button",
                                  "align": "left",
                                  "colName": "Action 1"
                                },
                                {
                                  "key": "action2",
                                  "colSpan": 1,
                                  "rowSpan": 1,
                                  "cssClass": "",
                                  "role": 0,
                                  "editRole": 0,
                                  "permission": 0,
                                  "tooltip": "",
                                  "visibilityFormula": "",
                                  "editableFormula": "",
                                  "escapeHTML": false,
                                  "type": "label",
                                  "size": "full-size",
                                  "icon": "",
                                  "value": "Move to Storage",
                                  "prefix": "",
                                  "suffix": "",
                                  "rollMessage": "%{\n  const doc = (typeof linkedEntity !== \"undefined\" && linkedEntity) ? linkedEntity\n            : (typeof entity !== \"undefined\" && entity) ? entity\n            : null;\n\n  if (!doc) {\n    ui.notifications?.warn?.(\"SinlessCSB: missing item context.\");\n    return \"\";\n  }\n\n  const update = { \"system.props.softwareSlot\": 0 };\n  doc.update(update).catch((e) => console.warn(\"SinlessCSB | softwareSlot update failed\", e));\n  return \"\";\n}%",
                                  "altRollMessage": "",
                                  "rollMessageToChat": false,
                                  "altRollMessageToChat": false,
                                  "style": "button",
                                  "align": "left",
                                  "colName": "Action 2"
                                }
                              ],
                              "head": true,
                              "deleteWarning": true,
                              "labelWhenEmpty": "drag ACTIVE software (Max is # Threads on Deck)",
                              "title": "Active Threads",
                              "hideEmpty": false,
                              "hiddenColumns": [],
                              "sortOption": "manual",
                              "headDisplay": true,
                              "showCreate": false,
                              "defaultTemplate": "lBNLLAeL3gcJs2RQ",
                              "showDelete": true,
                              "statusIcon": true,
                              "nameAlign": "left",
                              "nameLabel": "Name",
                              "templateFilter": [
                                "lBNLLAeL3gcJs2RQ",
                                "8CMq8JmyHbRCglOv"
                              ],
                              "itemFilterFormula": "item.softwareSlot == 1",
                              "sortPredicates": []
                            },
                            {
                              "key": "inactiveSoftware",
                              "colSpan": 1,
                              "rowSpan": 1,
                              "cssClass": "",
                              "role": 0,
                              "editRole": 0,
                              "permission": 0,
                              "tooltip": "",
                              "visibilityFormula": "",
                              "editableFormula": "",
                              "escapeHTML": false,
                              "type": "itemContainer",
                              "contents": [],
                              "rowLayout": [
                                {
                                  "key": "action1",
                                  "colSpan": 1,
                                  "rowSpan": 1,
                                  "cssClass": "",
                                  "role": 0,
                                  "editRole": 0,
                                  "permission": 0,
                                  "tooltip": "",
                                  "visibilityFormula": "",
                                  "editableFormula": "",
                                  "escapeHTML": false,
                                  "type": "label",
                                  "size": "full-size",
                                  "icon": "dice",
                                  "value": "\"%{ return (linkedEntity?.system?.props?.actionLabel ?? 'Use'); }%\"",
                                  "prefix": "",
                                  "suffix": "",
                                  "rollMessage": "%{\n  const itemUuid = String(linkedEntity?.uuid ?? entity?.uuid ?? \"\").trim();\n\n  // Prefer the items parent actor when possible (most correct).\n  // Then fall back to the sheet actor, then controlled token, then user character.\n  const actorUuid = String(\n    linkedEntity?.parent?.uuid ??\n    entity?.parent?.uuid ??\n    rollActor?.uuid ??\n    actor?.uuid ??\n    canvas?.tokens?.controlled?.[0]?.actor?.uuid ??\n    game.user?.character?.uuid ??\n    \"\"\n  ).trim();\n\n  if (!itemUuid) {\n    console.warn(\"SinlessCSB | rollItem: missing itemUuid\", { linkedEntity, entity });\n    ui.notifications?.warn?.(\"SinlessCSB: rollItem missing itemUuid (check your button context).\");\n    return \"\";\n  }\n\n  const api = game.modules.get(\"sinlesscsb\")?.api;\n  if (typeof api?.rollItem !== \"function\") {\n    console.warn(\"SinlessCSB | rollItem: API not available\", { apiKeys: Object.keys(api ?? {}) });\n    ui.notifications?.error?.(\"SinlessCSB: rollItem API not available (module not ready?).\");\n    return \"\";\n  }\n\n  api.rollItem({ itemUuid, actorUuid });\n  return \"\";\n}%\n",
                                  "altRollMessage": "",
                                  "rollMessageToChat": false,
                                  "altRollMessageToChat": false,
                                  "style": "button",
                                  "align": "left",
                                  "colName": "Action 1"
                                },
                                {
                                  "key": "action2",
                                  "colSpan": 1,
                                  "rowSpan": 1,
                                  "cssClass": "",
                                  "role": 0,
                                  "editRole": 0,
                                  "permission": 0,
                                  "tooltip": "",
                                  "visibilityFormula": "",
                                  "editableFormula": "",
                                  "escapeHTML": false,
                                  "type": "label",
                                  "size": "full-size",
                                  "icon": "",
                                  "value": "Load to Threads",
                                  "prefix": "",
                                  "suffix": "",
                                  "rollMessage": "%{\n  const doc = (typeof linkedEntity !== \"undefined\" && linkedEntity) ? linkedEntity\n            : (typeof entity !== \"undefined\" && entity) ? entity\n            : null;\n\n  const actorDoc = doc?.parent ?? null;\n  if (!doc || actorDoc?.documentName !== \"Actor\") {\n    ui.notifications?.warn?.(\"SinlessCSB: missing actor/item context.\");\n    return \"\";\n  }\n\n  const slotKey = \"softwareSlot\";\n  const activeValue = 1;\n  const inactiveValue = 0;\n\n  const templates = new Set([\"8CMq8JmyHbRCglOv\", \"lBNLLAeL3gcJs2RQ\"]);\n\n  const items = Array.from(actorDoc.items ?? []);\n  const activeCount = items.filter(i => {\n    if (!templates.has(String(i.system?.template ?? \"\"))) return false;\n    const vRaw = i.system?.props?.[slotKey];\n    const v = Number.isFinite(Number(vRaw)) ? Number(vRaw) : inactiveValue;\n    return v === activeValue;\n  }).length;\n\n  let maxThreads = 0;\n  for (const it of items) {\n    const p = it?.system?.props ?? {};\n    if (!Object.prototype.hasOwnProperty.call(p, \"threadsDeck\")) continue;\n    const n = Number(p.threadsDeck);\n    if (!Number.isFinite(n)) continue;\n    if (n > maxThreads) maxThreads = Math.floor(n);\n  }\n\n  if (maxThreads > 0 && activeCount >= maxThreads) {\n    ui.notifications?.warn?.(`Active Threads full (${activeCount}/${maxThreads}).`);\n    return \"\";\n  }\n\n  const update = { \"system.props.softwareSlot\": activeValue };\n  doc.update(update).catch((e) => console.warn(\"SinlessCSB | softwareSlot update failed\", e));\n  return \"\";\n}%",
                                  "altRollMessage": "",
                                  "rollMessageToChat": false,
                                  "altRollMessageToChat": false,
                                  "style": "button",
                                  "align": "left",
                                  "colName": "Action 2"
                                }
                              ],
                              "head": true,
                              "deleteWarning": true,
                              "labelWhenEmpty": "drag owned INACTIVE software here",
                              "title": "Inactive Software",
                              "hideEmpty": false,
                              "hiddenColumns": [],
                              "sortOption": "manual",
                              "headDisplay": true,
                              "showCreate": false,
                              "defaultTemplate": "lBNLLAeL3gcJs2RQ",
                              "showDelete": true,
                              "statusIcon": true,
                              "nameAlign": "left",
                              "nameLabel": "Name",
                              "templateFilter": [
                                "lBNLLAeL3gcJs2RQ",
                                "8CMq8JmyHbRCglOv"
                              ],
                              "itemFilterFormula": "item.softwareSlot != 1",
                              "sortPredicates": []
                            }
                          ],
                          "flow": "vertical",
                          "align": "left",
                          "verticalAlign": "top",
                          "collapsible": false,
                          "defaultCollapsed": false,
                          "title": "",
                          "titleStyle": "default"
                        }
                      ],
                      "flow": "vertical",
                      "align": "left",
                      "verticalAlign": "top",
                      "collapsible": true,
                      "defaultCollapsed": false,
                      "title": "Decking",
                      "titleStyle": "default"
                    },
                    {
                      "key": "",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "panel",
                      "contents": [
                        {
                          "key": "deckNotes",
                          "colSpan": 1,
                          "rowSpan": 1,
                          "cssClass": "",
                          "role": 0,
                          "editRole": 0,
                          "permission": 0,
                          "tooltip": "",
                          "visibilityFormula": "",
                          "editableFormula": "",
                          "escapeHTML": false,
                          "type": "textArea",
                          "size": "full-size",
                          "label": "",
                          "defaultValue": "",
                          "style": "sheet"
                        }
                      ],
                      "flow": "vertical",
                      "align": "left",
                      "verticalAlign": "top",
                      "collapsible": true,
                      "defaultCollapsed": false,
                      "title": "Notepad:",
                      "titleStyle": "default"
                    }
                  ],
                  "name": "Decker"
                },
                {
                  "key": "mainRigger",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "tab",
                  "contents": [
                    {
                      "key": "",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "panel",
                      "contents": [
                        {
                          "key": "inventoryVCR",
                          "colSpan": 1,
                          "rowSpan": 1,
                          "cssClass": "",
                          "role": 0,
                          "editRole": 0,
                          "permission": 0,
                          "tooltip": "",
                          "visibilityFormula": "",
                          "editableFormula": "",
                          "escapeHTML": false,
                          "type": "itemContainer",
                          "contents": [],
                          "rowLayout": [],
                          "head": true,
                          "deleteWarning": true,
                          "labelWhenEmpty": "drag here from Items or Compendium",
                          "title": "VCR",
                          "hideEmpty": false,
                          "hiddenColumns": [],
                          "sortOption": "manual",
                          "headDisplay": true,
                          "showCreate": false,
                          "defaultTemplate": "3LTlu5bj85Ic7pQS",
                          "showDelete": true,
                          "statusIcon": true,
                          "nameAlign": "left",
                          "nameLabel": "Name",
                          "templateFilter": [
                            "3LTlu5bj85Ic7pQS"
                          ],
                          "itemFilterFormula": "",
                          "sortPredicates": []
                        },
                        {
                          "key": "",
                          "colSpan": 1,
                          "rowSpan": 1,
                          "cssClass": "",
                          "role": 0,
                          "editRole": 0,
                          "permission": 0,
                          "tooltip": "",
                          "visibilityFormula": "",
                          "editableFormula": "",
                          "escapeHTML": false,
                          "type": "panel",
                          "contents": [
                            {
                              "key": "dronesOwned",
                              "colSpan": 1,
                              "rowSpan": 1,
                              "cssClass": "sinless-drones-owned",
                              "role": 0,
                              "editRole": 0,
                              "permission": 0,
                              "tooltip": "",
                              "visibilityFormula": "",
                              "editableFormula": "",
                              "escapeHTML": false,
                              "type": "itemContainer",
                              "contents": [],
                              "rowLayout": [
                                {
                                  "key": "deployButton",
                                  "colSpan": 1,
                                  "rowSpan": 1,
                                  "cssClass": "",
                                  "role": 0,
                                  "editRole": 0,
                                  "permission": 0,
                                  "tooltip": "",
                                  "visibilityFormula": "",
                                  "editableFormula": "",
                                  "escapeHTML": false,
                                  "type": "label",
                                  "size": "medium",
                                  "icon": "",
                                  "value": "Deploy",
                                  "prefix": "",
                                  "suffix": "",
                                  "rollMessage": "%{\n  const doc = (typeof linkedEntity !== \"undefined\" && linkedEntity) ? linkedEntity\n            : (typeof entity !== \"undefined\" && entity) ? entity\n            : null;\n\n  const itemUuid = String(doc?.uuid ?? \"\").trim();\n\n  const embeddedActorUuid =\n    (doc?.parent?.documentName === \"Actor\" && doc?.parent?.uuid) ? String(doc.parent.uuid) : \"\";\n\n  const scopeActorUuid =\n    (typeof actor !== \"undefined\" && actor?.documentName === \"Actor\" && actor?.uuid) ? String(actor.uuid) : \"\";\n\n  const controlledActorUuid = (() => {\n    const t = canvas?.tokens?.controlled?.[0];\n    return t?.actor?.uuid ? String(t.actor.uuid) : \"\";\n  })();\n\n  const targetedActorUuid = (() => {\n    const t = game.user?.targets ? Array.from(game.user.targets)[0] : null;\n    return t?.actor?.uuid ? String(t.actor.uuid) : \"\";\n  })();\n\n  const userCharUuid = game.user?.character?.uuid ? String(game.user.character.uuid) : \"\";\n\n  const actorUuid = String(\n    embeddedActorUuid ||\n    scopeActorUuid ||\n    controlledActorUuid ||\n    targetedActorUuid ||\n    userCharUuid ||\n    \"\"\n  ).trim();\n\n  if (!itemUuid) { ui.notifications?.warn?.(\"SinlessCSB: missing item context (itemUuid).\"); return \"\"; }\n  if (!actorUuid) { ui.notifications?.warn?.(\"SinlessCSB: No actor context. Control/target a token.\"); return \"\"; }\n\n  const api = game.modules.get(\"sinlesscsb\")?.api;\n  if (typeof api?.deployOwnedDrone !== \"function\") {\n    ui.notifications?.error?.(\"SinlessCSB: deployOwnedDrone API not available.\");\n    return \"\";\n  }\n\n  api.deployOwnedDrone({ itemUuid, actorUuid });\n  return \"\";\n}%\n",
                                  "altRollMessage": "",
                                  "rollMessageToChat": false,
                                  "altRollMessageToChat": false,
                                  "style": "button",
                                  "align": "left",
                                  "colName": ""
                                },
                                {
                                  "key": "openButton",
                                  "colSpan": 1,
                                  "rowSpan": 1,
                                  "cssClass": "",
                                  "role": 0,
                                  "editRole": 0,
                                  "permission": 0,
                                  "tooltip": "",
                                  "visibilityFormula": "",
                                  "editableFormula": "",
                                  "escapeHTML": false,
                                  "type": "label",
                                  "size": "medium",
                                  "icon": "",
                                  "value": "Open",
                                  "prefix": "",
                                  "suffix": "",
                                  "rollMessage": "%{\n  const doc = (typeof linkedEntity !== \"undefined\" && linkedEntity) ? linkedEntity\n            : (typeof entity !== \"undefined\" && entity) ? entity\n            : null;\n\n  const itemUuid = String(doc?.uuid ?? \"\").trim();\n\n  const embeddedActorUuid =\n    (doc?.parent?.documentName === \"Actor\" && doc?.parent?.uuid) ? String(doc.parent.uuid) : \"\";\n\n  const scopeActorUuid =\n    (typeof actor !== \"undefined\" && actor?.documentName === \"Actor\" && actor?.uuid) ? String(actor.uuid) : \"\";\n\n  const controlledActorUuid = (() => {\n    const t = canvas?.tokens?.controlled?.[0];\n    return t?.actor?.uuid ? String(t.actor.uuid) : \"\";\n  })();\n\n  const targetedActorUuid = (() => {\n    const t = game.user?.targets ? Array.from(game.user.targets)[0] : null;\n    return t?.actor?.uuid ? String(t.actor.uuid) : \"\";\n  })();\n\n  const userCharUuid = game.user?.character?.uuid ? String(game.user.character.uuid) : \"\";\n\n  const actorUuid = String(\n    embeddedActorUuid ||\n    scopeActorUuid ||\n    controlledActorUuid ||\n    targetedActorUuid ||\n    userCharUuid ||\n    \"\"\n  ).trim();\n\n  if (!itemUuid) { ui.notifications?.warn?.(\"SinlessCSB: missing item context (itemUuid).\"); return \"\"; }\n  if (!actorUuid) { ui.notifications?.warn?.(\"SinlessCSB: No actor context. Control/target a token.\"); return \"\"; }\n\n  const api = game.modules.get(\"sinlesscsb\")?.api;\n  if (typeof api?.openOwnedDroneSheet !== \"function\") {\n    ui.notifications?.error?.(\"SinlessCSB: openOwnedDroneSheet API not available.\");\n    return \"\";\n  }\n\n  api.openOwnedDroneSheet({ itemUuid, actorUuid });\n  return \"\";\n}%\n",
                                  "altRollMessage": "",
                                  "rollMessageToChat": false,
                                  "altRollMessageToChat": false,
                                  "style": "button",
                                  "align": "left",
                                  "colName": ""
                                }
                              ],
                              "head": false,
                              "deleteWarning": false,
                              "labelWhenEmpty": "drag owned drones here from Items / Rigging / Drones",
                              "title": "",
                              "hideEmpty": false,
                              "hiddenColumns": [],
                              "sortOption": "manual",
                              "headDisplay": true,
                              "showCreate": false,
                              "defaultTemplate": "UOzfdwCey4axeP6O",
                              "showDelete": true,
                              "statusIcon": false,
                              "nameAlign": "left",
                              "nameLabel": "Name",
                              "templateFilter": [
                                "UOzfdwCey4axeP6O"
                              ],
                              "itemFilterFormula": "",
                              "sortPredicates": []
                            }
                          ],
                          "flow": "vertical",
                          "align": "left",
                          "verticalAlign": "top",
                          "collapsible": true,
                          "defaultCollapsed": false,
                          "title": "Drones Owned",
                          "titleStyle": "default"
                        },
                        {
                          "key": "",
                          "colSpan": 1,
                          "rowSpan": 1,
                          "cssClass": "",
                          "role": 0,
                          "editRole": 0,
                          "permission": 0,
                          "tooltip": "",
                          "visibilityFormula": "",
                          "editableFormula": "",
                          "escapeHTML": false,
                          "type": "panel",
                          "contents": [
                            {
                              "key": "pcVehicles",
                              "colSpan": 1,
                              "rowSpan": 1,
                              "cssClass": "sinless-vehicles-owned",
                              "role": 0,
                              "editRole": 0,
                              "permission": 0,
                              "tooltip": "",
                              "visibilityFormula": "",
                              "editableFormula": "",
                              "escapeHTML": false,
                              "type": "itemContainer",
                              "contents": [],
                              "rowLayout": [
                                {
                                  "key": "deployButton",
                                  "colSpan": 1,
                                  "rowSpan": 1,
                                  "cssClass": "",
                                  "role": 0,
                                  "editRole": 0,
                                  "permission": 0,
                                  "tooltip": "",
                                  "visibilityFormula": "",
                                  "editableFormula": "",
                                  "escapeHTML": false,
                                  "type": "label",
                                  "size": "medium",
                                  "icon": "",
                                  "value": "Deploy",
                                  "prefix": "",
                                  "suffix": "",
                                  "rollMessage": "%{\n  const doc = (typeof linkedEntity !== \"undefined\" && linkedEntity) ? linkedEntity\n            : (typeof entity !== \"undefined\" && entity) ? entity\n            : null;\n\n  const itemUuid = String(doc?.uuid ?? \"\").trim();\n\n  const embeddedActorUuid =\n    (doc?.parent?.documentName === \"Actor\" && doc?.parent?.uuid) ? String(doc.parent.uuid) : \"\";\n\n  const scopeActorUuid =\n    (typeof actor !== \"undefined\" && actor?.documentName === \"Actor\" && actor?.uuid) ? String(actor.uuid) : \"\";\n\n  const controlledActorUuid = (() => {\n    const t = canvas?.tokens?.controlled?.[0];\n    return t?.actor?.uuid ? String(t.actor.uuid) : \"\";\n  })();\n\n  const targetedActorUuid = (() => {\n    const t = game.user?.targets ? Array.from(game.user.targets)[0] : null;\n    return t?.actor?.uuid ? String(t.actor.uuid) : \"\";\n  })();\n\n  const userCharUuid = game.user?.character?.uuid ? String(game.user.character.uuid) : \"\";\n\n  const actorUuid = String(\n    embeddedActorUuid ||\n    scopeActorUuid ||\n    controlledActorUuid ||\n    targetedActorUuid ||\n    userCharUuid ||\n    \"\"\n  ).trim();\n\n  if (!itemUuid) { ui.notifications?.warn?.(\"SinlessCSB: missing item context (itemUuid).\"); return \"\"; }\n  if (!actorUuid) { ui.notifications?.warn?.(\"SinlessCSB: No actor context. Control/target a token.\"); return \"\"; }\n\n  const api = game.modules.get(\"sinlesscsb\")?.api;\n  if (typeof api?.deployOwnedVehicle !== \"function\") { ui.notifications?.error?.(\"SinlessCSB: deployOwnedVehicle API not available.\"); return \"\"; }\n\n  api.deployOwnedVehicle({ itemUuid, actorUuid });\n  return \"\";\n}%\n",
                                  "altRollMessage": "",
                                  "rollMessageToChat": false,
                                  "altRollMessageToChat": false,
                                  "style": "button",
                                  "align": "left",
                                  "colName": ""
                                },
                                {
                                  "key": "openButton",
                                  "colSpan": 1,
                                  "rowSpan": 1,
                                  "cssClass": "",
                                  "role": 0,
                                  "editRole": 0,
                                  "permission": 0,
                                  "tooltip": "",
                                  "visibilityFormula": "",
                                  "editableFormula": "",
                                  "escapeHTML": false,
                                  "type": "label",
                                  "size": "medium",
                                  "icon": "",
                                  "value": "Open",
                                  "prefix": "",
                                  "suffix": "",
                                  "rollMessage": "%{\n  const doc = (typeof linkedEntity !== \"undefined\" && linkedEntity) ? linkedEntity\n            : (typeof entity !== \"undefined\" && entity) ? entity\n            : null;\n\n  const itemUuid = String(doc?.uuid ?? \"\").trim();\n\n  const embeddedActorUuid =\n    (doc?.parent?.documentName === \"Actor\" && doc?.parent?.uuid) ? String(doc.parent.uuid) : \"\";\n\n  const scopeActorUuid =\n    (typeof actor !== \"undefined\" && actor?.documentName === \"Actor\" && actor?.uuid) ? String(actor.uuid) : \"\";\n\n  const controlledActorUuid = (() => {\n    const t = canvas?.tokens?.controlled?.[0];\n    return t?.actor?.uuid ? String(t.actor.uuid) : \"\";\n  })();\n\n  const targetedActorUuid = (() => {\n    const t = game.user?.targets ? Array.from(game.user.targets)[0] : null;\n    return t?.actor?.uuid ? String(t.actor.uuid) : \"\";\n  })();\n\n  const userCharUuid = game.user?.character?.uuid ? String(game.user.character.uuid) : \"\";\n\n  const actorUuid = String(\n    embeddedActorUuid ||\n    scopeActorUuid ||\n    controlledActorUuid ||\n    targetedActorUuid ||\n    userCharUuid ||\n    \"\"\n  ).trim();\n\n  if (!itemUuid) { ui.notifications?.warn?.(\"SinlessCSB: missing item context (itemUuid).\"); return \"\"; }\n  if (!actorUuid) { ui.notifications?.warn?.(\"SinlessCSB: No actor context. Control/target a token.\"); return \"\"; }\n\n  const api = game.modules.get(\"sinlesscsb\")?.api;\n  if (typeof api?.openOwnedVehicleSheet !== \"function\") { ui.notifications?.error?.(\"SinlessCSB: openOwnedVehicleSheet API not available.\"); return \"\"; }\n\n  api.openOwnedVehicleSheet({ itemUuid, actorUuid });\n  return \"\";\n}%\n",
                                  "altRollMessage": "",
                                  "rollMessageToChat": false,
                                  "altRollMessageToChat": false,
                                  "style": "button",
                                  "align": "left",
                                  "colName": ""
                                }
                              ],
                              "head": false,
                              "deleteWarning": false,
                              "labelWhenEmpty": "",
                              "title": "",
                              "hideEmpty": false,
                              "hiddenColumns": [],
                              "sortOption": "manual",
                              "headDisplay": true,
                              "showCreate": false,
                              "defaultTemplate": "GHO6zyIPQXdSYR8a",
                              "showDelete": true,
                              "statusIcon": false,
                              "nameAlign": "left",
                              "nameLabel": "Name",
                              "templateFilter": [
                                "GHO6zyIPQXdSYR8a"
                              ],
                              "itemFilterFormula": "",
                              "sortPredicates": []
                            }
                          ],
                          "flow": "vertical",
                          "align": "left",
                          "verticalAlign": "top",
                          "collapsible": true,
                          "defaultCollapsed": false,
                          "title": "Vehicles Owned",
                          "titleStyle": "default"
                        }
                      ],
                      "flow": "vertical",
                      "align": "left",
                      "verticalAlign": "top",
                      "collapsible": true,
                      "defaultCollapsed": false,
                      "title": "Rigging",
                      "titleStyle": "default"
                    }
                  ],
                  "name": "Rigger"
                }
              ]
            }
          ],
          "flow": "vertical",
          "align": "center",
          "verticalAlign": "top",
          "collapsible": false,
          "defaultCollapsed": false,
          "title": "",
          "titleStyle": "default"
        },
        {
          "key": "BonusPoolN",
          "colSpan": 1,
          "rowSpan": 1,
          "cssClass": "",
          "role": 0,
          "editRole": 0,
          "permission": 0,
          "tooltip": "",
          "visibilityFormula": "",
          "editableFormula": "",
          "escapeHTML": false,
          "type": "label",
          "size": "full-size",
          "icon": "",
          "value": "\n",
          "prefix": "",
          "suffix": "",
          "rollMessage": "${chaQuarterPool}$\n",
          "altRollMessage": "",
          "rollMessageToChat": true,
          "altRollMessageToChat": true,
          "style": "label"
        },
        {
          "key": "Hidden_Data",
          "colSpan": 1,
          "rowSpan": 1,
          "cssClass": "",
          "role": 4,
          "editRole": 0,
          "permission": 0,
          "tooltip": "",
          "visibilityFormula": "",
          "editableFormula": "",
          "escapeHTML": false,
          "type": "panel",
          "contents": [
            {
              "key": "",
              "colSpan": 1,
              "rowSpan": 1,
              "cssClass": "",
              "role": 0,
              "editRole": 0,
              "permission": 0,
              "tooltip": "",
              "visibilityFormula": "",
              "editableFormula": "",
              "escapeHTML": false,
              "type": "panel",
              "contents": [
                {
                  "key": "sinlesscsb_anchor_init",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "textField",
                  "size": "m-small",
                  "label": "",
                  "defaultValue": "",
                  "charList": "",
                  "maxLength": null,
                  "autocomplete": ""
                },
                {
                  "key": "attributeRetry",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "panel",
                  "contents": [],
                  "flow": "vertical",
                  "align": "left",
                  "verticalAlign": "top",
                  "collapsible": false,
                  "defaultCollapsed": false,
                  "title": "",
                  "titleStyle": "default"
                }
              ],
              "flow": "vertical",
              "align": "left",
              "verticalAlign": "top",
              "collapsible": false,
              "defaultCollapsed": false,
              "title": "",
              "titleStyle": "default"
            },
            {
              "key": "Brawn_Spend",
              "colSpan": 1,
              "rowSpan": 1,
              "cssClass": "",
              "role": 0,
              "editRole": 0,
              "permission": 0,
              "tooltip": "",
              "visibilityFormula": "",
              "editableFormula": "",
              "escapeHTML": false,
              "type": "numberField",
              "size": "full-size",
              "label": "Brawn Spend",
              "defaultValue": "1",
              "allowDecimal": false,
              "minVal": "1",
              "maxVal": "",
              "allowRelative": false,
              "showControls": false,
              "controlsStyle": "full",
              "controlsCustomIncrements": "",
              "inputStyle": "text"
            },
            {
              "key": "Brawn_Mod",
              "colSpan": 1,
              "rowSpan": 1,
              "cssClass": "",
              "role": 0,
              "editRole": 0,
              "permission": 0,
              "tooltip": "",
              "visibilityFormula": "",
              "editableFormula": "",
              "escapeHTML": false,
              "type": "numberField",
              "size": "full-size",
              "label": "brawn Mod",
              "defaultValue": "0",
              "allowDecimal": false,
              "minVal": "0",
              "maxVal": "",
              "allowRelative": false,
              "showControls": false,
              "controlsStyle": "full",
              "controlsCustomIncrements": "",
              "inputStyle": "text"
            },
            {
              "key": "Sin_Initiative",
              "colSpan": 1,
              "rowSpan": 1,
              "cssClass": "",
              "role": 0,
              "editRole": 0,
              "permission": 0,
              "tooltip": "",
              "visibilityFormula": "",
              "editableFormula": "",
              "escapeHTML": false,
              "type": "numberField",
              "size": "full-size",
              "label": "calculate initiative",
              "defaultValue": "0",
              "allowDecimal": false,
              "minVal": "",
              "maxVal": "",
              "allowRelative": false,
              "showControls": false,
              "controlsStyle": "hover",
              "controlsCustomIncrements": "",
              "inputStyle": "text"
            },
            {
              "key": "ActorUuid",
              "colSpan": 1,
              "rowSpan": 1,
              "cssClass": "",
              "role": 0,
              "editRole": 0,
              "permission": 0,
              "tooltip": "",
              "visibilityFormula": "",
              "editableFormula": "",
              "escapeHTML": false,
              "type": "textField",
              "size": "full-size",
              "label": "Actoruuid_internal",
              "defaultValue": "",
              "charList": "",
              "maxLength": null,
              "autocomplete": ""
            },
            {
              "key": "actorUuid",
              "colSpan": 1,
              "rowSpan": 1,
              "cssClass": "",
              "role": 0,
              "editRole": 0,
              "permission": 0,
              "tooltip": "",
              "visibilityFormula": "",
              "editableFormula": "",
              "escapeHTML": false,
              "type": "textField",
              "size": "full-size",
              "label": "actoruuid_internal",
              "defaultValue": "",
              "charList": "",
              "maxLength": null,
              "autocomplete": ""
            }
          ],
          "flow": "vertical",
          "align": "left",
          "verticalAlign": "top",
          "collapsible": true,
          "defaultCollapsed": false,
          "title": "Hidden Data",
          "titleStyle": "default"
        }
      ],
      "key": "custom_body",
      "type": "panel"
    },
    "display": {
      "width": 700,
      "height": 900,
      "fix_size": false,
      "pp_width": 64,
      "pp_height": 64
    },
    "header": {
      "contents": [
        {
          "key": "CharacterName",
          "colSpan": 1,
          "rowSpan": 1,
          "cssClass": "",
          "role": 0,
          "editRole": 0,
          "permission": 0,
          "tooltip": "",
          "visibilityFormula": "",
          "editableFormula": "",
          "escapeHTML": false,
          "type": "textField",
          "size": "full-size",
          "label": "Name",
          "defaultValue": "",
          "maxLength": "",
          "autocomplete": ""
        },
        {
          "key": "",
          "colSpan": 1,
          "rowSpan": 1,
          "cssClass": "sinlesscsb-marker",
          "role": 0,
          "editRole": 0,
          "permission": 0,
          "tooltip": "",
          "visibilityFormula": "",
          "editableFormula": "",
          "escapeHTML": false,
          "type": "panel",
          "contents": [],
          "flow": "vertical",
          "align": "center",
          "verticalAlign": "top",
          "collapsible": false,
          "defaultCollapsed": false,
          "title": "",
          "titleStyle": "default"
        },
        {
          "key": "pcInfo",
          "colSpan": 1,
          "rowSpan": 1,
          "cssClass": "",
          "role": 0,
          "editRole": 0,
          "permission": 0,
          "tooltip": "",
          "visibilityFormula": "",
          "editableFormula": "",
          "escapeHTML": false,
          "type": "panel",
          "contents": [
            {
              "key": "",
              "colSpan": 1,
              "rowSpan": 1,
              "cssClass": "",
              "role": 0,
              "editRole": 0,
              "permission": 0,
              "tooltip": "",
              "visibilityFormula": "",
              "editableFormula": "",
              "escapeHTML": false,
              "type": "panel",
              "contents": [
                {
                  "key": "heritage",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "textField",
                  "size": "full-size",
                  "label": "Heritage",
                  "defaultValue": "",
                  "charList": "",
                  "maxLength": null,
                  "autocomplete": ""
                },
                {
                  "key": "magicalTalent",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "textField",
                  "size": "full-size",
                  "label": "Magical Talent",
                  "defaultValue": "",
                  "charList": "",
                  "maxLength": null,
                  "autocomplete": ""
                },
                {
                  "key": "ghostRating",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "textField",
                  "size": "full-size",
                  "label": "Ghost Rating",
                  "defaultValue": "",
                  "charList": "",
                  "maxLength": null,
                  "autocomplete": ""
                },
                {
                  "key": "brand",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "textField",
                  "size": "full-size",
                  "label": "Brand",
                  "defaultValue": "",
                  "charList": "",
                  "maxLength": null,
                  "autocomplete": ""
                },
                {
                  "key": "zoeticPotential",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "numberField",
                  "size": "full-size",
                  "label": "Zoetic Potential",
                  "defaultValue": "6",
                  "allowDecimal": true,
                  "minVal": "",
                  "maxVal": "",
                  "allowRelative": false,
                  "showControls": true,
                  "controlsStyle": "hover",
                  "controlsCustomIncrements": "",
                  "inputStyle": "text"
                },
                {
                  "key": "",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "panel",
                  "contents": [],
                  "flow": "vertical",
                  "align": "left",
                  "verticalAlign": "top",
                  "collapsible": false,
                  "defaultCollapsed": false,
                  "title": "",
                  "titleStyle": "default"
                },
                {
                  "key": "heat",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "panel",
                  "contents": [
                    {
                      "key": "heat0",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "No Disruption",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "radioButton",
                      "size": "x-small",
                      "label": "0",
                      "group": "heatTrack",
                      "value": "0",
                      "defaultChecked": false
                    },
                    {
                      "key": "heat1",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "Suspicious",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "radioButton",
                      "size": "x-small",
                      "label": "1",
                      "group": "heatTrack",
                      "value": "1",
                      "defaultChecked": false
                    },
                    {
                      "key": "heat2",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "ALARM! Target Number -1",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "radioButton",
                      "size": "x-small",
                      "label": "2",
                      "group": "heatTrack",
                      "value": "2",
                      "defaultChecked": false
                    },
                    {
                      "key": "heat3_copy1",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "ALARM! Target Number -1",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "radioButton",
                      "size": "x-small",
                      "label": "3",
                      "group": "heatTrack",
                      "value": "3",
                      "defaultChecked": false
                    },
                    {
                      "key": "heat4",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "2d6 Rounds to HEATER Arrival, +1 Simple Action",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "radioButton",
                      "size": "x-small",
                      "label": "4",
                      "group": "heatTrack",
                      "value": "4",
                      "defaultChecked": false
                    }
                  ],
                  "flow": "grid-5",
                  "align": "left",
                  "verticalAlign": "top",
                  "collapsible": true,
                  "defaultCollapsed": false,
                  "title": "Heat",
                  "titleStyle": "default"
                },
                {
                  "key": "actorMovement",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "numberField",
                  "size": "full-size",
                  "label": "Movement (meters)",
                  "defaultValue": "6",
                  "allowDecimal": false,
                  "minVal": "0",
                  "maxVal": "",
                  "allowRelative": false,
                  "showControls": true,
                  "controlsStyle": "hover",
                  "controlsCustomIncrements": "",
                  "inputStyle": "text"
                },
                {
                  "key": "sprintCalc",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "label",
                  "size": "full-size",
                  "icon": "",
                  "value": "[Future Sprint button]",
                  "prefix": "",
                  "suffix": "",
                  "rollMessage": "",
                  "altRollMessage": "",
                  "rollMessageToChat": true,
                  "altRollMessageToChat": true,
                  "style": "label"
                },
                {
                  "key": "",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "panel",
                  "contents": [],
                  "flow": "vertical",
                  "align": "left",
                  "verticalAlign": "top",
                  "collapsible": false,
                  "defaultCollapsed": false,
                  "title": "",
                  "titleStyle": "default"
                }
              ],
              "flow": "vertical",
              "align": "left",
              "verticalAlign": "top",
              "collapsible": false,
              "defaultCollapsed": false,
              "title": "",
              "titleStyle": "default"
            },
            {
              "key": "",
              "colSpan": 1,
              "rowSpan": 1,
              "cssClass": "",
              "role": 0,
              "editRole": 0,
              "permission": 0,
              "tooltip": "",
              "visibilityFormula": "",
              "editableFormula": "",
              "escapeHTML": false,
              "type": "panel",
              "contents": [
                {
                  "key": "lifestylePanel",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "panel",
                  "contents": [
                    {
                      "key": "lifeSquatter",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "1 Damage & -1Die on tests",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "radioButton",
                      "size": "full-size",
                      "label": "Squatter: Free",
                      "group": "lifestyle",
                      "value": "",
                      "defaultChecked": true
                    },
                    {
                      "key": "lifeLow",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "1 Damage OR -1Die on tests",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "radioButton",
                      "size": "full-size",
                      "label": "Low: 300 Chompskys",
                      "group": "lifestyle",
                      "value": "",
                      "defaultChecked": false
                    },
                    {
                      "key": "lifeMiddle",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "radioButton",
                      "size": "full-size",
                      "label": "Middle: 800 Chompskys",
                      "group": "lifestyle",
                      "value": "",
                      "defaultChecked": false
                    },
                    {
                      "key": "lifeHigh",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "Ignore First Penalty Die",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "radioButton",
                      "size": "full-size",
                      "label": "High: 1200 Chompskys",
                      "group": "lifestyle",
                      "value": "",
                      "defaultChecked": false
                    },
                    {
                      "key": "lifeWealthy",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "Ignore First Penalty Die & +1 on All Etiquette Tests",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "radioButton",
                      "size": "full-size",
                      "label": "Wealthy: 5000 Chompskys",
                      "group": "lifestyle",
                      "value": "",
                      "defaultChecked": false
                    }
                  ],
                  "flow": "vertical",
                  "align": "left",
                  "verticalAlign": "top",
                  "collapsible": true,
                  "defaultCollapsed": false,
                  "title": "Lifestyle",
                  "titleStyle": "default"
                },
                {
                  "key": "panelEtiquettes",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "panel",
                  "contents": [
                    {
                      "key": "etiqCorpo",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "full-size",
                      "label": "Corporate",
                      "defaultValue": "0",
                      "allowDecimal": false,
                      "minVal": "0",
                      "maxVal": "",
                      "allowRelative": false,
                      "showControls": true,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    },
                    {
                      "key": "etiqAristoc",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "full-size",
                      "label": "Aristocracy",
                      "defaultValue": "0",
                      "allowDecimal": false,
                      "minVal": "0",
                      "maxVal": "",
                      "allowRelative": false,
                      "showControls": true,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    },
                    {
                      "key": "etiqStreet",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "full-size",
                      "label": "Street",
                      "defaultValue": "0",
                      "allowDecimal": false,
                      "minVal": "0",
                      "maxVal": "",
                      "allowRelative": false,
                      "showControls": true,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    },
                    {
                      "key": "etiqMilitary",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "full-size",
                      "label": "Military",
                      "defaultValue": "0",
                      "allowDecimal": false,
                      "minVal": "0",
                      "maxVal": "",
                      "allowRelative": false,
                      "showControls": true,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    },
                    {
                      "key": "etiqCivil",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "full-size",
                      "label": "Civic",
                      "defaultValue": "0",
                      "allowDecimal": false,
                      "minVal": "0",
                      "maxVal": "",
                      "allowRelative": false,
                      "showControls": true,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    },
                    {
                      "key": "etiqCriminal",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "full-size",
                      "label": "Criminal",
                      "defaultValue": "0",
                      "allowDecimal": false,
                      "minVal": "0",
                      "maxVal": "",
                      "allowRelative": false,
                      "showControls": true,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    },
                    {
                      "key": "etiqWaste",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "full-size",
                      "label": "Wasteland",
                      "defaultValue": "0",
                      "allowDecimal": false,
                      "minVal": "0",
                      "maxVal": "",
                      "allowRelative": false,
                      "showControls": true,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    }
                  ],
                  "flow": "grid-2",
                  "align": "left",
                  "verticalAlign": "top",
                  "collapsible": true,
                  "defaultCollapsed": false,
                  "title": "Etiquettes",
                  "titleStyle": "default"
                }
              ],
              "flow": "vertical",
              "align": "left",
              "verticalAlign": "top",
              "collapsible": false,
              "defaultCollapsed": false,
              "title": "",
              "titleStyle": "default"
            }
          ],
          "flow": "grid-2",
          "align": "left",
          "verticalAlign": "top",
          "collapsible": true,
          "defaultCollapsed": false,
          "title": "PC Info",
          "titleStyle": "default"
        },
        {
          "key": "",
          "colSpan": 1,
          "rowSpan": 1,
          "cssClass": "",
          "role": 0,
          "editRole": 0,
          "permission": 0,
          "tooltip": "",
          "visibilityFormula": "",
          "editableFormula": "",
          "escapeHTML": false,
          "type": "panel",
          "contents": [
            {
              "key": "kismetPoolmax",
              "colSpan": 1,
              "rowSpan": 1,
              "cssClass": "",
              "role": 0,
              "editRole": 0,
              "permission": 0,
              "tooltip": "",
              "visibilityFormula": "",
              "editableFormula": "",
              "escapeHTML": false,
              "type": "numberField",
              "size": "full-size",
              "label": "Kismet Pool (MAX)",
              "defaultValue": "1",
              "allowDecimal": false,
              "minVal": "1",
              "maxVal": "",
              "allowRelative": false,
              "showControls": true,
              "controlsStyle": "hover",
              "controlsCustomIncrements": "",
              "inputStyle": "text"
            },
            {
              "key": "availableKismet",
              "colSpan": 1,
              "rowSpan": 1,
              "cssClass": "",
              "role": 0,
              "editRole": 0,
              "permission": 0,
              "tooltip": "",
              "visibilityFormula": "",
              "editableFormula": "",
              "escapeHTML": false,
              "type": "numberField",
              "size": "medium",
              "label": "Pool Available",
              "defaultValue": "",
              "allowDecimal": false,
              "minVal": "0",
              "maxVal": "${kismetPoolmax}$",
              "allowRelative": false,
              "showControls": true,
              "controlsStyle": "hover",
              "controlsCustomIncrements": "",
              "inputStyle": "text"
            },
            {
              "key": "kismetSum",
              "colSpan": 1,
              "rowSpan": 1,
              "cssClass": "",
              "role": 0,
              "editRole": 0,
              "permission": 0,
              "tooltip": "Total earned (use to determine benefits Q10 and Q20)",
              "visibilityFormula": "",
              "editableFormula": "",
              "escapeHTML": false,
              "type": "numberField",
              "size": "m-small",
              "label": "Lifetime",
              "defaultValue": "0",
              "allowDecimal": false,
              "minVal": "0",
              "maxVal": "",
              "allowRelative": false,
              "showControls": true,
              "controlsStyle": "hover",
              "controlsCustomIncrements": "",
              "inputStyle": "text"
            },
            {
              "key": "kismetTospend",
              "colSpan": 1,
              "rowSpan": 1,
              "cssClass": "",
              "role": 0,
              "editRole": 0,
              "permission": 0,
              "tooltip": "to track remaining Kismet after spending from lifetime total.",
              "visibilityFormula": "",
              "editableFormula": "",
              "escapeHTML": false,
              "type": "numberField",
              "size": "m-small",
              "label": "Unspent",
              "defaultValue": "0",
              "allowDecimal": false,
              "minVal": "0",
              "maxVal": "",
              "allowRelative": false,
              "showControls": true,
              "controlsStyle": "hover",
              "controlsCustomIncrements": "",
              "inputStyle": "text"
            }
          ],
          "flow": "horizontal",
          "align": "left",
          "verticalAlign": "top",
          "collapsible": true,
          "defaultCollapsed": false,
          "title": "Kismet",
          "titleStyle": "default"
        }
      ],
      "key": "custom_header",
      "type": "panel"
    },
    "hidden": [],
    "attributeBar": {},
    "statusEffects": {},
    "props": {
      "stunCur": 11,
      "physicalCur": 9,
      "ActorUuid": "Actor.eMbezua6UThIStwT",
      "STR": "10",
      "REA": "6",
      "INT": "8",
      "WIL": "11",
      "CHA": "9",
      "BOD": "7",
      "chaQuarterPoolN": "3",
      "zoeticPotential": "19",
      "Brawn_Cur": "15",
      "Skill_Athletics": "1",
      "Skill_CyberCombat": "1",
      "Skill_MartialArts": "1",
      "Skill_MeleeWeapons": "3",
      "Skill_ThrowingWeapons": "3",
      "Skill_UnarmedCombat": "1",
      "Finesse_Cur": "11",
      "Skill_Archery": "2",
      "Skill_ArticulatedManeuvers": "1",
      "Skill_EnergyWeapons": "2",
      "Skill_Firearms": "5",
      "Skill_Gunnery": "4",
      "Skill_HeavyWeapons": "1",
      "Resolve_Cur": "21",
      "Skill_AstralSenses": "1",
      "Skill_Channeling": "5",
      "Skill_Coercion": "1",
      "Skill_Conjuring": "1",
      "Skill_Fascination": "1",
      "Skill_Leadership": "1",
      "Skill_Sorcery": "6",
      "Skill_Subterfuge": "1",
      "Skill_Survival": "1",
      "Focus_Cur": "13",
      "Skill_Artificing": "1",
      "Skill_Biotech": "1",
      "Skill_Hacking": "4",
      "Skill_Drive": "1",
      "Skill_EWarfare": "4",
      "Skill_Engineering": "1",
      "Skill_Fly": "1",
      "Skill_Negotiation": "1",
      "Skill_Observation": "1",
      "Skill_Reconnaissance": "1",
      "Skill_Safecracking": "1",
      "Skill_Shadow": "1",
      "Brawn_Spend": "1",
      "Brawn_Mod": "0",
      "Sin_Initiative": "0",
      "CharacterName": "TestSpell",
      "sinlesscsb_anchor_init": "",
      "inventorySpells": {
        "pjmyUWRqRgDP8yrm": {
          "name": "SpellTest",
          "id": "pjmyUWRqRgDP8yrm",
          "uuid": "Actor.eMbezua6UThIStwT.Item.pjmyUWRqRgDP8yrm",
          "action": "\"Cast\""
        },
        "YhtiMP32QlfgVOnU": {
          "name": "SpellTest",
          "id": "YhtiMP32QlfgVOnU",
          "uuid": "Actor.eMbezua6UThIStwT.Item.YhtiMP32QlfgVOnU",
          "action": "\"Cast\""
        }
      },
      "heritage": "",
      "magicalTalent": "",
      "ghostRating": "",
      "brand": "",
      "heatTrack": "0",
      "lifestyle": "",
      "overflowDamage": "0",
      "etiqCorpo": "0",
      "etiqAristoc": "0",
      "etiqStreet": "0",
      "etiqMilitary": "0",
      "etiqCivil": "0",
      "etiqCriminal": "0",
      "etiqWaste": "0",
      "actorMovement": "6",
      "kismetSum": "0",
      "kismetTospend": "0",
      "kismetPoolmax": "1",
      "inventoryRituals": {
        "pjmyUWRqRgDP8yrm": {
          "name": "SpellTest",
          "id": "pjmyUWRqRgDP8yrm",
          "uuid": "Actor.eMbezua6UThIStwT.Item.pjmyUWRqRgDP8yrm",
          "action": "\"Cast\""
        },
        "YhtiMP32QlfgVOnU": {
          "name": "SpellTest",
          "id": "YhtiMP32QlfgVOnU",
          "uuid": "Actor.eMbezua6UThIStwT.Item.YhtiMP32QlfgVOnU",
          "action": "\"Cast\""
        }
      },
      "inventoryWeapons": {
        "dbLNPeu1yeAJQbhm": {
          "name": "GunTest",
          "id": "dbLNPeu1yeAJQbhm",
          "uuid": "Actor.eMbezua6UThIStwT.Item.dbLNPeu1yeAJQbhm",
          "action": "\"Fire\"",
          "wepAction1": "SS\n\n\n",
          "wepAction2": "\n\n\n",
          "wepAction3": "B\n\n",
          "wepAction4": "\n\n"
        },
        "kdaYQQPSClBv0gzp": {
          "name": "GunTest",
          "id": "kdaYQQPSClBv0gzp",
          "uuid": "Actor.eMbezua6UThIStwT.Item.kdaYQQPSClBv0gzp",
          "wepAction1": "SS\n\n\n",
          "wepAction2": "DT\n\n\n",
          "wepAction3": "B\n\n",
          "wepAction4": "FA\n\n"
        },
        "zceG7AMa7IZQROP3": {
          "name": "ArcheryTest",
          "id": "zceG7AMa7IZQROP3",
          "uuid": "Actor.eMbezua6UThIStwT.Item.zceG7AMa7IZQROP3",
          "wepAction1": "\n\n\n",
          "wepAction2": "\n\n\n\n",
          "wepAction3": "\n\n",
          "wepAction4": "\n\n"
        },
        "kUiYTpnbaIJzENlU": {
          "name": "GunTest",
          "id": "kUiYTpnbaIJzENlU",
          "uuid": "Actor.eMbezua6UThIStwT.Item.kUiYTpnbaIJzENlU",
          "wepAction1": "SS\n\n\n",
          "wepAction2": "DT\n\n\n",
          "wepAction3": "\n\n",
          "wepAction4": "FA\n\n"
        },
        "dxpQ6HRsD8usAP8L": {
          "name": "EnergyTest",
          "id": "dxpQ6HRsD8usAP8L",
          "uuid": "Actor.eMbezua6UThIStwT.Item.dxpQ6HRsD8usAP8L",
          "wepAction1": "\n\n\n",
          "wepAction2": "\n\n\n",
          "wepAction3": "\n\n",
          "wepAction4": "\n\n"
        },
        "o3Ix9nALmbnldF5T": {
          "name": "ThrwnTest",
          "id": "o3Ix9nALmbnldF5T",
          "uuid": "Actor.eMbezua6UThIStwT.Item.o3Ix9nALmbnldF5T",
          "wepAction1": "\n\n\n",
          "wepAction2": "\n\n\n",
          "wepAction3": "\n\n",
          "wepAction4": "\n\n"
        },
        "SZfDlJyDyIEPjrlz": {
          "name": "MeleeTest",
          "id": "SZfDlJyDyIEPjrlz",
          "uuid": "Actor.eMbezua6UThIStwT.Item.SZfDlJyDyIEPjrlz",
          "wepAction1": "\n\n\n",
          "wepAction2": "\n\n\n",
          "wepAction3": "\n\n",
          "wepAction4": "\n\n"
        },
        "lr51rZNNoQtUlZwV": {
          "name": "ArcheryTest",
          "id": "lr51rZNNoQtUlZwV",
          "uuid": "Actor.eMbezua6UThIStwT.Item.lr51rZNNoQtUlZwV",
          "wepAction1": "SS\n\n\n",
          "wepAction2": "\n\n\n",
          "wepAction3": "\n\n",
          "wepAction4": "\n\n"
        },
        "Prqbxxbw8mZCJUg1": {
          "name": "ArcheryTest",
          "id": "Prqbxxbw8mZCJUg1",
          "uuid": "Actor.eMbezua6UThIStwT.Item.Prqbxxbw8mZCJUg1",
          "wepAction1": "Fire\n\n\n",
          "wepAction2": "\n\n\n",
          "wepAction3": "\n\n",
          "wepAction4": "\n\n"
        },
        "jiAXXhs1259Kq36b": {
          "name": "EnergyTest",
          "id": "jiAXXhs1259Kq36b",
          "uuid": "Actor.eMbezua6UThIStwT.Item.jiAXXhs1259Kq36b",
          "wepAction1": "Fire\n\n\n",
          "wepAction2": "\n\n\n",
          "wepAction3": "\n\n",
          "wepAction4": "\n\n"
        },
        "FKW6So6vzxhIOuOY": {
          "name": "ThrwnTest",
          "id": "FKW6So6vzxhIOuOY",
          "uuid": "Actor.eMbezua6UThIStwT.Item.FKW6So6vzxhIOuOY",
          "wepAction1": "Attack\n\n\n",
          "wepAction2": "\n\n\n",
          "wepAction3": "\n\n",
          "wepAction4": "\n\n"
        },
        "YQhTfkbgmZkNQ4Em": {
          "name": "MeleeTest",
          "id": "YQhTfkbgmZkNQ4Em",
          "uuid": "Actor.eMbezua6UThIStwT.Item.YQhTfkbgmZkNQ4Em",
          "wepAction1": "Attack\n\n\n",
          "wepAction2": "\n\n\n",
          "wepAction3": "\n\n",
          "wepAction4": "\n\n"
        },
        "fd9hknGM3bp01BIz": {
          "name": "ThrownExample",
          "id": "fd9hknGM3bp01BIz",
          "uuid": "Actor.eMbezua6UThIStwT.Item.fd9hknGM3bp01BIz",
          "wepAction1": "Attack\n\n\n",
          "wepAction2": "\n\n\n",
          "wepAction3": "\n\n",
          "wepAction4": "\n\n"
        },
        "NdhskDMsGMoYMWiI": {
          "name": "Photon Reaver Ei-7",
          "id": "NdhskDMsGMoYMWiI",
          "uuid": "Actor.eMbezua6UThIStwT.Item.NdhskDMsGMoYMWiI",
          "wepAction1": "Lazer Bolt\n\n\n",
          "wepAction2": "\n\n\n",
          "wepAction3": "\n\n",
          "wepAction4": "\n\n"
        },
        "eRokJ9mYUDD9295h": {
          "name": "Defender",
          "id": "eRokJ9mYUDD9295h",
          "uuid": "Actor.eMbezua6UThIStwT.Item.eRokJ9mYUDD9295h",
          "wepAction1": "SS\n\n\n",
          "wepAction2": "\n\n\n",
          "wepAction3": "\n\n",
          "wepAction4": "\n\n"
        },
        "VD1Tjqib8KP3gH5J": {
          "name": "Compound Bow",
          "id": "VD1Tjqib8KP3gH5J",
          "uuid": "Actor.eMbezua6UThIStwT.Item.VD1Tjqib8KP3gH5J",
          "wepAction1": "Fire\n\n\n",
          "wepAction2": "\n\n\n",
          "wepAction3": "\n\n",
          "wepAction4": "\n\n"
        },
        "UvvZklu6WWw4tbKf": {
          "name": "Brass Knuckles",
          "id": "UvvZklu6WWw4tbKf",
          "uuid": "Actor.eMbezua6UThIStwT.Item.UvvZklu6WWw4tbKf",
          "wepAction1": "Punch\n\n\n",
          "wepAction2": "\n\n\n",
          "wepAction3": "\n\n",
          "wepAction4": "\n\n"
        },
        "cxsnu4Ux3l2mV8sz": {
          "name": "ThrownExample",
          "id": "cxsnu4Ux3l2mV8sz",
          "uuid": "Actor.eMbezua6UThIStwT.Item.cxsnu4Ux3l2mV8sz",
          "wepAction1": "Attack\n\n\n",
          "wepAction2": "\n\n\n",
          "wepAction3": "\n\n",
          "wepAction4": "\n\n"
        }
      },
      "actorUuid": "Actor.eMbezua6UThIStwT",
      "availableKismet": "0",
      "armorInternal": "",
      "armorUnder": "",
      "armorOuter": "",
      "inventoryVCR": {
        "pjmyUWRqRgDP8yrm": {
          "name": "SpellTest",
          "id": "pjmyUWRqRgDP8yrm",
          "uuid": "Actor.eMbezua6UThIStwT.Item.pjmyUWRqRgDP8yrm",
          "action": "\"Cast\""
        },
        "dbLNPeu1yeAJQbhm": {
          "name": "GunTest",
          "id": "dbLNPeu1yeAJQbhm",
          "uuid": "Actor.eMbezua6UThIStwT.Item.dbLNPeu1yeAJQbhm",
          "action": "\"Fire\""
        },
        "vlXAwk7U5US1gH77": {
          "name": "DroneDriveTEST",
          "id": "vlXAwk7U5US1gH77",
          "uuid": "Actor.eMbezua6UThIStwT.Item.vlXAwk7U5US1gH77",
          "action": "\"Drive\""
        },
        "kdaYQQPSClBv0gzp": {
          "name": "GunTest",
          "id": "kdaYQQPSClBv0gzp",
          "uuid": "Actor.eMbezua6UThIStwT.Item.kdaYQQPSClBv0gzp",
          "action": "\"Fire\""
        },
        "zceG7AMa7IZQROP3": {
          "name": "ArcheryTest",
          "id": "zceG7AMa7IZQROP3",
          "uuid": "Actor.eMbezua6UThIStwT.Item.zceG7AMa7IZQROP3",
          "action": "\"Attack\""
        },
        "kUiYTpnbaIJzENlU": {
          "name": "GunTest",
          "id": "kUiYTpnbaIJzENlU",
          "uuid": "Actor.eMbezua6UThIStwT.Item.kUiYTpnbaIJzENlU",
          "action": "\"Fire\""
        },
        "dxpQ6HRsD8usAP8L": {
          "name": "EnergyTest",
          "id": "dxpQ6HRsD8usAP8L",
          "uuid": "Actor.eMbezua6UThIStwT.Item.dxpQ6HRsD8usAP8L",
          "action": "\"Attack\""
        },
        "o3Ix9nALmbnldF5T": {
          "name": "ThrwnTest",
          "id": "o3Ix9nALmbnldF5T",
          "uuid": "Actor.eMbezua6UThIStwT.Item.o3Ix9nALmbnldF5T",
          "action": "\"Attack\""
        },
        "SZfDlJyDyIEPjrlz": {
          "name": "MeleeTest",
          "id": "SZfDlJyDyIEPjrlz",
          "uuid": "Actor.eMbezua6UThIStwT.Item.SZfDlJyDyIEPjrlz",
          "action": "\"Attack\""
        },
        "lr51rZNNoQtUlZwV": {
          "name": "ArcheryTest",
          "id": "lr51rZNNoQtUlZwV",
          "uuid": "Actor.eMbezua6UThIStwT.Item.lr51rZNNoQtUlZwV",
          "action": "\"Use\""
        },
        "Prqbxxbw8mZCJUg1": {
          "name": "ArcheryTest",
          "id": "Prqbxxbw8mZCJUg1",
          "uuid": "Actor.eMbezua6UThIStwT.Item.Prqbxxbw8mZCJUg1",
          "action": "\"Use\""
        },
        "jiAXXhs1259Kq36b": {
          "name": "EnergyTest",
          "id": "jiAXXhs1259Kq36b",
          "uuid": "Actor.eMbezua6UThIStwT.Item.jiAXXhs1259Kq36b",
          "action": "\"Use\""
        },
        "FKW6So6vzxhIOuOY": {
          "name": "ThrwnTest",
          "id": "FKW6So6vzxhIOuOY",
          "uuid": "Actor.eMbezua6UThIStwT.Item.FKW6So6vzxhIOuOY",
          "action": "\"Use\""
        },
        "YQhTfkbgmZkNQ4Em": {
          "name": "MeleeTest",
          "id": "YQhTfkbgmZkNQ4Em",
          "uuid": "Actor.eMbezua6UThIStwT.Item.YQhTfkbgmZkNQ4Em",
          "action": "\"Use\""
        },
        "tSY35wa2Em3t45oO": {
          "name": "VCRtest",
          "id": "tSY35wa2Em3t45oO",
          "uuid": "Actor.eMbezua6UThIStwT.Item.tSY35wa2Em3t45oO",
          "action": "\"Use\""
        }
      },
      "deckNotes": "",
      "invTxt": "",
      "dronesOwned": {
        "EqxuZBqp0i0dT2ep": {
          "name": "Drone Test",
          "id": "EqxuZBqp0i0dT2ep",
          "uuid": "Actor.eMbezua6UThIStwT.Item.EqxuZBqp0i0dT2ep",
          "deployButton": "Deploy",
          "openButton": "Open"
        },
        "Q4pB3k0gG2mbuXgM": {
          "name": "Drone Test",
          "id": "Q4pB3k0gG2mbuXgM",
          "uuid": "Actor.eMbezua6UThIStwT.Item.Q4pB3k0gG2mbuXgM",
          "deployButton": "Deploy",
          "openButton": "Open"
        },
        "FkmfbXSk4BDQwXQh": {
          "name": "Drone Test",
          "id": "FkmfbXSk4BDQwXQh",
          "uuid": "Actor.eMbezua6UThIStwT.Item.FkmfbXSk4BDQwXQh",
          "deployButton": "Deploy",
          "openButton": "Open"
        },
        "y14pNzM6p0WhwH09": {
          "name": "Drone Test",
          "id": "y14pNzM6p0WhwH09",
          "uuid": "Actor.eMbezua6UThIStwT.Item.y14pNzM6p0WhwH09",
          "deployButton": "Deploy",
          "openButton": "Open"
        }
      },
      "pcVehicles": {
        "qRAkr8iKgw4LXD1u": {
          "name": "Vehicle Test",
          "id": "qRAkr8iKgw4LXD1u",
          "uuid": "Actor.eMbezua6UThIStwT.Item.qRAkr8iKgw4LXD1u",
          "deployButton": "Deploy",
          "openButton": "Open"
        },
        "L9JhrpHAEjxjEKRB": {
          "name": "Vehicle Test",
          "id": "L9JhrpHAEjxjEKRB",
          "uuid": "Actor.eMbezua6UThIStwT.Item.L9JhrpHAEjxjEKRB",
          "deployButton": "Deploy",
          "openButton": "Open"
        }
      },
      "deckCyberdeck": {
        "x3kB8pvH9NGptwiD": {
          "name": "Royal Durandal",
          "id": "x3kB8pvH9NGptwiD",
          "uuid": "Actor.eMbezua6UThIStwT.Item.x3kB8pvH9NGptwiD"
        },
        "91cPDhiC2u6l2E94": {
          "name": "Mars Claymore",
          "id": "91cPDhiC2u6l2E94",
          "uuid": "Actor.eMbezua6UThIStwT.Item.91cPDhiC2u6l2E94"
        },
        "HxGpabGN8JRCZgtK": {
          "name": "Orb Epsilon",
          "id": "HxGpabGN8JRCZgtK",
          "uuid": "Actor.eMbezua6UThIStwT.Item.HxGpabGN8JRCZgtK"
        },
        "iI0IrpV99bsQGtRx": {
          "name": "Orb Epsilon",
          "id": "iI0IrpV99bsQGtRx",
          "uuid": "Actor.eMbezua6UThIStwT.Item.iI0IrpV99bsQGtRx"
        }
      },
      "activeThreads": {
        "8miMjPbeMd0P6hcO": {
          "name": "ERROR",
          "id": "ERROR",
          "uuid": "ERROR",
          "action1": "\"E War\"",
          "action2": ""
        },
        "hYiKksKQcaSWGIJ2": {
          "name": "ERROR",
          "id": "ERROR",
          "uuid": "ERROR",
          "action1": "\"Hack\"",
          "action2": ""
        },
        "N2A9avRWHxle0SPx": {
          "name": "ERROR",
          "id": "ERROR",
          "uuid": "ERROR",
          "action1": "\"Hack\"",
          "action2": ""
        },
        "S8wP00dCsaaBEpfs": {
          "name": "De-Rez",
          "id": "S8wP00dCsaaBEpfs",
          "uuid": "Actor.eMbezua6UThIStwT.Item.S8wP00dCsaaBEpfs",
          "action1": "\"E War\"",
          "action2": "Move to Storage"
        },
        "6N73L1MVMnQkNCCk": {
          "name": "Alert Monitor",
          "id": "6N73L1MVMnQkNCCk",
          "uuid": "Actor.eMbezua6UThIStwT.Item.6N73L1MVMnQkNCCk",
          "action1": "\"Hack\"",
          "action2": ""
        },
        "aXNhGtqTva4aIfjG": {
          "name": "Acid Burn",
          "id": "aXNhGtqTva4aIfjG",
          "uuid": "Actor.eMbezua6UThIStwT.Item.aXNhGtqTva4aIfjG",
          "action1": "\"E War\"",
          "action2": "Move to Storage"
        },
        "ruOX6Am4ZpdnF3nX": {
          "name": "Hypnotic Projection",
          "id": "ruOX6Am4ZpdnF3nX",
          "uuid": "Actor.eMbezua6UThIStwT.Item.ruOX6Am4ZpdnF3nX",
          "action1": "\"E War\"",
          "action2": "Move to Storage"
        },
        "85D8jPZoErR4w5Mn": {
          "name": "Encrypt File",
          "id": "85D8jPZoErR4w5Mn",
          "uuid": "Actor.eMbezua6UThIStwT.Item.85D8jPZoErR4w5Mn",
          "action1": "\"Hack\"",
          "action2": "Move to Storage"
        },
        "4Oar0S95tYVvaKC1": {
          "name": "Crack Encryption",
          "id": "4Oar0S95tYVvaKC1",
          "uuid": "Actor.eMbezua6UThIStwT.Item.4Oar0S95tYVvaKC1",
          "action1": "\"Hack\"",
          "action2": "Move to Storage"
        },
        "RHBhMKyVszSoQDtU": {
          "name": "Vent Gas",
          "id": "RHBhMKyVszSoQDtU",
          "uuid": "Actor.eMbezua6UThIStwT.Item.RHBhMKyVszSoQDtU",
          "action1": "\"Hack\"",
          "action2": "Move to Storage"
        },
        "X8kpEpQ1aCqHkQcC": {
          "name": "De-Rez",
          "id": "X8kpEpQ1aCqHkQcC",
          "uuid": "Actor.eMbezua6UThIStwT.Item.X8kpEpQ1aCqHkQcC",
          "action1": "\"E War\"",
          "action2": "Move to Storage"
        },
        "jP6yKYWdTfuRJkLU": {
          "name": "Alert Monitor",
          "id": "jP6yKYWdTfuRJkLU",
          "uuid": "Actor.eMbezua6UThIStwT.Item.jP6yKYWdTfuRJkLU",
          "action1": "\"Hack\"",
          "action2": "Move to Storage"
        },
        "dRwjT9HfZ5IQvi7e": {
          "name": "Electric Strike",
          "id": "dRwjT9HfZ5IQvi7e",
          "uuid": "Actor.eMbezua6UThIStwT.Item.dRwjT9HfZ5IQvi7e",
          "action1": "\"Hack\"",
          "action2": "Move to Storage"
        },
        "Lzsyoi4yqkdxN5mn": {
          "name": "Ghost Protocol",
          "id": "Lzsyoi4yqkdxN5mn",
          "uuid": "Actor.eMbezua6UThIStwT.Item.Lzsyoi4yqkdxN5mn",
          "action1": "\"Hack\"",
          "action2": "Move to Storage"
        },
        "2iB381eJ4og3PFR6": {
          "name": "Shadow Protocols",
          "id": "2iB381eJ4og3PFR6",
          "uuid": "Actor.eMbezua6UThIStwT.Item.2iB381eJ4og3PFR6",
          "action1": "\"Hack\"",
          "action2": "Move to Storage"
        },
        "ywpFab1sQHu5j82r": {
          "name": "Vermin Call",
          "id": "ywpFab1sQHu5j82r",
          "uuid": "Actor.eMbezua6UThIStwT.Item.ywpFab1sQHu5j82r",
          "action1": "\"E War\"",
          "action2": "Move to Storage"
        },
        "MfsN0BZyKer0BkC2": {
          "name": "Electric Strike",
          "id": "MfsN0BZyKer0BkC2",
          "uuid": "Actor.eMbezua6UThIStwT.Item.MfsN0BZyKer0BkC2",
          "action1": "\"Hack\"",
          "action2": "Move to Storage"
        },
        "itIpsTCH2uOWeaiv": {
          "name": "Device Control",
          "id": "itIpsTCH2uOWeaiv",
          "uuid": "Actor.eMbezua6UThIStwT.Item.itIpsTCH2uOWeaiv",
          "action1": "\"E War\"",
          "action2": "Move to Storage"
        }
      },
      "inactiveSoftware": {
        "8miMjPbeMd0P6hcO": {
          "name": "ERROR",
          "id": "ERROR",
          "uuid": "ERROR",
          "action1": "\"E War\"",
          "action2": ""
        },
        "hYiKksKQcaSWGIJ2": {
          "name": "ERROR",
          "id": "ERROR",
          "uuid": "ERROR",
          "action1": "\"Hack\"",
          "action2": ""
        },
        "N2A9avRWHxle0SPx": {
          "name": "ERROR",
          "id": "ERROR",
          "uuid": "ERROR",
          "action1": "\"Hack\"",
          "action2": ""
        },
        "S8wP00dCsaaBEpfs": {
          "name": "De-Rez",
          "id": "S8wP00dCsaaBEpfs",
          "uuid": "Actor.eMbezua6UThIStwT.Item.S8wP00dCsaaBEpfs",
          "action1": "\"E War\"",
          "action2": "Load to Threads"
        },
        "6N73L1MVMnQkNCCk": {
          "name": "Alert Monitor",
          "id": "6N73L1MVMnQkNCCk",
          "uuid": "Actor.eMbezua6UThIStwT.Item.6N73L1MVMnQkNCCk",
          "action1": "\"Hack\"",
          "action2": "Load to Threads"
        },
        "mI5aL5i6sY9pd1i9": {
          "name": "Refraction Field",
          "id": "mI5aL5i6sY9pd1i9",
          "uuid": "Actor.eMbezua6UThIStwT.Item.mI5aL5i6sY9pd1i9",
          "action1": "\"E War\"",
          "action2": "Load to Threads"
        },
        "RyvPEGbdg7WcUqs1": {
          "name": "Emotional Influence",
          "id": "RyvPEGbdg7WcUqs1",
          "uuid": "Actor.eMbezua6UThIStwT.Item.RyvPEGbdg7WcUqs1",
          "action1": "\"Hack\"",
          "action2": "Load to Threads"
        },
        "itIpsTCH2uOWeaiv": {
          "name": "Device Control",
          "id": "itIpsTCH2uOWeaiv",
          "uuid": "Actor.eMbezua6UThIStwT.Item.itIpsTCH2uOWeaiv",
          "action1": "\"E War\"",
          "action2": "Load to Threads"
        },
        "2iB381eJ4og3PFR6": {
          "name": "Shadow Protocols",
          "id": "2iB381eJ4og3PFR6",
          "uuid": "Actor.eMbezua6UThIStwT.Item.2iB381eJ4og3PFR6",
          "action1": "\"Hack\"",
          "action2": "Load to Threads"
        },
        "ywpFab1sQHu5j82r": {
          "name": "Vermin Call",
          "id": "ywpFab1sQHu5j82r",
          "uuid": "Actor.eMbezua6UThIStwT.Item.ywpFab1sQHu5j82r",
          "action1": "\"E War\"",
          "action2": "Load to Threads"
        },
        "MfsN0BZyKer0BkC2": {
          "name": "Electric Strike",
          "id": "MfsN0BZyKer0BkC2",
          "uuid": "Actor.eMbezua6UThIStwT.Item.MfsN0BZyKer0BkC2",
          "action1": "\"Hack\"",
          "action2": "Load to Threads"
        },
        "4Oar0S95tYVvaKC1": {
          "name": "Crack Encryption",
          "id": "4Oar0S95tYVvaKC1",
          "uuid": "Actor.eMbezua6UThIStwT.Item.4Oar0S95tYVvaKC1",
          "action1": "\"Hack\"",
          "action2": "Load to Threads"
        },
        "RHBhMKyVszSoQDtU": {
          "name": "Vent Gas",
          "id": "RHBhMKyVszSoQDtU",
          "uuid": "Actor.eMbezua6UThIStwT.Item.RHBhMKyVszSoQDtU",
          "action1": "\"Hack\"",
          "action2": "Load to Threads"
        },
        "X8kpEpQ1aCqHkQcC": {
          "name": "De-Rez",
          "id": "X8kpEpQ1aCqHkQcC",
          "uuid": "Actor.eMbezua6UThIStwT.Item.X8kpEpQ1aCqHkQcC",
          "action1": "\"E War\"",
          "action2": "Load to Threads"
        },
        "jP6yKYWdTfuRJkLU": {
          "name": "Alert Monitor",
          "id": "jP6yKYWdTfuRJkLU",
          "uuid": "Actor.eMbezua6UThIStwT.Item.jP6yKYWdTfuRJkLU",
          "action1": "\"Hack\"",
          "action2": "Load to Threads"
        },
        "dRwjT9HfZ5IQvi7e": {
          "name": "Electric Strike",
          "id": "dRwjT9HfZ5IQvi7e",
          "uuid": "Actor.eMbezua6UThIStwT.Item.dRwjT9HfZ5IQvi7e",
          "action1": "\"Hack\"",
          "action2": "Load to Threads"
        }
      },
      "physicalBar": {
        "value": 9,
        "max": 9
      },
      "stunBar": {
        "value": 11,
        "max": 11
      }
    },
    "activeConditionalModifierGroups": [],
    "template": "409875cd45a544c0",
    "templateSystemUniqueVersion": 2384750755
  },
  "prototypeToken": {
    "name": "TestSpell",
    "displayName": 50,
    "actorLink": true,
    "width": 1,
    "height": 1,
    "texture": {
      "src": "icons/svg/mystery-man.svg",
      "anchorX": 0.5,
      "anchorY": 0.5,
      "offsetX": 0,
      "offsetY": 0,
      "fit": "contain",
      "scaleX": 1,
      "scaleY": 1,
      "rotation": 0,
      "tint": "#ffffff",
      "alphaThreshold": 0.75
    },
    "lockRotation": false,
    "rotation": 0,
    "alpha": 1,
    "disposition": 1,
    "displayBars": 50,
    "bar1": {
      "attribute": "attributeBar.physicalCur"
    },
    "bar2": {
      "attribute": "attributeBar.stunCur"
    },
    "light": {
      "negative": false,
      "priority": 0,
      "alpha": 0.5,
      "angle": 360,
      "bright": 0,
      "color": null,
      "coloration": 1,
      "dim": 0,
      "attenuation": 0.5,
      "luminosity": 0.5,
      "saturation": 0,
      "contrast": 0,
      "shadows": 0,
      "animation": {
        "type": null,
        "speed": 5,
        "intensity": 5,
        "reverse": false
      },
      "darkness": {
        "min": 0,
        "max": 1
      }
    },
    "sight": {
      "enabled": true,
      "range": 1,
      "angle": 360,
      "visionMode": "basic",
      "color": null,
      "attenuation": 0.1,
      "brightness": 0,
      "saturation": 0,
      "contrast": 0
    },
    "detectionModes": [],
    "occludable": {
      "radius": 0
    },
    "ring": {
      "enabled": false,
      "colors": {
        "ring": null,
        "background": null
      },
      "effects": 0,
      "subject": {
        "scale": 1,
        "texture": null
      }
    },
    "turnMarker": {
      "mode": 1,
      "animation": null,
      "src": null,
      "disposition": false
    },
    "movementAction": null,
    "flags": {},
    "randomImg": false,
    "appendNumber": false,
    "prependAdjective": false
  },
  "items": [
    {
      "folder": "sBPUaBp6tAKIGW6z",
      "name": "DroneDriveTEST",
      "type": "equippableItem",
      "_id": "vlXAwk7U5US1gH77",
      "img": "icons/svg/item-bag.svg",
      "system": {
        "body": {
          "contents": [
            {
              "key": "",
              "colSpan": 1,
              "rowSpan": 1,
              "cssClass": "",
              "role": 0,
              "editRole": 0,
              "permission": 0,
              "tooltip": "",
              "visibilityFormula": "",
              "editableFormula": "",
              "escapeHTML": false,
              "type": "panel",
              "contents": [
                {
                  "key": "driveskillText",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "textArea",
                  "size": "full-size",
                  "label": "",
                  "defaultValue": "",
                  "style": "sheet"
                }
              ],
              "flow": "vertical",
              "align": "left",
              "verticalAlign": "top",
              "collapsible": true,
              "defaultCollapsed": false,
              "title": "Skill Rules",
              "titleStyle": "default"
            },
            {
              "key": "",
              "colSpan": 1,
              "rowSpan": 1,
              "cssClass": "",
              "role": 0,
              "editRole": 0,
              "permission": 0,
              "tooltip": "",
              "visibilityFormula": "",
              "editableFormula": "",
              "escapeHTML": false,
              "type": "panel",
              "contents": [
                {
                  "key": "",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "panel",
                  "contents": [
                    {
                      "key": "bonusDice",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "full-size",
                      "label": "bonusDice",
                      "defaultValue": "0",
                      "allowDecimal": false,
                      "minVal": "",
                      "maxVal": "",
                      "allowRelative": false,
                      "showControls": true,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    },
                    {
                      "key": "diceMod",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "full-size",
                      "label": "diceMod",
                      "defaultValue": "0",
                      "allowDecimal": false,
                      "minVal": "",
                      "maxVal": "",
                      "allowRelative": false,
                      "showControls": true,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    },
                    {
                      "key": "actionLabel",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "textField",
                      "size": "full-size",
                      "label": "actionLabel",
                      "defaultValue": "Drive",
                      "charList": "",
                      "maxLength": null,
                      "autocomplete": ""
                    }
                  ],
                  "flow": "grid-2",
                  "align": "left",
                  "verticalAlign": "top",
                  "collapsible": false,
                  "defaultCollapsed": false,
                  "title": "",
                  "titleStyle": "default"
                }
              ],
              "flow": "vertical",
              "align": "left",
              "verticalAlign": "top",
              "collapsible": true,
              "defaultCollapsed": false,
              "title": "Roll Config",
              "titleStyle": "default"
            },
            {
              "key": "",
              "colSpan": 1,
              "rowSpan": 1,
              "cssClass": "",
              "role": 4,
              "editRole": 0,
              "permission": 0,
              "tooltip": "",
              "visibilityFormula": "",
              "editableFormula": "",
              "escapeHTML": false,
              "type": "panel",
              "contents": [
                {
                  "key": "limitBonusActorKey",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "textField",
                  "size": "full-size",
                  "label": "Limit Bonus Actor Key",
                  "defaultValue": "rigHandling",
                  "charList": "",
                  "maxLength": null,
                  "autocomplete": ""
                },
                {
                  "key": "skillKey",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "textField",
                  "size": "full-size",
                  "label": "skillKey",
                  "defaultValue": "Skill_Drive",
                  "charList": "",
                  "maxLength": null,
                  "autocomplete": ""
                },
                {
                  "key": "poolKey_copy1",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "select",
                  "size": "full-size",
                  "label": "poolKey",
                  "defaultValue": "Focus",
                  "selectedOptionType": "custom",
                  "options": [
                    {
                      "key": "Brawn",
                      "value": "Brawn"
                    },
                    {
                      "key": "Finesse",
                      "value": "Finesse"
                    },
                    {
                      "key": "Resolve",
                      "value": "Resolve"
                    },
                    {
                      "key": "Focus",
                      "value": "Focus"
                    }
                  ]
                }
              ],
              "flow": "vertical",
              "align": "left",
              "verticalAlign": "top",
              "collapsible": true,
              "defaultCollapsed": false,
              "title": "Hidden",
              "titleStyle": "default"
            }
          ],
          "key": "custom_body",
          "type": "panel"
        },
        "display": {
          "width": 600,
          "height": 600,
          "fix_size": false,
          "pp_width": 64,
          "pp_height": 64
        },
        "header": {
          "contents": [
            {
              "key": "",
              "colSpan": 1,
              "rowSpan": 1,
              "cssClass": "",
              "role": 0,
              "editRole": 0,
              "permission": 0,
              "tooltip": "",
              "visibilityFormula": "",
              "editableFormula": "",
              "escapeHTML": false,
              "type": "label",
              "size": "full-size",
              "icon": "gun",
              "value": "${actionLabel ? actionLabel : \"Use\"}$",
              "prefix": "",
              "suffix": "",
              "rollMessage": "%{\n  // Prefer linkedEntity (inventory row) then entity (item sheet)\n  const doc = (typeof linkedEntity !== \"undefined\" && linkedEntity) ? linkedEntity\n            : (typeof entity !== \"undefined\" && entity) ? entity\n            : null;\n\n  const itemUuid = String(doc?.uuid ?? \"\").trim();\n\n  // Pull actor from safe sources only\n  const embeddedActorUuid =\n    (doc?.parent?.documentName === \"Actor\" && doc?.parent?.uuid) ? String(doc.parent.uuid) : \"\";\n\n  const scopeActorUuid =\n    (typeof actor !== \"undefined\" && actor?.documentName === \"Actor\" && actor?.uuid) ? String(actor.uuid) : \"\";\n\n  const controlledActorUuid = (() => {\n    const t = canvas?.tokens?.controlled?.[0];\n    return t?.actor?.uuid ? String(t.actor.uuid) : \"\";\n  })();\n\n  const targetedActorUuid = (() => {\n    const t = game.user?.targets ? Array.from(game.user.targets)[0] : null;\n    return t?.actor?.uuid ? String(t.actor.uuid) : \"\";\n  })();\n\n  const userCharUuid = game.user?.character?.uuid ? String(game.user.character.uuid) : \"\";\n\n  const actorUuid = String(\n    embeddedActorUuid ||\n    scopeActorUuid ||\n    controlledActorUuid ||\n    targetedActorUuid ||\n    userCharUuid ||\n    \"\"\n  ).trim();\n\n  if (!itemUuid) {\n    console.warn(\"SinlessCSB | rollItem: missing itemUuid\", { doc, linkedEntity: (typeof linkedEntity !== \"undefined\" ? linkedEntity : undefined), entity: (typeof entity !== \"undefined\" ? entity : undefined) });\n    ui.notifications?.warn?.(\"SinlessCSB: missing item context (itemUuid).\");\n    return \"\";\n  }\n\n  if (!actorUuid) {\n    console.warn(\"SinlessCSB | rollItem: missing actorUuid (control/target a token)\", {\n      itemUuid,\n      controlled: canvas?.tokens?.controlled?.length ?? 0,\n      targets: game.user?.targets?.size ?? 0\n    });\n    ui.notifications?.warn?.(\"SinlessCSB: No actor context. Control a token (click) or target one, then try again.\");\n    return \"\";\n  }\n\n  const api = game.modules.get(\"sinlesscsb\")?.api;\n  if (typeof api?.rollItem !== \"function\") {\n    console.warn(\"SinlessCSB | rollItem: API not available\", { apiKeys: Object.keys(api ?? {}) });\n    ui.notifications?.error?.(\"SinlessCSB: rollItem API not available (module not ready / not exposed).\");\n    return \"\";\n  }\n\n  console.log(\"SinlessCSB | rollItem (hardened)\", { itemUuid, actorUuid, itemName: doc?.name });\n  api.rollItem({ itemUuid, actorUuid });\n  return \"\";\n}%\n",
              "altRollMessage": "",
              "rollMessageToChat": false,
              "altRollMessageToChat": false,
              "style": "button"
            }
          ],
          "key": "custom_header",
          "type": "panel"
        },
        "hidden": [],
        "modifiers": [],
        "props": {
          "driveskillText": "",
          "bonusDice": "0",
          "diceMod": "0",
          "actionLabel": "Drive",
          "limitBonusActorKey": "rigHandling",
          "skillKey": "Skill_Drive",
          "poolKey_copy1": "Focus"
        },
        "unique": false,
        "templateSystemUniqueVersion": 2544444880,
        "uniqueId": "XeDvGfyyLWIV3W6d",
        "template": "QtMNKYb9rrdKwv0k"
      },
      "effects": [],
      "sort": 0,
      "flags": {
        "custom-system-builder": {
          "version": "5.1.0"
        }
      },
      "_stats": {
        "compendiumSource": "Item.XeDvGfyyLWIV3W6d",
        "duplicateSource": null,
        "exportSource": null,
        "coreVersion": "13.351",
        "systemId": "custom-system-builder",
        "systemVersion": "5.1.0",
        "createdTime": 1768622248449,
        "modifiedTime": 1768622248449,
        "lastModifiedBy": "KoiB8oaGNkPdgzdM"
      },
      "ownership": {
        "default": 0
      }
    },
    {
      "name": "ArcheryTest",
      "type": "equippableItem",
      "_id": "zceG7AMa7IZQROP3",
      "img": "icons/svg/item-bag.svg",
      "system": {
        "body": {
          "contents": [
            {
              "key": "",
              "colSpan": 1,
              "rowSpan": 1,
              "cssClass": "",
              "role": 0,
              "editRole": 0,
              "permission": 0,
              "tooltip": "",
              "visibilityFormula": "",
              "editableFormula": "",
              "escapeHTML": false,
              "type": "panel",
              "contents": [
                {
                  "key": "spellRulestext",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "textArea",
                  "size": "full-size",
                  "label": "Spell Rules",
                  "defaultValue": "<p>Paste text from book / other useful info here.</p>",
                  "style": "sheet"
                }
              ],
              "flow": "horizontal",
              "align": "left",
              "verticalAlign": "top",
              "collapsible": true,
              "defaultCollapsed": true,
              "title": "Rules Text",
              "titleStyle": "default"
            },
            {
              "key": "",
              "colSpan": 1,
              "rowSpan": 1,
              "cssClass": "",
              "role": 0,
              "editRole": 0,
              "permission": 0,
              "tooltip": "",
              "visibilityFormula": "",
              "editableFormula": "",
              "escapeHTML": false,
              "type": "panel",
              "contents": [
                {
                  "key": "actionLabel",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "textField",
                  "size": "full-size",
                  "label": "actionLabel",
                  "defaultValue": "Conjure",
                  "charList": "",
                  "maxLength": null,
                  "autocomplete": ""
                },
                {
                  "key": "",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "panel",
                  "contents": [
                    {
                      "key": "spellFociRank",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "full-size",
                      "label": "Foci Rank",
                      "defaultValue": "1",
                      "allowDecimal": false,
                      "minVal": "1",
                      "maxVal": "",
                      "allowRelative": false,
                      "showControls": true,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    },
                    {
                      "key": "spellforceMax",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "full-size",
                      "label": "Force Rating (MAX Learned)",
                      "defaultValue": "1",
                      "allowDecimal": false,
                      "minVal": "1",
                      "maxVal": "",
                      "allowRelative": false,
                      "showControls": true,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    },
                    {
                      "key": "spellforceDefault",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "full-size",
                      "label": "Spell Force (Default)",
                      "defaultValue": "1",
                      "allowDecimal": false,
                      "minVal": "1",
                      "maxVal": "${spellforceMax}$",
                      "allowRelative": false,
                      "showControls": true,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    },
                    {
                      "key": "bonusDice",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "full-size",
                      "label": "bonusDice",
                      "defaultValue": "0",
                      "allowDecimal": false,
                      "minVal": "",
                      "maxVal": "",
                      "allowRelative": false,
                      "showControls": false,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    },
                    {
                      "key": "diceMod",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "full-size",
                      "label": "diceMod",
                      "defaultValue": "0",
                      "allowDecimal": false,
                      "minVal": "",
                      "maxVal": "",
                      "allowRelative": false,
                      "showControls": false,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    },
                    {
                      "key": "fetishRank",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "full-size",
                      "label": "Fetish Rank",
                      "defaultValue": "0",
                      "allowDecimal": false,
                      "minVal": "0",
                      "maxVal": "",
                      "allowRelative": false,
                      "showControls": true,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    },
                    {
                      "key": "spellDuration",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "textField",
                      "size": "full-size",
                      "label": "Duration",
                      "defaultValue": "Instantaneous",
                      "charList": "",
                      "maxLength": null,
                      "autocomplete": ""
                    },
                    {
                      "key": "spellArea",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "textField",
                      "size": "full-size",
                      "label": "Area",
                      "defaultValue": "Single",
                      "charList": "",
                      "maxLength": null,
                      "autocomplete": ""
                    },
                    {
                      "key": "spellResistance",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "textField",
                      "size": "full-size",
                      "label": "Resistance",
                      "defaultValue": "Brawn Pool",
                      "charList": "",
                      "maxLength": null,
                      "autocomplete": ""
                    }
                  ],
                  "flow": "grid-2",
                  "align": "left",
                  "verticalAlign": "top",
                  "collapsible": false,
                  "defaultCollapsed": false,
                  "title": "",
                  "titleStyle": "default"
                },
                {
                  "key": "drainFormula",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "textField",
                  "size": "full-size",
                  "label": "Drain Formula",
                  "defaultValue": "1 + (Force/2) ---example, REPLACE with correct formula---",
                  "charList": "",
                  "maxLength": null,
                  "autocomplete": ""
                },
                {
                  "key": "",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "panel",
                  "contents": [
                    {
                      "key": "exampleForce",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "textArea",
                      "size": "full-size",
                      "label": "",
                      "defaultValue": "<ol><li data-start=\"5936\" data-end=\"6018\"><p data-start=\"5938\" data-end=\"5952\">Use <code data-start=\"5906\" data-end=\"5913\">Force</code> for the chosen Force.</p><p></p></li><li data-start=\"5936\" data-end=\"6018\"><p data-start=\"5938\" data-end=\"5952\">Allowed example forms:</p><ul data-start=\"5955\" data-end=\"6018\"><li data-start=\"5955\" data-end=\"5968\"><p data-start=\"5957\" data-end=\"5968\"><code data-start=\"5957\" data-end=\"5968\">3 + Force</code></p></li><li data-start=\"5971\" data-end=\"5988\"><p data-start=\"5973\" data-end=\"5988\"><code data-start=\"5973\" data-end=\"5988\">1 + (Force/2)</code></p></li><li data-start=\"5991\" data-end=\"6004\"><p data-start=\"5993\" data-end=\"6004\"><code data-start=\"5993\" data-end=\"6004\">(Force/2)</code></p><p data-start=\"6021\" data-end=\"6098\"></p></li></ul></li></ol>",
                      "style": "sheet"
                    }
                  ],
                  "flow": "horizontal",
                  "align": "left",
                  "verticalAlign": "top",
                  "collapsible": true,
                  "defaultCollapsed": false,
                  "title": "Drain Formula Syntax Guidelines",
                  "titleStyle": "default"
                },
                {
                  "key": "spellTags",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "textField",
                  "size": "full-size",
                  "label": "Tags",
                  "defaultValue": "",
                  "charList": "",
                  "maxLength": null,
                  "autocomplete": ""
                }
              ],
              "flow": "vertical",
              "align": "left",
              "verticalAlign": "top",
              "collapsible": true,
              "defaultCollapsed": false,
              "title": "Roll Config",
              "titleStyle": "default"
            },
            {
              "key": "",
              "colSpan": 1,
              "rowSpan": 1,
              "cssClass": "",
              "role": 4,
              "editRole": 0,
              "permission": 0,
              "tooltip": "",
              "visibilityFormula": "",
              "editableFormula": "",
              "escapeHTML": false,
              "type": "panel",
              "contents": [
                {
                  "key": "spellCategory",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "textField",
                  "size": "full-size",
                  "label": "Category",
                  "defaultValue": "Combat",
                  "charList": "",
                  "maxLength": null,
                  "autocomplete": ""
                },
                {
                  "key": "drainForceMult",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "numberField",
                  "size": "full-size",
                  "label": "Drain xForce",
                  "defaultValue": "1",
                  "allowDecimal": true,
                  "minVal": "0",
                  "maxVal": "",
                  "allowRelative": false,
                  "showControls": true,
                  "controlsStyle": "hover",
                  "controlsCustomIncrements": "",
                  "inputStyle": "text"
                },
                {
                  "key": "skillKey",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "textField",
                  "size": "full-size",
                  "label": "skillKey",
                  "defaultValue": "Skill_Conjuring",
                  "charList": "",
                  "maxLength": null,
                  "autocomplete": ""
                },
                {
                  "key": "poolKey",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "textField",
                  "size": "full-size",
                  "label": "poolKey",
                  "defaultValue": "Resolve",
                  "charList": "",
                  "maxLength": null,
                  "autocomplete": ""
                }
              ],
              "flow": "grid-2",
              "align": "center",
              "verticalAlign": "top",
              "collapsible": true,
              "defaultCollapsed": true,
              "title": "hidden",
              "titleStyle": "default"
            }
          ],
          "key": "custom_body",
          "type": "panel"
        },
        "display": {
          "width": 600,
          "height": 600,
          "fix_size": false,
          "pp_width": 64,
          "pp_height": 64
        },
        "header": {
          "contents": [
            {
              "key": "",
              "colSpan": 1,
              "rowSpan": 1,
              "cssClass": "sinlesscsb-marker",
              "role": 0,
              "editRole": 0,
              "permission": 0,
              "tooltip": "",
              "visibilityFormula": "",
              "editableFormula": "",
              "escapeHTML": false,
              "type": "panel",
              "contents": [
                {
                  "key": "",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "label",
                  "size": "full-size",
                  "icon": "star",
                  "value": "${actionLabel ? actionLabel : \"Cast\"}$",
                  "prefix": "",
                  "suffix": "",
                  "rollMessage": "%{\n  // Prefer linkedEntity (inventory row) then entity (item sheet)\n  const doc = (typeof linkedEntity !== \"undefined\" && linkedEntity) ? linkedEntity\n            : (typeof entity !== \"undefined\" && entity) ? entity\n            : null;\n\n  const itemUuid = String(doc?.uuid ?? \"\").trim();\n\n  // Actor resolution: embedded parent wins; otherwise token/character fallbacks.\n  const embeddedActorUuid =\n    (doc?.parent?.documentName === \"Actor\" && doc?.parent?.uuid) ? String(doc.parent.uuid) : \"\";\n\n  const scopeActorUuid =\n    (typeof actor !== \"undefined\" && actor?.documentName === \"Actor\" && actor?.uuid) ? String(actor.uuid) : \"\";\n\n  const controlledActorUuid = (() => {\n    const t = canvas?.tokens?.controlled?.[0];\n    return t?.actor?.uuid ? String(t.actor.uuid) : \"\";\n  })();\n\n  const targetedActorUuid = (() => {\n    const t = game.user?.targets ? Array.from(game.user.targets)[0] : null;\n    return t?.actor?.uuid ? String(t.actor.uuid) : \"\";\n  })();\n\n  const userCharUuid = game.user?.character?.uuid ? String(game.user.character.uuid) : \"\";\n\n  const actorUuid = String(\n    embeddedActorUuid ||\n    scopeActorUuid ||\n    controlledActorUuid ||\n    targetedActorUuid ||\n    userCharUuid ||\n    \"\"\n  ).trim();\n\n  if (!itemUuid) {\n    ui.notifications?.warn?.(\"SinlessCSB: missing spell item context (itemUuid).\");\n    return \"\";\n  }\n\n  if (!actorUuid) {\n    ui.notifications?.warn?.(\"SinlessCSB: No actor context. Control or target a token, then try again.\");\n    return \"\";\n  }\n\n  const api = game.modules.get(\"sinlesscsb\")?.api;\n  if (typeof api?.castSpell !== \"function\") {\n    ui.notifications?.error?.(\"SinlessCSB: castSpell API not available (module not ready / not exposed).\");\n    return \"\";\n  }\n\n  api.castSpell({ itemUuid, actorUuid });\n  return \"\";\n}%\n",
                  "altRollMessage": "",
                  "rollMessageToChat": false,
                  "altRollMessageToChat": false,
                  "style": "button"
                }
              ],
              "flow": "vertical",
              "align": "center",
              "verticalAlign": "top",
              "collapsible": false,
              "defaultCollapsed": false,
              "title": "",
              "titleStyle": "default"
            }
          ],
          "key": "custom_header",
          "type": "panel"
        },
        "hidden": [],
        "modifiers": [],
        "props": {
          "actionLabel": "Attack",
          "bonusDice": "0",
          "diceMod": "0",
          "poolKey": "Finesse",
          "skillKey": "Skill_Archery",
          "spellRulestext": "<p>Paste text from book / other useful info here.</p>",
          "spellFociRank": "1",
          "spellforceMax": "1",
          "spellforceDefault": "1",
          "fetishRank": "0",
          "spellDuration": "Instantaneous",
          "spellArea": "Single",
          "spellResistance": "Brawn Pool",
          "drainFormula": "1 + (Force/2) ---example, REPLACE with correct formula---",
          "exampleForce": "<ol><li data-start=\"5936\" data-end=\"6018\"><p data-start=\"5938\" data-end=\"5952\">Use <code data-start=\"5906\" data-end=\"5913\">Force</code> for the chosen Force.</p><p></p></li><li data-start=\"5936\" data-end=\"6018\"><p data-start=\"5938\" data-end=\"5952\">Allowed example forms:</p><ul data-start=\"5955\" data-end=\"6018\"><li data-start=\"5955\" data-end=\"5968\"><p data-start=\"5957\" data-end=\"5968\"><code data-start=\"5957\" data-end=\"5968\">3 + Force</code></p></li><li data-start=\"5971\" data-end=\"5988\"><p data-start=\"5973\" data-end=\"5988\"><code data-start=\"5973\" data-end=\"5988\">1 + (Force/2)</code></p></li><li data-start=\"5991\" data-end=\"6004\"><p data-start=\"5993\" data-end=\"6004\"><code data-start=\"5993\" data-end=\"6004\">(Force/2)</code></p><p data-start=\"6021\" data-end=\"6098\"></p></li></ul></li></ol>",
          "spellCategory": "Combat",
          "drainForceMult": "1",
          "spellTags": ""
        },
        "unique": false,
        "uniqueId": "LvaPuv4exoJF1HcM",
        "template": "QyToiPEwE2Tp36YK",
        "templateSystemUniqueVersion": 225230637
      },
      "effects": [],
      "folder": "rCTnl7myqTtxE5gl",
      "sort": 100000,
      "flags": {
        "custom-system-builder": {
          "version": "5.1.0"
        }
      },
      "_stats": {
        "compendiumSource": "Item.LvaPuv4exoJF1HcM",
        "duplicateSource": null,
        "exportSource": null,
        "coreVersion": "13.351",
        "systemId": "custom-system-builder",
        "systemVersion": "5.1.0",
        "createdTime": 1768882640902,
        "modifiedTime": 1769142653001,
        "lastModifiedBy": "KoiB8oaGNkPdgzdM"
      },
      "ownership": {
        "default": 0
      }
    },
    {
      "folder": "rCTnl7myqTtxE5gl",
      "name": "VCRtest",
      "type": "equippableItem",
      "_id": "tSY35wa2Em3t45oO",
      "img": "icons/svg/item-bag.svg",
      "system": {
        "body": {
          "contents": [
            {
              "key": "",
              "colSpan": 1,
              "rowSpan": 1,
              "cssClass": "sinlesscsb-marker",
              "role": 0,
              "editRole": 0,
              "permission": 0,
              "tooltip": "Vehicle Control Rig",
              "visibilityFormula": "",
              "editableFormula": "",
              "escapeHTML": false,
              "type": "panel",
              "contents": [
                {
                  "key": "vcrBonusDice",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "numberField",
                  "size": "medium",
                  "label": "Bonus Dice",
                  "defaultValue": "2",
                  "allowDecimal": false,
                  "minVal": "2",
                  "maxVal": "",
                  "allowRelative": false,
                  "showControls": true,
                  "controlsStyle": "hover",
                  "controlsCustomIncrements": "",
                  "inputStyle": "text"
                },
                {
                  "key": "hardeningRig",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "numberField",
                  "size": "medium",
                  "label": "Hardening",
                  "defaultValue": "1",
                  "allowDecimal": false,
                  "minVal": "1",
                  "maxVal": "",
                  "allowRelative": false,
                  "showControls": true,
                  "controlsStyle": "hover",
                  "controlsCustomIncrements": "",
                  "inputStyle": "text"
                },
                {
                  "key": "linksRig",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "numberField",
                  "size": "medium",
                  "label": "Links",
                  "defaultValue": "1",
                  "allowDecimal": false,
                  "minVal": "1",
                  "maxVal": "",
                  "allowRelative": false,
                  "showControls": true,
                  "controlsStyle": "hover",
                  "controlsCustomIncrements": "",
                  "inputStyle": "text"
                },
                {
                  "key": "modsRig",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "numberField",
                  "size": "medium",
                  "label": "Mods Max:",
                  "defaultValue": "1",
                  "allowDecimal": false,
                  "minVal": "1",
                  "maxVal": "",
                  "allowRelative": false,
                  "showControls": true,
                  "controlsStyle": "hover",
                  "controlsCustomIncrements": "",
                  "inputStyle": "text"
                },
                {
                  "key": "coreDeck",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "textField",
                  "size": "medium",
                  "label": "Cores:",
                  "defaultValue": "",
                  "charList": "",
                  "maxLength": null,
                  "autocomplete": ""
                },
                {
                  "key": "rarityDeck",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "numberField",
                  "size": "medium",
                  "label": "Rarity",
                  "defaultValue": "3",
                  "allowDecimal": false,
                  "minVal": "0",
                  "maxVal": "",
                  "allowRelative": false,
                  "showControls": true,
                  "controlsStyle": "hover",
                  "controlsCustomIncrements": "",
                  "inputStyle": "text"
                },
                {
                  "key": "vcrCost",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "numberField",
                  "size": "full-size",
                  "label": "Cost",
                  "defaultValue": "",
                  "allowDecimal": false,
                  "minVal": "",
                  "maxVal": "",
                  "allowRelative": false,
                  "showControls": true,
                  "controlsStyle": "hover",
                  "controlsCustomIncrements": "",
                  "inputStyle": "text"
                }
              ],
              "flow": "grid-2",
              "align": "left",
              "verticalAlign": "top",
              "collapsible": true,
              "defaultCollapsed": false,
              "title": "VCR Stats",
              "titleStyle": "default"
            },
            {
              "key": "",
              "colSpan": 1,
              "rowSpan": 1,
              "cssClass": "",
              "role": 0,
              "editRole": 0,
              "permission": 0,
              "tooltip": "",
              "visibilityFormula": "",
              "editableFormula": "",
              "escapeHTML": false,
              "type": "panel",
              "contents": [
                {
                  "key": "deckMod1",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "textField",
                  "size": "full-size",
                  "label": "Mod 1:",
                  "defaultValue": "",
                  "charList": "",
                  "maxLength": null,
                  "autocomplete": ""
                },
                {
                  "key": "deckMod2",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "textField",
                  "size": "full-size",
                  "label": "Mod 2:",
                  "defaultValue": "",
                  "charList": "",
                  "maxLength": null,
                  "autocomplete": ""
                },
                {
                  "key": "deckMod3",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "textField",
                  "size": "full-size",
                  "label": "Mod 3:",
                  "defaultValue": "",
                  "charList": "",
                  "maxLength": null,
                  "autocomplete": ""
                },
                {
                  "key": "deckMod4",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "textField",
                  "size": "full-size",
                  "label": "Mod 4:",
                  "defaultValue": "",
                  "charList": "",
                  "maxLength": null,
                  "autocomplete": ""
                },
                {
                  "key": "deckMod5",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "textField",
                  "size": "full-size",
                  "label": "Mod 5:",
                  "defaultValue": "",
                  "charList": "",
                  "maxLength": null,
                  "autocomplete": ""
                }
              ],
              "flow": "vertical",
              "align": "left",
              "verticalAlign": "top",
              "collapsible": true,
              "defaultCollapsed": false,
              "title": "Mods installed:",
              "titleStyle": "default"
            }
          ],
          "key": "custom_body",
          "type": "panel"
        },
        "display": {
          "width": 600,
          "height": 600,
          "fix_size": false,
          "pp_width": 64,
          "pp_height": 64
        },
        "header": {
          "contents": [],
          "key": "custom_header",
          "type": "panel"
        },
        "hidden": [],
        "modifiers": [],
        "props": {
          "vcrBonusDice": "4",
          "hardeningRig": "1",
          "linksRig": "1",
          "modsRig": "1",
          "rarityDeck": "3",
          "coreDeck": "",
          "deckMod1": "",
          "deckMod2": "",
          "deckMod3": "",
          "deckMod4": "",
          "deckMod5": "",
          "vcrCost": "0"
        },
        "unique": false,
        "templateSystemUniqueVersion": 2429431443,
        "uniqueId": "LscCW4itUp2kDBcW",
        "template": "3LTlu5bj85Ic7pQS"
      },
      "effects": [],
      "sort": 0,
      "flags": {
        "custom-system-builder": {
          "version": "5.1.0"
        }
      },
      "_stats": {
        "compendiumSource": "Item.LscCW4itUp2kDBcW",
        "duplicateSource": null,
        "exportSource": null,
        "coreVersion": "13.351",
        "systemId": "custom-system-builder",
        "systemVersion": "5.1.0",
        "createdTime": 1769186457753,
        "modifiedTime": 1769747260350,
        "lastModifiedBy": "KoiB8oaGNkPdgzdM"
      },
      "ownership": {
        "default": 0
      }
    },
    {
      "name": "SpellTest",
      "type": "equippableItem",
      "_id": "YhtiMP32QlfgVOnU",
      "img": "icons/svg/item-bag.svg",
      "system": {
        "body": {
          "contents": [
            {
              "key": "",
              "colSpan": 1,
              "rowSpan": 1,
              "cssClass": "",
              "role": 0,
              "editRole": 0,
              "permission": 0,
              "tooltip": "",
              "visibilityFormula": "",
              "editableFormula": "",
              "escapeHTML": false,
              "type": "panel",
              "contents": [
                {
                  "key": "spellRulestext",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "textArea",
                  "size": "full-size",
                  "label": "Spell Rules",
                  "defaultValue": "<p>Paste text from book / other useful info here.</p>",
                  "style": "sheet"
                }
              ],
              "flow": "horizontal",
              "align": "left",
              "verticalAlign": "top",
              "collapsible": true,
              "defaultCollapsed": true,
              "title": "Rules Text",
              "titleStyle": "default"
            },
            {
              "key": "",
              "colSpan": 1,
              "rowSpan": 1,
              "cssClass": "",
              "role": 0,
              "editRole": 0,
              "permission": 0,
              "tooltip": "",
              "visibilityFormula": "",
              "editableFormula": "",
              "escapeHTML": false,
              "type": "panel",
              "contents": [
                {
                  "key": "actionLabel",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "textField",
                  "size": "full-size",
                  "label": "actionLabel",
                  "defaultValue": "Cast",
                  "charList": "",
                  "maxLength": null,
                  "autocomplete": ""
                },
                {
                  "key": "",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "panel",
                  "contents": [
                    {
                      "key": "spellforceDefault",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "full-size",
                      "label": "Spell Force (Default)",
                      "defaultValue": "1",
                      "allowDecimal": false,
                      "minVal": "1",
                      "maxVal": "${spellforceMax}$",
                      "allowRelative": false,
                      "showControls": true,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    },
                    {
                      "key": "spellforceMax",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "full-size",
                      "label": "Force Rating (MAX Learned)",
                      "defaultValue": "1",
                      "allowDecimal": false,
                      "minVal": "1",
                      "maxVal": "",
                      "allowRelative": false,
                      "showControls": true,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    },
                    {
                      "key": "spellFociRank",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "full-size",
                      "label": "Foci Rank",
                      "defaultValue": "1",
                      "allowDecimal": false,
                      "minVal": "1",
                      "maxVal": "",
                      "allowRelative": false,
                      "showControls": true,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    },
                    {
                      "key": "forceCost",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "full-size",
                      "label": "Cost (per lvl Force)",
                      "defaultValue": "",
                      "allowDecimal": false,
                      "minVal": "0",
                      "maxVal": "",
                      "allowRelative": false,
                      "showControls": false,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    },
                    {
                      "key": "fetishRank",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "full-size",
                      "label": "Fetish Rank",
                      "defaultValue": "0",
                      "allowDecimal": false,
                      "minVal": "0",
                      "maxVal": "",
                      "allowRelative": false,
                      "showControls": true,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    },
                    {
                      "key": "bonusDice",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "full-size",
                      "label": "bonusDice",
                      "defaultValue": "0",
                      "allowDecimal": false,
                      "minVal": "",
                      "maxVal": "",
                      "allowRelative": false,
                      "showControls": false,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    },
                    {
                      "key": "spellDuration",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "textField",
                      "size": "full-size",
                      "label": "Duration",
                      "defaultValue": "Instantaneous",
                      "charList": "",
                      "maxLength": null,
                      "autocomplete": ""
                    },
                    {
                      "key": "diceMod",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "full-size",
                      "label": "diceMod",
                      "defaultValue": "0",
                      "allowDecimal": false,
                      "minVal": "",
                      "maxVal": "",
                      "allowRelative": false,
                      "showControls": false,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    },
                    {
                      "key": "spellArea",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "textField",
                      "size": "full-size",
                      "label": "Area",
                      "defaultValue": "Single",
                      "charList": "",
                      "maxLength": null,
                      "autocomplete": ""
                    },
                    {
                      "key": "fociCost",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "full-size",
                      "label": "Foci Cost (per lvl)",
                      "defaultValue": "1000",
                      "allowDecimal": false,
                      "minVal": "",
                      "maxVal": "",
                      "allowRelative": false,
                      "showControls": true,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    },
                    {
                      "key": "spellResistance",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "textField",
                      "size": "full-size",
                      "label": "Target Resistance",
                      "defaultValue": "Brawn Pool",
                      "charList": "",
                      "maxLength": null,
                      "autocomplete": ""
                    },
                    {
                      "key": "fetishCost",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "full-size",
                      "label": "Fetish Cost (per lvl)",
                      "defaultValue": "1000",
                      "allowDecimal": false,
                      "minVal": "",
                      "maxVal": "",
                      "allowRelative": false,
                      "showControls": false,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    }
                  ],
                  "flow": "grid-2",
                  "align": "left",
                  "verticalAlign": "top",
                  "collapsible": false,
                  "defaultCollapsed": false,
                  "title": "",
                  "titleStyle": "default"
                },
                {
                  "key": "drainFormula",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "textField",
                  "size": "full-size",
                  "label": "Drain Formula",
                  "defaultValue": "1 + (Force/2) ---example, REPLACE with correct formula---",
                  "charList": "",
                  "maxLength": null,
                  "autocomplete": ""
                },
                {
                  "key": "",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "panel",
                  "contents": [
                    {
                      "key": "exampleForce",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "textArea",
                      "size": "full-size",
                      "label": "",
                      "defaultValue": "<ol><li data-start=\"5936\" data-end=\"6018\"><p data-start=\"5938\" data-end=\"5952\">Use <code data-start=\"5906\" data-end=\"5913\">Force</code> for the chosen Force.</p><p></p></li><li data-start=\"5936\" data-end=\"6018\"><p data-start=\"5938\" data-end=\"5952\">Allowed example forms:</p><ul data-start=\"5955\" data-end=\"6018\"><li data-start=\"5955\" data-end=\"5968\"><p data-start=\"5957\" data-end=\"5968\"><code data-start=\"5957\" data-end=\"5968\">3 + Force</code></p></li><li data-start=\"5971\" data-end=\"5988\"><p data-start=\"5973\" data-end=\"5988\"><code data-start=\"5973\" data-end=\"5988\">1 + (Force/2)</code></p></li><li data-start=\"5991\" data-end=\"6004\"><p data-start=\"5993\" data-end=\"6004\"><code data-start=\"5993\" data-end=\"6004\">(Force/2)</code></p><p data-start=\"6021\" data-end=\"6098\"></p></li></ul></li></ol>",
                      "style": "sheet"
                    }
                  ],
                  "flow": "horizontal",
                  "align": "left",
                  "verticalAlign": "top",
                  "collapsible": true,
                  "defaultCollapsed": false,
                  "title": "Drain Formula Syntax Guidelines",
                  "titleStyle": "default"
                },
                {
                  "key": "spellTags",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "textField",
                  "size": "full-size",
                  "label": "Tags",
                  "defaultValue": "",
                  "charList": "",
                  "maxLength": null,
                  "autocomplete": ""
                }
              ],
              "flow": "vertical",
              "align": "left",
              "verticalAlign": "top",
              "collapsible": true,
              "defaultCollapsed": false,
              "title": "Roll Config",
              "titleStyle": "default"
            },
            {
              "key": "",
              "colSpan": 1,
              "rowSpan": 1,
              "cssClass": "",
              "role": 4,
              "editRole": 0,
              "permission": 0,
              "tooltip": "",
              "visibilityFormula": "",
              "editableFormula": "",
              "escapeHTML": false,
              "type": "panel",
              "contents": [
                {
                  "key": "spellCategory",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "textField",
                  "size": "full-size",
                  "label": "Category",
                  "defaultValue": "Combat",
                  "charList": "",
                  "maxLength": null,
                  "autocomplete": ""
                },
                {
                  "key": "drainForceMult",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "numberField",
                  "size": "full-size",
                  "label": "Drain xForce",
                  "defaultValue": "1",
                  "allowDecimal": true,
                  "minVal": "0",
                  "maxVal": "",
                  "allowRelative": false,
                  "showControls": true,
                  "controlsStyle": "hover",
                  "controlsCustomIncrements": "",
                  "inputStyle": "text"
                },
                {
                  "key": "skillKey",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "textField",
                  "size": "full-size",
                  "label": "skillKey",
                  "defaultValue": "Skill_Sorcery",
                  "charList": "",
                  "maxLength": null,
                  "autocomplete": ""
                },
                {
                  "key": "poolKey",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "textField",
                  "size": "full-size",
                  "label": "poolKey",
                  "defaultValue": "Resolve",
                  "charList": "",
                  "maxLength": null,
                  "autocomplete": ""
                }
              ],
              "flow": "grid-2",
              "align": "center",
              "verticalAlign": "top",
              "collapsible": true,
              "defaultCollapsed": true,
              "title": "hidden",
              "titleStyle": "default"
            }
          ],
          "key": "custom_body",
          "type": "panel"
        },
        "display": {
          "width": 600,
          "height": 600,
          "fix_size": false,
          "pp_width": 64,
          "pp_height": 64
        },
        "header": {
          "contents": [
            {
              "key": "",
              "colSpan": 1,
              "rowSpan": 1,
              "cssClass": "sinlesscsb-marker",
              "role": 0,
              "editRole": 0,
              "permission": 0,
              "tooltip": "",
              "visibilityFormula": "",
              "editableFormula": "",
              "escapeHTML": false,
              "type": "panel",
              "contents": [
                {
                  "key": "",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "label",
                  "size": "full-size",
                  "icon": "star",
                  "value": "${actionLabel ? actionLabel : \"Cast\"}$",
                  "prefix": "",
                  "suffix": "",
                  "rollMessage": "%{\n  // Prefer linkedEntity (inventory row) then entity (item sheet)\n  const doc = (typeof linkedEntity !== \"undefined\" && linkedEntity) ? linkedEntity\n            : (typeof entity !== \"undefined\" && entity) ? entity\n            : null;\n\n  const itemUuid = String(doc?.uuid ?? \"\").trim();\n\n  // Actor resolution: embedded parent wins; otherwise token/character fallbacks.\n  const embeddedActorUuid =\n    (doc?.parent?.documentName === \"Actor\" && doc?.parent?.uuid) ? String(doc.parent.uuid) : \"\";\n\n  const scopeActorUuid =\n    (typeof actor !== \"undefined\" && actor?.documentName === \"Actor\" && actor?.uuid) ? String(actor.uuid) : \"\";\n\n  const controlledActorUuid = (() => {\n    const t = canvas?.tokens?.controlled?.[0];\n    return t?.actor?.uuid ? String(t.actor.uuid) : \"\";\n  })();\n\n  const targetedActorUuid = (() => {\n    const t = game.user?.targets ? Array.from(game.user.targets)[0] : null;\n    return t?.actor?.uuid ? String(t.actor.uuid) : \"\";\n  })();\n\n  const userCharUuid = game.user?.character?.uuid ? String(game.user.character.uuid) : \"\";\n\n  const actorUuid = String(\n    embeddedActorUuid ||\n    scopeActorUuid ||\n    controlledActorUuid ||\n    targetedActorUuid ||\n    userCharUuid ||\n    \"\"\n  ).trim();\n\n  if (!itemUuid) {\n    ui.notifications?.warn?.(\"SinlessCSB: missing spell item context (itemUuid).\");\n    return \"\";\n  }\n\n  if (!actorUuid) {\n    ui.notifications?.warn?.(\"SinlessCSB: No actor context. Control or target a token, then try again.\");\n    return \"\";\n  }\n\n  const api = game.modules.get(\"sinlesscsb\")?.api;\n  if (typeof api?.castSpell !== \"function\") {\n    ui.notifications?.error?.(\"SinlessCSB: castSpell API not available (module not ready / not exposed).\");\n    return \"\";\n  }\n\n  api.castSpell({ itemUuid, actorUuid });\n  return \"\";\n}%\n",
                  "altRollMessage": "",
                  "rollMessageToChat": false,
                  "altRollMessageToChat": false,
                  "style": "button"
                }
              ],
              "flow": "vertical",
              "align": "center",
              "verticalAlign": "top",
              "collapsible": false,
              "defaultCollapsed": false,
              "title": "",
              "titleStyle": "default"
            }
          ],
          "key": "custom_header",
          "type": "panel"
        },
        "hidden": [],
        "modifiers": [],
        "props": {
          "actionLabel": "Cast",
          "skillKey": "Skill_Sorcery",
          "poolKey": "Resolve",
          "spellFociRank": "5",
          "bonusDice": "0",
          "diceMod": "0",
          "spellforceMax": "5",
          "spellforceDefault": "3",
          "fetishRank": "3",
          "drainFormula": "1 + (Force/2)",
          "exampleForce": "<ol><li data-start=\"5936\" data-end=\"6018\"><p data-start=\"5938\" data-end=\"5952\">Use <code data-start=\"5906\" data-end=\"5913\">Force</code> for the chosen Force.</p><p></p></li><li data-start=\"5936\" data-end=\"6018\"><p data-start=\"5938\" data-end=\"5952\">Allowed example forms:</p><ul data-start=\"5955\" data-end=\"6018\"><li data-start=\"5955\" data-end=\"5968\"><p data-start=\"5957\" data-end=\"5968\"><code data-start=\"5957\" data-end=\"5968\">3 + Force</code></p></li><li data-start=\"5971\" data-end=\"5988\"><p data-start=\"5973\" data-end=\"5988\"><code data-start=\"5973\" data-end=\"5988\">1 + (Force/2)</code></p></li><li data-start=\"5991\" data-end=\"6004\"><p data-start=\"5993\" data-end=\"6004\"><code data-start=\"5993\" data-end=\"6004\">(Force/2)</code></p><p data-start=\"6021\" data-end=\"6098\"></p></li></ul></li></ol>",
          "spellDuration": "Instantaneous",
          "spellArea": "Single",
          "spellRulestext": "<p>Paste text from book / other useful info here.  Testadd</p><p></p>",
          "spellResistance": "Brawn",
          "spellCategory": "Combat",
          "drainForceMult": "1",
          "spellTags": "",
          "fociCost": "1000",
          "fetishCost": "1000",
          "forceCost": ""
        },
        "unique": false,
        "uniqueId": "vXPXJ1UQYp79cqid",
        "template": "SpelTplSinlssA1X",
        "templateSystemUniqueVersion": 3620166736
      },
      "effects": [],
      "folder": "rCTnl7myqTtxE5gl",
      "sort": 100000,
      "flags": {
        "custom-system-builder": {
          "version": "5.1.0"
        }
      },
      "_stats": {
        "compendiumSource": "Item.vXPXJ1UQYp79cqid",
        "duplicateSource": null,
        "exportSource": null,
        "coreVersion": "13.351",
        "systemId": "custom-system-builder",
        "systemVersion": "5.1.0",
        "createdTime": 1769355700088,
        "modifiedTime": 1769989271011,
        "lastModifiedBy": "KoiB8oaGNkPdgzdM"
      },
      "ownership": {
        "default": 0
      }
    },
    {
      "name": "Photon Reaver Ei-7",
      "type": "equippableItem",
      "folder": "rCTnl7myqTtxE5gl",
      "img": "modules/sinlesscsb/assets/images/SinlessWeps/Inverted/photonrever_invert.png",
      "system": {
        "template": "hMNA1M25JzNfOz0c",
        "templateSystemUniqueVersion": 2129080907,
        "body": {
          "contents": [
            {
              "key": "",
              "colSpan": 1,
              "rowSpan": 1,
              "cssClass": "",
              "role": 0,
              "editRole": 0,
              "permission": 0,
              "tooltip": "",
              "visibilityFormula": "",
              "editableFormula": "",
              "escapeHTML": false,
              "type": "panel",
              "contents": [
                {
                  "key": "weaponCard",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "textArea",
                  "size": "full-size",
                  "label": "",
                  "defaultValue": "",
                  "style": "sheet"
                }
              ],
              "flow": "vertical",
              "align": "left",
              "verticalAlign": "top",
              "collapsible": true,
              "defaultCollapsed": false,
              "title": "Card Display",
              "titleStyle": "default"
            },
            {
              "key": "",
              "colSpan": 1,
              "rowSpan": 1,
              "cssClass": "",
              "role": 0,
              "editRole": 0,
              "permission": 0,
              "tooltip": "",
              "visibilityFormula": "",
              "editableFormula": "",
              "escapeHTML": false,
              "type": "panel",
              "contents": [
                {
                  "key": "",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "panel",
                  "contents": [
                    {
                      "key": "gearFeature",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "medium",
                      "label": "Accuracy",
                      "defaultValue": "0",
                      "allowDecimal": false,
                      "minVal": "",
                      "maxVal": "",
                      "allowRelative": false,
                      "showControls": true,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    },
                    {
                      "key": "bonusDice",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "medium",
                      "label": "bonusDice",
                      "defaultValue": "0",
                      "allowDecimal": false,
                      "minVal": "",
                      "maxVal": "",
                      "allowRelative": false,
                      "showControls": true,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    },
                    {
                      "key": "diceMod",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "medium",
                      "label": "diceMod",
                      "defaultValue": "0",
                      "allowDecimal": false,
                      "minVal": "",
                      "maxVal": "",
                      "allowRelative": false,
                      "showControls": true,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    },
                    {
                      "key": "conceal",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "medium",
                      "label": "Conceal",
                      "defaultValue": "1",
                      "allowDecimal": false,
                      "minVal": "0",
                      "maxVal": "",
                      "allowRelative": false,
                      "showControls": true,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    },
                    {
                      "key": "wepBarrier",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "medium",
                      "label": "Barrier",
                      "defaultValue": "0",
                      "allowDecimal": false,
                      "minVal": "0",
                      "maxVal": "",
                      "allowRelative": false,
                      "showControls": true,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    },
                    {
                      "key": "wepHardening",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "medium",
                      "label": "Hardening",
                      "defaultValue": "8",
                      "allowDecimal": false,
                      "minVal": "0",
                      "maxVal": "",
                      "allowRelative": false,
                      "showControls": true,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    },
                    {
                      "key": "weight",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "medium",
                      "label": "Weight (Total)",
                      "defaultValue": "",
                      "allowDecimal": false,
                      "minVal": "0",
                      "maxVal": "",
                      "allowRelative": false,
                      "showControls": true,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    },
                    {
                      "key": "itemRarity",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "medium",
                      "label": "Rarity",
                      "defaultValue": "5",
                      "allowDecimal": false,
                      "minVal": "0",
                      "maxVal": "",
                      "allowRelative": false,
                      "showControls": true,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    },
                    {
                      "key": "",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "panel",
                      "contents": [
                        {
                          "key": "firearmSmartyes",
                          "colSpan": 1,
                          "rowSpan": 1,
                          "cssClass": "",
                          "role": 0,
                          "editRole": 0,
                          "permission": 0,
                          "tooltip": "+1 bonus die on all tests with this weapon & SmartLink",
                          "visibilityFormula": "",
                          "editableFormula": "",
                          "escapeHTML": false,
                          "type": "radioButton",
                          "size": "medium",
                          "label": "Smart [Yes]",
                          "group": "smartSelect",
                          "value": "Yes",
                          "defaultChecked": true
                        }
                      ],
                      "flow": "vertical",
                      "align": "left",
                      "verticalAlign": "top",
                      "collapsible": false,
                      "defaultCollapsed": false,
                      "title": "",
                      "titleStyle": "default"
                    },
                    {
                      "key": "wepManufacturer",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "textField",
                      "size": "m-large",
                      "label": "Manufacturer",
                      "defaultValue": "",
                      "charList": "",
                      "maxLength": null,
                      "autocomplete": ""
                    },
                    {
                      "key": "energywepCost",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "medium",
                      "label": "Cost ",
                      "defaultValue": "",
                      "allowDecimal": false,
                      "minVal": "0",
                      "maxVal": "",
                      "allowRelative": false,
                      "showControls": true,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    }
                  ],
                  "flow": "grid-2",
                  "align": "left",
                  "verticalAlign": "top",
                  "collapsible": false,
                  "defaultCollapsed": false,
                  "title": "",
                  "titleStyle": "default"
                },
                {
                  "key": "",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "panel",
                  "contents": [
                    {
                      "key": "firearmPenetration",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "full-size",
                      "label": "Penetration (RG and PPC only)",
                      "defaultValue": "0",
                      "allowDecimal": false,
                      "minVal": "0",
                      "maxVal": "",
                      "allowRelative": false,
                      "showControls": true,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    },
                    {
                      "key": "energyPen",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "textArea",
                      "size": "full-size",
                      "label": "",
                      "defaultValue": "<p>Energy weapons, except railguns and particle</p><p>cannons, have no penetration. Note that</p><p>weapons that do no penetration cannot fire</p><p>through transparent surfaces, instead needing</p><p>to melt or destroy the surface before firing</p><p>through.</p><p>When firing through gaseous substances</p><p>(mist, smoke, water mist, etc.) damage is re-</p><p>duced by 1 per 2 m (1\") that the beam travels</p><p>through the obstruction, except for railguns</p><p>which fire a physical projectile. Subtract this</p><p>damage right after the dodge roll is made or</p><p>declined. If it reduces the damage to 0 or less,</p><p>the shot \"misses\".</p>",
                      "style": "sheet"
                    }
                  ],
                  "flow": "vertical",
                  "align": "left",
                  "verticalAlign": "top",
                  "collapsible": true,
                  "defaultCollapsed": false,
                  "title": "Penetration",
                  "titleStyle": "default"
                },
                {
                  "key": "weaponTags",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "textField",
                  "size": "full-size",
                  "label": "Tags",
                  "defaultValue": "",
                  "charList": "",
                  "maxLength": null,
                  "autocomplete": ""
                }
              ],
              "flow": "vertical",
              "align": "left",
              "verticalAlign": "top",
              "collapsible": true,
              "defaultCollapsed": false,
              "title": "Roll Config",
              "titleStyle": "default"
            },
            {
              "key": "",
              "colSpan": 1,
              "rowSpan": 1,
              "cssClass": "",
              "role": 0,
              "editRole": 0,
              "permission": 0,
              "tooltip": "",
              "visibilityFormula": "",
              "editableFormula": "",
              "escapeHTML": false,
              "type": "panel",
              "contents": [
                {
                  "key": "modsOverbarrel",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "textField",
                  "size": "full-size",
                  "label": "Overbarrel",
                  "defaultValue": "",
                  "charList": "",
                  "maxLength": null,
                  "autocomplete": ""
                },
                {
                  "key": "modsUnderbarrel",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "textField",
                  "size": "full-size",
                  "label": "Underbarrel",
                  "defaultValue": "",
                  "charList": "",
                  "maxLength": null,
                  "autocomplete": ""
                },
                {
                  "key": "modsChassis",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "textField",
                  "size": "full-size",
                  "label": "Chassis",
                  "defaultValue": "",
                  "charList": "",
                  "maxLength": null,
                  "autocomplete": ""
                }
              ],
              "flow": "vertical",
              "align": "left",
              "verticalAlign": "top",
              "collapsible": true,
              "defaultCollapsed": false,
              "title": "Modifications",
              "titleStyle": "default"
            },
            {
              "key": "",
              "colSpan": 1,
              "rowSpan": 1,
              "cssClass": "",
              "role": 4,
              "editRole": 0,
              "permission": 0,
              "tooltip": "",
              "visibilityFormula": "",
              "editableFormula": "",
              "escapeHTML": false,
              "type": "panel",
              "contents": [
                {
                  "key": "skillKey",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "textField",
                  "size": "full-size",
                  "label": "skillKey",
                  "defaultValue": "Skill_EnergyWeapons",
                  "charList": "",
                  "maxLength": null,
                  "autocomplete": ""
                },
                {
                  "key": "poolKey",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "select",
                  "size": "full-size",
                  "label": "poolKey",
                  "defaultValue": "Finesse",
                  "selectedOptionType": "custom",
                  "options": [
                    {
                      "key": "Brawn",
                      "value": "Brawn"
                    },
                    {
                      "key": "Finesse",
                      "value": "Finesse"
                    },
                    {
                      "key": "Resolve",
                      "value": "Resolve"
                    },
                    {
                      "key": "Focus",
                      "value": "Focus"
                    }
                  ]
                },
                {
                  "key": "wepAction1Enabled",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "Single Shot. Characters can fire one bullet as a simple action. The player totals their Firearms skill plus accuracy and can use that many dice from their Finesse pool to fire the weapon.",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "checkbox",
                  "size": "m-small",
                  "label": "SS",
                  "defaultChecked": true
                },
                {
                  "key": "weaponRange",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "numberField",
                  "size": "medium",
                  "label": "Range",
                  "defaultValue": "",
                  "allowDecimal": false,
                  "minVal": "0",
                  "maxVal": "",
                  "allowRelative": false,
                  "showControls": true,
                  "controlsStyle": "hover",
                  "controlsCustomIncrements": "",
                  "inputStyle": "text"
                }
              ],
              "flow": "vertical",
              "align": "center",
              "verticalAlign": "top",
              "collapsible": true,
              "defaultCollapsed": true,
              "title": "Hidden",
              "titleStyle": "default"
            }
          ],
          "key": "custom_body",
          "type": "panel"
        },
        "display": {
          "width": 600,
          "height": 600,
          "fix_size": false,
          "pp_width": 64,
          "pp_height": 64
        },
        "header": {
          "contents": [
            {
              "key": "",
              "colSpan": 1,
              "rowSpan": 1,
              "cssClass": "sinlesscsb-marker",
              "role": 0,
              "editRole": 0,
              "permission": 0,
              "tooltip": "",
              "visibilityFormula": "",
              "editableFormula": "",
              "escapeHTML": false,
              "type": "panel",
              "contents": [
                {
                  "key": "",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "label",
                  "size": "full-size",
                  "icon": "gun",
                  "value": "${wepAction1Enabled ? wepAction1Label : \"\"}$",
                  "prefix": "",
                  "suffix": "",
                  "rollMessage": "%{\n  // Prefer linkedEntity (inventory row) then entity (item sheet)\n  const doc = (typeof linkedEntity !== \"undefined\" && linkedEntity) ? linkedEntity\n            : (typeof entity !== \"undefined\" && entity) ? entity\n            : null;\n\n  const itemUuid = String(doc?.uuid ?? \"\").trim();\n\n  // Actor resolution: embedded parent wins; otherwise token/character fallbacks.\n  const embeddedActorUuid =\n    (doc?.parent?.documentName === \"Actor\" && doc?.parent?.uuid) ? String(doc.parent.uuid) : \"\";\n\n  const scopeActorUuid =\n    (typeof actor !== \"undefined\" && actor?.documentName === \"Actor\" && actor?.uuid) ? String(actor.uuid) : \"\";\n\n  const controlledActorUuid = (() => {\n    const t = canvas?.tokens?.controlled?.[0];\n    return t?.actor?.uuid ? String(t.actor.uuid) : \"\";\n  })();\n\n  const targetedActorUuid = (() => {\n    const t = game.user?.targets ? Array.from(game.user.targets)[0] : null;\n    return t?.actor?.uuid ? String(t.actor.uuid) : \"\";\n  })();\n\n  const userCharUuid = game.user?.character?.uuid ? String(game.user.character.uuid) : \"\";\n\n  const actorUuid = String(\n    embeddedActorUuid ||\n    scopeActorUuid ||\n    controlledActorUuid ||\n    targetedActorUuid ||\n    userCharUuid ||\n    \"\"\n  ).trim();\n\n  if (!itemUuid) {\n    ui.notifications?.warn?.(\"SinlessCSB: missing item context (itemUuid).\");\n    return \"\";\n  }\n\n  if (!actorUuid) {\n    ui.notifications?.warn?.(\"SinlessCSB: No actor context. Control or target a token, then try again.\");\n    return \"\";\n  }\n\n  const api = game.modules.get(\"sinlesscsb\")?.api;\n  if (typeof api?.rollItem !== \"function\") {\n    ui.notifications?.error?.(\"SinlessCSB: rollItem API not available (module not ready / not exposed).\");\n    return \"\";\n  }\n\n  api.rollItem({ itemUuid, actorUuid, bonusDiceDelta: 0 });\n  return \"\";\n}%\n",
                  "altRollMessage": "",
                  "rollMessageToChat": false,
                  "altRollMessageToChat": false,
                  "style": "button"
                },
                {
                  "key": "",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "panel",
                  "contents": [
                    {
                      "key": "wepHeat",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "medium",
                      "label": "Current Heat",
                      "defaultValue": "",
                      "allowDecimal": false,
                      "minVal": "0",
                      "maxVal": "",
                      "allowRelative": false,
                      "showControls": true,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    },
                    {
                      "key": "heatThreshold",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "medium",
                      "label": "Heat Threshold",
                      "defaultValue": "1",
                      "allowDecimal": false,
                      "minVal": "1",
                      "maxVal": "",
                      "allowRelative": false,
                      "showControls": true,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    }
                  ],
                  "flow": "grid-2",
                  "align": "left",
                  "verticalAlign": "top",
                  "collapsible": false,
                  "defaultCollapsed": false,
                  "title": "",
                  "titleStyle": "default"
                },
                {
                  "key": "",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "panel",
                  "contents": [
                    {
                      "key": "wepAction1Label",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "textField",
                      "size": "full-size",
                      "label": "Action Label",
                      "defaultValue": "Pew Pew",
                      "charList": "",
                      "maxLength": null,
                      "autocomplete": ""
                    },
                    {
                      "key": "weaponDamage",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "medium",
                      "label": "Damage",
                      "defaultValue": "1",
                      "allowDecimal": false,
                      "minVal": "",
                      "maxVal": "",
                      "allowRelative": false,
                      "showControls": true,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    },
                    {
                      "key": "specialDamage",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "textField",
                      "size": "full-size",
                      "label": "Special Damage",
                      "defaultValue": "",
                      "charList": "",
                      "maxLength": null,
                      "autocomplete": ""
                    }
                  ],
                  "flow": "vertical",
                  "align": "center",
                  "verticalAlign": "top",
                  "collapsible": false,
                  "defaultCollapsed": false,
                  "title": "",
                  "titleStyle": "default"
                }
              ],
              "flow": "vertical",
              "align": "center",
              "verticalAlign": "top",
              "collapsible": false,
              "defaultCollapsed": false,
              "title": "",
              "titleStyle": "default"
            }
          ],
          "key": "custom_header",
          "type": "panel"
        },
        "hidden": [],
        "modifiers": [],
        "props": {
          "gearFeature": "6",
          "weaponDamage": "4",
          "firearmPenetration": "",
          "weight": "3",
          "conceal": "3",
          "itemRarity": "5",
          "wepHardening": "11",
          "weaponTags": "Laser",
          "wepAction1Enabled": true,
          "weaponCard": "<img src=\"modules/sinlesscsb/assets/images/TarotLand/gear%2Btarot%2Bcards%2B-%2B8_result.webp\">",
          "bonusDice": "0",
          "diceMod": "0",
          "smartSelect": "Yes",
          "wepAction1Label": "Lazer Bolt",
          "skillKey": "Skill_Firearms",
          "poolKey": "Finesse",
          "weaponRange": "",
          "wepBarrier": "0",
          "modsOverbarrel": "",
          "modsUnderbarrel": "",
          "modsChassis": "",
          "heatThreshold": "1",
          "energyPen": "<p>Energy weapons, except railguns and particle</p><p>cannons, have no penetration. Note that</p><p>weapons that do no penetration cannot fire</p><p>through transparent surfaces, instead needing</p><p>to melt or destroy the surface before firing</p><p>through.</p><p>When firing through gaseous substances</p><p>(mist, smoke, water mist, etc.) damage is re-</p><p>duced by 1 per 2 m (1\") that the beam travels</p><p>through the obstruction, except for railguns</p><p>which fire a physical projectile. Subtract this</p><p>damage right after the dodge roll is made or</p><p>declined. If it reduces the damage to 0 or less,</p><p>the shot \"misses\".</p>",
          "wepHeat": "0",
          "wepManufacturer": "EisenTECH",
          "specialDamage": "",
          "energywepCost": ""
        },
        "unique": false,
        "uniqueId": "n5dCqzXOOBOTEgkH"
      },
      "_id": "NdhskDMsGMoYMWiI",
      "effects": [],
      "sort": 200000,
      "flags": {
        "custom-system-builder": {
          "version": "5.1.0"
        }
      },
      "_stats": {
        "compendiumSource": "Item.n5dCqzXOOBOTEgkH",
        "duplicateSource": null,
        "exportSource": null,
        "coreVersion": "13.351",
        "systemId": "custom-system-builder",
        "systemVersion": "5.1.0",
        "createdTime": 1769360762964,
        "modifiedTime": 1769360762964,
        "lastModifiedBy": "KoiB8oaGNkPdgzdM"
      },
      "ownership": {
        "default": 0
      }
    },
    {
      "name": "Defender",
      "type": "equippableItem",
      "folder": "rCTnl7myqTtxE5gl",
      "img": "modules/sinlesscsb/assets/images/SinlessWeps/Inverted/defender_invert.png",
      "system": {
        "template": "WpDhy1PMWFkO6tOc",
        "templateSystemUniqueVersion": 2817610474,
        "body": {
          "contents": [
            {
              "key": "",
              "colSpan": 1,
              "rowSpan": 1,
              "cssClass": "",
              "role": 0,
              "editRole": 0,
              "permission": 0,
              "tooltip": "",
              "visibilityFormula": "",
              "editableFormula": "",
              "escapeHTML": false,
              "type": "panel",
              "contents": [
                {
                  "key": "weaponCard",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "textArea",
                  "size": "full-size",
                  "label": "",
                  "defaultValue": "",
                  "style": "sheet"
                }
              ],
              "flow": "vertical",
              "align": "left",
              "verticalAlign": "top",
              "collapsible": true,
              "defaultCollapsed": false,
              "title": "Card Display",
              "titleStyle": "default"
            },
            {
              "key": "",
              "colSpan": 1,
              "rowSpan": 1,
              "cssClass": "",
              "role": 0,
              "editRole": 0,
              "permission": 0,
              "tooltip": "",
              "visibilityFormula": "",
              "editableFormula": "",
              "escapeHTML": false,
              "type": "panel",
              "contents": [
                {
                  "key": "",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "panel",
                  "contents": [
                    {
                      "key": "gearFeature",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "medium",
                      "label": "Accuracy",
                      "defaultValue": "0",
                      "allowDecimal": false,
                      "minVal": "",
                      "maxVal": "",
                      "allowRelative": false,
                      "showControls": true,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    },
                    {
                      "key": "firearmPenetration",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "medium",
                      "label": "Penetration",
                      "defaultValue": "2",
                      "allowDecimal": false,
                      "minVal": "0",
                      "maxVal": "",
                      "allowRelative": false,
                      "showControls": true,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    },
                    {
                      "key": "bonusDice",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "medium",
                      "label": "bonusDice",
                      "defaultValue": "0",
                      "allowDecimal": false,
                      "minVal": "",
                      "maxVal": "",
                      "allowRelative": false,
                      "showControls": true,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    },
                    {
                      "key": "diceMod",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "medium",
                      "label": "diceMod",
                      "defaultValue": "0",
                      "allowDecimal": false,
                      "minVal": "",
                      "maxVal": "",
                      "allowRelative": false,
                      "showControls": true,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    },
                    {
                      "key": "conceal",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "medium",
                      "label": "Conceal",
                      "defaultValue": "1",
                      "allowDecimal": false,
                      "minVal": "0",
                      "maxVal": "",
                      "allowRelative": false,
                      "showControls": true,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    },
                    {
                      "key": "wepBarrier",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "medium",
                      "label": "Barrier",
                      "defaultValue": "",
                      "allowDecimal": false,
                      "minVal": "",
                      "maxVal": "",
                      "allowRelative": false,
                      "showControls": true,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    },
                    {
                      "key": "weight",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "medium",
                      "label": "Weight",
                      "defaultValue": "",
                      "allowDecimal": false,
                      "minVal": "0",
                      "maxVal": "",
                      "allowRelative": false,
                      "showControls": true,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    },
                    {
                      "key": "wepHardening",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "medium",
                      "label": "Hardening",
                      "defaultValue": "",
                      "allowDecimal": false,
                      "minVal": "0",
                      "maxVal": "",
                      "allowRelative": false,
                      "showControls": true,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    },
                    {
                      "key": "",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "panel",
                      "contents": [
                        {
                          "key": "weaponAmmo",
                          "colSpan": 1,
                          "rowSpan": 1,
                          "cssClass": "",
                          "role": 0,
                          "editRole": 0,
                          "permission": 0,
                          "tooltip": "",
                          "visibilityFormula": "",
                          "editableFormula": "",
                          "escapeHTML": false,
                          "type": "numberField",
                          "size": "medium",
                          "label": "Ammo [MAX]",
                          "defaultValue": "9",
                          "allowDecimal": false,
                          "minVal": "0",
                          "maxVal": "",
                          "allowRelative": false,
                          "showControls": true,
                          "controlsStyle": "hover",
                          "controlsCustomIncrements": "",
                          "inputStyle": "text"
                        },
                        {
                          "key": "",
                          "colSpan": 1,
                          "rowSpan": 1,
                          "cssClass": "",
                          "role": 0,
                          "editRole": 0,
                          "permission": 0,
                          "tooltip": "",
                          "visibilityFormula": "",
                          "editableFormula": "",
                          "escapeHTML": false,
                          "type": "panel",
                          "contents": [],
                          "flow": "vertical",
                          "align": "left",
                          "verticalAlign": "top",
                          "collapsible": false,
                          "defaultCollapsed": false,
                          "title": "",
                          "titleStyle": "default"
                        },
                        {
                          "key": "ammoType",
                          "colSpan": 1,
                          "rowSpan": 1,
                          "cssClass": "",
                          "role": 0,
                          "editRole": 0,
                          "permission": 0,
                          "tooltip": "",
                          "visibilityFormula": "",
                          "editableFormula": "",
                          "escapeHTML": false,
                          "type": "textField",
                          "size": "full-size",
                          "label": "Ammo Type",
                          "defaultValue": "",
                          "charList": "",
                          "maxLength": null,
                          "autocomplete": ""
                        }
                      ],
                      "flow": "vertical",
                      "align": "left",
                      "verticalAlign": "top",
                      "collapsible": false,
                      "defaultCollapsed": false,
                      "title": "",
                      "titleStyle": "default"
                    },
                    {
                      "key": "",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "panel",
                      "contents": [
                        {
                          "key": "firearmSmartno",
                          "colSpan": 1,
                          "rowSpan": 1,
                          "cssClass": "",
                          "role": 0,
                          "editRole": 0,
                          "permission": 0,
                          "tooltip": "",
                          "visibilityFormula": "",
                          "editableFormula": "",
                          "escapeHTML": false,
                          "type": "radioButton",
                          "size": "medium",
                          "label": "Smart [No]",
                          "group": "smartSelect",
                          "value": "No",
                          "defaultChecked": true
                        },
                        {
                          "key": "",
                          "colSpan": 1,
                          "rowSpan": 1,
                          "cssClass": "",
                          "role": 0,
                          "editRole": 0,
                          "permission": 0,
                          "tooltip": "",
                          "visibilityFormula": "",
                          "editableFormula": "",
                          "escapeHTML": false,
                          "type": "panel",
                          "contents": [],
                          "flow": "vertical",
                          "align": "left",
                          "verticalAlign": "top",
                          "collapsible": false,
                          "defaultCollapsed": false,
                          "title": "",
                          "titleStyle": "default"
                        },
                        {
                          "key": "firearmSmartyes",
                          "colSpan": 1,
                          "rowSpan": 1,
                          "cssClass": "",
                          "role": 0,
                          "editRole": 0,
                          "permission": 0,
                          "tooltip": "+1 bonus die on all tests with this weapon and Smartlink",
                          "visibilityFormula": "",
                          "editableFormula": "",
                          "escapeHTML": false,
                          "type": "radioButton",
                          "size": "medium",
                          "label": "Smart [Yes]",
                          "group": "smartSelect",
                          "value": "Yes",
                          "defaultChecked": false
                        }
                      ],
                      "flow": "vertical",
                      "align": "left",
                      "verticalAlign": "top",
                      "collapsible": false,
                      "defaultCollapsed": false,
                      "title": "",
                      "titleStyle": "default"
                    },
                    {
                      "key": "itemRarity",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "medium",
                      "label": "Rarity",
                      "defaultValue": "",
                      "allowDecimal": false,
                      "minVal": "0",
                      "maxVal": "",
                      "allowRelative": false,
                      "showControls": true,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    }
                  ],
                  "flow": "grid-2",
                  "align": "left",
                  "verticalAlign": "top",
                  "collapsible": false,
                  "defaultCollapsed": false,
                  "title": "",
                  "titleStyle": "default"
                },
                {
                  "key": "wepManufacturer",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "textField",
                  "size": "m-large",
                  "label": "Manufacturer",
                  "defaultValue": "",
                  "charList": "",
                  "maxLength": null,
                  "autocomplete": ""
                },
                {
                  "key": "firearmCost",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "numberField",
                  "size": "medium",
                  "label": "Cost ",
                  "defaultValue": "",
                  "allowDecimal": false,
                  "minVal": "0",
                  "maxVal": "",
                  "allowRelative": false,
                  "showControls": true,
                  "controlsStyle": "hover",
                  "controlsCustomIncrements": "",
                  "inputStyle": "text"
                },
                {
                  "key": "weaponTags",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "textField",
                  "size": "full-size",
                  "label": "Tags",
                  "defaultValue": "",
                  "charList": "",
                  "maxLength": null,
                  "autocomplete": ""
                }
              ],
              "flow": "vertical",
              "align": "left",
              "verticalAlign": "top",
              "collapsible": true,
              "defaultCollapsed": false,
              "title": "Roll Config",
              "titleStyle": "default"
            },
            {
              "key": "",
              "colSpan": 1,
              "rowSpan": 1,
              "cssClass": "",
              "role": 0,
              "editRole": 0,
              "permission": 0,
              "tooltip": "",
              "visibilityFormula": "",
              "editableFormula": "",
              "escapeHTML": false,
              "type": "panel",
              "contents": [
                {
                  "key": "modsOverbarrel",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "textField",
                  "size": "full-size",
                  "label": "Overbarrel",
                  "defaultValue": "",
                  "charList": "",
                  "maxLength": null,
                  "autocomplete": ""
                },
                {
                  "key": "modsUnderbarrel",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "textField",
                  "size": "full-size",
                  "label": "Underbarrel",
                  "defaultValue": "",
                  "charList": "",
                  "maxLength": null,
                  "autocomplete": ""
                },
                {
                  "key": "modsChassis",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "textField",
                  "size": "full-size",
                  "label": "Chassis",
                  "defaultValue": "",
                  "charList": "",
                  "maxLength": null,
                  "autocomplete": ""
                }
              ],
              "flow": "vertical",
              "align": "left",
              "verticalAlign": "top",
              "collapsible": true,
              "defaultCollapsed": false,
              "title": "Modifications",
              "titleStyle": "default"
            },
            {
              "key": "",
              "colSpan": 1,
              "rowSpan": 1,
              "cssClass": "",
              "role": 4,
              "editRole": 0,
              "permission": 0,
              "tooltip": "",
              "visibilityFormula": "",
              "editableFormula": "",
              "escapeHTML": false,
              "type": "panel",
              "contents": [
                {
                  "key": "",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "panel",
                  "contents": [
                    {
                      "key": "",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "panel",
                      "contents": [
                        {
                          "key": "wepAction1BonusDice",
                          "colSpan": 1,
                          "rowSpan": 1,
                          "cssClass": "",
                          "role": 0,
                          "editRole": 0,
                          "permission": 0,
                          "tooltip": "",
                          "visibilityFormula": "",
                          "editableFormula": "",
                          "escapeHTML": false,
                          "type": "numberField",
                          "size": "full-size",
                          "label": "SS",
                          "defaultValue": "0",
                          "allowDecimal": false,
                          "minVal": "0",
                          "maxVal": "",
                          "allowRelative": false,
                          "showControls": false,
                          "controlsStyle": "hover",
                          "controlsCustomIncrements": "",
                          "inputStyle": "text"
                        },
                        {
                          "key": "wepAction2BonusDice",
                          "colSpan": 1,
                          "rowSpan": 1,
                          "cssClass": "",
                          "role": 0,
                          "editRole": 0,
                          "permission": 0,
                          "tooltip": "",
                          "visibilityFormula": "",
                          "editableFormula": "",
                          "escapeHTML": false,
                          "type": "numberField",
                          "size": "full-size",
                          "label": "DT",
                          "defaultValue": "1",
                          "allowDecimal": false,
                          "minVal": "0",
                          "maxVal": "",
                          "allowRelative": false,
                          "showControls": false,
                          "controlsStyle": "hover",
                          "controlsCustomIncrements": "",
                          "inputStyle": "text"
                        },
                        {
                          "key": "wepAction3BonusDice",
                          "colSpan": 1,
                          "rowSpan": 1,
                          "cssClass": "",
                          "role": 0,
                          "editRole": 0,
                          "permission": 0,
                          "tooltip": "",
                          "visibilityFormula": "",
                          "editableFormula": "",
                          "escapeHTML": false,
                          "type": "numberField",
                          "size": "full-size",
                          "label": "B",
                          "defaultValue": "3",
                          "allowDecimal": false,
                          "minVal": "0",
                          "maxVal": "",
                          "allowRelative": false,
                          "showControls": false,
                          "controlsStyle": "hover",
                          "controlsCustomIncrements": "",
                          "inputStyle": "text"
                        },
                        {
                          "key": "wepAction4BonusDice",
                          "colSpan": 1,
                          "rowSpan": 1,
                          "cssClass": "",
                          "role": 0,
                          "editRole": 0,
                          "permission": 0,
                          "tooltip": "",
                          "visibilityFormula": "",
                          "editableFormula": "",
                          "escapeHTML": false,
                          "type": "numberField",
                          "size": "full-size",
                          "label": "FA",
                          "defaultValue": "20",
                          "allowDecimal": false,
                          "minVal": "0",
                          "maxVal": "",
                          "allowRelative": false,
                          "showControls": false,
                          "controlsStyle": "hover",
                          "controlsCustomIncrements": "",
                          "inputStyle": "text"
                        }
                      ],
                      "flow": "vertical",
                      "align": "left",
                      "verticalAlign": "top",
                      "collapsible": true,
                      "defaultCollapsed": false,
                      "title": "# Bonus Dice from Fire Mode",
                      "titleStyle": "default"
                    },
                    {
                      "key": "",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "panel",
                      "contents": [
                        {
                          "key": "wepAction1Label",
                          "colSpan": 1,
                          "rowSpan": 1,
                          "cssClass": "",
                          "role": 0,
                          "editRole": 0,
                          "permission": 0,
                          "tooltip": "",
                          "visibilityFormula": "",
                          "editableFormula": "",
                          "escapeHTML": false,
                          "type": "textField",
                          "size": "full-size",
                          "label": "",
                          "defaultValue": "SS",
                          "charList": "",
                          "maxLength": null,
                          "autocomplete": ""
                        },
                        {
                          "key": "wepAction2Label",
                          "colSpan": 1,
                          "rowSpan": 1,
                          "cssClass": "",
                          "role": 0,
                          "editRole": 0,
                          "permission": 0,
                          "tooltip": "",
                          "visibilityFormula": "",
                          "editableFormula": "",
                          "escapeHTML": false,
                          "type": "textField",
                          "size": "full-size",
                          "label": "",
                          "defaultValue": "DT",
                          "charList": "",
                          "maxLength": null,
                          "autocomplete": ""
                        },
                        {
                          "key": "wepAction3Label",
                          "colSpan": 1,
                          "rowSpan": 1,
                          "cssClass": "",
                          "role": 0,
                          "editRole": 0,
                          "permission": 0,
                          "tooltip": "",
                          "visibilityFormula": "",
                          "editableFormula": "",
                          "escapeHTML": false,
                          "type": "textField",
                          "size": "full-size",
                          "label": "",
                          "defaultValue": "B",
                          "charList": "",
                          "maxLength": null,
                          "autocomplete": ""
                        },
                        {
                          "key": "wepAction4Label",
                          "colSpan": 1,
                          "rowSpan": 1,
                          "cssClass": "",
                          "role": 0,
                          "editRole": 0,
                          "permission": 0,
                          "tooltip": "",
                          "visibilityFormula": "",
                          "editableFormula": "",
                          "escapeHTML": false,
                          "type": "textField",
                          "size": "full-size",
                          "label": "",
                          "defaultValue": "FA",
                          "charList": "",
                          "maxLength": null,
                          "autocomplete": ""
                        }
                      ],
                      "flow": "vertical",
                      "align": "left",
                      "verticalAlign": "top",
                      "collapsible": true,
                      "defaultCollapsed": false,
                      "title": "Action Labels",
                      "titleStyle": "default"
                    }
                  ],
                  "flow": "grid-2",
                  "align": "left",
                  "verticalAlign": "top",
                  "collapsible": true,
                  "defaultCollapsed": false,
                  "title": "Fire Modes",
                  "titleStyle": "default"
                },
                {
                  "key": "skillKey",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "textField",
                  "size": "full-size",
                  "label": "skillKey",
                  "defaultValue": "Skill_Firearms",
                  "charList": "",
                  "maxLength": null,
                  "autocomplete": ""
                },
                {
                  "key": "poolKey",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "select",
                  "size": "full-size",
                  "label": "poolKey",
                  "defaultValue": "Finesse",
                  "selectedOptionType": "custom",
                  "options": [
                    {
                      "key": "Brawn",
                      "value": "Brawn"
                    },
                    {
                      "key": "Finesse",
                      "value": "Finesse"
                    },
                    {
                      "key": "Resolve",
                      "value": "Resolve"
                    },
                    {
                      "key": "Focus",
                      "value": "Focus"
                    }
                  ]
                },
                {
                  "key": "weaponRange",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "numberField",
                  "size": "medium",
                  "label": "Range",
                  "defaultValue": "",
                  "allowDecimal": false,
                  "minVal": "0",
                  "maxVal": "",
                  "allowRelative": false,
                  "showControls": true,
                  "controlsStyle": "hover",
                  "controlsCustomIncrements": "",
                  "inputStyle": "text"
                }
              ],
              "flow": "vertical",
              "align": "center",
              "verticalAlign": "top",
              "collapsible": true,
              "defaultCollapsed": true,
              "title": "Hidden",
              "titleStyle": "default"
            }
          ],
          "key": "custom_body",
          "type": "panel"
        },
        "display": {
          "width": 600,
          "height": 600,
          "fix_size": false,
          "pp_width": 64,
          "pp_height": 64
        },
        "header": {
          "contents": [
            {
              "key": "",
              "colSpan": 1,
              "rowSpan": 1,
              "cssClass": "sinlesscsb-marker",
              "role": 0,
              "editRole": 0,
              "permission": 0,
              "tooltip": "",
              "visibilityFormula": "",
              "editableFormula": "",
              "escapeHTML": false,
              "type": "panel",
              "contents": [
                {
                  "key": "",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "label",
                  "size": "m-small",
                  "icon": "gun",
                  "value": "${wepAction1Enabled ? wepAction1Label : \"\"}$",
                  "prefix": "",
                  "suffix": "",
                  "rollMessage": "%{\n  // Prefer linkedEntity (inventory row) then entity (item sheet)\n  const doc = (typeof linkedEntity !== \"undefined\" && linkedEntity) ? linkedEntity\n            : (typeof entity !== \"undefined\" && entity) ? entity\n            : null;\n\n  const itemUuid = String(doc?.uuid ?? \"\").trim();\n\n  // Actor resolution: embedded parent wins; otherwise token/character fallbacks.\n  const embeddedActorUuid =\n    (doc?.parent?.documentName === \"Actor\" && doc?.parent?.uuid) ? String(doc.parent.uuid) : \"\";\n\n  const scopeActorUuid =\n    (typeof actor !== \"undefined\" && actor?.documentName === \"Actor\" && actor?.uuid) ? String(actor.uuid) : \"\";\n\n  const controlledActorUuid = (() => {\n    const t = canvas?.tokens?.controlled?.[0];\n    return t?.actor?.uuid ? String(t.actor.uuid) : \"\";\n  })();\n\n  const targetedActorUuid = (() => {\n    const t = game.user?.targets ? Array.from(game.user.targets)[0] : null;\n    return t?.actor?.uuid ? String(t.actor.uuid) : \"\";\n  })();\n\n  const userCharUuid = game.user?.character?.uuid ? String(game.user.character.uuid) : \"\";\n\n  const actorUuid = String(\n    embeddedActorUuid ||\n    scopeActorUuid ||\n    controlledActorUuid ||\n    targetedActorUuid ||\n    userCharUuid ||\n    \"\"\n  ).trim();\n\n  if (!itemUuid) {\n    ui.notifications?.warn?.(\"SinlessCSB: missing item context (itemUuid).\");\n    return \"\";\n  }\n\n  if (!actorUuid) {\n    ui.notifications?.warn?.(\"SinlessCSB: No actor context. Control or target a token, then try again.\");\n    return \"\";\n  }\n\n  const api = game.modules.get(\"sinlesscsb\")?.api;\n  if (typeof api?.rollItem !== \"function\") {\n    ui.notifications?.error?.(\"SinlessCSB: rollItem API not available (module not ready / not exposed).\");\n    return \"\";\n  }\n\n  api.rollItem({ itemUuid, actorUuid, bonusDiceDelta: 0 });\n  return \"\";\n}%\n",
                  "altRollMessage": "",
                  "rollMessageToChat": false,
                  "altRollMessageToChat": false,
                  "style": "button"
                },
                {
                  "key": "",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "label",
                  "size": "m-small",
                  "icon": "gun",
                  "value": "${wepAction2Enabled ? wepAction2Label : \"\"}$",
                  "prefix": "",
                  "suffix": "",
                  "rollMessage": "%{\n  const slot = 3;\n\n  const doc = (typeof linkedEntity !== \"undefined\" && linkedEntity) ? linkedEntity\n            : (typeof entity !== \"undefined\" && entity) ? entity\n            : null;\n\n  const itemUuid = String(doc?.uuid ?? \"\").trim();\n\n  const embeddedActorUuid =\n    (doc?.parent?.documentName === \"Actor\" && doc?.parent?.uuid) ? String(doc.parent.uuid) : \"\";\n\n  const scopeActorUuid =\n    (typeof actor !== \"undefined\" && actor?.documentName === \"Actor\" && actor?.uuid) ? String(actor.uuid) : \"\";\n\n  const controlledActorUuid = (() => {\n    const t = canvas?.tokens?.controlled?.[0];\n    return t?.actor?.uuid ? String(t.actor.uuid) : \"\";\n  })();\n\n  const targetedActorUuid = (() => {\n    const t = game.user?.targets ? Array.from(game.user.targets)[0] : null;\n    return t?.actor?.uuid ? String(t.actor.uuid) : \"\";\n  })();\n\n  const userCharUuid = game.user?.character?.uuid ? String(game.user.character.uuid) : \"\";\n\n  const actorUuid = String(\n    embeddedActorUuid ||\n    scopeActorUuid ||\n    controlledActorUuid ||\n    targetedActorUuid ||\n    userCharUuid ||\n    \"\"\n  ).trim();\n\n  if (!itemUuid) { ui.notifications?.warn?.(\"SinlessCSB: missing item context (itemUuid).\"); return \"\"; }\n  if (!actorUuid) { ui.notifications?.warn?.(\"SinlessCSB: No actor context. Control/target a token.\"); return \"\"; }\n\n  const enabled = !!doc?.system?.props?.[`wepAction${slot}Enabled`];\n  if (!enabled) { ui.notifications?.warn?.(\"This action is not enabled on the item.\"); return \"\"; }\n\n  const bonus = Number(doc?.system?.props?.[`wepAction${slot}BonusDice`] ?? 0) || 0;\n\n  const api = game.modules.get(\"sinlesscsb\")?.api;\n  if (typeof api?.rollItem !== \"function\") { ui.notifications?.error?.(\"SinlessCSB: rollItem API not available.\"); return \"\"; }\n\n  // Pass bonus as an override (requires rollItem to support scope.bonusDiceOverride or bonusDiceDelta).\n  // If your rollItem already reads item.system.props.bonusDice, you can instead write per-slot bonusDice into item props,\n  // but that affects all actions. Better to pass it.\n  api.rollItem({ itemUuid, actorUuid, bonusDiceDelta: bonus });\n\n  return \"\";\n}%\n\n",
                  "altRollMessage": "",
                  "rollMessageToChat": false,
                  "altRollMessageToChat": false,
                  "style": "button"
                },
                {
                  "key": "",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "label",
                  "size": "m-small",
                  "icon": "gun",
                  "value": "${wepAction3Enabled ? wepAction3Label : \"\" }$",
                  "prefix": "",
                  "suffix": "",
                  "rollMessage": "%{\n  const slot = 3;\n\n  const doc = (typeof linkedEntity !== \"undefined\" && linkedEntity) ? linkedEntity\n            : (typeof entity !== \"undefined\" && entity) ? entity\n            : null;\n\n  const itemUuid = String(doc?.uuid ?? \"\").trim();\n\n  const embeddedActorUuid =\n    (doc?.parent?.documentName === \"Actor\" && doc?.parent?.uuid) ? String(doc.parent.uuid) : \"\";\n\n  const scopeActorUuid =\n    (typeof actor !== \"undefined\" && actor?.documentName === \"Actor\" && actor?.uuid) ? String(actor.uuid) : \"\";\n\n  const controlledActorUuid = (() => {\n    const t = canvas?.tokens?.controlled?.[0];\n    return t?.actor?.uuid ? String(t.actor.uuid) : \"\";\n  })();\n\n  const targetedActorUuid = (() => {\n    const t = game.user?.targets ? Array.from(game.user.targets)[0] : null;\n    return t?.actor?.uuid ? String(t.actor.uuid) : \"\";\n  })();\n\n  const userCharUuid = game.user?.character?.uuid ? String(game.user.character.uuid) : \"\";\n\n  const actorUuid = String(\n    embeddedActorUuid ||\n    scopeActorUuid ||\n    controlledActorUuid ||\n    targetedActorUuid ||\n    userCharUuid ||\n    \"\"\n  ).trim();\n\n  if (!itemUuid) { ui.notifications?.warn?.(\"SinlessCSB: missing item context (itemUuid).\"); return \"\"; }\n  if (!actorUuid) { ui.notifications?.warn?.(\"SinlessCSB: No actor context. Control/target a token.\"); return \"\"; }\n\n  const enabled = !!doc?.system?.props?.[`wepAction${slot}Enabled`];\n  if (!enabled) { ui.notifications?.warn?.(\"This action is not enabled on the item.\"); return \"\"; }\n\n  const bonus = Number(doc?.system?.props?.[`wepAction${slot}BonusDice`] ?? 0) || 0;\n\n  const api = game.modules.get(\"sinlesscsb\")?.api;\n  if (typeof api?.rollItem !== \"function\") { ui.notifications?.error?.(\"SinlessCSB: rollItem API not available.\"); return \"\"; }\n\n  // Pass bonus as an override (requires rollItem to support scope.bonusDiceOverride or bonusDiceDelta).\n  // If your rollItem already reads item.system.props.bonusDice, you can instead write per-slot bonusDice into item props,\n  // but that affects all actions. Better to pass it.\n  api.rollItem({ itemUuid, actorUuid, bonusDiceDelta: bonus });\n\n  return \"\";\n}%\n",
                  "altRollMessage": "",
                  "rollMessageToChat": false,
                  "altRollMessageToChat": false,
                  "style": "button"
                },
                {
                  "key": "",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "label",
                  "size": "m-small",
                  "icon": "gun",
                  "value": "${wepAction4Enabled ? wepAction4Label : \"\" }$",
                  "prefix": "",
                  "suffix": "",
                  "rollMessage": "%{\n  const slot = 4;\n\n  const doc = (typeof linkedEntity !== \"undefined\" && linkedEntity) ? linkedEntity\n            : (typeof entity !== \"undefined\" && entity) ? entity\n            : null;\n\n  const itemUuid = String(doc?.uuid ?? \"\").trim();\n\n  const embeddedActorUuid =\n    (doc?.parent?.documentName === \"Actor\" && doc?.parent?.uuid) ? String(doc.parent.uuid) : \"\";\n\n  const scopeActorUuid =\n    (typeof actor !== \"undefined\" && actor?.documentName === \"Actor\" && actor?.uuid) ? String(actor.uuid) : \"\";\n\n  const controlledActorUuid = (() => {\n    const t = canvas?.tokens?.controlled?.[0];\n    return t?.actor?.uuid ? String(t.actor.uuid) : \"\";\n  })();\n\n  const targetedActorUuid = (() => {\n    const t = game.user?.targets ? Array.from(game.user.targets)[0] : null;\n    return t?.actor?.uuid ? String(t.actor.uuid) : \"\";\n  })();\n\n  const userCharUuid = game.user?.character?.uuid ? String(game.user.character.uuid) : \"\";\n\n  const actorUuid = String(\n    embeddedActorUuid ||\n    scopeActorUuid ||\n    controlledActorUuid ||\n    targetedActorUuid ||\n    userCharUuid ||\n    \"\"\n  ).trim();\n\n  if (!itemUuid) { ui.notifications?.warn?.(\"SinlessCSB: missing item context (itemUuid).\"); return \"\"; }\n  if (!actorUuid) { ui.notifications?.warn?.(\"SinlessCSB: No actor context. Control/target a token.\"); return \"\"; }\n\n  const enabled = !!doc?.system?.props?.[`wepAction${slot}Enabled`];\n  if (!enabled) { ui.notifications?.warn?.(\"This action is not enabled on the item.\"); return \"\"; }\n\n  const bonus = Number(doc?.system?.props?.[`wepAction${slot}BonusDice`] ?? 0) || 0;\n\n  const api = game.modules.get(\"sinlesscsb\")?.api;\n  if (typeof api?.rollItem !== \"function\") { ui.notifications?.error?.(\"SinlessCSB: rollItem API not available.\"); return \"\"; }\n\n  // Pass bonus as an override (requires rollItem to support scope.bonusDiceOverride or bonusDiceDelta).\n  // If your rollItem already reads item.system.props.bonusDice, you can instead write per-slot bonusDice into item props,\n  // but that affects all actions. Better to pass it.\n  api.rollItem({ itemUuid, actorUuid, bonusDiceDelta: bonus });\n\n  return \"\";\n}%\n",
                  "altRollMessage": "",
                  "rollMessageToChat": false,
                  "altRollMessageToChat": false,
                  "style": "button"
                }
              ],
              "flow": "grid-4",
              "align": "left",
              "verticalAlign": "top",
              "collapsible": false,
              "defaultCollapsed": false,
              "title": "",
              "titleStyle": "default"
            },
            {
              "key": "",
              "colSpan": 1,
              "rowSpan": 1,
              "cssClass": "",
              "role": 0,
              "editRole": 0,
              "permission": 0,
              "tooltip": "",
              "visibilityFormula": "",
              "editableFormula": "",
              "escapeHTML": false,
              "type": "panel",
              "contents": [
                {
                  "key": "weaponRecoil",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "numberField",
                  "size": "medium",
                  "label": "Track Recoil",
                  "defaultValue": "0",
                  "allowDecimal": false,
                  "minVal": "0",
                  "maxVal": "",
                  "allowRelative": false,
                  "showControls": true,
                  "controlsStyle": "hover",
                  "controlsCustomIncrements": "",
                  "inputStyle": "text"
                },
                {
                  "key": "ammoCurrent",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "numberField",
                  "size": "m-large",
                  "label": "Ammo [Current]",
                  "defaultValue": "${weaponAmmo}$",
                  "allowDecimal": false,
                  "minVal": "0",
                  "maxVal": "",
                  "allowRelative": true,
                  "showControls": true,
                  "controlsStyle": "hover",
                  "controlsCustomIncrements": "",
                  "inputStyle": "text"
                }
              ],
              "flow": "grid-2",
              "align": "left",
              "verticalAlign": "top",
              "collapsible": false,
              "defaultCollapsed": false,
              "title": "",
              "titleStyle": "default"
            },
            {
              "key": "",
              "colSpan": 1,
              "rowSpan": 1,
              "cssClass": "",
              "role": 0,
              "editRole": 0,
              "permission": 0,
              "tooltip": "",
              "visibilityFormula": "",
              "editableFormula": "",
              "escapeHTML": false,
              "type": "panel",
              "contents": [
                {
                  "key": "wepAction1Enabled",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "Single Shot. Characters can fire one bullet as a simple action. The player totals their Firearms skill plus accuracy and can use that many dice from their Finesse pool to fire the weapon.",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "checkbox",
                  "size": "m-small",
                  "label": "SS",
                  "defaultChecked": true
                },
                {
                  "key": "wepAction2Enabled",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "Double Tap. Characters can fire two bullets at the same target as a simple action, adding one bonus die to the test.",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "checkbox",
                  "size": "m-small",
                  "label": "DT",
                  "defaultChecked": false
                },
                {
                  "key": "wepAction3Enabled",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "Burst Fire. Characters can fire three bullets at a target per simple action, adding 3 bonus dice to the test.",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "checkbox",
                  "size": "m-small",
                  "label": "B",
                  "defaultChecked": false
                },
                {
                  "key": "wepAction4Enabled",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "Full Auto. In this gun mode, a character fires 20 bullets (assuming the gun has the ammunition to fire). It adds 20 bonus dice (one per bullet). The character may fire at multiple targets, split- ting the dice between targets. Each sequen- tial target adds a penalty die.",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "checkbox",
                  "size": "m-small",
                  "label": "FA",
                  "defaultChecked": false
                }
              ],
              "flow": "horizontal",
              "align": "left",
              "verticalAlign": "top",
              "collapsible": true,
              "defaultCollapsed": false,
              "title": "Attack Modes",
              "titleStyle": "default"
            },
            {
              "key": "",
              "colSpan": 1,
              "rowSpan": 1,
              "cssClass": "",
              "role": 0,
              "editRole": 0,
              "permission": 0,
              "tooltip": "",
              "visibilityFormula": "",
              "editableFormula": "",
              "escapeHTML": false,
              "type": "panel",
              "contents": [
                {
                  "key": "weaponDamage",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "numberField",
                  "size": "medium",
                  "label": "Damage",
                  "defaultValue": "1",
                  "allowDecimal": false,
                  "minVal": "",
                  "maxVal": "",
                  "allowRelative": false,
                  "showControls": true,
                  "controlsStyle": "hover",
                  "controlsCustomIncrements": "",
                  "inputStyle": "text"
                },
                {
                  "key": "specialDamage",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "textField",
                  "size": "full-size",
                  "label": "Special Damage",
                  "defaultValue": "",
                  "charList": "",
                  "maxLength": null,
                  "autocomplete": ""
                }
              ],
              "flow": "vertical",
              "align": "center",
              "verticalAlign": "top",
              "collapsible": false,
              "defaultCollapsed": false,
              "title": "",
              "titleStyle": "default"
            }
          ],
          "key": "custom_header",
          "type": "panel"
        },
        "hidden": [],
        "modifiers": [],
        "props": {
          "gearFeature": "0",
          "weaponDamage": "10",
          "firearmPenetration": "3",
          "weight": "2",
          "conceal": "4",
          "itemRarity": "0",
          "wepHardening": "6",
          "weaponTags": "Shotgun",
          "weaponRecoil": "0",
          "wepAction1Enabled": true,
          "wepAction2Enabled": false,
          "wepAction3Enabled": false,
          "wepAction4Enabled": false,
          "weaponCard": "<img src=\"modules/sinlesscsb/assets/images/TarotLand/gear%2Btarot%2Bcards%2B-%2B40_result.webp\">",
          "bonusDice": "0",
          "diceMod": "0",
          "smartSelect": "No",
          "wepAction1BonusDice": "0",
          "wepAction2BonusDice": "1",
          "wepAction3BonusDice": "3",
          "wepAction4BonusDice": "20",
          "wepAction1Label": "SS",
          "wepAction2Label": "DT",
          "wepAction3Label": "B",
          "wepAction4Label": "FA",
          "skillKey": "Skill_Firearms",
          "poolKey": "Finesse",
          "weaponRange": "0",
          "wepBarrier": "4",
          "weaponAmmo": "5",
          "ammoType": "",
          "modsOverbarrel": "",
          "modsUnderbarrel": "",
          "modsChassis": "",
          "ammoCurrent": "5",
          "wepManufacturer": "Krieg",
          "specialDamage": "",
          "firearmCost": ""
        },
        "unique": false,
        "uniqueId": "iPJklFqcxXQnpixG"
      },
      "_id": "eRokJ9mYUDD9295h",
      "effects": [],
      "sort": 0,
      "flags": {
        "custom-system-builder": {
          "version": "5.1.0"
        }
      },
      "_stats": {
        "compendiumSource": "Item.iPJklFqcxXQnpixG",
        "duplicateSource": null,
        "exportSource": null,
        "coreVersion": "13.351",
        "systemId": "custom-system-builder",
        "systemVersion": "5.1.0",
        "createdTime": 1769361071229,
        "modifiedTime": 1769382918648,
        "lastModifiedBy": "KoiB8oaGNkPdgzdM"
      },
      "ownership": {
        "default": 0
      }
    },
    {
      "folder": "rCTnl7myqTtxE5gl",
      "name": "Compound Bow",
      "type": "equippableItem",
      "_id": "VD1Tjqib8KP3gH5J",
      "img": "icons/svg/item-bag.svg",
      "system": {
        "body": {
          "contents": [
            {
              "key": "",
              "colSpan": 1,
              "rowSpan": 1,
              "cssClass": "",
              "role": 0,
              "editRole": 0,
              "permission": 0,
              "tooltip": "",
              "visibilityFormula": "",
              "editableFormula": "",
              "escapeHTML": false,
              "type": "panel",
              "contents": [
                {
                  "key": "wepAction1Label",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "textField",
                  "size": "full-size",
                  "label": "Action Label",
                  "defaultValue": "Fire",
                  "charList": "",
                  "maxLength": null,
                  "autocomplete": ""
                },
                {
                  "key": "",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "panel",
                  "contents": [
                    {
                      "key": "itemDamage",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "m-small",
                      "label": "Damage",
                      "defaultValue": "2",
                      "allowDecimal": false,
                      "minVal": "",
                      "maxVal": "",
                      "allowRelative": false,
                      "showControls": true,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    },
                    {
                      "key": "",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "label",
                      "size": "full-size",
                      "icon": "",
                      "value": "<-- For Bow, enter [Strength Minimum + 2] ",
                      "prefix": "",
                      "suffix": "",
                      "rollMessage": "",
                      "altRollMessage": "",
                      "rollMessageToChat": true,
                      "altRollMessageToChat": true,
                      "style": "label"
                    }
                  ],
                  "flow": "horizontal",
                  "align": "left",
                  "verticalAlign": "top",
                  "collapsible": false,
                  "defaultCollapsed": false,
                  "title": "",
                  "titleStyle": "default"
                },
                {
                  "key": "specialDamage",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "textField",
                  "size": "full-size",
                  "label": "Special Damage",
                  "defaultValue": "",
                  "charList": "",
                  "maxLength": null,
                  "autocomplete": ""
                },
                {
                  "key": "",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "panel",
                  "contents": [
                    {
                      "key": "arrowChoice",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "textArea",
                      "size": "full-size",
                      "label": "",
                      "defaultValue": "<p></p><table><tbody><tr><td><p>Arrow Type</p></td><td><p>AP</p></td><td><p>Damage</p></td><td><p>Conceal</p></td><td><p>Rarity</p></td><td data-colwidth=\"100\"><p>Weight</p></td></tr><tr><td><p>Standard</p></td><td><p>0</p></td><td><p>as Bow</p></td><td><p>1</p></td><td><p>0</p></td><td data-colwidth=\"100\"><p>1/20</p></td></tr><tr><td><p>Razor</p></td><td><p>1</p></td><td><p>as Bow -1</p></td><td><p>1</p></td><td><p>3</p></td><td data-colwidth=\"100\"><p>1/20</p></td></tr><tr><td><p>Explosive</p></td><td><p>0</p></td><td><p>as Bow +5, explosive damage</p></td><td><p>1</p></td><td><p>5</p></td><td data-colwidth=\"100\"><p>1/10</p></td></tr><tr><td><p>Shock</p></td><td><p>0</p></td><td><p>no physical damage</p></td><td><p>1</p></td><td><p>4</p></td><td data-colwidth=\"100\"><p>1/10</p></td></tr><tr><td><p>Bolt</p></td><td><p>0</p></td><td><p>as Xbow</p></td><td><p>1</p></td><td><p>0</p></td><td data-colwidth=\"100\"><p>1/10</p></td></tr></tbody></table><p></p><p>You can add or subtract damage from arrow choice by adjusting diceMod below. You will need to adjust fields manually when using special arrows (just change Armor Pierce field, Conceal, etc)</p>",
                      "style": "sheet"
                    }
                  ],
                  "flow": "vertical",
                  "align": "left",
                  "verticalAlign": "top",
                  "collapsible": true,
                  "defaultCollapsed": false,
                  "title": "Arrow Choice",
                  "titleStyle": "default"
                },
                {
                  "key": "",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "panel",
                  "contents": [
                    {
                      "key": "strMin",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "Use this for Bows only. (Xbows have fixed damage.)",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "m-large",
                      "label": "Strength Minimum",
                      "defaultValue": "0",
                      "allowDecimal": false,
                      "minVal": "1",
                      "maxVal": "",
                      "allowRelative": false,
                      "showControls": true,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    }
                  ],
                  "flow": "vertical",
                  "align": "center",
                  "verticalAlign": "top",
                  "collapsible": false,
                  "defaultCollapsed": false,
                  "title": "",
                  "titleStyle": "default"
                },
                {
                  "key": "",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "panel",
                  "contents": [
                    {
                      "key": "bonusDice",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "medium",
                      "label": "bonusDice",
                      "defaultValue": "0",
                      "allowDecimal": false,
                      "minVal": "",
                      "maxVal": "",
                      "allowRelative": false,
                      "showControls": true,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    },
                    {
                      "key": "diceMod",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "medium",
                      "label": "diceMod",
                      "defaultValue": "0",
                      "allowDecimal": false,
                      "minVal": "",
                      "maxVal": "",
                      "allowRelative": false,
                      "showControls": true,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    },
                    {
                      "key": "armorPierce",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "medium",
                      "label": "Armor Pierce",
                      "defaultValue": "",
                      "allowDecimal": false,
                      "minVal": "0",
                      "maxVal": "",
                      "allowRelative": false,
                      "showControls": true,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    },
                    {
                      "key": "weight",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "medium",
                      "label": "Weight",
                      "defaultValue": "",
                      "allowDecimal": false,
                      "minVal": "0",
                      "maxVal": "",
                      "allowRelative": false,
                      "showControls": true,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    },
                    {
                      "key": "conceal",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "medium",
                      "label": "Conceal",
                      "defaultValue": "1",
                      "allowDecimal": false,
                      "minVal": "0",
                      "maxVal": "",
                      "allowRelative": false,
                      "showControls": true,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    },
                    {
                      "key": "itemRarity",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "medium",
                      "label": "Rarity",
                      "defaultValue": "",
                      "allowDecimal": false,
                      "minVal": "0",
                      "maxVal": "",
                      "allowRelative": false,
                      "showControls": true,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    },
                    {
                      "key": "gearFeature",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "only use for compound bow, crossbows do not use this.",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "medium",
                      "label": "Gear Feature",
                      "defaultValue": "0",
                      "allowDecimal": false,
                      "minVal": "0",
                      "maxVal": "",
                      "allowRelative": false,
                      "showControls": true,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    },
                    {
                      "key": "projectileCost",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "medium",
                      "label": "Cost ",
                      "defaultValue": "",
                      "allowDecimal": false,
                      "minVal": "0",
                      "maxVal": "",
                      "allowRelative": false,
                      "showControls": true,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    }
                  ],
                  "flow": "grid-2",
                  "align": "left",
                  "verticalAlign": "top",
                  "collapsible": false,
                  "defaultCollapsed": false,
                  "title": "",
                  "titleStyle": "default"
                },
                {
                  "key": "",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "panel",
                  "contents": [
                    {
                      "key": "archeryRange",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "textArea",
                      "size": "full-size",
                      "label": "",
                      "defaultValue": "<p>Bows do not use Strength rating for range.</p><p>All bows have a direct-fire short range of 70 m (35\"), which gives +2 bonus dice to the shot.</p><p>Any shot between 70 m (35\") and 300 m (150\") must be shot at an arc and have 2 penalty dice on the shot.</p><p>Bow shots beyond 300 m are not possible.</p><p>Compound bows have a variable Strength minimum required to use them.</p>",
                      "style": "sheet"
                    }
                  ],
                  "flow": "vertical",
                  "align": "left",
                  "verticalAlign": "top",
                  "collapsible": true,
                  "defaultCollapsed": false,
                  "title": "Archery Range",
                  "titleStyle": "default"
                },
                {
                  "key": "",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 4,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "panel",
                  "contents": [
                    {
                      "key": "poolKey",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "select",
                      "size": "full-size",
                      "label": "poolKey",
                      "defaultValue": "Finesse",
                      "selectedOptionType": "custom",
                      "options": [
                        {
                          "key": "Brawn",
                          "value": "Brawn"
                        },
                        {
                          "key": "Finesse",
                          "value": "Finesse"
                        },
                        {
                          "key": "Resolve",
                          "value": "Resolve"
                        },
                        {
                          "key": "Focus",
                          "value": "Focus"
                        }
                      ]
                    },
                    {
                      "key": "skillKey",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "textField",
                      "size": "full-size",
                      "label": "skillKey",
                      "defaultValue": "Skill_Archery",
                      "charList": "",
                      "maxLength": null,
                      "autocomplete": ""
                    },
                    {
                      "key": "",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "panel",
                      "contents": [
                        {
                          "key": "wepAction1Enabled",
                          "colSpan": 1,
                          "rowSpan": 1,
                          "cssClass": "",
                          "role": 0,
                          "editRole": 0,
                          "permission": 0,
                          "tooltip": "Single Shot. Characters can fire one bullet as a simple action. The player totals their Firearms skill plus accuracy and can use that many dice from their Finesse pool to fire the weapon.",
                          "visibilityFormula": "",
                          "editableFormula": "",
                          "escapeHTML": false,
                          "type": "checkbox",
                          "size": "m-small",
                          "label": "SS",
                          "defaultChecked": true
                        }
                      ],
                      "flow": "vertical",
                      "align": "left",
                      "verticalAlign": "top",
                      "collapsible": true,
                      "defaultCollapsed": false,
                      "title": "wepAction1 fields",
                      "titleStyle": "default"
                    }
                  ],
                  "flow": "vertical",
                  "align": "left",
                  "verticalAlign": "top",
                  "collapsible": true,
                  "defaultCollapsed": false,
                  "title": "Hidden",
                  "titleStyle": "default"
                }
              ],
              "flow": "vertical",
              "align": "left",
              "verticalAlign": "top",
              "collapsible": true,
              "defaultCollapsed": false,
              "title": "Roll Config",
              "titleStyle": "default"
            }
          ],
          "key": "custom_body",
          "type": "panel"
        },
        "display": {
          "width": 600,
          "height": 600,
          "fix_size": false,
          "pp_width": 64,
          "pp_height": 64
        },
        "header": {
          "contents": [
            {
              "key": "",
              "colSpan": 1,
              "rowSpan": 1,
              "cssClass": "sinlesscsb-marker",
              "role": 0,
              "editRole": 0,
              "permission": 0,
              "tooltip": "",
              "visibilityFormula": "",
              "editableFormula": "",
              "escapeHTML": false,
              "type": "panel",
              "contents": [
                {
                  "key": "",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "label",
                  "size": "full-size",
                  "icon": "bullseye",
                  "value": "${wepAction1Enabled ? wepAction1Label : \"\"}$",
                  "prefix": "",
                  "suffix": "",
                  "rollMessage": "%{\n  // Prefer linkedEntity (inventory row) then entity (item sheet)\n  const doc = (typeof linkedEntity !== \"undefined\" && linkedEntity) ? linkedEntity\n            : (typeof entity !== \"undefined\" && entity) ? entity\n            : null;\n\n  const itemUuid = String(doc?.uuid ?? \"\").trim();\n\n  // Actor resolution: embedded parent wins; otherwise token/character fallbacks.\n  const embeddedActorUuid =\n    (doc?.parent?.documentName === \"Actor\" && doc?.parent?.uuid) ? String(doc.parent.uuid) : \"\";\n\n  const scopeActorUuid =\n    (typeof actor !== \"undefined\" && actor?.documentName === \"Actor\" && actor?.uuid) ? String(actor.uuid) : \"\";\n\n  const controlledActorUuid = (() => {\n    const t = canvas?.tokens?.controlled?.[0];\n    return t?.actor?.uuid ? String(t.actor.uuid) : \"\";\n  })();\n\n  const targetedActorUuid = (() => {\n    const t = game.user?.targets ? Array.from(game.user.targets)[0] : null;\n    return t?.actor?.uuid ? String(t.actor.uuid) : \"\";\n  })();\n\n  const userCharUuid = game.user?.character?.uuid ? String(game.user.character.uuid) : \"\";\n\n  const actorUuid = String(\n    embeddedActorUuid ||\n    scopeActorUuid ||\n    controlledActorUuid ||\n    targetedActorUuid ||\n    userCharUuid ||\n    \"\"\n  ).trim();\n\n  if (!itemUuid) {\n    ui.notifications?.warn?.(\"SinlessCSB: missing item context (itemUuid).\");\n    return \"\";\n  }\n\n  if (!actorUuid) {\n    ui.notifications?.warn?.(\"SinlessCSB: No actor context. Control or target a token, then try again.\");\n    return \"\";\n  }\n\n  const api = game.modules.get(\"sinlesscsb\")?.api;\n  if (typeof api?.rollItem !== \"function\") {\n    ui.notifications?.error?.(\"SinlessCSB: rollItem API not available (module not ready / not exposed).\");\n    return \"\";\n  }\n\n  api.rollItem({ itemUuid, actorUuid, bonusDiceDelta: 0 });\n  return \"\";\n}%\n",
                  "altRollMessage": "",
                  "rollMessageToChat": false,
                  "altRollMessageToChat": false,
                  "style": "button"
                }
              ],
              "flow": "vertical",
              "align": "center",
              "verticalAlign": "top",
              "collapsible": false,
              "defaultCollapsed": false,
              "title": "",
              "titleStyle": "default"
            }
          ],
          "key": "custom_header",
          "type": "panel"
        },
        "hidden": [],
        "modifiers": [],
        "props": {
          "wepAction1Label": "Fire",
          "arrowChoice": "<p></p><table><tbody><tr><td><p>Arrow Type</p></td><td><p>AP</p></td><td><p>Damage</p></td><td><p>Conceal</p></td><td><p>Rarity</p></td><td data-colwidth=\"100\"><p></p></td></tr><tr><td><p>Standard</p></td><td><p>0</p></td><td><p>as Bow</p></td><td><p>1</p></td><td><p>0</p></td><td data-colwidth=\"100\"><p></p></td></tr><tr><td><p>Razor</p></td><td><p>1</p></td><td><p>as Bow -1</p></td><td><p>1</p></td><td><p>3</p></td><td data-colwidth=\"100\"><p></p></td></tr><tr><td><p>Explosive</p></td><td><p>0</p></td><td><p>as Bow +5, explosive damage</p></td><td><p>1</p></td><td><p>5</p></td><td data-colwidth=\"100\"><p></p></td></tr><tr><td><p>Shock</p></td><td><p>0</p></td><td><p>no physical damage</p></td><td><p>1</p></td><td><p>4</p></td><td data-colwidth=\"100\"><p></p></td></tr></tbody></table><p></p><p>You can add or subtract damage from arrow choice by adjusting diceMod below. You will need to adjust fields manually when using special arrows (just change Armor Pierce field, Conceal, etc)</p>",
          "gearFeature": "1",
          "itemDamage": "2",
          "bonusDice": "0",
          "diceMod": "0",
          "conceal": "3",
          "archeryRange": "<p>Bows do not use Strength rating for range.</p><p>All bows have a direct-fire short range of 70 m (35\"), which gives +2 bonus dice to the shot.</p><p>Any shot between 70 m (35\") and 300 m (150\") must be shot at an arc and have 2 penalty dice on the shot.</p><p>Bow shots beyond 300 m are not possible.</p><p>Compound bows have a variable Strength minimum required to use them.</p>",
          "poolKey": "Finesse",
          "skillKey": "Skill_Archery",
          "wepAction1Enabled": true,
          "weight": "1",
          "armorPierce": "1",
          "itemRarity": "0",
          "specialDamage": "",
          "projectileCost": "",
          "strMin": "0"
        },
        "unique": false,
        "uniqueId": "8CBpDFpd7hMOxStt",
        "templateSystemUniqueVersion": 2277102133,
        "template": "dsFXOOLAla95Lj3y"
      },
      "effects": [],
      "sort": 100000,
      "flags": {
        "custom-system-builder": {
          "version": "5.1.0"
        }
      },
      "_stats": {
        "compendiumSource": "Item.8CBpDFpd7hMOxStt",
        "duplicateSource": null,
        "exportSource": null,
        "coreVersion": "13.351",
        "systemId": "custom-system-builder",
        "systemVersion": "5.1.0",
        "createdTime": 1769361152352,
        "modifiedTime": 1769382947008,
        "lastModifiedBy": "KoiB8oaGNkPdgzdM"
      },
      "ownership": {
        "default": 0
      }
    },
    {
      "name": "Brass Knuckles",
      "type": "equippableItem",
      "folder": "rCTnl7myqTtxE5gl",
      "img": "icons/svg/item-bag.svg",
      "system": {
        "template": "beEN7M4Y3hg8U06n",
        "templateSystemUniqueVersion": 2339292261,
        "body": {
          "contents": [
            {
              "key": "",
              "colSpan": 1,
              "rowSpan": 1,
              "cssClass": "",
              "role": 0,
              "editRole": 0,
              "permission": 0,
              "tooltip": "",
              "visibilityFormula": "",
              "editableFormula": "",
              "escapeHTML": false,
              "type": "panel",
              "contents": [
                {
                  "key": "wepAction1Label",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "textField",
                  "size": "full-size",
                  "label": "Action Label",
                  "defaultValue": "Attack",
                  "charList": "",
                  "maxLength": null,
                  "autocomplete": ""
                },
                {
                  "key": "itemDamage",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "textField",
                  "size": "full-size",
                  "label": "Damage",
                  "defaultValue": "(STR/2) + 2 ---example, REPLACE with correct formula---",
                  "charList": "",
                  "maxLength": null,
                  "autocomplete": ""
                },
                {
                  "key": "specialDamage",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "textField",
                  "size": "full-size",
                  "label": "Special Damage",
                  "defaultValue": "",
                  "charList": "",
                  "maxLength": null,
                  "autocomplete": ""
                },
                {
                  "key": "",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "panel",
                  "contents": [
                    {
                      "key": "damageGuide",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "textArea",
                      "size": "full-size",
                      "label": "",
                      "defaultValue": "<ol><li><p>Common damage forms:</p><ul><li><p><code>(STR/2) + 2</code></p></li><li><p><code>(STR/2) + 12 + 2d6</code></p></li><li><p><code>STR + 6</code></p></li></ul></li><li><p>Notes:</p><ul><li><p>Use parentheses for halves (example: <code>(STR/2)</code>).</p></li><li><p>Division uses floor rounding.</p></li><li><p>You may add dice as <code>Nd6</code> (example: <code>2d6</code>).</p></li></ul></li></ol>",
                      "style": "sheet"
                    }
                  ],
                  "flow": "vertical",
                  "align": "left",
                  "verticalAlign": "top",
                  "collapsible": true,
                  "defaultCollapsed": false,
                  "title": "Damage Formula Syntax Guidelines",
                  "titleStyle": "default"
                },
                {
                  "key": "",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "panel",
                  "contents": [
                    {
                      "key": "meleeReach",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "medium",
                      "label": "Reach",
                      "defaultValue": "",
                      "allowDecimal": false,
                      "minVal": "0",
                      "maxVal": "3",
                      "allowRelative": false,
                      "showControls": true,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    },
                    {
                      "key": "armorPierce",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "medium",
                      "label": "Armor Pierce",
                      "defaultValue": "",
                      "allowDecimal": false,
                      "minVal": "0",
                      "maxVal": "",
                      "allowRelative": false,
                      "showControls": true,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    },
                    {
                      "key": "bonusDice",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "medium",
                      "label": "bonusDice",
                      "defaultValue": "0",
                      "allowDecimal": false,
                      "minVal": "",
                      "maxVal": "",
                      "allowRelative": false,
                      "showControls": true,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    },
                    {
                      "key": "weight",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "medium",
                      "label": "Weight",
                      "defaultValue": "",
                      "allowDecimal": true,
                      "minVal": "0",
                      "maxVal": "",
                      "allowRelative": false,
                      "showControls": true,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    },
                    {
                      "key": "diceMod",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "medium",
                      "label": "diceMod",
                      "defaultValue": "0",
                      "allowDecimal": false,
                      "minVal": "",
                      "maxVal": "",
                      "allowRelative": false,
                      "showControls": false,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    },
                    {
                      "key": "conceal",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "medium",
                      "label": "Conceal",
                      "defaultValue": "1",
                      "allowDecimal": false,
                      "minVal": "0",
                      "maxVal": "",
                      "allowRelative": false,
                      "showControls": true,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    },
                    {
                      "key": "itemRarity",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "medium",
                      "label": "Rarity",
                      "defaultValue": "",
                      "allowDecimal": false,
                      "minVal": "0",
                      "maxVal": "",
                      "allowRelative": false,
                      "showControls": true,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    },
                    {
                      "key": "gearFeature",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "medium",
                      "label": "gearFeature",
                      "defaultValue": "0",
                      "allowDecimal": false,
                      "minVal": "",
                      "maxVal": "",
                      "allowRelative": false,
                      "showControls": true,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    },
                    {
                      "key": "meleeCost",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "medium",
                      "label": "Cost ",
                      "defaultValue": "",
                      "allowDecimal": false,
                      "minVal": "0",
                      "maxVal": "",
                      "allowRelative": false,
                      "showControls": true,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    }
                  ],
                  "flow": "grid-2",
                  "align": "left",
                  "verticalAlign": "top",
                  "collapsible": false,
                  "defaultCollapsed": false,
                  "title": "",
                  "titleStyle": "default"
                }
              ],
              "flow": "vertical",
              "align": "left",
              "verticalAlign": "top",
              "collapsible": true,
              "defaultCollapsed": false,
              "title": "Roll Config",
              "titleStyle": "default"
            },
            {
              "key": "",
              "colSpan": 1,
              "rowSpan": 1,
              "cssClass": "",
              "role": 4,
              "editRole": 0,
              "permission": 0,
              "tooltip": "",
              "visibilityFormula": "",
              "editableFormula": "",
              "escapeHTML": false,
              "type": "panel",
              "contents": [
                {
                  "key": "skillKey",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "textField",
                  "size": "full-size",
                  "label": "skillKey",
                  "defaultValue": "Skill_MeleeWeapons",
                  "charList": "",
                  "maxLength": null,
                  "autocomplete": ""
                },
                {
                  "key": "poolKey",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "select",
                  "size": "full-size",
                  "label": "poolKey",
                  "defaultValue": "Brawn",
                  "selectedOptionType": "custom",
                  "options": [
                    {
                      "key": "Brawn",
                      "value": "Brawn"
                    },
                    {
                      "key": "Finesse",
                      "value": "Finesse"
                    },
                    {
                      "key": "Resolve",
                      "value": "Resolve"
                    },
                    {
                      "key": "Focus",
                      "value": "Focus"
                    }
                  ]
                },
                {
                  "key": "wepAction1Enabled",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "Single Shot. Characters can fire one bullet as a simple action. The player totals their Firearms skill plus accuracy and can use that many dice from their Finesse pool to fire the weapon.",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "checkbox",
                  "size": "m-small",
                  "label": "SS",
                  "defaultChecked": true
                }
              ],
              "flow": "vertical",
              "align": "left",
              "verticalAlign": "top",
              "collapsible": true,
              "defaultCollapsed": true,
              "title": "Hidden",
              "titleStyle": "default"
            }
          ],
          "key": "custom_body",
          "type": "panel"
        },
        "display": {
          "width": 600,
          "height": 600,
          "fix_size": false,
          "pp_width": 64,
          "pp_height": 64
        },
        "header": {
          "contents": [
            {
              "key": "",
              "colSpan": 1,
              "rowSpan": 1,
              "cssClass": "sinlesscsb-marker",
              "role": 0,
              "editRole": 0,
              "permission": 0,
              "tooltip": "",
              "visibilityFormula": "",
              "editableFormula": "",
              "escapeHTML": false,
              "type": "panel",
              "contents": [
                {
                  "key": "",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "label",
                  "size": "full-size",
                  "icon": "knife",
                  "value": "${wepAction1Enabled ? wepAction1Label : \"\"}$",
                  "prefix": "",
                  "suffix": "",
                  "rollMessage": "%{\n  // Prefer linkedEntity (inventory row) then entity (item sheet)\n  const doc = (typeof linkedEntity !== \"undefined\" && linkedEntity) ? linkedEntity\n            : (typeof entity !== \"undefined\" && entity) ? entity\n            : null;\n\n  const itemUuid = String(doc?.uuid ?? \"\").trim();\n\n  // Pull actor from safe sources only\n  const embeddedActorUuid =\n    (doc?.parent?.documentName === \"Actor\" && doc?.parent?.uuid) ? String(doc.parent.uuid) : \"\";\n\n  const scopeActorUuid =\n    (typeof actor !== \"undefined\" && actor?.documentName === \"Actor\" && actor?.uuid) ? String(actor.uuid) : \"\";\n\n  const controlledActorUuid = (() => {\n    const t = canvas?.tokens?.controlled?.[0];\n    return t?.actor?.uuid ? String(t.actor.uuid) : \"\";\n  })();\n\n  const targetedActorUuid = (() => {\n    const t = game.user?.targets ? Array.from(game.user.targets)[0] : null;\n    return t?.actor?.uuid ? String(t.actor.uuid) : \"\";\n  })();\n\n  const userCharUuid = game.user?.character?.uuid ? String(game.user.character.uuid) : \"\";\n\n  const actorUuid = String(\n    embeddedActorUuid ||\n    scopeActorUuid ||\n    controlledActorUuid ||\n    targetedActorUuid ||\n    userCharUuid ||\n    \"\"\n  ).trim();\n\n  if (!itemUuid) {\n    console.warn(\"SinlessCSB | rollItem: missing itemUuid\", { doc, linkedEntity: (typeof linkedEntity !== \"undefined\" ? linkedEntity : undefined), entity: (typeof entity !== \"undefined\" ? entity : undefined) });\n    ui.notifications?.warn?.(\"SinlessCSB: missing item context (itemUuid).\");\n    return \"\";\n  }\n\n  if (!actorUuid) {\n    console.warn(\"SinlessCSB | rollItem: missing actorUuid (control/target a token)\", {\n      itemUuid,\n      controlled: canvas?.tokens?.controlled?.length ?? 0,\n      targets: game.user?.targets?.size ?? 0\n    });\n    ui.notifications?.warn?.(\"SinlessCSB: No actor context. Control a token (click) or target one, then try again.\");\n    return \"\";\n  }\n\n  const api = game.modules.get(\"sinlesscsb\")?.api;\n  if (typeof api?.rollItem !== \"function\") {\n    console.warn(\"SinlessCSB | rollItem: API not available\", { apiKeys: Object.keys(api ?? {}) });\n    ui.notifications?.error?.(\"SinlessCSB: rollItem API not available (module not ready / not exposed).\");\n    return \"\";\n  }\n\n  console.log(\"SinlessCSB | rollItem (hardened)\", { itemUuid, actorUuid, itemName: doc?.name });\n  api.rollItem({ itemUuid, actorUuid });\n  return \"\";\n}%\n",
                  "altRollMessage": "",
                  "rollMessageToChat": false,
                  "altRollMessageToChat": false,
                  "style": "button"
                }
              ],
              "flow": "vertical",
              "align": "center",
              "verticalAlign": "top",
              "collapsible": false,
              "defaultCollapsed": false,
              "title": "",
              "titleStyle": "default"
            }
          ],
          "key": "custom_header",
          "type": "panel"
        },
        "hidden": [],
        "modifiers": [],
        "props": {
          "itemDamage": "(STR/2)",
          "meleeReach": "0",
          "weight": "0",
          "armorPierce": "0",
          "conceal": "1",
          "itemRarity": "2",
          "wepAction1Label": "Punch",
          "damageGuide": "<ol><li><p>Common damage forms:</p><ul><li><p><code>(STR/2) + 2</code></p></li><li><p><code>(STR/2) + 12 + 2d6</code></p></li><li><p><code>STR + 6</code></p></li></ul></li><li><p>Notes:</p><ul><li><p>Use parentheses for halves (example: <code>(STR/2)</code>).</p></li><li><p>Division uses floor rounding.</p></li><li><p>You may add dice as <code>Nd6</code> (example: <code>2d6</code>).</p></li></ul></li></ol>",
          "bonusDice": "0",
          "diceMod": "0",
          "gearFeature": "0",
          "skillKey": "Skill_MeleeWeapons",
          "poolKey": "Brawn",
          "wepAction1Enabled": true,
          "specialDamage": "",
          "meleeCost": ""
        },
        "unique": false,
        "uniqueId": "4ZCs36PxolFYXO14"
      },
      "_id": "UvvZklu6WWw4tbKf",
      "effects": [],
      "sort": 0,
      "flags": {
        "custom-system-builder": {
          "version": "5.1.0"
        }
      },
      "_stats": {
        "compendiumSource": "Item.4ZCs36PxolFYXO14",
        "duplicateSource": null,
        "exportSource": null,
        "coreVersion": "13.351",
        "systemId": "custom-system-builder",
        "systemVersion": "5.1.0",
        "createdTime": 1769383020315,
        "modifiedTime": 1769392253195,
        "lastModifiedBy": "KoiB8oaGNkPdgzdM"
      },
      "ownership": {
        "default": 0
      }
    },
    {
      "name": "ThrownExample",
      "type": "equippableItem",
      "_id": "cxsnu4Ux3l2mV8sz",
      "img": "icons/svg/item-bag.svg",
      "system": {
        "body": {
          "contents": [
            {
              "key": "",
              "colSpan": 1,
              "rowSpan": 1,
              "cssClass": "",
              "role": 0,
              "editRole": 0,
              "permission": 0,
              "tooltip": "",
              "visibilityFormula": "",
              "editableFormula": "",
              "escapeHTML": false,
              "type": "panel",
              "contents": [
                {
                  "key": "wepAction1Label",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "textField",
                  "size": "full-size",
                  "label": "Action Label",
                  "defaultValue": "Attack",
                  "charList": "",
                  "maxLength": null,
                  "autocomplete": ""
                },
                {
                  "key": "itemDamage",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "textField",
                  "size": "full-size",
                  "label": "Damage",
                  "defaultValue": "(STR/2) + 2 ---example, REPLACE with correct formula---",
                  "charList": "",
                  "maxLength": null,
                  "autocomplete": ""
                },
                {
                  "key": "specialDamage",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "textField",
                  "size": "full-size",
                  "label": "Special Damage",
                  "defaultValue": "",
                  "charList": "",
                  "maxLength": null,
                  "autocomplete": ""
                },
                {
                  "key": "",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "panel",
                  "contents": [
                    {
                      "key": "damageGuide",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "textArea",
                      "size": "full-size",
                      "label": "",
                      "defaultValue": "<ol><li><p>Common damage forms:</p><ul><li><p><code>(STR/2) + 2</code></p></li><li><p><code>(STR/2) + 12 + 2d6</code></p></li><li><p><code>STR + 6</code></p></li></ul></li><li><p>Notes:</p><ul><li><p>Use parentheses for halves (example: <code>(STR/2)</code>).</p></li><li><p>Division uses floor rounding.</p></li><li><p>You may add dice as <code>Nd6</code> (example: <code>2d6</code>).</p></li></ul></li></ol>",
                      "style": "sheet"
                    }
                  ],
                  "flow": "vertical",
                  "align": "left",
                  "verticalAlign": "top",
                  "collapsible": true,
                  "defaultCollapsed": false,
                  "title": "Damage Formula Syntax Guidelines",
                  "titleStyle": "default"
                },
                {
                  "key": "",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "panel",
                  "contents": [
                    {
                      "key": "thrownRange",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "textArea",
                      "size": "full-size",
                      "label": "",
                      "defaultValue": "<img src=\"modules/sinlesscsb/assets/images/SinlessWeps/thrownRange.png\">",
                      "style": "sheet"
                    }
                  ],
                  "flow": "vertical",
                  "align": "left",
                  "verticalAlign": "top",
                  "collapsible": true,
                  "defaultCollapsed": true,
                  "title": "Thrown Range Finder",
                  "titleStyle": "default"
                },
                {
                  "key": "",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "panel",
                  "contents": [
                    {
                      "key": "gearFeature",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "medium",
                      "label": "gearFeature",
                      "defaultValue": "0",
                      "allowDecimal": false,
                      "minVal": "",
                      "maxVal": "",
                      "allowRelative": false,
                      "showControls": true,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    },
                    {
                      "key": "bonusDice",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "medium",
                      "label": "bonusDice",
                      "defaultValue": "0",
                      "allowDecimal": false,
                      "minVal": "",
                      "maxVal": "",
                      "allowRelative": false,
                      "showControls": true,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    },
                    {
                      "key": "diceMod",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "medium",
                      "label": "diceMod",
                      "defaultValue": "0",
                      "allowDecimal": false,
                      "minVal": "",
                      "maxVal": "",
                      "allowRelative": false,
                      "showControls": false,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    },
                    {
                      "key": "weightThrown",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "medium",
                      "label": "Weight",
                      "defaultValue": "",
                      "allowDecimal": true,
                      "minVal": "0",
                      "maxVal": "",
                      "allowRelative": false,
                      "showControls": true,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    },
                    {
                      "key": "armorPierce",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "medium",
                      "label": "Armor Pierce",
                      "defaultValue": "0",
                      "allowDecimal": false,
                      "minVal": "0",
                      "maxVal": "",
                      "allowRelative": false,
                      "showControls": true,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    },
                    {
                      "key": "conceal",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "medium",
                      "label": "Conceal",
                      "defaultValue": "1",
                      "allowDecimal": false,
                      "minVal": "0",
                      "maxVal": "",
                      "allowRelative": false,
                      "showControls": true,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    },
                    {
                      "key": "itemRarity",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "medium",
                      "label": "Rarity",
                      "defaultValue": "",
                      "allowDecimal": false,
                      "minVal": "0",
                      "maxVal": "",
                      "allowRelative": false,
                      "showControls": true,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    },
                    {
                      "key": "thrownCost",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "medium",
                      "label": "Cost ",
                      "defaultValue": "",
                      "allowDecimal": false,
                      "minVal": "0",
                      "maxVal": "",
                      "allowRelative": false,
                      "showControls": true,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    }
                  ],
                  "flow": "grid-2",
                  "align": "left",
                  "verticalAlign": "top",
                  "collapsible": false,
                  "defaultCollapsed": false,
                  "title": "",
                  "titleStyle": "default"
                },
                {
                  "key": "",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 4,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "panel",
                  "contents": [
                    {
                      "key": "poolKey",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "select",
                      "size": "full-size",
                      "label": "poolKey",
                      "defaultValue": "Brawn",
                      "selectedOptionType": "custom",
                      "options": [
                        {
                          "key": "Brawn",
                          "value": "Brawn"
                        },
                        {
                          "key": "Finesse",
                          "value": "Finesse"
                        },
                        {
                          "key": "Resolve",
                          "value": "Resolve"
                        },
                        {
                          "key": "Focus",
                          "value": "Focus"
                        }
                      ]
                    },
                    {
                      "key": "skillKey",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "textField",
                      "size": "full-size",
                      "label": "skillKey",
                      "defaultValue": "Skill_ThrowingWeapons",
                      "charList": "",
                      "maxLength": null,
                      "autocomplete": ""
                    },
                    {
                      "key": "wepAction1Enabled",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "Single Shot. Characters can fire one bullet as a simple action. The player totals their Firearms skill plus accuracy and can use that many dice from their Finesse pool to fire the weapon.",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "checkbox",
                      "size": "m-small",
                      "label": "SS",
                      "defaultChecked": true
                    }
                  ],
                  "flow": "vertical",
                  "align": "left",
                  "verticalAlign": "top",
                  "collapsible": true,
                  "defaultCollapsed": false,
                  "title": "Hidden",
                  "titleStyle": "default"
                }
              ],
              "flow": "vertical",
              "align": "left",
              "verticalAlign": "top",
              "collapsible": true,
              "defaultCollapsed": false,
              "title": "Roll Config",
              "titleStyle": "default"
            }
          ],
          "key": "custom_body",
          "type": "panel"
        },
        "display": {
          "width": 600,
          "height": 600,
          "fix_size": false,
          "pp_width": 64,
          "pp_height": 64
        },
        "header": {
          "contents": [
            {
              "key": "",
              "colSpan": 1,
              "rowSpan": 1,
              "cssClass": "sinlesscsb-marker",
              "role": 0,
              "editRole": 0,
              "permission": 0,
              "tooltip": "",
              "visibilityFormula": "",
              "editableFormula": "",
              "escapeHTML": false,
              "type": "panel",
              "contents": [
                {
                  "key": "",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "label",
                  "size": "full-size",
                  "icon": "knife",
                  "value": "${wepAction1Enabled ? wepAction1Label : \"\"}$",
                  "prefix": "",
                  "suffix": "",
                  "rollMessage": "%{\n  // Prefer linkedEntity (inventory row) then entity (item sheet)\n  const doc = (typeof linkedEntity !== \"undefined\" && linkedEntity) ? linkedEntity\n            : (typeof entity !== \"undefined\" && entity) ? entity\n            : null;\n\n  const itemUuid = String(doc?.uuid ?? \"\").trim();\n\n  // Pull actor from safe sources only\n  const embeddedActorUuid =\n    (doc?.parent?.documentName === \"Actor\" && doc?.parent?.uuid) ? String(doc.parent.uuid) : \"\";\n\n  const scopeActorUuid =\n    (typeof actor !== \"undefined\" && actor?.documentName === \"Actor\" && actor?.uuid) ? String(actor.uuid) : \"\";\n\n  const controlledActorUuid = (() => {\n    const t = canvas?.tokens?.controlled?.[0];\n    return t?.actor?.uuid ? String(t.actor.uuid) : \"\";\n  })();\n\n  const targetedActorUuid = (() => {\n    const t = game.user?.targets ? Array.from(game.user.targets)[0] : null;\n    return t?.actor?.uuid ? String(t.actor.uuid) : \"\";\n  })();\n\n  const userCharUuid = game.user?.character?.uuid ? String(game.user.character.uuid) : \"\";\n\n  const actorUuid = String(\n    embeddedActorUuid ||\n    scopeActorUuid ||\n    controlledActorUuid ||\n    targetedActorUuid ||\n    userCharUuid ||\n    \"\"\n  ).trim();\n\n  if (!itemUuid) {\n    console.warn(\"SinlessCSB | rollItem: missing itemUuid\", { doc, linkedEntity: (typeof linkedEntity !== \"undefined\" ? linkedEntity : undefined), entity: (typeof entity !== \"undefined\" ? entity : undefined) });\n    ui.notifications?.warn?.(\"SinlessCSB: missing item context (itemUuid).\");\n    return \"\";\n  }\n\n  if (!actorUuid) {\n    console.warn(\"SinlessCSB | rollItem: missing actorUuid (control/target a token)\", {\n      itemUuid,\n      controlled: canvas?.tokens?.controlled?.length ?? 0,\n      targets: game.user?.targets?.size ?? 0\n    });\n    ui.notifications?.warn?.(\"SinlessCSB: No actor context. Control a token (click) or target one, then try again.\");\n    return \"\";\n  }\n\n  const api = game.modules.get(\"sinlesscsb\")?.api;\n  if (typeof api?.rollItem !== \"function\") {\n    console.warn(\"SinlessCSB | rollItem: API not available\", { apiKeys: Object.keys(api ?? {}) });\n    ui.notifications?.error?.(\"SinlessCSB: rollItem API not available (module not ready / not exposed).\");\n    return \"\";\n  }\n\n  console.log(\"SinlessCSB | rollItem (hardened)\", { itemUuid, actorUuid, itemName: doc?.name });\n  api.rollItem({ itemUuid, actorUuid });\n  return \"\";\n}%\n",
                  "altRollMessage": "",
                  "rollMessageToChat": false,
                  "altRollMessageToChat": false,
                  "style": "button"
                }
              ],
              "flow": "vertical",
              "align": "center",
              "verticalAlign": "top",
              "collapsible": false,
              "defaultCollapsed": false,
              "title": "",
              "titleStyle": "default"
            }
          ],
          "key": "custom_header",
          "type": "panel"
        },
        "hidden": [],
        "modifiers": [],
        "props": {
          "wepAction1Label": "Attack",
          "itemDamage": "(STR/2) + 2",
          "damageGuide": "<ol><li><p>Common damage forms:</p><ul><li><p><code>(STR/2) + 2</code></p></li><li><p><code>(STR/2) + 12 + 2d6</code></p></li><li><p><code>STR + 6</code></p></li></ul></li><li><p>Notes:</p><ul><li><p>Use parentheses for halves (example: <code>(STR/2)</code>).</p></li><li><p>Division uses floor rounding.</p></li><li><p>You may add dice as <code>Nd6</code> (example: <code>2d6</code>).</p></li></ul></li></ol>",
          "gearFeature": "0",
          "bonusDice": "0",
          "diceMod": "0",
          "armorPierce": "0",
          "conceal": "1",
          "poolKey": "Brawn",
          "skillKey": "Skill_ThrowingWeapons",
          "wepAction1Enabled": true,
          "specialDamage": "",
          "weightThrown": "0",
          "itemRarity": "",
          "thrownCost": "0",
          "thrownRange": "<img src=\"modules/sinlesscsb/assets/images/SinlessWeps/thrownRange.png\">"
        },
        "unique": false,
        "uniqueId": "GRZgYyyhXVlSpUep",
        "template": "J7lCjK5RwvIF4gUw",
        "templateSystemUniqueVersion": 175145374
      },
      "effects": [],
      "folder": "rCTnl7myqTtxE5gl",
      "sort": 0,
      "flags": {
        "custom-system-builder": {
          "version": "5.1.0"
        }
      },
      "_stats": {
        "compendiumSource": "Item.GRZgYyyhXVlSpUep",
        "duplicateSource": null,
        "exportSource": null,
        "coreVersion": "13.351",
        "systemId": "custom-system-builder",
        "systemVersion": "5.1.0",
        "createdTime": 1769383070486,
        "modifiedTime": 1769383199326,
        "lastModifiedBy": "KoiB8oaGNkPdgzdM"
      },
      "ownership": {
        "default": 0
      }
    },
    {
      "folder": "rCTnl7myqTtxE5gl",
      "name": "Drone Test",
      "type": "equippableItem",
      "_id": "FkmfbXSk4BDQwXQh",
      "img": "modules/sinlesscsb/assets/icons/SR5/importer/drone/large.svg",
      "system": {
        "body": {
          "contents": [
            {
              "key": "",
              "colSpan": 1,
              "rowSpan": 1,
              "cssClass": "",
              "role": 0,
              "editRole": 0,
              "permission": 0,
              "tooltip": "",
              "visibilityFormula": "",
              "editableFormula": "",
              "escapeHTML": false,
              "type": "panel",
              "contents": [
                {
                  "key": "findItemdrone",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "textField",
                  "size": "full-size",
                  "label": "findItemdrone",
                  "defaultValue": "",
                  "charList": "",
                  "maxLength": null,
                  "autocomplete": ""
                }
              ],
              "flow": "vertical",
              "align": "left",
              "verticalAlign": "top",
              "collapsible": false,
              "defaultCollapsed": false,
              "title": "",
              "titleStyle": "default"
            }
          ],
          "key": "custom_body",
          "type": "panel"
        },
        "display": {
          "width": 600,
          "height": 600,
          "fix_size": false,
          "pp_width": 64,
          "pp_height": 64
        },
        "header": {
          "contents": [],
          "key": "custom_header",
          "type": "panel"
        },
        "hidden": [],
        "modifiers": [],
        "props": {
          "findItemdrone": "droneTest"
        },
        "unique": false,
        "uniqueId": "qSttov9gZmrxo0wi",
        "template": "UOzfdwCey4axeP6O",
        "templateSystemUniqueVersion": 384432826
      },
      "effects": [],
      "sort": 0,
      "flags": {
        "custom-system-builder": {
          "version": "5.1.0"
        },
        "sinlesscsb": {
          "droneActorUuid": "Actor.Bm4Y75DeKOKTPY0q",
          "droneOwnerActorUuid": "Actor.eMbezua6UThIStwT",
          "droneOwnerUserId": "nHvvuymJXZEaNAmr",
          "droneSourceFindDrone": "droneTest"
        }
      },
      "_stats": {
        "compendiumSource": "Item.qSttov9gZmrxo0wi",
        "duplicateSource": null,
        "exportSource": null,
        "coreVersion": "13.351",
        "systemId": "custom-system-builder",
        "systemVersion": "5.1.0",
        "createdTime": 1769824346217,
        "modifiedTime": 1769824346321,
        "lastModifiedBy": "KoiB8oaGNkPdgzdM"
      },
      "ownership": {
        "default": 0
      }
    },
    {
      "folder": "rCTnl7myqTtxE5gl",
      "name": "Drone Test",
      "type": "equippableItem",
      "_id": "y14pNzM6p0WhwH09",
      "img": "modules/sinlesscsb/assets/icons/SR5/importer/drone/large.svg",
      "system": {
        "body": {
          "contents": [
            {
              "key": "",
              "colSpan": 1,
              "rowSpan": 1,
              "cssClass": "",
              "role": 0,
              "editRole": 0,
              "permission": 0,
              "tooltip": "",
              "visibilityFormula": "",
              "editableFormula": "",
              "escapeHTML": false,
              "type": "panel",
              "contents": [
                {
                  "key": "findItemdrone",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "textField",
                  "size": "full-size",
                  "label": "findItemdrone",
                  "defaultValue": "",
                  "charList": "",
                  "maxLength": null,
                  "autocomplete": ""
                }
              ],
              "flow": "vertical",
              "align": "left",
              "verticalAlign": "top",
              "collapsible": false,
              "defaultCollapsed": false,
              "title": "",
              "titleStyle": "default"
            }
          ],
          "key": "custom_body",
          "type": "panel"
        },
        "display": {
          "width": 600,
          "height": 600,
          "fix_size": false,
          "pp_width": 64,
          "pp_height": 64
        },
        "header": {
          "contents": [],
          "key": "custom_header",
          "type": "panel"
        },
        "hidden": [],
        "modifiers": [],
        "props": {
          "findItemdrone": "droneTest"
        },
        "unique": false,
        "uniqueId": "qSttov9gZmrxo0wi",
        "template": "UOzfdwCey4axeP6O",
        "templateSystemUniqueVersion": 384432826
      },
      "effects": [],
      "sort": 0,
      "flags": {
        "custom-system-builder": {
          "version": "5.1.0"
        },
        "sinlesscsb": {
          "droneActorUuid": "Actor.HDuPe1ADtvU8Qk03",
          "droneOwnerActorUuid": "Actor.eMbezua6UThIStwT",
          "droneOwnerUserId": "nHvvuymJXZEaNAmr",
          "droneSourceFindDrone": "droneTest"
        }
      },
      "_stats": {
        "compendiumSource": "Item.qSttov9gZmrxo0wi",
        "duplicateSource": null,
        "exportSource": null,
        "coreVersion": "13.351",
        "systemId": "custom-system-builder",
        "systemVersion": "5.1.0",
        "createdTime": 1769824394203,
        "modifiedTime": 1769824394300,
        "lastModifiedBy": "KoiB8oaGNkPdgzdM"
      },
      "ownership": {
        "default": 0
      }
    },
    {
      "folder": "rCTnl7myqTtxE5gl",
      "name": "Vehicle Test",
      "type": "equippableItem",
      "_id": "L9JhrpHAEjxjEKRB",
      "img": "icons/svg/item-bag.svg",
      "system": {
        "body": {
          "contents": [
            {
              "key": "",
              "colSpan": 1,
              "rowSpan": 1,
              "cssClass": "",
              "role": 0,
              "editRole": 0,
              "permission": 0,
              "tooltip": "",
              "visibilityFormula": "",
              "editableFormula": "",
              "escapeHTML": false,
              "type": "panel",
              "contents": [
                {
                  "key": "findItemvehicle",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "textField",
                  "size": "full-size",
                  "label": "findItemvehicle",
                  "defaultValue": "",
                  "charList": "",
                  "maxLength": null,
                  "autocomplete": ""
                }
              ],
              "flow": "vertical",
              "align": "left",
              "verticalAlign": "top",
              "collapsible": false,
              "defaultCollapsed": false,
              "title": "",
              "titleStyle": "default"
            }
          ],
          "key": "custom_body",
          "type": "panel"
        },
        "display": {
          "width": 600,
          "height": 600,
          "fix_size": false,
          "pp_width": 64,
          "pp_height": 64
        },
        "header": {
          "contents": [],
          "key": "custom_header",
          "type": "panel"
        },
        "hidden": [],
        "modifiers": [],
        "props": {
          "findItemvehicle": "vehictest"
        },
        "unique": false,
        "uniqueId": "q9kdBs1RuI9ntFkK",
        "template": "GHO6zyIPQXdSYR8a",
        "templateSystemUniqueVersion": 1348005570
      },
      "effects": [],
      "sort": 0,
      "flags": {
        "custom-system-builder": {
          "version": "5.1.0"
        },
        "sinlesscsb": {
          "vehicleActorUuid": "Actor.CrX99UI4ukn3wHRb",
          "rigType": "vehicle",
          "rigOwnerActorUuid": "Actor.eMbezua6UThIStwT",
          "rigOwnerUserId": "nHvvuymJXZEaNAmr",
          "rigSourceFindKey": "vehictest"
        }
      },
      "_stats": {
        "compendiumSource": "Item.q9kdBs1RuI9ntFkK",
        "duplicateSource": null,
        "exportSource": null,
        "coreVersion": "13.351",
        "systemId": "custom-system-builder",
        "systemVersion": "5.1.0",
        "createdTime": 1769831306042,
        "modifiedTime": 1769831306159,
        "lastModifiedBy": "KoiB8oaGNkPdgzdM"
      },
      "ownership": {
        "default": 0
      }
    },
    {
      "name": "De-Rez",
      "type": "equippableItem",
      "folder": "rCTnl7myqTtxE5gl",
      "img": "modules/sinlesscsb/assets/icons/SR6/programs/CrashAndBurn.webp",
      "system": {
        "template": "QyToiPEwE2Tp36YK",
        "templateSystemUniqueVersion": 225230637,
        "body": {
          "contents": [
            {
              "key": "",
              "colSpan": 1,
              "rowSpan": 1,
              "cssClass": "",
              "role": 0,
              "editRole": 0,
              "permission": 0,
              "tooltip": "",
              "visibilityFormula": "",
              "editableFormula": "",
              "escapeHTML": false,
              "type": "panel",
              "contents": [
                {
                  "key": "spellRulestext",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "textArea",
                  "size": "full-size",
                  "label": "Spell Rules",
                  "defaultValue": "<p>Paste text from book / other useful info here.</p>",
                  "style": "sheet"
                }
              ],
              "flow": "horizontal",
              "align": "left",
              "verticalAlign": "top",
              "collapsible": true,
              "defaultCollapsed": true,
              "title": "Rules Text",
              "titleStyle": "default"
            },
            {
              "key": "",
              "colSpan": 1,
              "rowSpan": 1,
              "cssClass": "",
              "role": 0,
              "editRole": 0,
              "permission": 0,
              "tooltip": "",
              "visibilityFormula": "",
              "editableFormula": "",
              "escapeHTML": false,
              "type": "panel",
              "contents": [
                {
                  "key": "actionLabel",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "textField",
                  "size": "full-size",
                  "label": "actionLabel",
                  "defaultValue": "Conjure",
                  "charList": "",
                  "maxLength": null,
                  "autocomplete": ""
                },
                {
                  "key": "",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "panel",
                  "contents": [
                    {
                      "key": "spellFociRank",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "full-size",
                      "label": "Foci Rank",
                      "defaultValue": "1",
                      "allowDecimal": false,
                      "minVal": "1",
                      "maxVal": "",
                      "allowRelative": false,
                      "showControls": true,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    },
                    {
                      "key": "spellforceMax",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "full-size",
                      "label": "Force Rating (MAX Learned)",
                      "defaultValue": "1",
                      "allowDecimal": false,
                      "minVal": "1",
                      "maxVal": "",
                      "allowRelative": false,
                      "showControls": true,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    },
                    {
                      "key": "spellforceDefault",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "full-size",
                      "label": "Spell Force (Default)",
                      "defaultValue": "1",
                      "allowDecimal": false,
                      "minVal": "1",
                      "maxVal": "${spellforceMax}$",
                      "allowRelative": false,
                      "showControls": true,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    },
                    {
                      "key": "bonusDice",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "full-size",
                      "label": "bonusDice",
                      "defaultValue": "0",
                      "allowDecimal": false,
                      "minVal": "",
                      "maxVal": "",
                      "allowRelative": false,
                      "showControls": false,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    },
                    {
                      "key": "diceMod",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "full-size",
                      "label": "diceMod",
                      "defaultValue": "0",
                      "allowDecimal": false,
                      "minVal": "",
                      "maxVal": "",
                      "allowRelative": false,
                      "showControls": false,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    },
                    {
                      "key": "fetishRank",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "full-size",
                      "label": "Fetish Rank",
                      "defaultValue": "0",
                      "allowDecimal": false,
                      "minVal": "0",
                      "maxVal": "",
                      "allowRelative": false,
                      "showControls": true,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    },
                    {
                      "key": "spellDuration",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "textField",
                      "size": "full-size",
                      "label": "Duration",
                      "defaultValue": "Instantaneous",
                      "charList": "",
                      "maxLength": null,
                      "autocomplete": ""
                    },
                    {
                      "key": "spellArea",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "textField",
                      "size": "full-size",
                      "label": "Area",
                      "defaultValue": "Single",
                      "charList": "",
                      "maxLength": null,
                      "autocomplete": ""
                    },
                    {
                      "key": "spellResistance",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "textField",
                      "size": "full-size",
                      "label": "Resistance",
                      "defaultValue": "Brawn Pool",
                      "charList": "",
                      "maxLength": null,
                      "autocomplete": ""
                    }
                  ],
                  "flow": "grid-2",
                  "align": "left",
                  "verticalAlign": "top",
                  "collapsible": false,
                  "defaultCollapsed": false,
                  "title": "",
                  "titleStyle": "default"
                },
                {
                  "key": "drainFormula",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "textField",
                  "size": "full-size",
                  "label": "Drain Formula",
                  "defaultValue": "1 + (Force/2) ---example, REPLACE with correct formula---",
                  "charList": "",
                  "maxLength": null,
                  "autocomplete": ""
                },
                {
                  "key": "",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "panel",
                  "contents": [
                    {
                      "key": "exampleForce",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "textArea",
                      "size": "full-size",
                      "label": "",
                      "defaultValue": "<ol><li data-start=\"5936\" data-end=\"6018\"><p data-start=\"5938\" data-end=\"5952\">Use <code data-start=\"5906\" data-end=\"5913\">Force</code> for the chosen Force.</p><p></p></li><li data-start=\"5936\" data-end=\"6018\"><p data-start=\"5938\" data-end=\"5952\">Allowed example forms:</p><ul data-start=\"5955\" data-end=\"6018\"><li data-start=\"5955\" data-end=\"5968\"><p data-start=\"5957\" data-end=\"5968\"><code data-start=\"5957\" data-end=\"5968\">3 + Force</code></p></li><li data-start=\"5971\" data-end=\"5988\"><p data-start=\"5973\" data-end=\"5988\"><code data-start=\"5973\" data-end=\"5988\">1 + (Force/2)</code></p></li><li data-start=\"5991\" data-end=\"6004\"><p data-start=\"5993\" data-end=\"6004\"><code data-start=\"5993\" data-end=\"6004\">(Force/2)</code></p><p data-start=\"6021\" data-end=\"6098\"></p></li></ul></li></ol>",
                      "style": "sheet"
                    }
                  ],
                  "flow": "horizontal",
                  "align": "left",
                  "verticalAlign": "top",
                  "collapsible": true,
                  "defaultCollapsed": false,
                  "title": "Drain Formula Syntax Guidelines",
                  "titleStyle": "default"
                },
                {
                  "key": "spellTags",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "textField",
                  "size": "full-size",
                  "label": "Tags",
                  "defaultValue": "",
                  "charList": "",
                  "maxLength": null,
                  "autocomplete": ""
                }
              ],
              "flow": "vertical",
              "align": "left",
              "verticalAlign": "top",
              "collapsible": true,
              "defaultCollapsed": false,
              "title": "Roll Config",
              "titleStyle": "default"
            },
            {
              "key": "",
              "colSpan": 1,
              "rowSpan": 1,
              "cssClass": "",
              "role": 4,
              "editRole": 0,
              "permission": 0,
              "tooltip": "",
              "visibilityFormula": "",
              "editableFormula": "",
              "escapeHTML": false,
              "type": "panel",
              "contents": [
                {
                  "key": "spellCategory",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "textField",
                  "size": "full-size",
                  "label": "Category",
                  "defaultValue": "Combat",
                  "charList": "",
                  "maxLength": null,
                  "autocomplete": ""
                },
                {
                  "key": "drainForceMult",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "numberField",
                  "size": "full-size",
                  "label": "Drain xForce",
                  "defaultValue": "1",
                  "allowDecimal": true,
                  "minVal": "0",
                  "maxVal": "",
                  "allowRelative": false,
                  "showControls": true,
                  "controlsStyle": "hover",
                  "controlsCustomIncrements": "",
                  "inputStyle": "text"
                },
                {
                  "key": "skillKey",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "textField",
                  "size": "full-size",
                  "label": "skillKey",
                  "defaultValue": "Skill_Conjuring",
                  "charList": "",
                  "maxLength": null,
                  "autocomplete": ""
                },
                {
                  "key": "poolKey",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "textField",
                  "size": "full-size",
                  "label": "poolKey",
                  "defaultValue": "Resolve",
                  "charList": "",
                  "maxLength": null,
                  "autocomplete": ""
                }
              ],
              "flow": "grid-2",
              "align": "center",
              "verticalAlign": "top",
              "collapsible": true,
              "defaultCollapsed": true,
              "title": "hidden",
              "titleStyle": "default"
            }
          ],
          "key": "custom_body",
          "type": "panel"
        },
        "display": {
          "width": 600,
          "height": 600,
          "fix_size": false,
          "pp_width": 64,
          "pp_height": 64
        },
        "header": {
          "contents": [
            {
              "key": "",
              "colSpan": 1,
              "rowSpan": 1,
              "cssClass": "sinlesscsb-marker",
              "role": 0,
              "editRole": 0,
              "permission": 0,
              "tooltip": "",
              "visibilityFormula": "",
              "editableFormula": "",
              "escapeHTML": false,
              "type": "panel",
              "contents": [
                {
                  "key": "",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "label",
                  "size": "full-size",
                  "icon": "star",
                  "value": "${actionLabel ? actionLabel : \"Cast\"}$",
                  "prefix": "",
                  "suffix": "",
                  "rollMessage": "%{\n  // Prefer linkedEntity (inventory row) then entity (item sheet)\n  const doc = (typeof linkedEntity !== \"undefined\" && linkedEntity) ? linkedEntity\n            : (typeof entity !== \"undefined\" && entity) ? entity\n            : null;\n\n  const itemUuid = String(doc?.uuid ?? \"\").trim();\n\n  // Actor resolution: embedded parent wins; otherwise token/character fallbacks.\n  const embeddedActorUuid =\n    (doc?.parent?.documentName === \"Actor\" && doc?.parent?.uuid) ? String(doc.parent.uuid) : \"\";\n\n  const scopeActorUuid =\n    (typeof actor !== \"undefined\" && actor?.documentName === \"Actor\" && actor?.uuid) ? String(actor.uuid) : \"\";\n\n  const controlledActorUuid = (() => {\n    const t = canvas?.tokens?.controlled?.[0];\n    return t?.actor?.uuid ? String(t.actor.uuid) : \"\";\n  })();\n\n  const targetedActorUuid = (() => {\n    const t = game.user?.targets ? Array.from(game.user.targets)[0] : null;\n    return t?.actor?.uuid ? String(t.actor.uuid) : \"\";\n  })();\n\n  const userCharUuid = game.user?.character?.uuid ? String(game.user.character.uuid) : \"\";\n\n  const actorUuid = String(\n    embeddedActorUuid ||\n    scopeActorUuid ||\n    controlledActorUuid ||\n    targetedActorUuid ||\n    userCharUuid ||\n    \"\"\n  ).trim();\n\n  if (!itemUuid) {\n    ui.notifications?.warn?.(\"SinlessCSB: missing spell item context (itemUuid).\");\n    return \"\";\n  }\n\n  if (!actorUuid) {\n    ui.notifications?.warn?.(\"SinlessCSB: No actor context. Control or target a token, then try again.\");\n    return \"\";\n  }\n\n  const api = game.modules.get(\"sinlesscsb\")?.api;\n  if (typeof api?.castSpell !== \"function\") {\n    ui.notifications?.error?.(\"SinlessCSB: castSpell API not available (module not ready / not exposed).\");\n    return \"\";\n  }\n\n  api.castSpell({ itemUuid, actorUuid });\n  return \"\";\n}%\n",
                  "altRollMessage": "",
                  "rollMessageToChat": false,
                  "altRollMessageToChat": false,
                  "style": "button"
                }
              ],
              "flow": "vertical",
              "align": "center",
              "verticalAlign": "top",
              "collapsible": false,
              "defaultCollapsed": false,
              "title": "",
              "titleStyle": "default"
            }
          ],
          "key": "custom_header",
          "type": "panel"
        },
        "hidden": [],
        "modifiers": [],
        "props": {
          "skillKey": "Skill_EWarfare",
          "actionLabel": "E War",
          "spellRulestext": "<p>Paste text from book / other useful info here.</p>",
          "spellFociRank": "1",
          "spellforceMax": "1",
          "spellforceDefault": "1",
          "bonusDice": "0",
          "diceMod": "0",
          "fetishRank": "0",
          "spellDuration": "Instantaneous",
          "spellArea": "Single",
          "spellResistance": "Brawn Pool",
          "drainFormula": "1 + (Force/2) ---example, REPLACE with correct formula---",
          "exampleForce": "<ol><li data-start=\"5936\" data-end=\"6018\"><p data-start=\"5938\" data-end=\"5952\">Use <code data-start=\"5906\" data-end=\"5913\">Force</code> for the chosen Force.</p><p></p></li><li data-start=\"5936\" data-end=\"6018\"><p data-start=\"5938\" data-end=\"5952\">Allowed example forms:</p><ul data-start=\"5955\" data-end=\"6018\"><li data-start=\"5955\" data-end=\"5968\"><p data-start=\"5957\" data-end=\"5968\"><code data-start=\"5957\" data-end=\"5968\">3 + Force</code></p></li><li data-start=\"5971\" data-end=\"5988\"><p data-start=\"5973\" data-end=\"5988\"><code data-start=\"5973\" data-end=\"5988\">1 + (Force/2)</code></p></li><li data-start=\"5991\" data-end=\"6004\"><p data-start=\"5993\" data-end=\"6004\"><code data-start=\"5993\" data-end=\"6004\">(Force/2)</code></p><p data-start=\"6021\" data-end=\"6098\"></p></li></ul></li></ol>",
          "spellCategory": "Combat",
          "drainForceMult": "1",
          "poolKey": "Resolve",
          "spellTags": ""
        },
        "unique": false,
        "uniqueId": "6rGRT38QmcezMGKr"
      },
      "_id": "0cgmwjXC7yCmuPay",
      "effects": [],
      "sort": 0,
      "flags": {
        "custom-system-builder": {
          "version": "5.1.0"
        }
      },
      "_stats": {
        "compendiumSource": "Item.6rGRT38QmcezMGKr",
        "duplicateSource": null,
        "exportSource": null,
        "coreVersion": "13.351",
        "systemId": "custom-system-builder",
        "systemVersion": "5.1.0",
        "createdTime": 1769973236272,
        "modifiedTime": 1769973236272,
        "lastModifiedBy": "KoiB8oaGNkPdgzdM"
      },
      "ownership": {
        "default": 0
      }
    },
    {
      "name": "Device Control",
      "type": "equippableItem",
      "folder": "rCTnl7myqTtxE5gl",
      "img": "modules/sinlesscsb/assets/icons/SR6/programs/EmergencyOverride.webp",
      "system": {
        "template": "QyToiPEwE2Tp36YK",
        "templateSystemUniqueVersion": 225230637,
        "body": {
          "contents": [
            {
              "key": "",
              "colSpan": 1,
              "rowSpan": 1,
              "cssClass": "",
              "role": 0,
              "editRole": 0,
              "permission": 0,
              "tooltip": "",
              "visibilityFormula": "",
              "editableFormula": "",
              "escapeHTML": false,
              "type": "panel",
              "contents": [
                {
                  "key": "spellRulestext",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "textArea",
                  "size": "full-size",
                  "label": "Spell Rules",
                  "defaultValue": "<p>Paste text from book / other useful info here.</p>",
                  "style": "sheet"
                }
              ],
              "flow": "horizontal",
              "align": "left",
              "verticalAlign": "top",
              "collapsible": true,
              "defaultCollapsed": true,
              "title": "Rules Text",
              "titleStyle": "default"
            },
            {
              "key": "",
              "colSpan": 1,
              "rowSpan": 1,
              "cssClass": "",
              "role": 0,
              "editRole": 0,
              "permission": 0,
              "tooltip": "",
              "visibilityFormula": "",
              "editableFormula": "",
              "escapeHTML": false,
              "type": "panel",
              "contents": [
                {
                  "key": "actionLabel",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "textField",
                  "size": "full-size",
                  "label": "actionLabel",
                  "defaultValue": "Conjure",
                  "charList": "",
                  "maxLength": null,
                  "autocomplete": ""
                },
                {
                  "key": "",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "panel",
                  "contents": [
                    {
                      "key": "spellFociRank",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "full-size",
                      "label": "Foci Rank",
                      "defaultValue": "1",
                      "allowDecimal": false,
                      "minVal": "1",
                      "maxVal": "",
                      "allowRelative": false,
                      "showControls": true,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    },
                    {
                      "key": "spellforceMax",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "full-size",
                      "label": "Force Rating (MAX Learned)",
                      "defaultValue": "1",
                      "allowDecimal": false,
                      "minVal": "1",
                      "maxVal": "",
                      "allowRelative": false,
                      "showControls": true,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    },
                    {
                      "key": "spellforceDefault",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "full-size",
                      "label": "Spell Force (Default)",
                      "defaultValue": "1",
                      "allowDecimal": false,
                      "minVal": "1",
                      "maxVal": "${spellforceMax}$",
                      "allowRelative": false,
                      "showControls": true,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    },
                    {
                      "key": "bonusDice",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "full-size",
                      "label": "bonusDice",
                      "defaultValue": "0",
                      "allowDecimal": false,
                      "minVal": "",
                      "maxVal": "",
                      "allowRelative": false,
                      "showControls": false,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    },
                    {
                      "key": "diceMod",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "full-size",
                      "label": "diceMod",
                      "defaultValue": "0",
                      "allowDecimal": false,
                      "minVal": "",
                      "maxVal": "",
                      "allowRelative": false,
                      "showControls": false,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    },
                    {
                      "key": "fetishRank",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "full-size",
                      "label": "Fetish Rank",
                      "defaultValue": "0",
                      "allowDecimal": false,
                      "minVal": "0",
                      "maxVal": "",
                      "allowRelative": false,
                      "showControls": true,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    },
                    {
                      "key": "spellDuration",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "textField",
                      "size": "full-size",
                      "label": "Duration",
                      "defaultValue": "Instantaneous",
                      "charList": "",
                      "maxLength": null,
                      "autocomplete": ""
                    },
                    {
                      "key": "spellArea",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "textField",
                      "size": "full-size",
                      "label": "Area",
                      "defaultValue": "Single",
                      "charList": "",
                      "maxLength": null,
                      "autocomplete": ""
                    },
                    {
                      "key": "spellResistance",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "textField",
                      "size": "full-size",
                      "label": "Resistance",
                      "defaultValue": "Brawn Pool",
                      "charList": "",
                      "maxLength": null,
                      "autocomplete": ""
                    }
                  ],
                  "flow": "grid-2",
                  "align": "left",
                  "verticalAlign": "top",
                  "collapsible": false,
                  "defaultCollapsed": false,
                  "title": "",
                  "titleStyle": "default"
                },
                {
                  "key": "drainFormula",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "textField",
                  "size": "full-size",
                  "label": "Drain Formula",
                  "defaultValue": "1 + (Force/2) ---example, REPLACE with correct formula---",
                  "charList": "",
                  "maxLength": null,
                  "autocomplete": ""
                },
                {
                  "key": "",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "panel",
                  "contents": [
                    {
                      "key": "exampleForce",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "textArea",
                      "size": "full-size",
                      "label": "",
                      "defaultValue": "<ol><li data-start=\"5936\" data-end=\"6018\"><p data-start=\"5938\" data-end=\"5952\">Use <code data-start=\"5906\" data-end=\"5913\">Force</code> for the chosen Force.</p><p></p></li><li data-start=\"5936\" data-end=\"6018\"><p data-start=\"5938\" data-end=\"5952\">Allowed example forms:</p><ul data-start=\"5955\" data-end=\"6018\"><li data-start=\"5955\" data-end=\"5968\"><p data-start=\"5957\" data-end=\"5968\"><code data-start=\"5957\" data-end=\"5968\">3 + Force</code></p></li><li data-start=\"5971\" data-end=\"5988\"><p data-start=\"5973\" data-end=\"5988\"><code data-start=\"5973\" data-end=\"5988\">1 + (Force/2)</code></p></li><li data-start=\"5991\" data-end=\"6004\"><p data-start=\"5993\" data-end=\"6004\"><code data-start=\"5993\" data-end=\"6004\">(Force/2)</code></p><p data-start=\"6021\" data-end=\"6098\"></p></li></ul></li></ol>",
                      "style": "sheet"
                    }
                  ],
                  "flow": "horizontal",
                  "align": "left",
                  "verticalAlign": "top",
                  "collapsible": true,
                  "defaultCollapsed": false,
                  "title": "Drain Formula Syntax Guidelines",
                  "titleStyle": "default"
                },
                {
                  "key": "spellTags",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "textField",
                  "size": "full-size",
                  "label": "Tags",
                  "defaultValue": "",
                  "charList": "",
                  "maxLength": null,
                  "autocomplete": ""
                }
              ],
              "flow": "vertical",
              "align": "left",
              "verticalAlign": "top",
              "collapsible": true,
              "defaultCollapsed": false,
              "title": "Roll Config",
              "titleStyle": "default"
            },
            {
              "key": "",
              "colSpan": 1,
              "rowSpan": 1,
              "cssClass": "",
              "role": 4,
              "editRole": 0,
              "permission": 0,
              "tooltip": "",
              "visibilityFormula": "",
              "editableFormula": "",
              "escapeHTML": false,
              "type": "panel",
              "contents": [
                {
                  "key": "spellCategory",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "textField",
                  "size": "full-size",
                  "label": "Category",
                  "defaultValue": "Combat",
                  "charList": "",
                  "maxLength": null,
                  "autocomplete": ""
                },
                {
                  "key": "drainForceMult",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "numberField",
                  "size": "full-size",
                  "label": "Drain xForce",
                  "defaultValue": "1",
                  "allowDecimal": true,
                  "minVal": "0",
                  "maxVal": "",
                  "allowRelative": false,
                  "showControls": true,
                  "controlsStyle": "hover",
                  "controlsCustomIncrements": "",
                  "inputStyle": "text"
                },
                {
                  "key": "skillKey",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "textField",
                  "size": "full-size",
                  "label": "skillKey",
                  "defaultValue": "Skill_Conjuring",
                  "charList": "",
                  "maxLength": null,
                  "autocomplete": ""
                },
                {
                  "key": "poolKey",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "textField",
                  "size": "full-size",
                  "label": "poolKey",
                  "defaultValue": "Resolve",
                  "charList": "",
                  "maxLength": null,
                  "autocomplete": ""
                }
              ],
              "flow": "grid-2",
              "align": "center",
              "verticalAlign": "top",
              "collapsible": true,
              "defaultCollapsed": true,
              "title": "hidden",
              "titleStyle": "default"
            }
          ],
          "key": "custom_body",
          "type": "panel"
        },
        "display": {
          "width": 600,
          "height": 600,
          "fix_size": false,
          "pp_width": 64,
          "pp_height": 64
        },
        "header": {
          "contents": [
            {
              "key": "",
              "colSpan": 1,
              "rowSpan": 1,
              "cssClass": "sinlesscsb-marker",
              "role": 0,
              "editRole": 0,
              "permission": 0,
              "tooltip": "",
              "visibilityFormula": "",
              "editableFormula": "",
              "escapeHTML": false,
              "type": "panel",
              "contents": [
                {
                  "key": "",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "label",
                  "size": "full-size",
                  "icon": "star",
                  "value": "${actionLabel ? actionLabel : \"Cast\"}$",
                  "prefix": "",
                  "suffix": "",
                  "rollMessage": "%{\n  // Prefer linkedEntity (inventory row) then entity (item sheet)\n  const doc = (typeof linkedEntity !== \"undefined\" && linkedEntity) ? linkedEntity\n            : (typeof entity !== \"undefined\" && entity) ? entity\n            : null;\n\n  const itemUuid = String(doc?.uuid ?? \"\").trim();\n\n  // Actor resolution: embedded parent wins; otherwise token/character fallbacks.\n  const embeddedActorUuid =\n    (doc?.parent?.documentName === \"Actor\" && doc?.parent?.uuid) ? String(doc.parent.uuid) : \"\";\n\n  const scopeActorUuid =\n    (typeof actor !== \"undefined\" && actor?.documentName === \"Actor\" && actor?.uuid) ? String(actor.uuid) : \"\";\n\n  const controlledActorUuid = (() => {\n    const t = canvas?.tokens?.controlled?.[0];\n    return t?.actor?.uuid ? String(t.actor.uuid) : \"\";\n  })();\n\n  const targetedActorUuid = (() => {\n    const t = game.user?.targets ? Array.from(game.user.targets)[0] : null;\n    return t?.actor?.uuid ? String(t.actor.uuid) : \"\";\n  })();\n\n  const userCharUuid = game.user?.character?.uuid ? String(game.user.character.uuid) : \"\";\n\n  const actorUuid = String(\n    embeddedActorUuid ||\n    scopeActorUuid ||\n    controlledActorUuid ||\n    targetedActorUuid ||\n    userCharUuid ||\n    \"\"\n  ).trim();\n\n  if (!itemUuid) {\n    ui.notifications?.warn?.(\"SinlessCSB: missing spell item context (itemUuid).\");\n    return \"\";\n  }\n\n  if (!actorUuid) {\n    ui.notifications?.warn?.(\"SinlessCSB: No actor context. Control or target a token, then try again.\");\n    return \"\";\n  }\n\n  const api = game.modules.get(\"sinlesscsb\")?.api;\n  if (typeof api?.castSpell !== \"function\") {\n    ui.notifications?.error?.(\"SinlessCSB: castSpell API not available (module not ready / not exposed).\");\n    return \"\";\n  }\n\n  api.castSpell({ itemUuid, actorUuid });\n  return \"\";\n}%\n",
                  "altRollMessage": "",
                  "rollMessageToChat": false,
                  "altRollMessageToChat": false,
                  "style": "button"
                }
              ],
              "flow": "vertical",
              "align": "center",
              "verticalAlign": "top",
              "collapsible": false,
              "defaultCollapsed": false,
              "title": "",
              "titleStyle": "default"
            }
          ],
          "key": "custom_header",
          "type": "panel"
        },
        "hidden": [],
        "modifiers": [],
        "props": {
          "skillKey": "Skill_EWarfare",
          "actionLabel": "E War",
          "spellRulestext": "<p>Paste text from book / other useful info here.</p>",
          "spellFociRank": "1",
          "spellforceMax": "1",
          "spellforceDefault": "1",
          "bonusDice": "0",
          "diceMod": "0",
          "fetishRank": "0",
          "spellDuration": "Instantaneous",
          "spellArea": "Single",
          "spellResistance": "Brawn Pool",
          "drainFormula": "1 + (Force/2) ---example, REPLACE with correct formula---",
          "exampleForce": "<ol><li data-start=\"5936\" data-end=\"6018\"><p data-start=\"5938\" data-end=\"5952\">Use <code data-start=\"5906\" data-end=\"5913\">Force</code> for the chosen Force.</p><p></p></li><li data-start=\"5936\" data-end=\"6018\"><p data-start=\"5938\" data-end=\"5952\">Allowed example forms:</p><ul data-start=\"5955\" data-end=\"6018\"><li data-start=\"5955\" data-end=\"5968\"><p data-start=\"5957\" data-end=\"5968\"><code data-start=\"5957\" data-end=\"5968\">3 + Force</code></p></li><li data-start=\"5971\" data-end=\"5988\"><p data-start=\"5973\" data-end=\"5988\"><code data-start=\"5973\" data-end=\"5988\">1 + (Force/2)</code></p></li><li data-start=\"5991\" data-end=\"6004\"><p data-start=\"5993\" data-end=\"6004\"><code data-start=\"5993\" data-end=\"6004\">(Force/2)</code></p><p data-start=\"6021\" data-end=\"6098\"></p></li></ul></li></ol>",
          "spellCategory": "Combat",
          "drainForceMult": "1",
          "poolKey": "Resolve",
          "spellTags": ""
        },
        "unique": false,
        "uniqueId": "KZLPL6kM1RspVfnM"
      },
      "_id": "fyZgS6LzyMi7xZhw",
      "effects": [],
      "sort": 0,
      "flags": {
        "custom-system-builder": {
          "version": "5.1.0"
        }
      },
      "_stats": {
        "compendiumSource": "Item.KZLPL6kM1RspVfnM",
        "duplicateSource": null,
        "exportSource": null,
        "coreVersion": "13.351",
        "systemId": "custom-system-builder",
        "systemVersion": "5.1.0",
        "createdTime": 1769973241455,
        "modifiedTime": 1769973241455,
        "lastModifiedBy": "KoiB8oaGNkPdgzdM"
      },
      "ownership": {
        "default": 0
      }
    },
    {
      "name": "Device Control",
      "type": "equippableItem",
      "folder": "rCTnl7myqTtxE5gl",
      "img": "modules/sinlesscsb/assets/icons/SR6/programs/EmergencyOverride.webp",
      "system": {
        "template": "QyToiPEwE2Tp36YK",
        "templateSystemUniqueVersion": 225230637,
        "body": {
          "contents": [
            {
              "key": "",
              "colSpan": 1,
              "rowSpan": 1,
              "cssClass": "",
              "role": 0,
              "editRole": 0,
              "permission": 0,
              "tooltip": "",
              "visibilityFormula": "",
              "editableFormula": "",
              "escapeHTML": false,
              "type": "panel",
              "contents": [
                {
                  "key": "spellRulestext",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "textArea",
                  "size": "full-size",
                  "label": "Spell Rules",
                  "defaultValue": "<p>Paste text from book / other useful info here.</p>",
                  "style": "sheet"
                }
              ],
              "flow": "horizontal",
              "align": "left",
              "verticalAlign": "top",
              "collapsible": true,
              "defaultCollapsed": true,
              "title": "Rules Text",
              "titleStyle": "default"
            },
            {
              "key": "",
              "colSpan": 1,
              "rowSpan": 1,
              "cssClass": "",
              "role": 0,
              "editRole": 0,
              "permission": 0,
              "tooltip": "",
              "visibilityFormula": "",
              "editableFormula": "",
              "escapeHTML": false,
              "type": "panel",
              "contents": [
                {
                  "key": "actionLabel",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "textField",
                  "size": "full-size",
                  "label": "actionLabel",
                  "defaultValue": "Conjure",
                  "charList": "",
                  "maxLength": null,
                  "autocomplete": ""
                },
                {
                  "key": "",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "panel",
                  "contents": [
                    {
                      "key": "spellFociRank",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "full-size",
                      "label": "Foci Rank",
                      "defaultValue": "1",
                      "allowDecimal": false,
                      "minVal": "1",
                      "maxVal": "",
                      "allowRelative": false,
                      "showControls": true,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    },
                    {
                      "key": "spellforceMax",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "full-size",
                      "label": "Force Rating (MAX Learned)",
                      "defaultValue": "1",
                      "allowDecimal": false,
                      "minVal": "1",
                      "maxVal": "",
                      "allowRelative": false,
                      "showControls": true,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    },
                    {
                      "key": "spellforceDefault",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "full-size",
                      "label": "Spell Force (Default)",
                      "defaultValue": "1",
                      "allowDecimal": false,
                      "minVal": "1",
                      "maxVal": "${spellforceMax}$",
                      "allowRelative": false,
                      "showControls": true,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    },
                    {
                      "key": "bonusDice",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "full-size",
                      "label": "bonusDice",
                      "defaultValue": "0",
                      "allowDecimal": false,
                      "minVal": "",
                      "maxVal": "",
                      "allowRelative": false,
                      "showControls": false,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    },
                    {
                      "key": "diceMod",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "full-size",
                      "label": "diceMod",
                      "defaultValue": "0",
                      "allowDecimal": false,
                      "minVal": "",
                      "maxVal": "",
                      "allowRelative": false,
                      "showControls": false,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    },
                    {
                      "key": "fetishRank",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "full-size",
                      "label": "Fetish Rank",
                      "defaultValue": "0",
                      "allowDecimal": false,
                      "minVal": "0",
                      "maxVal": "",
                      "allowRelative": false,
                      "showControls": true,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    },
                    {
                      "key": "spellDuration",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "textField",
                      "size": "full-size",
                      "label": "Duration",
                      "defaultValue": "Instantaneous",
                      "charList": "",
                      "maxLength": null,
                      "autocomplete": ""
                    },
                    {
                      "key": "spellArea",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "textField",
                      "size": "full-size",
                      "label": "Area",
                      "defaultValue": "Single",
                      "charList": "",
                      "maxLength": null,
                      "autocomplete": ""
                    },
                    {
                      "key": "spellResistance",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "textField",
                      "size": "full-size",
                      "label": "Resistance",
                      "defaultValue": "Brawn Pool",
                      "charList": "",
                      "maxLength": null,
                      "autocomplete": ""
                    }
                  ],
                  "flow": "grid-2",
                  "align": "left",
                  "verticalAlign": "top",
                  "collapsible": false,
                  "defaultCollapsed": false,
                  "title": "",
                  "titleStyle": "default"
                },
                {
                  "key": "drainFormula",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "textField",
                  "size": "full-size",
                  "label": "Drain Formula",
                  "defaultValue": "1 + (Force/2) ---example, REPLACE with correct formula---",
                  "charList": "",
                  "maxLength": null,
                  "autocomplete": ""
                },
                {
                  "key": "",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "panel",
                  "contents": [
                    {
                      "key": "exampleForce",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "textArea",
                      "size": "full-size",
                      "label": "",
                      "defaultValue": "<ol><li data-start=\"5936\" data-end=\"6018\"><p data-start=\"5938\" data-end=\"5952\">Use <code data-start=\"5906\" data-end=\"5913\">Force</code> for the chosen Force.</p><p></p></li><li data-start=\"5936\" data-end=\"6018\"><p data-start=\"5938\" data-end=\"5952\">Allowed example forms:</p><ul data-start=\"5955\" data-end=\"6018\"><li data-start=\"5955\" data-end=\"5968\"><p data-start=\"5957\" data-end=\"5968\"><code data-start=\"5957\" data-end=\"5968\">3 + Force</code></p></li><li data-start=\"5971\" data-end=\"5988\"><p data-start=\"5973\" data-end=\"5988\"><code data-start=\"5973\" data-end=\"5988\">1 + (Force/2)</code></p></li><li data-start=\"5991\" data-end=\"6004\"><p data-start=\"5993\" data-end=\"6004\"><code data-start=\"5993\" data-end=\"6004\">(Force/2)</code></p><p data-start=\"6021\" data-end=\"6098\"></p></li></ul></li></ol>",
                      "style": "sheet"
                    }
                  ],
                  "flow": "horizontal",
                  "align": "left",
                  "verticalAlign": "top",
                  "collapsible": true,
                  "defaultCollapsed": false,
                  "title": "Drain Formula Syntax Guidelines",
                  "titleStyle": "default"
                },
                {
                  "key": "spellTags",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "textField",
                  "size": "full-size",
                  "label": "Tags",
                  "defaultValue": "",
                  "charList": "",
                  "maxLength": null,
                  "autocomplete": ""
                }
              ],
              "flow": "vertical",
              "align": "left",
              "verticalAlign": "top",
              "collapsible": true,
              "defaultCollapsed": false,
              "title": "Roll Config",
              "titleStyle": "default"
            },
            {
              "key": "",
              "colSpan": 1,
              "rowSpan": 1,
              "cssClass": "",
              "role": 4,
              "editRole": 0,
              "permission": 0,
              "tooltip": "",
              "visibilityFormula": "",
              "editableFormula": "",
              "escapeHTML": false,
              "type": "panel",
              "contents": [
                {
                  "key": "spellCategory",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "textField",
                  "size": "full-size",
                  "label": "Category",
                  "defaultValue": "Combat",
                  "charList": "",
                  "maxLength": null,
                  "autocomplete": ""
                },
                {
                  "key": "drainForceMult",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "numberField",
                  "size": "full-size",
                  "label": "Drain xForce",
                  "defaultValue": "1",
                  "allowDecimal": true,
                  "minVal": "0",
                  "maxVal": "",
                  "allowRelative": false,
                  "showControls": true,
                  "controlsStyle": "hover",
                  "controlsCustomIncrements": "",
                  "inputStyle": "text"
                },
                {
                  "key": "skillKey",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "textField",
                  "size": "full-size",
                  "label": "skillKey",
                  "defaultValue": "Skill_Conjuring",
                  "charList": "",
                  "maxLength": null,
                  "autocomplete": ""
                },
                {
                  "key": "poolKey",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "textField",
                  "size": "full-size",
                  "label": "poolKey",
                  "defaultValue": "Resolve",
                  "charList": "",
                  "maxLength": null,
                  "autocomplete": ""
                }
              ],
              "flow": "grid-2",
              "align": "center",
              "verticalAlign": "top",
              "collapsible": true,
              "defaultCollapsed": true,
              "title": "hidden",
              "titleStyle": "default"
            }
          ],
          "key": "custom_body",
          "type": "panel"
        },
        "display": {
          "width": 600,
          "height": 600,
          "fix_size": false,
          "pp_width": 64,
          "pp_height": 64
        },
        "header": {
          "contents": [
            {
              "key": "",
              "colSpan": 1,
              "rowSpan": 1,
              "cssClass": "sinlesscsb-marker",
              "role": 0,
              "editRole": 0,
              "permission": 0,
              "tooltip": "",
              "visibilityFormula": "",
              "editableFormula": "",
              "escapeHTML": false,
              "type": "panel",
              "contents": [
                {
                  "key": "",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "label",
                  "size": "full-size",
                  "icon": "star",
                  "value": "${actionLabel ? actionLabel : \"Cast\"}$",
                  "prefix": "",
                  "suffix": "",
                  "rollMessage": "%{\n  // Prefer linkedEntity (inventory row) then entity (item sheet)\n  const doc = (typeof linkedEntity !== \"undefined\" && linkedEntity) ? linkedEntity\n            : (typeof entity !== \"undefined\" && entity) ? entity\n            : null;\n\n  const itemUuid = String(doc?.uuid ?? \"\").trim();\n\n  // Actor resolution: embedded parent wins; otherwise token/character fallbacks.\n  const embeddedActorUuid =\n    (doc?.parent?.documentName === \"Actor\" && doc?.parent?.uuid) ? String(doc.parent.uuid) : \"\";\n\n  const scopeActorUuid =\n    (typeof actor !== \"undefined\" && actor?.documentName === \"Actor\" && actor?.uuid) ? String(actor.uuid) : \"\";\n\n  const controlledActorUuid = (() => {\n    const t = canvas?.tokens?.controlled?.[0];\n    return t?.actor?.uuid ? String(t.actor.uuid) : \"\";\n  })();\n\n  const targetedActorUuid = (() => {\n    const t = game.user?.targets ? Array.from(game.user.targets)[0] : null;\n    return t?.actor?.uuid ? String(t.actor.uuid) : \"\";\n  })();\n\n  const userCharUuid = game.user?.character?.uuid ? String(game.user.character.uuid) : \"\";\n\n  const actorUuid = String(\n    embeddedActorUuid ||\n    scopeActorUuid ||\n    controlledActorUuid ||\n    targetedActorUuid ||\n    userCharUuid ||\n    \"\"\n  ).trim();\n\n  if (!itemUuid) {\n    ui.notifications?.warn?.(\"SinlessCSB: missing spell item context (itemUuid).\");\n    return \"\";\n  }\n\n  if (!actorUuid) {\n    ui.notifications?.warn?.(\"SinlessCSB: No actor context. Control or target a token, then try again.\");\n    return \"\";\n  }\n\n  const api = game.modules.get(\"sinlesscsb\")?.api;\n  if (typeof api?.castSpell !== \"function\") {\n    ui.notifications?.error?.(\"SinlessCSB: castSpell API not available (module not ready / not exposed).\");\n    return \"\";\n  }\n\n  api.castSpell({ itemUuid, actorUuid });\n  return \"\";\n}%\n",
                  "altRollMessage": "",
                  "rollMessageToChat": false,
                  "altRollMessageToChat": false,
                  "style": "button"
                }
              ],
              "flow": "vertical",
              "align": "center",
              "verticalAlign": "top",
              "collapsible": false,
              "defaultCollapsed": false,
              "title": "",
              "titleStyle": "default"
            }
          ],
          "key": "custom_header",
          "type": "panel"
        },
        "hidden": [],
        "modifiers": [],
        "props": {
          "skillKey": "Skill_EWarfare",
          "actionLabel": "E War",
          "spellRulestext": "<p>Paste text from book / other useful info here.</p>",
          "spellFociRank": "1",
          "spellforceMax": "1",
          "spellforceDefault": "1",
          "bonusDice": "0",
          "diceMod": "0",
          "fetishRank": "0",
          "spellDuration": "Instantaneous",
          "spellArea": "Single",
          "spellResistance": "Brawn Pool",
          "drainFormula": "1 + (Force/2) ---example, REPLACE with correct formula---",
          "exampleForce": "<ol><li data-start=\"5936\" data-end=\"6018\"><p data-start=\"5938\" data-end=\"5952\">Use <code data-start=\"5906\" data-end=\"5913\">Force</code> for the chosen Force.</p><p></p></li><li data-start=\"5936\" data-end=\"6018\"><p data-start=\"5938\" data-end=\"5952\">Allowed example forms:</p><ul data-start=\"5955\" data-end=\"6018\"><li data-start=\"5955\" data-end=\"5968\"><p data-start=\"5957\" data-end=\"5968\"><code data-start=\"5957\" data-end=\"5968\">3 + Force</code></p></li><li data-start=\"5971\" data-end=\"5988\"><p data-start=\"5973\" data-end=\"5988\"><code data-start=\"5973\" data-end=\"5988\">1 + (Force/2)</code></p></li><li data-start=\"5991\" data-end=\"6004\"><p data-start=\"5993\" data-end=\"6004\"><code data-start=\"5993\" data-end=\"6004\">(Force/2)</code></p><p data-start=\"6021\" data-end=\"6098\"></p></li></ul></li></ol>",
          "spellCategory": "Combat",
          "drainForceMult": "1",
          "poolKey": "Resolve",
          "spellTags": ""
        },
        "unique": false,
        "uniqueId": "KZLPL6kM1RspVfnM"
      },
      "_id": "uQxwrK8JSLUPMeZ8",
      "effects": [],
      "sort": 0,
      "flags": {
        "custom-system-builder": {
          "version": "5.1.0"
        }
      },
      "_stats": {
        "compendiumSource": "Item.KZLPL6kM1RspVfnM",
        "duplicateSource": null,
        "exportSource": null,
        "coreVersion": "13.351",
        "systemId": "custom-system-builder",
        "systemVersion": "5.1.0",
        "createdTime": 1769973248279,
        "modifiedTime": 1769973248279,
        "lastModifiedBy": "KoiB8oaGNkPdgzdM"
      },
      "ownership": {
        "default": 0
      }
    },
    {
      "name": "Acid Burn",
      "type": "equippableItem",
      "folder": "rCTnl7myqTtxE5gl",
      "img": "modules/sinlesscsb/assets/icons/cpRed/programs/poison_flatline.svg",
      "system": {
        "template": "QyToiPEwE2Tp36YK",
        "templateSystemUniqueVersion": 225230637,
        "body": {
          "contents": [
            {
              "key": "",
              "colSpan": 1,
              "rowSpan": 1,
              "cssClass": "",
              "role": 0,
              "editRole": 0,
              "permission": 0,
              "tooltip": "",
              "visibilityFormula": "",
              "editableFormula": "",
              "escapeHTML": false,
              "type": "panel",
              "contents": [
                {
                  "key": "spellRulestext",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "textArea",
                  "size": "full-size",
                  "label": "Spell Rules",
                  "defaultValue": "<p>Paste text from book / other useful info here.</p>",
                  "style": "sheet"
                }
              ],
              "flow": "horizontal",
              "align": "left",
              "verticalAlign": "top",
              "collapsible": true,
              "defaultCollapsed": true,
              "title": "Rules Text",
              "titleStyle": "default"
            },
            {
              "key": "",
              "colSpan": 1,
              "rowSpan": 1,
              "cssClass": "",
              "role": 0,
              "editRole": 0,
              "permission": 0,
              "tooltip": "",
              "visibilityFormula": "",
              "editableFormula": "",
              "escapeHTML": false,
              "type": "panel",
              "contents": [
                {
                  "key": "actionLabel",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "textField",
                  "size": "full-size",
                  "label": "actionLabel",
                  "defaultValue": "Conjure",
                  "charList": "",
                  "maxLength": null,
                  "autocomplete": ""
                },
                {
                  "key": "",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "panel",
                  "contents": [
                    {
                      "key": "spellFociRank",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "full-size",
                      "label": "Foci Rank",
                      "defaultValue": "1",
                      "allowDecimal": false,
                      "minVal": "1",
                      "maxVal": "",
                      "allowRelative": false,
                      "showControls": true,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    },
                    {
                      "key": "spellforceMax",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "full-size",
                      "label": "Force Rating (MAX Learned)",
                      "defaultValue": "1",
                      "allowDecimal": false,
                      "minVal": "1",
                      "maxVal": "",
                      "allowRelative": false,
                      "showControls": true,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    },
                    {
                      "key": "spellforceDefault",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "full-size",
                      "label": "Spell Force (Default)",
                      "defaultValue": "1",
                      "allowDecimal": false,
                      "minVal": "1",
                      "maxVal": "${spellforceMax}$",
                      "allowRelative": false,
                      "showControls": true,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    },
                    {
                      "key": "bonusDice",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "full-size",
                      "label": "bonusDice",
                      "defaultValue": "0",
                      "allowDecimal": false,
                      "minVal": "",
                      "maxVal": "",
                      "allowRelative": false,
                      "showControls": false,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    },
                    {
                      "key": "diceMod",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "full-size",
                      "label": "diceMod",
                      "defaultValue": "0",
                      "allowDecimal": false,
                      "minVal": "",
                      "maxVal": "",
                      "allowRelative": false,
                      "showControls": false,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    },
                    {
                      "key": "fetishRank",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "full-size",
                      "label": "Fetish Rank",
                      "defaultValue": "0",
                      "allowDecimal": false,
                      "minVal": "0",
                      "maxVal": "",
                      "allowRelative": false,
                      "showControls": true,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    },
                    {
                      "key": "spellDuration",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "textField",
                      "size": "full-size",
                      "label": "Duration",
                      "defaultValue": "Instantaneous",
                      "charList": "",
                      "maxLength": null,
                      "autocomplete": ""
                    },
                    {
                      "key": "spellArea",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "textField",
                      "size": "full-size",
                      "label": "Area",
                      "defaultValue": "Single",
                      "charList": "",
                      "maxLength": null,
                      "autocomplete": ""
                    },
                    {
                      "key": "spellResistance",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "textField",
                      "size": "full-size",
                      "label": "Resistance",
                      "defaultValue": "Brawn Pool",
                      "charList": "",
                      "maxLength": null,
                      "autocomplete": ""
                    }
                  ],
                  "flow": "grid-2",
                  "align": "left",
                  "verticalAlign": "top",
                  "collapsible": false,
                  "defaultCollapsed": false,
                  "title": "",
                  "titleStyle": "default"
                },
                {
                  "key": "drainFormula",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "textField",
                  "size": "full-size",
                  "label": "Drain Formula",
                  "defaultValue": "1 + (Force/2) ---example, REPLACE with correct formula---",
                  "charList": "",
                  "maxLength": null,
                  "autocomplete": ""
                },
                {
                  "key": "",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "panel",
                  "contents": [
                    {
                      "key": "exampleForce",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "textArea",
                      "size": "full-size",
                      "label": "",
                      "defaultValue": "<ol><li data-start=\"5936\" data-end=\"6018\"><p data-start=\"5938\" data-end=\"5952\">Use <code data-start=\"5906\" data-end=\"5913\">Force</code> for the chosen Force.</p><p></p></li><li data-start=\"5936\" data-end=\"6018\"><p data-start=\"5938\" data-end=\"5952\">Allowed example forms:</p><ul data-start=\"5955\" data-end=\"6018\"><li data-start=\"5955\" data-end=\"5968\"><p data-start=\"5957\" data-end=\"5968\"><code data-start=\"5957\" data-end=\"5968\">3 + Force</code></p></li><li data-start=\"5971\" data-end=\"5988\"><p data-start=\"5973\" data-end=\"5988\"><code data-start=\"5973\" data-end=\"5988\">1 + (Force/2)</code></p></li><li data-start=\"5991\" data-end=\"6004\"><p data-start=\"5993\" data-end=\"6004\"><code data-start=\"5993\" data-end=\"6004\">(Force/2)</code></p><p data-start=\"6021\" data-end=\"6098\"></p></li></ul></li></ol>",
                      "style": "sheet"
                    }
                  ],
                  "flow": "horizontal",
                  "align": "left",
                  "verticalAlign": "top",
                  "collapsible": true,
                  "defaultCollapsed": false,
                  "title": "Drain Formula Syntax Guidelines",
                  "titleStyle": "default"
                },
                {
                  "key": "spellTags",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "textField",
                  "size": "full-size",
                  "label": "Tags",
                  "defaultValue": "",
                  "charList": "",
                  "maxLength": null,
                  "autocomplete": ""
                }
              ],
              "flow": "vertical",
              "align": "left",
              "verticalAlign": "top",
              "collapsible": true,
              "defaultCollapsed": false,
              "title": "Roll Config",
              "titleStyle": "default"
            },
            {
              "key": "",
              "colSpan": 1,
              "rowSpan": 1,
              "cssClass": "",
              "role": 4,
              "editRole": 0,
              "permission": 0,
              "tooltip": "",
              "visibilityFormula": "",
              "editableFormula": "",
              "escapeHTML": false,
              "type": "panel",
              "contents": [
                {
                  "key": "spellCategory",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "textField",
                  "size": "full-size",
                  "label": "Category",
                  "defaultValue": "Combat",
                  "charList": "",
                  "maxLength": null,
                  "autocomplete": ""
                },
                {
                  "key": "drainForceMult",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "numberField",
                  "size": "full-size",
                  "label": "Drain xForce",
                  "defaultValue": "1",
                  "allowDecimal": true,
                  "minVal": "0",
                  "maxVal": "",
                  "allowRelative": false,
                  "showControls": true,
                  "controlsStyle": "hover",
                  "controlsCustomIncrements": "",
                  "inputStyle": "text"
                },
                {
                  "key": "skillKey",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "textField",
                  "size": "full-size",
                  "label": "skillKey",
                  "defaultValue": "Skill_Conjuring",
                  "charList": "",
                  "maxLength": null,
                  "autocomplete": ""
                },
                {
                  "key": "poolKey",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "textField",
                  "size": "full-size",
                  "label": "poolKey",
                  "defaultValue": "Resolve",
                  "charList": "",
                  "maxLength": null,
                  "autocomplete": ""
                }
              ],
              "flow": "grid-2",
              "align": "center",
              "verticalAlign": "top",
              "collapsible": true,
              "defaultCollapsed": true,
              "title": "hidden",
              "titleStyle": "default"
            }
          ],
          "key": "custom_body",
          "type": "panel"
        },
        "display": {
          "width": 600,
          "height": 600,
          "fix_size": false,
          "pp_width": 64,
          "pp_height": 64
        },
        "header": {
          "contents": [
            {
              "key": "",
              "colSpan": 1,
              "rowSpan": 1,
              "cssClass": "sinlesscsb-marker",
              "role": 0,
              "editRole": 0,
              "permission": 0,
              "tooltip": "",
              "visibilityFormula": "",
              "editableFormula": "",
              "escapeHTML": false,
              "type": "panel",
              "contents": [
                {
                  "key": "",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "label",
                  "size": "full-size",
                  "icon": "star",
                  "value": "${actionLabel ? actionLabel : \"Cast\"}$",
                  "prefix": "",
                  "suffix": "",
                  "rollMessage": "%{\n  // Prefer linkedEntity (inventory row) then entity (item sheet)\n  const doc = (typeof linkedEntity !== \"undefined\" && linkedEntity) ? linkedEntity\n            : (typeof entity !== \"undefined\" && entity) ? entity\n            : null;\n\n  const itemUuid = String(doc?.uuid ?? \"\").trim();\n\n  // Actor resolution: embedded parent wins; otherwise token/character fallbacks.\n  const embeddedActorUuid =\n    (doc?.parent?.documentName === \"Actor\" && doc?.parent?.uuid) ? String(doc.parent.uuid) : \"\";\n\n  const scopeActorUuid =\n    (typeof actor !== \"undefined\" && actor?.documentName === \"Actor\" && actor?.uuid) ? String(actor.uuid) : \"\";\n\n  const controlledActorUuid = (() => {\n    const t = canvas?.tokens?.controlled?.[0];\n    return t?.actor?.uuid ? String(t.actor.uuid) : \"\";\n  })();\n\n  const targetedActorUuid = (() => {\n    const t = game.user?.targets ? Array.from(game.user.targets)[0] : null;\n    return t?.actor?.uuid ? String(t.actor.uuid) : \"\";\n  })();\n\n  const userCharUuid = game.user?.character?.uuid ? String(game.user.character.uuid) : \"\";\n\n  const actorUuid = String(\n    embeddedActorUuid ||\n    scopeActorUuid ||\n    controlledActorUuid ||\n    targetedActorUuid ||\n    userCharUuid ||\n    \"\"\n  ).trim();\n\n  if (!itemUuid) {\n    ui.notifications?.warn?.(\"SinlessCSB: missing spell item context (itemUuid).\");\n    return \"\";\n  }\n\n  if (!actorUuid) {\n    ui.notifications?.warn?.(\"SinlessCSB: No actor context. Control or target a token, then try again.\");\n    return \"\";\n  }\n\n  const api = game.modules.get(\"sinlesscsb\")?.api;\n  if (typeof api?.castSpell !== \"function\") {\n    ui.notifications?.error?.(\"SinlessCSB: castSpell API not available (module not ready / not exposed).\");\n    return \"\";\n  }\n\n  api.castSpell({ itemUuid, actorUuid });\n  return \"\";\n}%\n",
                  "altRollMessage": "",
                  "rollMessageToChat": false,
                  "altRollMessageToChat": false,
                  "style": "button"
                }
              ],
              "flow": "vertical",
              "align": "center",
              "verticalAlign": "top",
              "collapsible": false,
              "defaultCollapsed": false,
              "title": "",
              "titleStyle": "default"
            }
          ],
          "key": "custom_header",
          "type": "panel"
        },
        "hidden": [],
        "modifiers": [],
        "props": {
          "skillKey": "Skill_EWarfare",
          "actionLabel": "E War",
          "spellRulestext": "<p>Paste text from book / other useful info here.</p>",
          "spellFociRank": "1",
          "spellforceMax": "1",
          "spellforceDefault": "1",
          "bonusDice": "0",
          "diceMod": "0",
          "fetishRank": "0",
          "spellDuration": "Instantaneous",
          "spellArea": "Single",
          "spellResistance": "Brawn Pool",
          "drainFormula": "1 + (Force/2) ---example, REPLACE with correct formula---",
          "exampleForce": "<ol><li data-start=\"5936\" data-end=\"6018\"><p data-start=\"5938\" data-end=\"5952\">Use <code data-start=\"5906\" data-end=\"5913\">Force</code> for the chosen Force.</p><p></p></li><li data-start=\"5936\" data-end=\"6018\"><p data-start=\"5938\" data-end=\"5952\">Allowed example forms:</p><ul data-start=\"5955\" data-end=\"6018\"><li data-start=\"5955\" data-end=\"5968\"><p data-start=\"5957\" data-end=\"5968\"><code data-start=\"5957\" data-end=\"5968\">3 + Force</code></p></li><li data-start=\"5971\" data-end=\"5988\"><p data-start=\"5973\" data-end=\"5988\"><code data-start=\"5973\" data-end=\"5988\">1 + (Force/2)</code></p></li><li data-start=\"5991\" data-end=\"6004\"><p data-start=\"5993\" data-end=\"6004\"><code data-start=\"5993\" data-end=\"6004\">(Force/2)</code></p><p data-start=\"6021\" data-end=\"6098\"></p></li></ul></li></ol>",
          "spellCategory": "Combat",
          "drainForceMult": "1",
          "poolKey": "Resolve",
          "spellTags": ""
        },
        "unique": false,
        "uniqueId": "TGngUGxpsdBmygY0"
      },
      "_id": "xoR5H9C5H3ULjNgX",
      "effects": [],
      "sort": 0,
      "flags": {
        "custom-system-builder": {
          "version": "5.1.0"
        }
      },
      "_stats": {
        "compendiumSource": "Item.TGngUGxpsdBmygY0",
        "duplicateSource": null,
        "exportSource": null,
        "coreVersion": "13.351",
        "systemId": "custom-system-builder",
        "systemVersion": "5.1.0",
        "createdTime": 1769973255784,
        "modifiedTime": 1769973255784,
        "lastModifiedBy": "KoiB8oaGNkPdgzdM"
      },
      "ownership": {
        "default": 0
      }
    },
    {
      "name": "De-Rez",
      "type": "equippableItem",
      "folder": "rCTnl7myqTtxE5gl",
      "img": "modules/sinlesscsb/assets/icons/SR6/programs/CrashAndBurn.webp",
      "system": {
        "template": "QyToiPEwE2Tp36YK",
        "templateSystemUniqueVersion": 225230637,
        "body": {
          "contents": [
            {
              "key": "",
              "colSpan": 1,
              "rowSpan": 1,
              "cssClass": "",
              "role": 0,
              "editRole": 0,
              "permission": 0,
              "tooltip": "",
              "visibilityFormula": "",
              "editableFormula": "",
              "escapeHTML": false,
              "type": "panel",
              "contents": [
                {
                  "key": "spellRulestext",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "textArea",
                  "size": "full-size",
                  "label": "Spell Rules",
                  "defaultValue": "<p>Paste text from book / other useful info here.</p>",
                  "style": "sheet"
                }
              ],
              "flow": "horizontal",
              "align": "left",
              "verticalAlign": "top",
              "collapsible": true,
              "defaultCollapsed": true,
              "title": "Rules Text",
              "titleStyle": "default"
            },
            {
              "key": "",
              "colSpan": 1,
              "rowSpan": 1,
              "cssClass": "",
              "role": 0,
              "editRole": 0,
              "permission": 0,
              "tooltip": "",
              "visibilityFormula": "",
              "editableFormula": "",
              "escapeHTML": false,
              "type": "panel",
              "contents": [
                {
                  "key": "actionLabel",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "textField",
                  "size": "full-size",
                  "label": "actionLabel",
                  "defaultValue": "Conjure",
                  "charList": "",
                  "maxLength": null,
                  "autocomplete": ""
                },
                {
                  "key": "",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "panel",
                  "contents": [
                    {
                      "key": "spellFociRank",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "full-size",
                      "label": "Foci Rank",
                      "defaultValue": "1",
                      "allowDecimal": false,
                      "minVal": "1",
                      "maxVal": "",
                      "allowRelative": false,
                      "showControls": true,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    },
                    {
                      "key": "spellforceMax",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "full-size",
                      "label": "Force Rating (MAX Learned)",
                      "defaultValue": "1",
                      "allowDecimal": false,
                      "minVal": "1",
                      "maxVal": "",
                      "allowRelative": false,
                      "showControls": true,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    },
                    {
                      "key": "spellforceDefault",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "full-size",
                      "label": "Spell Force (Default)",
                      "defaultValue": "1",
                      "allowDecimal": false,
                      "minVal": "1",
                      "maxVal": "${spellforceMax}$",
                      "allowRelative": false,
                      "showControls": true,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    },
                    {
                      "key": "bonusDice",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "full-size",
                      "label": "bonusDice",
                      "defaultValue": "0",
                      "allowDecimal": false,
                      "minVal": "",
                      "maxVal": "",
                      "allowRelative": false,
                      "showControls": false,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    },
                    {
                      "key": "diceMod",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "full-size",
                      "label": "diceMod",
                      "defaultValue": "0",
                      "allowDecimal": false,
                      "minVal": "",
                      "maxVal": "",
                      "allowRelative": false,
                      "showControls": false,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    },
                    {
                      "key": "fetishRank",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "full-size",
                      "label": "Fetish Rank",
                      "defaultValue": "0",
                      "allowDecimal": false,
                      "minVal": "0",
                      "maxVal": "",
                      "allowRelative": false,
                      "showControls": true,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    },
                    {
                      "key": "spellDuration",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "textField",
                      "size": "full-size",
                      "label": "Duration",
                      "defaultValue": "Instantaneous",
                      "charList": "",
                      "maxLength": null,
                      "autocomplete": ""
                    },
                    {
                      "key": "spellArea",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "textField",
                      "size": "full-size",
                      "label": "Area",
                      "defaultValue": "Single",
                      "charList": "",
                      "maxLength": null,
                      "autocomplete": ""
                    },
                    {
                      "key": "spellResistance",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "textField",
                      "size": "full-size",
                      "label": "Resistance",
                      "defaultValue": "Brawn Pool",
                      "charList": "",
                      "maxLength": null,
                      "autocomplete": ""
                    }
                  ],
                  "flow": "grid-2",
                  "align": "left",
                  "verticalAlign": "top",
                  "collapsible": false,
                  "defaultCollapsed": false,
                  "title": "",
                  "titleStyle": "default"
                },
                {
                  "key": "drainFormula",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "textField",
                  "size": "full-size",
                  "label": "Drain Formula",
                  "defaultValue": "1 + (Force/2) ---example, REPLACE with correct formula---",
                  "charList": "",
                  "maxLength": null,
                  "autocomplete": ""
                },
                {
                  "key": "",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "panel",
                  "contents": [
                    {
                      "key": "exampleForce",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "textArea",
                      "size": "full-size",
                      "label": "",
                      "defaultValue": "<ol><li data-start=\"5936\" data-end=\"6018\"><p data-start=\"5938\" data-end=\"5952\">Use <code data-start=\"5906\" data-end=\"5913\">Force</code> for the chosen Force.</p><p></p></li><li data-start=\"5936\" data-end=\"6018\"><p data-start=\"5938\" data-end=\"5952\">Allowed example forms:</p><ul data-start=\"5955\" data-end=\"6018\"><li data-start=\"5955\" data-end=\"5968\"><p data-start=\"5957\" data-end=\"5968\"><code data-start=\"5957\" data-end=\"5968\">3 + Force</code></p></li><li data-start=\"5971\" data-end=\"5988\"><p data-start=\"5973\" data-end=\"5988\"><code data-start=\"5973\" data-end=\"5988\">1 + (Force/2)</code></p></li><li data-start=\"5991\" data-end=\"6004\"><p data-start=\"5993\" data-end=\"6004\"><code data-start=\"5993\" data-end=\"6004\">(Force/2)</code></p><p data-start=\"6021\" data-end=\"6098\"></p></li></ul></li></ol>",
                      "style": "sheet"
                    }
                  ],
                  "flow": "horizontal",
                  "align": "left",
                  "verticalAlign": "top",
                  "collapsible": true,
                  "defaultCollapsed": false,
                  "title": "Drain Formula Syntax Guidelines",
                  "titleStyle": "default"
                },
                {
                  "key": "spellTags",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "textField",
                  "size": "full-size",
                  "label": "Tags",
                  "defaultValue": "",
                  "charList": "",
                  "maxLength": null,
                  "autocomplete": ""
                }
              ],
              "flow": "vertical",
              "align": "left",
              "verticalAlign": "top",
              "collapsible": true,
              "defaultCollapsed": false,
              "title": "Roll Config",
              "titleStyle": "default"
            },
            {
              "key": "",
              "colSpan": 1,
              "rowSpan": 1,
              "cssClass": "",
              "role": 4,
              "editRole": 0,
              "permission": 0,
              "tooltip": "",
              "visibilityFormula": "",
              "editableFormula": "",
              "escapeHTML": false,
              "type": "panel",
              "contents": [
                {
                  "key": "spellCategory",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "textField",
                  "size": "full-size",
                  "label": "Category",
                  "defaultValue": "Combat",
                  "charList": "",
                  "maxLength": null,
                  "autocomplete": ""
                },
                {
                  "key": "drainForceMult",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "numberField",
                  "size": "full-size",
                  "label": "Drain xForce",
                  "defaultValue": "1",
                  "allowDecimal": true,
                  "minVal": "0",
                  "maxVal": "",
                  "allowRelative": false,
                  "showControls": true,
                  "controlsStyle": "hover",
                  "controlsCustomIncrements": "",
                  "inputStyle": "text"
                },
                {
                  "key": "skillKey",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "textField",
                  "size": "full-size",
                  "label": "skillKey",
                  "defaultValue": "Skill_Conjuring",
                  "charList": "",
                  "maxLength": null,
                  "autocomplete": ""
                },
                {
                  "key": "poolKey",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "textField",
                  "size": "full-size",
                  "label": "poolKey",
                  "defaultValue": "Resolve",
                  "charList": "",
                  "maxLength": null,
                  "autocomplete": ""
                }
              ],
              "flow": "grid-2",
              "align": "center",
              "verticalAlign": "top",
              "collapsible": true,
              "defaultCollapsed": true,
              "title": "hidden",
              "titleStyle": "default"
            }
          ],
          "key": "custom_body",
          "type": "panel"
        },
        "display": {
          "width": 600,
          "height": 600,
          "fix_size": false,
          "pp_width": 64,
          "pp_height": 64
        },
        "header": {
          "contents": [
            {
              "key": "",
              "colSpan": 1,
              "rowSpan": 1,
              "cssClass": "sinlesscsb-marker",
              "role": 0,
              "editRole": 0,
              "permission": 0,
              "tooltip": "",
              "visibilityFormula": "",
              "editableFormula": "",
              "escapeHTML": false,
              "type": "panel",
              "contents": [
                {
                  "key": "",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "label",
                  "size": "full-size",
                  "icon": "star",
                  "value": "${actionLabel ? actionLabel : \"Cast\"}$",
                  "prefix": "",
                  "suffix": "",
                  "rollMessage": "%{\n  // Prefer linkedEntity (inventory row) then entity (item sheet)\n  const doc = (typeof linkedEntity !== \"undefined\" && linkedEntity) ? linkedEntity\n            : (typeof entity !== \"undefined\" && entity) ? entity\n            : null;\n\n  const itemUuid = String(doc?.uuid ?? \"\").trim();\n\n  // Actor resolution: embedded parent wins; otherwise token/character fallbacks.\n  const embeddedActorUuid =\n    (doc?.parent?.documentName === \"Actor\" && doc?.parent?.uuid) ? String(doc.parent.uuid) : \"\";\n\n  const scopeActorUuid =\n    (typeof actor !== \"undefined\" && actor?.documentName === \"Actor\" && actor?.uuid) ? String(actor.uuid) : \"\";\n\n  const controlledActorUuid = (() => {\n    const t = canvas?.tokens?.controlled?.[0];\n    return t?.actor?.uuid ? String(t.actor.uuid) : \"\";\n  })();\n\n  const targetedActorUuid = (() => {\n    const t = game.user?.targets ? Array.from(game.user.targets)[0] : null;\n    return t?.actor?.uuid ? String(t.actor.uuid) : \"\";\n  })();\n\n  const userCharUuid = game.user?.character?.uuid ? String(game.user.character.uuid) : \"\";\n\n  const actorUuid = String(\n    embeddedActorUuid ||\n    scopeActorUuid ||\n    controlledActorUuid ||\n    targetedActorUuid ||\n    userCharUuid ||\n    \"\"\n  ).trim();\n\n  if (!itemUuid) {\n    ui.notifications?.warn?.(\"SinlessCSB: missing spell item context (itemUuid).\");\n    return \"\";\n  }\n\n  if (!actorUuid) {\n    ui.notifications?.warn?.(\"SinlessCSB: No actor context. Control or target a token, then try again.\");\n    return \"\";\n  }\n\n  const api = game.modules.get(\"sinlesscsb\")?.api;\n  if (typeof api?.castSpell !== \"function\") {\n    ui.notifications?.error?.(\"SinlessCSB: castSpell API not available (module not ready / not exposed).\");\n    return \"\";\n  }\n\n  api.castSpell({ itemUuid, actorUuid });\n  return \"\";\n}%\n",
                  "altRollMessage": "",
                  "rollMessageToChat": false,
                  "altRollMessageToChat": false,
                  "style": "button"
                }
              ],
              "flow": "vertical",
              "align": "center",
              "verticalAlign": "top",
              "collapsible": false,
              "defaultCollapsed": false,
              "title": "",
              "titleStyle": "default"
            }
          ],
          "key": "custom_header",
          "type": "panel"
        },
        "hidden": [],
        "modifiers": [],
        "props": {
          "skillKey": "Skill_EWarfare",
          "actionLabel": "E War",
          "spellRulestext": "<p>Paste text from book / other useful info here.</p>",
          "spellFociRank": "1",
          "spellforceMax": "1",
          "spellforceDefault": "1",
          "bonusDice": "0",
          "diceMod": "0",
          "fetishRank": "0",
          "spellDuration": "Instantaneous",
          "spellArea": "Single",
          "spellResistance": "Brawn Pool",
          "drainFormula": "1 + (Force/2) ---example, REPLACE with correct formula---",
          "exampleForce": "<ol><li data-start=\"5936\" data-end=\"6018\"><p data-start=\"5938\" data-end=\"5952\">Use <code data-start=\"5906\" data-end=\"5913\">Force</code> for the chosen Force.</p><p></p></li><li data-start=\"5936\" data-end=\"6018\"><p data-start=\"5938\" data-end=\"5952\">Allowed example forms:</p><ul data-start=\"5955\" data-end=\"6018\"><li data-start=\"5955\" data-end=\"5968\"><p data-start=\"5957\" data-end=\"5968\"><code data-start=\"5957\" data-end=\"5968\">3 + Force</code></p></li><li data-start=\"5971\" data-end=\"5988\"><p data-start=\"5973\" data-end=\"5988\"><code data-start=\"5973\" data-end=\"5988\">1 + (Force/2)</code></p></li><li data-start=\"5991\" data-end=\"6004\"><p data-start=\"5993\" data-end=\"6004\"><code data-start=\"5993\" data-end=\"6004\">(Force/2)</code></p><p data-start=\"6021\" data-end=\"6098\"></p></li></ul></li></ol>",
          "spellCategory": "Combat",
          "drainForceMult": "1",
          "poolKey": "Resolve",
          "spellTags": ""
        },
        "unique": false,
        "uniqueId": "6rGRT38QmcezMGKr"
      },
      "_id": "JYlO1WxdZQp9GTKw",
      "effects": [],
      "sort": 0,
      "flags": {
        "custom-system-builder": {
          "version": "5.1.0"
        }
      },
      "_stats": {
        "compendiumSource": "Item.6rGRT38QmcezMGKr",
        "duplicateSource": null,
        "exportSource": null,
        "coreVersion": "13.351",
        "systemId": "custom-system-builder",
        "systemVersion": "5.1.0",
        "createdTime": 1769973322316,
        "modifiedTime": 1769973322316,
        "lastModifiedBy": "KoiB8oaGNkPdgzdM"
      },
      "ownership": {
        "default": 0
      }
    },
    {
      "name": "Acid Burn",
      "type": "equippableItem",
      "folder": "rCTnl7myqTtxE5gl",
      "img": "modules/sinlesscsb/assets/icons/cpRed/programs/poison_flatline.svg",
      "system": {
        "template": "QyToiPEwE2Tp36YK",
        "templateSystemUniqueVersion": 225230637,
        "body": {
          "contents": [
            {
              "key": "",
              "colSpan": 1,
              "rowSpan": 1,
              "cssClass": "",
              "role": 0,
              "editRole": 0,
              "permission": 0,
              "tooltip": "",
              "visibilityFormula": "",
              "editableFormula": "",
              "escapeHTML": false,
              "type": "panel",
              "contents": [
                {
                  "key": "spellRulestext",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "textArea",
                  "size": "full-size",
                  "label": "Spell Rules",
                  "defaultValue": "<p>Paste text from book / other useful info here.</p>",
                  "style": "sheet"
                }
              ],
              "flow": "horizontal",
              "align": "left",
              "verticalAlign": "top",
              "collapsible": true,
              "defaultCollapsed": true,
              "title": "Rules Text",
              "titleStyle": "default"
            },
            {
              "key": "",
              "colSpan": 1,
              "rowSpan": 1,
              "cssClass": "",
              "role": 0,
              "editRole": 0,
              "permission": 0,
              "tooltip": "",
              "visibilityFormula": "",
              "editableFormula": "",
              "escapeHTML": false,
              "type": "panel",
              "contents": [
                {
                  "key": "actionLabel",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "textField",
                  "size": "full-size",
                  "label": "actionLabel",
                  "defaultValue": "Conjure",
                  "charList": "",
                  "maxLength": null,
                  "autocomplete": ""
                },
                {
                  "key": "",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "panel",
                  "contents": [
                    {
                      "key": "spellFociRank",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "full-size",
                      "label": "Foci Rank",
                      "defaultValue": "1",
                      "allowDecimal": false,
                      "minVal": "1",
                      "maxVal": "",
                      "allowRelative": false,
                      "showControls": true,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    },
                    {
                      "key": "spellforceMax",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "full-size",
                      "label": "Force Rating (MAX Learned)",
                      "defaultValue": "1",
                      "allowDecimal": false,
                      "minVal": "1",
                      "maxVal": "",
                      "allowRelative": false,
                      "showControls": true,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    },
                    {
                      "key": "spellforceDefault",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "full-size",
                      "label": "Spell Force (Default)",
                      "defaultValue": "1",
                      "allowDecimal": false,
                      "minVal": "1",
                      "maxVal": "${spellforceMax}$",
                      "allowRelative": false,
                      "showControls": true,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    },
                    {
                      "key": "bonusDice",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "full-size",
                      "label": "bonusDice",
                      "defaultValue": "0",
                      "allowDecimal": false,
                      "minVal": "",
                      "maxVal": "",
                      "allowRelative": false,
                      "showControls": false,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    },
                    {
                      "key": "diceMod",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "full-size",
                      "label": "diceMod",
                      "defaultValue": "0",
                      "allowDecimal": false,
                      "minVal": "",
                      "maxVal": "",
                      "allowRelative": false,
                      "showControls": false,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    },
                    {
                      "key": "fetishRank",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "full-size",
                      "label": "Fetish Rank",
                      "defaultValue": "0",
                      "allowDecimal": false,
                      "minVal": "0",
                      "maxVal": "",
                      "allowRelative": false,
                      "showControls": true,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    },
                    {
                      "key": "spellDuration",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "textField",
                      "size": "full-size",
                      "label": "Duration",
                      "defaultValue": "Instantaneous",
                      "charList": "",
                      "maxLength": null,
                      "autocomplete": ""
                    },
                    {
                      "key": "spellArea",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "textField",
                      "size": "full-size",
                      "label": "Area",
                      "defaultValue": "Single",
                      "charList": "",
                      "maxLength": null,
                      "autocomplete": ""
                    },
                    {
                      "key": "spellResistance",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "textField",
                      "size": "full-size",
                      "label": "Resistance",
                      "defaultValue": "Brawn Pool",
                      "charList": "",
                      "maxLength": null,
                      "autocomplete": ""
                    }
                  ],
                  "flow": "grid-2",
                  "align": "left",
                  "verticalAlign": "top",
                  "collapsible": false,
                  "defaultCollapsed": false,
                  "title": "",
                  "titleStyle": "default"
                },
                {
                  "key": "drainFormula",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "textField",
                  "size": "full-size",
                  "label": "Drain Formula",
                  "defaultValue": "1 + (Force/2) ---example, REPLACE with correct formula---",
                  "charList": "",
                  "maxLength": null,
                  "autocomplete": ""
                },
                {
                  "key": "",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "panel",
                  "contents": [
                    {
                      "key": "exampleForce",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "textArea",
                      "size": "full-size",
                      "label": "",
                      "defaultValue": "<ol><li data-start=\"5936\" data-end=\"6018\"><p data-start=\"5938\" data-end=\"5952\">Use <code data-start=\"5906\" data-end=\"5913\">Force</code> for the chosen Force.</p><p></p></li><li data-start=\"5936\" data-end=\"6018\"><p data-start=\"5938\" data-end=\"5952\">Allowed example forms:</p><ul data-start=\"5955\" data-end=\"6018\"><li data-start=\"5955\" data-end=\"5968\"><p data-start=\"5957\" data-end=\"5968\"><code data-start=\"5957\" data-end=\"5968\">3 + Force</code></p></li><li data-start=\"5971\" data-end=\"5988\"><p data-start=\"5973\" data-end=\"5988\"><code data-start=\"5973\" data-end=\"5988\">1 + (Force/2)</code></p></li><li data-start=\"5991\" data-end=\"6004\"><p data-start=\"5993\" data-end=\"6004\"><code data-start=\"5993\" data-end=\"6004\">(Force/2)</code></p><p data-start=\"6021\" data-end=\"6098\"></p></li></ul></li></ol>",
                      "style": "sheet"
                    }
                  ],
                  "flow": "horizontal",
                  "align": "left",
                  "verticalAlign": "top",
                  "collapsible": true,
                  "defaultCollapsed": false,
                  "title": "Drain Formula Syntax Guidelines",
                  "titleStyle": "default"
                },
                {
                  "key": "spellTags",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "textField",
                  "size": "full-size",
                  "label": "Tags",
                  "defaultValue": "",
                  "charList": "",
                  "maxLength": null,
                  "autocomplete": ""
                }
              ],
              "flow": "vertical",
              "align": "left",
              "verticalAlign": "top",
              "collapsible": true,
              "defaultCollapsed": false,
              "title": "Roll Config",
              "titleStyle": "default"
            },
            {
              "key": "",
              "colSpan": 1,
              "rowSpan": 1,
              "cssClass": "",
              "role": 4,
              "editRole": 0,
              "permission": 0,
              "tooltip": "",
              "visibilityFormula": "",
              "editableFormula": "",
              "escapeHTML": false,
              "type": "panel",
              "contents": [
                {
                  "key": "spellCategory",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "textField",
                  "size": "full-size",
                  "label": "Category",
                  "defaultValue": "Combat",
                  "charList": "",
                  "maxLength": null,
                  "autocomplete": ""
                },
                {
                  "key": "drainForceMult",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "numberField",
                  "size": "full-size",
                  "label": "Drain xForce",
                  "defaultValue": "1",
                  "allowDecimal": true,
                  "minVal": "0",
                  "maxVal": "",
                  "allowRelative": false,
                  "showControls": true,
                  "controlsStyle": "hover",
                  "controlsCustomIncrements": "",
                  "inputStyle": "text"
                },
                {
                  "key": "skillKey",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "textField",
                  "size": "full-size",
                  "label": "skillKey",
                  "defaultValue": "Skill_Conjuring",
                  "charList": "",
                  "maxLength": null,
                  "autocomplete": ""
                },
                {
                  "key": "poolKey",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "textField",
                  "size": "full-size",
                  "label": "poolKey",
                  "defaultValue": "Resolve",
                  "charList": "",
                  "maxLength": null,
                  "autocomplete": ""
                }
              ],
              "flow": "grid-2",
              "align": "center",
              "verticalAlign": "top",
              "collapsible": true,
              "defaultCollapsed": true,
              "title": "hidden",
              "titleStyle": "default"
            }
          ],
          "key": "custom_body",
          "type": "panel"
        },
        "display": {
          "width": 600,
          "height": 600,
          "fix_size": false,
          "pp_width": 64,
          "pp_height": 64
        },
        "header": {
          "contents": [
            {
              "key": "",
              "colSpan": 1,
              "rowSpan": 1,
              "cssClass": "sinlesscsb-marker",
              "role": 0,
              "editRole": 0,
              "permission": 0,
              "tooltip": "",
              "visibilityFormula": "",
              "editableFormula": "",
              "escapeHTML": false,
              "type": "panel",
              "contents": [
                {
                  "key": "",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "label",
                  "size": "full-size",
                  "icon": "star",
                  "value": "${actionLabel ? actionLabel : \"Cast\"}$",
                  "prefix": "",
                  "suffix": "",
                  "rollMessage": "%{\n  // Prefer linkedEntity (inventory row) then entity (item sheet)\n  const doc = (typeof linkedEntity !== \"undefined\" && linkedEntity) ? linkedEntity\n            : (typeof entity !== \"undefined\" && entity) ? entity\n            : null;\n\n  const itemUuid = String(doc?.uuid ?? \"\").trim();\n\n  // Actor resolution: embedded parent wins; otherwise token/character fallbacks.\n  const embeddedActorUuid =\n    (doc?.parent?.documentName === \"Actor\" && doc?.parent?.uuid) ? String(doc.parent.uuid) : \"\";\n\n  const scopeActorUuid =\n    (typeof actor !== \"undefined\" && actor?.documentName === \"Actor\" && actor?.uuid) ? String(actor.uuid) : \"\";\n\n  const controlledActorUuid = (() => {\n    const t = canvas?.tokens?.controlled?.[0];\n    return t?.actor?.uuid ? String(t.actor.uuid) : \"\";\n  })();\n\n  const targetedActorUuid = (() => {\n    const t = game.user?.targets ? Array.from(game.user.targets)[0] : null;\n    return t?.actor?.uuid ? String(t.actor.uuid) : \"\";\n  })();\n\n  const userCharUuid = game.user?.character?.uuid ? String(game.user.character.uuid) : \"\";\n\n  const actorUuid = String(\n    embeddedActorUuid ||\n    scopeActorUuid ||\n    controlledActorUuid ||\n    targetedActorUuid ||\n    userCharUuid ||\n    \"\"\n  ).trim();\n\n  if (!itemUuid) {\n    ui.notifications?.warn?.(\"SinlessCSB: missing spell item context (itemUuid).\");\n    return \"\";\n  }\n\n  if (!actorUuid) {\n    ui.notifications?.warn?.(\"SinlessCSB: No actor context. Control or target a token, then try again.\");\n    return \"\";\n  }\n\n  const api = game.modules.get(\"sinlesscsb\")?.api;\n  if (typeof api?.castSpell !== \"function\") {\n    ui.notifications?.error?.(\"SinlessCSB: castSpell API not available (module not ready / not exposed).\");\n    return \"\";\n  }\n\n  api.castSpell({ itemUuid, actorUuid });\n  return \"\";\n}%\n",
                  "altRollMessage": "",
                  "rollMessageToChat": false,
                  "altRollMessageToChat": false,
                  "style": "button"
                }
              ],
              "flow": "vertical",
              "align": "center",
              "verticalAlign": "top",
              "collapsible": false,
              "defaultCollapsed": false,
              "title": "",
              "titleStyle": "default"
            }
          ],
          "key": "custom_header",
          "type": "panel"
        },
        "hidden": [],
        "modifiers": [],
        "props": {
          "skillKey": "Skill_EWarfare",
          "actionLabel": "E War",
          "spellRulestext": "<p>Paste text from book / other useful info here.</p>",
          "spellFociRank": "1",
          "spellforceMax": "1",
          "spellforceDefault": "1",
          "bonusDice": "0",
          "diceMod": "0",
          "fetishRank": "0",
          "spellDuration": "Instantaneous",
          "spellArea": "Single",
          "spellResistance": "Brawn Pool",
          "drainFormula": "1 + (Force/2) ---example, REPLACE with correct formula---",
          "exampleForce": "<ol><li data-start=\"5936\" data-end=\"6018\"><p data-start=\"5938\" data-end=\"5952\">Use <code data-start=\"5906\" data-end=\"5913\">Force</code> for the chosen Force.</p><p></p></li><li data-start=\"5936\" data-end=\"6018\"><p data-start=\"5938\" data-end=\"5952\">Allowed example forms:</p><ul data-start=\"5955\" data-end=\"6018\"><li data-start=\"5955\" data-end=\"5968\"><p data-start=\"5957\" data-end=\"5968\"><code data-start=\"5957\" data-end=\"5968\">3 + Force</code></p></li><li data-start=\"5971\" data-end=\"5988\"><p data-start=\"5973\" data-end=\"5988\"><code data-start=\"5973\" data-end=\"5988\">1 + (Force/2)</code></p></li><li data-start=\"5991\" data-end=\"6004\"><p data-start=\"5993\" data-end=\"6004\"><code data-start=\"5993\" data-end=\"6004\">(Force/2)</code></p><p data-start=\"6021\" data-end=\"6098\"></p></li></ul></li></ol>",
          "spellCategory": "Combat",
          "drainForceMult": "1",
          "poolKey": "Resolve",
          "spellTags": ""
        },
        "unique": false,
        "uniqueId": "TGngUGxpsdBmygY0"
      },
      "_id": "CPun6EuYDUZwxyIa",
      "effects": [],
      "sort": 0,
      "flags": {
        "custom-system-builder": {
          "version": "5.1.0"
        }
      },
      "_stats": {
        "compendiumSource": "Item.TGngUGxpsdBmygY0",
        "duplicateSource": null,
        "exportSource": null,
        "coreVersion": "13.351",
        "systemId": "custom-system-builder",
        "systemVersion": "5.1.0",
        "createdTime": 1769973330105,
        "modifiedTime": 1769973330105,
        "lastModifiedBy": "KoiB8oaGNkPdgzdM"
      },
      "ownership": {
        "default": 0
      }
    },
    {
      "name": "Acid Burn",
      "type": "equippableItem",
      "folder": "rCTnl7myqTtxE5gl",
      "img": "modules/sinlesscsb/assets/icons/cpRed/programs/poison_flatline.svg",
      "system": {
        "template": "lBNLLAeL3gcJs2RQ",
        "templateSystemUniqueVersion": 2509181623,
        "body": {
          "contents": [
            {
              "key": "",
              "colSpan": 1,
              "rowSpan": 1,
              "cssClass": "sinlesscsb-marker",
              "role": 0,
              "editRole": 0,
              "permission": 0,
              "tooltip": "",
              "visibilityFormula": "",
              "editableFormula": "",
              "escapeHTML": false,
              "type": "panel",
              "contents": [
                {
                  "key": "",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "panel",
                  "contents": [
                    {
                      "key": "gearFeature",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "medium",
                      "label": "Software Rating:",
                      "defaultValue": "1",
                      "allowDecimal": false,
                      "minVal": "1",
                      "maxVal": "6",
                      "allowRelative": false,
                      "showControls": true,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    },
                    {
                      "key": "bonusDice",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "medium",
                      "label": "bonusDice",
                      "defaultValue": "0",
                      "allowDecimal": false,
                      "minVal": "",
                      "maxVal": "",
                      "allowRelative": false,
                      "showControls": true,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    },
                    {
                      "key": "diceMod",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "(can spend from MCP Pool in roll dialogue using this)",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "medium",
                      "label": "diceMod ",
                      "defaultValue": "0",
                      "allowDecimal": false,
                      "minVal": "",
                      "maxVal": "",
                      "allowRelative": false,
                      "showControls": true,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    },
                    {
                      "key": "actionLabel",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "textField",
                      "size": "full-size",
                      "label": "actionLabel",
                      "defaultValue": "E War",
                      "charList": "",
                      "maxLength": null,
                      "autocomplete": ""
                    },
                    {
                      "key": "softwareSlot",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "0=inactive, 1=active",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "medium",
                      "label": "softwareSlot",
                      "defaultValue": "0",
                      "allowDecimal": false,
                      "minVal": "0",
                      "maxVal": "1",
                      "allowRelative": false,
                      "showControls": false,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    },
                    {
                      "key": "ioSoftware",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "textField",
                      "size": "medium",
                      "label": "I / O",
                      "defaultValue": "",
                      "charList": "",
                      "maxLength": null,
                      "autocomplete": ""
                    },
                    {
                      "key": "softwareCost",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "full-size",
                      "label": "Cost per rating",
                      "defaultValue": "",
                      "allowDecimal": false,
                      "minVal": "0",
                      "maxVal": "",
                      "allowRelative": false,
                      "showControls": true,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    },
                    {
                      "key": "softwareAlert",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "textField",
                      "size": "full-size",
                      "label": "Alert",
                      "defaultValue": "",
                      "charList": "",
                      "maxLength": null,
                      "autocomplete": ""
                    }
                  ],
                  "flow": "grid-2",
                  "align": "left",
                  "verticalAlign": "top",
                  "collapsible": false,
                  "defaultCollapsed": false,
                  "title": "",
                  "titleStyle": "default"
                }
              ],
              "flow": "vertical",
              "align": "left",
              "verticalAlign": "top",
              "collapsible": true,
              "defaultCollapsed": false,
              "title": "Roll Config",
              "titleStyle": "default"
            },
            {
              "key": "",
              "colSpan": 1,
              "rowSpan": 1,
              "cssClass": "",
              "role": 0,
              "editRole": 0,
              "permission": 0,
              "tooltip": "",
              "visibilityFormula": "",
              "editableFormula": "",
              "escapeHTML": false,
              "type": "panel",
              "contents": [
                {
                  "key": "programRulestext",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "textArea",
                  "size": "full-size",
                  "label": "",
                  "defaultValue": "",
                  "style": "sheet"
                }
              ],
              "flow": "vertical",
              "align": "left",
              "verticalAlign": "top",
              "collapsible": true,
              "defaultCollapsed": true,
              "title": "Software rules text",
              "titleStyle": "default"
            },
            {
              "key": "",
              "colSpan": 1,
              "rowSpan": 1,
              "cssClass": "",
              "role": 4,
              "editRole": 0,
              "permission": 0,
              "tooltip": "",
              "visibilityFormula": "",
              "editableFormula": "",
              "escapeHTML": false,
              "type": "panel",
              "contents": [
                {
                  "key": "skillKey",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "textField",
                  "size": "full-size",
                  "label": "skillKey",
                  "defaultValue": "Skill_EWarfare",
                  "charList": "",
                  "maxLength": null,
                  "autocomplete": ""
                },
                {
                  "key": "poolKey_copy1",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "select",
                  "size": "full-size",
                  "label": "poolKey",
                  "defaultValue": "Focus",
                  "selectedOptionType": "custom",
                  "options": [
                    {
                      "key": "Brawn",
                      "value": "Brawn"
                    },
                    {
                      "key": "Finesse",
                      "value": "Finesse"
                    },
                    {
                      "key": "Resolve",
                      "value": "Resolve"
                    },
                    {
                      "key": "Focus",
                      "value": "Focus"
                    }
                  ]
                },
                {
                  "key": "limitBonusSource",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "textField",
                  "size": "full-size",
                  "label": "limitBonusSource",
                  "defaultValue": "Software Rating",
                  "charList": "",
                  "maxLength": null,
                  "autocomplete": ""
                },
                {
                  "key": "loopingFlag",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "textField",
                  "size": "full-size",
                  "label": "loopingFlag",
                  "defaultValue": "No",
                  "charList": "",
                  "maxLength": null,
                  "autocomplete": ""
                }
              ],
              "flow": "vertical",
              "align": "left",
              "verticalAlign": "top",
              "collapsible": true,
              "defaultCollapsed": false,
              "title": "hidden",
              "titleStyle": "default"
            }
          ],
          "key": "custom_body",
          "type": "panel"
        },
        "display": {
          "width": 600,
          "height": 600,
          "fix_size": false,
          "pp_width": 64,
          "pp_height": 64
        },
        "header": {
          "contents": [
            {
              "key": "",
              "colSpan": 1,
              "rowSpan": 1,
              "cssClass": "",
              "role": 0,
              "editRole": 0,
              "permission": 0,
              "tooltip": "",
              "visibilityFormula": "",
              "editableFormula": "",
              "escapeHTML": false,
              "type": "panel",
              "contents": [
                {
                  "key": "",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "label",
                  "size": "full-size",
                  "icon": "code",
                  "value": "${actionLabel ? actionLabel : \"Use\"}$",
                  "prefix": "",
                  "suffix": "",
                  "rollMessage": "%{\n  // Prefer linkedEntity (inventory row) then entity (item sheet)\n  const doc = (typeof linkedEntity !== \"undefined\" && linkedEntity) ? linkedEntity\n            : (typeof entity !== \"undefined\" && entity) ? entity\n            : null;\n\n  const itemUuid = String(doc?.uuid ?? \"\").trim();\n\n  // Pull actor from safe sources only\n  const embeddedActorUuid =\n    (doc?.parent?.documentName === \"Actor\" && doc?.parent?.uuid) ? String(doc.parent.uuid) : \"\";\n\n  const scopeActorUuid =\n    (typeof actor !== \"undefined\" && actor?.documentName === \"Actor\" && actor?.uuid) ? String(actor.uuid) : \"\";\n\n  const controlledActorUuid = (() => {\n    const t = canvas?.tokens?.controlled?.[0];\n    return t?.actor?.uuid ? String(t.actor.uuid) : \"\";\n  })();\n\n  const targetedActorUuid = (() => {\n    const t = game.user?.targets ? Array.from(game.user.targets)[0] : null;\n    return t?.actor?.uuid ? String(t.actor.uuid) : \"\";\n  })();\n\n  const userCharUuid = game.user?.character?.uuid ? String(game.user.character.uuid) : \"\";\n\n  const actorUuid = String(\n    embeddedActorUuid ||\n    scopeActorUuid ||\n    controlledActorUuid ||\n    targetedActorUuid ||\n    userCharUuid ||\n    \"\"\n  ).trim();\n\n  if (!itemUuid) {\n    console.warn(\"SinlessCSB | rollItem: missing itemUuid\", { doc, linkedEntity: (typeof linkedEntity !== \"undefined\" ? linkedEntity : undefined), entity: (typeof entity !== \"undefined\" ? entity : undefined) });\n    ui.notifications?.warn?.(\"SinlessCSB: missing item context (itemUuid).\");\n    return \"\";\n  }\n\n  if (!actorUuid) {\n    console.warn(\"SinlessCSB | rollItem: missing actorUuid (control/target a token)\", {\n      itemUuid,\n      controlled: canvas?.tokens?.controlled?.length ?? 0,\n      targets: game.user?.targets?.size ?? 0\n    });\n    ui.notifications?.warn?.(\"SinlessCSB: No actor context. Control a token (click) or target one, then try again.\");\n    return \"\";\n  }\n\n  const api = game.modules.get(\"sinlesscsb\")?.api;\n  if (typeof api?.rollItem !== \"function\") {\n    console.warn(\"SinlessCSB | rollItem: API not available\", { apiKeys: Object.keys(api ?? {}) });\n    ui.notifications?.error?.(\"SinlessCSB: rollItem API not available (module not ready / not exposed).\");\n    return \"\";\n  }\n\n  console.log(\"SinlessCSB | rollItem (hardened)\", { itemUuid, actorUuid, itemName: doc?.name });\n  api.rollItem({ itemUuid, actorUuid });\n  return \"\";\n}%\n",
                  "altRollMessage": "",
                  "rollMessageToChat": false,
                  "altRollMessageToChat": false,
                  "style": "button"
                },
                {
                  "key": "",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "panel",
                  "contents": [],
                  "flow": "vertical",
                  "align": "center",
                  "verticalAlign": "top",
                  "collapsible": false,
                  "defaultCollapsed": false,
                  "title": "",
                  "titleStyle": "default"
                },
                {
                  "key": "",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "panel",
                  "contents": [
                    {
                      "key": "deckactionType",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "textField",
                      "size": "m-large",
                      "label": "Action Type:",
                      "defaultValue": "Complex Action",
                      "charList": "",
                      "maxLength": null,
                      "autocomplete": ""
                    },
                    {
                      "key": "actionSpecial",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "textField",
                      "size": "full-size",
                      "label": "Special:",
                      "defaultValue": "",
                      "charList": "",
                      "maxLength": null,
                      "autocomplete": ""
                    }
                  ],
                  "flow": "vertical",
                  "align": "right",
                  "verticalAlign": "top",
                  "collapsible": false,
                  "defaultCollapsed": false,
                  "title": "",
                  "titleStyle": "default"
                }
              ],
              "flow": "vertical",
              "align": "center",
              "verticalAlign": "top",
              "collapsible": false,
              "defaultCollapsed": false,
              "title": "",
              "titleStyle": "default"
            }
          ],
          "key": "custom_header",
          "type": "panel"
        },
        "hidden": [],
        "modifiers": [],
        "props": {
          "deckactionType": "Complex Action",
          "actionSpecial": "Attack Software",
          "ioSoftware": "No",
          "softwareCost": "2000",
          "softwareAlert": "3",
          "programRulestext": "<h2 style=\"font-family:'Bruno Ace', sans-serif; margin:0 0 0.5em 0;\">Acid Burn</h2><p>This program creates self-replicating destructive code that targets the hardening of the device.</p><p>The decker makes a Computer (Electronic Warfare) + Acid Burn rating test. The target defends as normal. Hardening does reduce the number of net successes.</p><p>If successful, the hardening of the target is lowered by the number of net successes plus software rating divided in half, rounded down.</p>",
          "skillKey": "Skill_EWarfare",
          "actionLabel": "E War",
          "gearFeature": "1",
          "bonusDice": "0",
          "diceMod": "0",
          "softwareSlot": 1,
          "poolKey_copy1": "Focus",
          "limitBonusSource": "Software Rating",
          "loopingFlag": "No"
        },
        "unique": false,
        "uniqueId": "RtvBoN5fIK9yC9mU"
      },
      "_id": "aXNhGtqTva4aIfjG",
      "effects": [],
      "sort": 0,
      "flags": {
        "custom-system-builder": {
          "version": "5.1.0"
        }
      },
      "_stats": {
        "compendiumSource": "Item.RtvBoN5fIK9yC9mU",
        "duplicateSource": null,
        "exportSource": null,
        "coreVersion": "13.351",
        "systemId": "custom-system-builder",
        "systemVersion": "5.1.0",
        "createdTime": 1769974593278,
        "modifiedTime": 1769974618571,
        "lastModifiedBy": "KoiB8oaGNkPdgzdM"
      },
      "ownership": {
        "default": 0
      }
    },
    {
      "name": "Hypnotic Projection",
      "type": "equippableItem",
      "folder": "rCTnl7myqTtxE5gl",
      "img": "modules/sinlesscsb/assets/icons/SR6/programs/SimShare.webp",
      "system": {
        "template": "lBNLLAeL3gcJs2RQ",
        "templateSystemUniqueVersion": 2509181623,
        "body": {
          "contents": [
            {
              "key": "",
              "colSpan": 1,
              "rowSpan": 1,
              "cssClass": "sinlesscsb-marker",
              "role": 0,
              "editRole": 0,
              "permission": 0,
              "tooltip": "",
              "visibilityFormula": "",
              "editableFormula": "",
              "escapeHTML": false,
              "type": "panel",
              "contents": [
                {
                  "key": "",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "panel",
                  "contents": [
                    {
                      "key": "gearFeature",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "medium",
                      "label": "Software Rating:",
                      "defaultValue": "1",
                      "allowDecimal": false,
                      "minVal": "1",
                      "maxVal": "6",
                      "allowRelative": false,
                      "showControls": true,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    },
                    {
                      "key": "bonusDice",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "medium",
                      "label": "bonusDice",
                      "defaultValue": "0",
                      "allowDecimal": false,
                      "minVal": "",
                      "maxVal": "",
                      "allowRelative": false,
                      "showControls": true,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    },
                    {
                      "key": "diceMod",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "(can spend from MCP Pool in roll dialogue using this)",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "medium",
                      "label": "diceMod ",
                      "defaultValue": "0",
                      "allowDecimal": false,
                      "minVal": "",
                      "maxVal": "",
                      "allowRelative": false,
                      "showControls": true,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    },
                    {
                      "key": "actionLabel",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "textField",
                      "size": "full-size",
                      "label": "actionLabel",
                      "defaultValue": "E War",
                      "charList": "",
                      "maxLength": null,
                      "autocomplete": ""
                    },
                    {
                      "key": "softwareSlot",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "0=inactive, 1=active",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "medium",
                      "label": "softwareSlot",
                      "defaultValue": "0",
                      "allowDecimal": false,
                      "minVal": "0",
                      "maxVal": "1",
                      "allowRelative": false,
                      "showControls": false,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    },
                    {
                      "key": "ioSoftware",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "textField",
                      "size": "medium",
                      "label": "I / O",
                      "defaultValue": "",
                      "charList": "",
                      "maxLength": null,
                      "autocomplete": ""
                    },
                    {
                      "key": "softwareCost",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "full-size",
                      "label": "Cost per rating",
                      "defaultValue": "",
                      "allowDecimal": false,
                      "minVal": "0",
                      "maxVal": "",
                      "allowRelative": false,
                      "showControls": true,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    },
                    {
                      "key": "softwareAlert",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "textField",
                      "size": "full-size",
                      "label": "Alert",
                      "defaultValue": "",
                      "charList": "",
                      "maxLength": null,
                      "autocomplete": ""
                    }
                  ],
                  "flow": "grid-2",
                  "align": "left",
                  "verticalAlign": "top",
                  "collapsible": false,
                  "defaultCollapsed": false,
                  "title": "",
                  "titleStyle": "default"
                }
              ],
              "flow": "vertical",
              "align": "left",
              "verticalAlign": "top",
              "collapsible": true,
              "defaultCollapsed": false,
              "title": "Roll Config",
              "titleStyle": "default"
            },
            {
              "key": "",
              "colSpan": 1,
              "rowSpan": 1,
              "cssClass": "",
              "role": 0,
              "editRole": 0,
              "permission": 0,
              "tooltip": "",
              "visibilityFormula": "",
              "editableFormula": "",
              "escapeHTML": false,
              "type": "panel",
              "contents": [
                {
                  "key": "programRulestext",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "textArea",
                  "size": "full-size",
                  "label": "",
                  "defaultValue": "",
                  "style": "sheet"
                }
              ],
              "flow": "vertical",
              "align": "left",
              "verticalAlign": "top",
              "collapsible": true,
              "defaultCollapsed": true,
              "title": "Software rules text",
              "titleStyle": "default"
            },
            {
              "key": "",
              "colSpan": 1,
              "rowSpan": 1,
              "cssClass": "",
              "role": 4,
              "editRole": 0,
              "permission": 0,
              "tooltip": "",
              "visibilityFormula": "",
              "editableFormula": "",
              "escapeHTML": false,
              "type": "panel",
              "contents": [
                {
                  "key": "skillKey",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "textField",
                  "size": "full-size",
                  "label": "skillKey",
                  "defaultValue": "Skill_EWarfare",
                  "charList": "",
                  "maxLength": null,
                  "autocomplete": ""
                },
                {
                  "key": "poolKey_copy1",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "select",
                  "size": "full-size",
                  "label": "poolKey",
                  "defaultValue": "Focus",
                  "selectedOptionType": "custom",
                  "options": [
                    {
                      "key": "Brawn",
                      "value": "Brawn"
                    },
                    {
                      "key": "Finesse",
                      "value": "Finesse"
                    },
                    {
                      "key": "Resolve",
                      "value": "Resolve"
                    },
                    {
                      "key": "Focus",
                      "value": "Focus"
                    }
                  ]
                },
                {
                  "key": "limitBonusSource",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "textField",
                  "size": "full-size",
                  "label": "limitBonusSource",
                  "defaultValue": "Software Rating",
                  "charList": "",
                  "maxLength": null,
                  "autocomplete": ""
                },
                {
                  "key": "loopingFlag",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "textField",
                  "size": "full-size",
                  "label": "loopingFlag",
                  "defaultValue": "No",
                  "charList": "",
                  "maxLength": null,
                  "autocomplete": ""
                }
              ],
              "flow": "vertical",
              "align": "left",
              "verticalAlign": "top",
              "collapsible": true,
              "defaultCollapsed": false,
              "title": "hidden",
              "titleStyle": "default"
            }
          ],
          "key": "custom_body",
          "type": "panel"
        },
        "display": {
          "width": 600,
          "height": 600,
          "fix_size": false,
          "pp_width": 64,
          "pp_height": 64
        },
        "header": {
          "contents": [
            {
              "key": "",
              "colSpan": 1,
              "rowSpan": 1,
              "cssClass": "",
              "role": 0,
              "editRole": 0,
              "permission": 0,
              "tooltip": "",
              "visibilityFormula": "",
              "editableFormula": "",
              "escapeHTML": false,
              "type": "panel",
              "contents": [
                {
                  "key": "",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "label",
                  "size": "full-size",
                  "icon": "code",
                  "value": "${actionLabel ? actionLabel : \"Use\"}$",
                  "prefix": "",
                  "suffix": "",
                  "rollMessage": "%{\n  // Prefer linkedEntity (inventory row) then entity (item sheet)\n  const doc = (typeof linkedEntity !== \"undefined\" && linkedEntity) ? linkedEntity\n            : (typeof entity !== \"undefined\" && entity) ? entity\n            : null;\n\n  const itemUuid = String(doc?.uuid ?? \"\").trim();\n\n  // Pull actor from safe sources only\n  const embeddedActorUuid =\n    (doc?.parent?.documentName === \"Actor\" && doc?.parent?.uuid) ? String(doc.parent.uuid) : \"\";\n\n  const scopeActorUuid =\n    (typeof actor !== \"undefined\" && actor?.documentName === \"Actor\" && actor?.uuid) ? String(actor.uuid) : \"\";\n\n  const controlledActorUuid = (() => {\n    const t = canvas?.tokens?.controlled?.[0];\n    return t?.actor?.uuid ? String(t.actor.uuid) : \"\";\n  })();\n\n  const targetedActorUuid = (() => {\n    const t = game.user?.targets ? Array.from(game.user.targets)[0] : null;\n    return t?.actor?.uuid ? String(t.actor.uuid) : \"\";\n  })();\n\n  const userCharUuid = game.user?.character?.uuid ? String(game.user.character.uuid) : \"\";\n\n  const actorUuid = String(\n    embeddedActorUuid ||\n    scopeActorUuid ||\n    controlledActorUuid ||\n    targetedActorUuid ||\n    userCharUuid ||\n    \"\"\n  ).trim();\n\n  if (!itemUuid) {\n    console.warn(\"SinlessCSB | rollItem: missing itemUuid\", { doc, linkedEntity: (typeof linkedEntity !== \"undefined\" ? linkedEntity : undefined), entity: (typeof entity !== \"undefined\" ? entity : undefined) });\n    ui.notifications?.warn?.(\"SinlessCSB: missing item context (itemUuid).\");\n    return \"\";\n  }\n\n  if (!actorUuid) {\n    console.warn(\"SinlessCSB | rollItem: missing actorUuid (control/target a token)\", {\n      itemUuid,\n      controlled: canvas?.tokens?.controlled?.length ?? 0,\n      targets: game.user?.targets?.size ?? 0\n    });\n    ui.notifications?.warn?.(\"SinlessCSB: No actor context. Control a token (click) or target one, then try again.\");\n    return \"\";\n  }\n\n  const api = game.modules.get(\"sinlesscsb\")?.api;\n  if (typeof api?.rollItem !== \"function\") {\n    console.warn(\"SinlessCSB | rollItem: API not available\", { apiKeys: Object.keys(api ?? {}) });\n    ui.notifications?.error?.(\"SinlessCSB: rollItem API not available (module not ready / not exposed).\");\n    return \"\";\n  }\n\n  console.log(\"SinlessCSB | rollItem (hardened)\", { itemUuid, actorUuid, itemName: doc?.name });\n  api.rollItem({ itemUuid, actorUuid });\n  return \"\";\n}%\n",
                  "altRollMessage": "",
                  "rollMessageToChat": false,
                  "altRollMessageToChat": false,
                  "style": "button"
                },
                {
                  "key": "",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "panel",
                  "contents": [],
                  "flow": "vertical",
                  "align": "center",
                  "verticalAlign": "top",
                  "collapsible": false,
                  "defaultCollapsed": false,
                  "title": "",
                  "titleStyle": "default"
                },
                {
                  "key": "",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "panel",
                  "contents": [
                    {
                      "key": "deckactionType",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "textField",
                      "size": "m-large",
                      "label": "Action Type:",
                      "defaultValue": "Complex Action",
                      "charList": "",
                      "maxLength": null,
                      "autocomplete": ""
                    },
                    {
                      "key": "actionSpecial",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "textField",
                      "size": "full-size",
                      "label": "Special:",
                      "defaultValue": "",
                      "charList": "",
                      "maxLength": null,
                      "autocomplete": ""
                    }
                  ],
                  "flow": "vertical",
                  "align": "right",
                  "verticalAlign": "top",
                  "collapsible": false,
                  "defaultCollapsed": false,
                  "title": "",
                  "titleStyle": "default"
                }
              ],
              "flow": "vertical",
              "align": "center",
              "verticalAlign": "top",
              "collapsible": false,
              "defaultCollapsed": false,
              "title": "",
              "titleStyle": "default"
            }
          ],
          "key": "custom_header",
          "type": "panel"
        },
        "hidden": [],
        "modifiers": [],
        "props": {
          "deckactionType": "Complex Action",
          "actionSpecial": "Network Access Node control required",
          "ioSoftware": "Yes",
          "softwareCost": "15000",
          "softwareAlert": "2x number of successes",
          "programRulestext": "<h2 style=\"font-family:'Bruno Ace', sans-serif; margin:0 0 0.5em 0;\">Hypnotic Projection</h2><p>This software creates a distracting and hypnotic colorful strobe display.</p><p>Targets may resist by rolling as many dice as they wish from their Focus pool, versus the decker's Computer (Electronic Warfare) + Hypnotic Projection rating test.</p><p>Any who fail to achieve more successes than the decker stand in a stupor, fascinated and unable to act. On their turn, they may take a complex action to attempt to resist and break free.</p><p>Any damage or someone jostling them with a simple action renders a target immunity to this effect.</p>",
          "skillKey": "Skill_EWarfare",
          "actionLabel": "E War",
          "gearFeature": "1",
          "bonusDice": "0",
          "diceMod": "0",
          "softwareSlot": 1,
          "poolKey_copy1": "Focus",
          "limitBonusSource": "Software Rating",
          "loopingFlag": "No"
        },
        "unique": false,
        "uniqueId": "Qbp5AmTBLPIWvHK0"
      },
      "_id": "ruOX6Am4ZpdnF3nX",
      "effects": [],
      "sort": 0,
      "flags": {
        "custom-system-builder": {
          "version": "5.1.0"
        }
      },
      "_stats": {
        "compendiumSource": "Item.Qbp5AmTBLPIWvHK0",
        "duplicateSource": null,
        "exportSource": null,
        "coreVersion": "13.351",
        "systemId": "custom-system-builder",
        "systemVersion": "5.1.0",
        "createdTime": 1769974599868,
        "modifiedTime": 1769974619618,
        "lastModifiedBy": "KoiB8oaGNkPdgzdM"
      },
      "ownership": {
        "default": 0
      }
    },
    {
      "name": "Encrypt File",
      "type": "equippableItem",
      "folder": "rCTnl7myqTtxE5gl",
      "img": "modules/sinlesscsb/assets/icons/SR6/programs/FileVault.webp",
      "system": {
        "template": "8CMq8JmyHbRCglOv",
        "templateSystemUniqueVersion": 3104837394,
        "body": {
          "contents": [
            {
              "key": "",
              "colSpan": 1,
              "rowSpan": 1,
              "cssClass": "sinlesscsb-marker",
              "role": 0,
              "editRole": 0,
              "permission": 0,
              "tooltip": "",
              "visibilityFormula": "",
              "editableFormula": "",
              "escapeHTML": false,
              "type": "panel",
              "contents": [
                {
                  "key": "",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "panel",
                  "contents": [
                    {
                      "key": "gearFeature",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "medium",
                      "label": "Software Rating:",
                      "defaultValue": "1",
                      "allowDecimal": false,
                      "minVal": "1",
                      "maxVal": "6",
                      "allowRelative": false,
                      "showControls": true,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    },
                    {
                      "key": "bonusDice",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "medium",
                      "label": "bonusDice",
                      "defaultValue": "0",
                      "allowDecimal": false,
                      "minVal": "",
                      "maxVal": "",
                      "allowRelative": false,
                      "showControls": true,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    },
                    {
                      "key": "diceMod",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "(can spend from MCP Pool in roll dialogue using this)",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "medium",
                      "label": "diceMod ",
                      "defaultValue": "0",
                      "allowDecimal": false,
                      "minVal": "",
                      "maxVal": "",
                      "allowRelative": false,
                      "showControls": true,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    },
                    {
                      "key": "actionLabel",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "textField",
                      "size": "full-size",
                      "label": "actionLabel",
                      "defaultValue": "Hack",
                      "charList": "",
                      "maxLength": null,
                      "autocomplete": ""
                    },
                    {
                      "key": "softwareSlot",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "0=inactive, 1=active",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "medium",
                      "label": "softwareSlot",
                      "defaultValue": "0",
                      "allowDecimal": false,
                      "minVal": "0",
                      "maxVal": "1",
                      "allowRelative": false,
                      "showControls": false,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    },
                    {
                      "key": "ioSoftware",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "textField",
                      "size": "medium",
                      "label": "I / O",
                      "defaultValue": "",
                      "charList": "",
                      "maxLength": null,
                      "autocomplete": ""
                    },
                    {
                      "key": "softwareCost",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "full-size",
                      "label": "Cost per rating",
                      "defaultValue": "",
                      "allowDecimal": false,
                      "minVal": "0",
                      "maxVal": "",
                      "allowRelative": false,
                      "showControls": true,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    },
                    {
                      "key": "softwareAlert",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "textField",
                      "size": "full-size",
                      "label": "Alert",
                      "defaultValue": "",
                      "charList": "",
                      "maxLength": null,
                      "autocomplete": ""
                    }
                  ],
                  "flow": "grid-2",
                  "align": "left",
                  "verticalAlign": "top",
                  "collapsible": false,
                  "defaultCollapsed": false,
                  "title": "",
                  "titleStyle": "default"
                }
              ],
              "flow": "vertical",
              "align": "left",
              "verticalAlign": "top",
              "collapsible": true,
              "defaultCollapsed": false,
              "title": "Roll Config",
              "titleStyle": "default"
            },
            {
              "key": "",
              "colSpan": 1,
              "rowSpan": 1,
              "cssClass": "",
              "role": 0,
              "editRole": 0,
              "permission": 0,
              "tooltip": "",
              "visibilityFormula": "",
              "editableFormula": "",
              "escapeHTML": false,
              "type": "panel",
              "contents": [
                {
                  "key": "programRulestext",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "textArea",
                  "size": "full-size",
                  "label": "",
                  "defaultValue": "",
                  "style": "sheet"
                }
              ],
              "flow": "vertical",
              "align": "left",
              "verticalAlign": "top",
              "collapsible": true,
              "defaultCollapsed": true,
              "title": "Software rules text",
              "titleStyle": "default"
            },
            {
              "key": "",
              "colSpan": 1,
              "rowSpan": 1,
              "cssClass": "",
              "role": 4,
              "editRole": 0,
              "permission": 0,
              "tooltip": "",
              "visibilityFormula": "",
              "editableFormula": "",
              "escapeHTML": false,
              "type": "panel",
              "contents": [
                {
                  "key": "skillKey",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "textField",
                  "size": "full-size",
                  "label": "skillKey",
                  "defaultValue": "Skill_Hacking",
                  "charList": "",
                  "maxLength": null,
                  "autocomplete": ""
                },
                {
                  "key": "poolKey_copy1",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "select",
                  "size": "full-size",
                  "label": "poolKey",
                  "defaultValue": "Focus",
                  "selectedOptionType": "custom",
                  "options": [
                    {
                      "key": "Brawn",
                      "value": "Brawn"
                    },
                    {
                      "key": "Finesse",
                      "value": "Finesse"
                    },
                    {
                      "key": "Resolve",
                      "value": "Resolve"
                    },
                    {
                      "key": "Focus",
                      "value": "Focus"
                    }
                  ]
                },
                {
                  "key": "limitBonusSource",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "textField",
                  "size": "full-size",
                  "label": "limitBonusSource",
                  "defaultValue": "Software Rating",
                  "charList": "",
                  "maxLength": null,
                  "autocomplete": ""
                },
                {
                  "key": "loopingFlag",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "textField",
                  "size": "full-size",
                  "label": "loopingFlag",
                  "defaultValue": "No",
                  "charList": "",
                  "maxLength": null,
                  "autocomplete": ""
                }
              ],
              "flow": "vertical",
              "align": "left",
              "verticalAlign": "top",
              "collapsible": true,
              "defaultCollapsed": false,
              "title": "hidden",
              "titleStyle": "default"
            }
          ],
          "key": "custom_body",
          "type": "panel"
        },
        "display": {
          "width": 600,
          "height": 600,
          "fix_size": false,
          "pp_width": 64,
          "pp_height": 64
        },
        "header": {
          "contents": [
            {
              "key": "",
              "colSpan": 1,
              "rowSpan": 1,
              "cssClass": "",
              "role": 0,
              "editRole": 0,
              "permission": 0,
              "tooltip": "",
              "visibilityFormula": "",
              "editableFormula": "",
              "escapeHTML": false,
              "type": "panel",
              "contents": [
                {
                  "key": "",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "label",
                  "size": "full-size",
                  "icon": "code",
                  "value": "${actionLabel ? actionLabel : \"Use\"}$",
                  "prefix": "",
                  "suffix": "",
                  "rollMessage": "%{\n  // Prefer linkedEntity (inventory row) then entity (item sheet)\n  const doc = (typeof linkedEntity !== \"undefined\" && linkedEntity) ? linkedEntity\n            : (typeof entity !== \"undefined\" && entity) ? entity\n            : null;\n\n  const itemUuid = String(doc?.uuid ?? \"\").trim();\n\n  // Pull actor from safe sources only\n  const embeddedActorUuid =\n    (doc?.parent?.documentName === \"Actor\" && doc?.parent?.uuid) ? String(doc.parent.uuid) : \"\";\n\n  const scopeActorUuid =\n    (typeof actor !== \"undefined\" && actor?.documentName === \"Actor\" && actor?.uuid) ? String(actor.uuid) : \"\";\n\n  const controlledActorUuid = (() => {\n    const t = canvas?.tokens?.controlled?.[0];\n    return t?.actor?.uuid ? String(t.actor.uuid) : \"\";\n  })();\n\n  const targetedActorUuid = (() => {\n    const t = game.user?.targets ? Array.from(game.user.targets)[0] : null;\n    return t?.actor?.uuid ? String(t.actor.uuid) : \"\";\n  })();\n\n  const userCharUuid = game.user?.character?.uuid ? String(game.user.character.uuid) : \"\";\n\n  const actorUuid = String(\n    embeddedActorUuid ||\n    scopeActorUuid ||\n    controlledActorUuid ||\n    targetedActorUuid ||\n    userCharUuid ||\n    \"\"\n  ).trim();\n\n  if (!itemUuid) {\n    console.warn(\"SinlessCSB | rollItem: missing itemUuid\", { doc, linkedEntity: (typeof linkedEntity !== \"undefined\" ? linkedEntity : undefined), entity: (typeof entity !== \"undefined\" ? entity : undefined) });\n    ui.notifications?.warn?.(\"SinlessCSB: missing item context (itemUuid).\");\n    return \"\";\n  }\n\n  if (!actorUuid) {\n    console.warn(\"SinlessCSB | rollItem: missing actorUuid (control/target a token)\", {\n      itemUuid,\n      controlled: canvas?.tokens?.controlled?.length ?? 0,\n      targets: game.user?.targets?.size ?? 0\n    });\n    ui.notifications?.warn?.(\"SinlessCSB: No actor context. Control a token (click) or target one, then try again.\");\n    return \"\";\n  }\n\n  const api = game.modules.get(\"sinlesscsb\")?.api;\n  if (typeof api?.rollItem !== \"function\") {\n    console.warn(\"SinlessCSB | rollItem: API not available\", { apiKeys: Object.keys(api ?? {}) });\n    ui.notifications?.error?.(\"SinlessCSB: rollItem API not available (module not ready / not exposed).\");\n    return \"\";\n  }\n\n  console.log(\"SinlessCSB | rollItem (hardened)\", { itemUuid, actorUuid, itemName: doc?.name });\n  api.rollItem({ itemUuid, actorUuid });\n  return \"\";\n}%\n",
                  "altRollMessage": "",
                  "rollMessageToChat": false,
                  "altRollMessageToChat": false,
                  "style": "button"
                },
                {
                  "key": "",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "panel",
                  "contents": [],
                  "flow": "vertical",
                  "align": "center",
                  "verticalAlign": "top",
                  "collapsible": false,
                  "defaultCollapsed": false,
                  "title": "",
                  "titleStyle": "default"
                },
                {
                  "key": "",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "panel",
                  "contents": [
                    {
                      "key": "deckactionType",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "textField",
                      "size": "m-large",
                      "label": "Action Type:",
                      "defaultValue": "Complex Action",
                      "charList": "",
                      "maxLength": null,
                      "autocomplete": ""
                    },
                    {
                      "key": "actionSpecial",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "textField",
                      "size": "full-size",
                      "label": "Special:",
                      "defaultValue": "",
                      "charList": "",
                      "maxLength": null,
                      "autocomplete": ""
                    }
                  ],
                  "flow": "vertical",
                  "align": "right",
                  "verticalAlign": "top",
                  "collapsible": false,
                  "defaultCollapsed": false,
                  "title": "",
                  "titleStyle": "default"
                }
              ],
              "flow": "vertical",
              "align": "center",
              "verticalAlign": "top",
              "collapsible": false,
              "defaultCollapsed": false,
              "title": "",
              "titleStyle": "default"
            }
          ],
          "key": "custom_header",
          "type": "panel"
        },
        "hidden": [],
        "modifiers": [],
        "props": {
          "deckactionType": "Complex Action",
          "actionSpecial": "",
          "ioSoftware": "No",
          "softwareCost": "1000",
          "softwareAlert": "3",
          "programRulestext": "<h2 style=\"font-family:'Bruno Ace', sans-serif; margin:0 0 0.5em 0;\">Encrypt File</h2><p>This software allows a decker to make a file harder to access.</p><p>The hacker makes a Computer (Hacking) + Encrypt File rating test, and the first three successes increase the file security rating by 2 up to 6 for the Crack Encryption program.</p><p>Additional successes are added as a penalty to the tests of anyone attempting to crack the encryption.</p><p>Encrypted programs can't be accessed, moved, used, or modified while encrypted. The person who encrypted the file can decrypt it for their own personal use without a test.</p>",
          "skillKey": "Skill_Hacking",
          "actionLabel": "Hack",
          "gearFeature": "1",
          "bonusDice": "0",
          "diceMod": "0",
          "softwareSlot": 1,
          "poolKey_copy1": "Focus",
          "limitBonusSource": "Software Rating",
          "loopingFlag": "No"
        },
        "unique": false,
        "uniqueId": "gtZmJ4A2HHiiCa3t"
      },
      "_id": "85D8jPZoErR4w5Mn",
      "effects": [],
      "sort": 0,
      "flags": {
        "custom-system-builder": {
          "version": "5.1.0"
        }
      },
      "_stats": {
        "compendiumSource": "Item.gtZmJ4A2HHiiCa3t",
        "duplicateSource": null,
        "exportSource": null,
        "coreVersion": "13.351",
        "systemId": "custom-system-builder",
        "systemVersion": "5.1.0",
        "createdTime": 1769974614428,
        "modifiedTime": 1769974644083,
        "lastModifiedBy": "KoiB8oaGNkPdgzdM"
      },
      "ownership": {
        "default": 0
      }
    },
    {
      "name": "Crack Encryption",
      "type": "equippableItem",
      "folder": "rCTnl7myqTtxE5gl",
      "img": "modules/sinlesscsb/assets/icons/SR6/programs/Decryption.webp",
      "system": {
        "template": "8CMq8JmyHbRCglOv",
        "templateSystemUniqueVersion": 3104837394,
        "body": {
          "contents": [
            {
              "key": "",
              "colSpan": 1,
              "rowSpan": 1,
              "cssClass": "sinlesscsb-marker",
              "role": 0,
              "editRole": 0,
              "permission": 0,
              "tooltip": "",
              "visibilityFormula": "",
              "editableFormula": "",
              "escapeHTML": false,
              "type": "panel",
              "contents": [
                {
                  "key": "",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "panel",
                  "contents": [
                    {
                      "key": "gearFeature",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "medium",
                      "label": "Software Rating:",
                      "defaultValue": "1",
                      "allowDecimal": false,
                      "minVal": "1",
                      "maxVal": "6",
                      "allowRelative": false,
                      "showControls": true,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    },
                    {
                      "key": "bonusDice",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "medium",
                      "label": "bonusDice",
                      "defaultValue": "0",
                      "allowDecimal": false,
                      "minVal": "",
                      "maxVal": "",
                      "allowRelative": false,
                      "showControls": true,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    },
                    {
                      "key": "diceMod",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "(can spend from MCP Pool in roll dialogue using this)",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "medium",
                      "label": "diceMod ",
                      "defaultValue": "0",
                      "allowDecimal": false,
                      "minVal": "",
                      "maxVal": "",
                      "allowRelative": false,
                      "showControls": true,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    },
                    {
                      "key": "actionLabel",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "textField",
                      "size": "full-size",
                      "label": "actionLabel",
                      "defaultValue": "Hack",
                      "charList": "",
                      "maxLength": null,
                      "autocomplete": ""
                    },
                    {
                      "key": "softwareSlot",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "0=inactive, 1=active",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "medium",
                      "label": "softwareSlot",
                      "defaultValue": "0",
                      "allowDecimal": false,
                      "minVal": "0",
                      "maxVal": "1",
                      "allowRelative": false,
                      "showControls": false,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    },
                    {
                      "key": "ioSoftware",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "textField",
                      "size": "medium",
                      "label": "I / O",
                      "defaultValue": "",
                      "charList": "",
                      "maxLength": null,
                      "autocomplete": ""
                    },
                    {
                      "key": "softwareCost",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "full-size",
                      "label": "Cost per rating",
                      "defaultValue": "",
                      "allowDecimal": false,
                      "minVal": "0",
                      "maxVal": "",
                      "allowRelative": false,
                      "showControls": true,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    },
                    {
                      "key": "softwareAlert",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "textField",
                      "size": "full-size",
                      "label": "Alert",
                      "defaultValue": "",
                      "charList": "",
                      "maxLength": null,
                      "autocomplete": ""
                    }
                  ],
                  "flow": "grid-2",
                  "align": "left",
                  "verticalAlign": "top",
                  "collapsible": false,
                  "defaultCollapsed": false,
                  "title": "",
                  "titleStyle": "default"
                }
              ],
              "flow": "vertical",
              "align": "left",
              "verticalAlign": "top",
              "collapsible": true,
              "defaultCollapsed": false,
              "title": "Roll Config",
              "titleStyle": "default"
            },
            {
              "key": "",
              "colSpan": 1,
              "rowSpan": 1,
              "cssClass": "",
              "role": 0,
              "editRole": 0,
              "permission": 0,
              "tooltip": "",
              "visibilityFormula": "",
              "editableFormula": "",
              "escapeHTML": false,
              "type": "panel",
              "contents": [
                {
                  "key": "programRulestext",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "textArea",
                  "size": "full-size",
                  "label": "",
                  "defaultValue": "",
                  "style": "sheet"
                }
              ],
              "flow": "vertical",
              "align": "left",
              "verticalAlign": "top",
              "collapsible": true,
              "defaultCollapsed": true,
              "title": "Software rules text",
              "titleStyle": "default"
            },
            {
              "key": "",
              "colSpan": 1,
              "rowSpan": 1,
              "cssClass": "",
              "role": 4,
              "editRole": 0,
              "permission": 0,
              "tooltip": "",
              "visibilityFormula": "",
              "editableFormula": "",
              "escapeHTML": false,
              "type": "panel",
              "contents": [
                {
                  "key": "skillKey",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "textField",
                  "size": "full-size",
                  "label": "skillKey",
                  "defaultValue": "Skill_Hacking",
                  "charList": "",
                  "maxLength": null,
                  "autocomplete": ""
                },
                {
                  "key": "poolKey_copy1",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "select",
                  "size": "full-size",
                  "label": "poolKey",
                  "defaultValue": "Focus",
                  "selectedOptionType": "custom",
                  "options": [
                    {
                      "key": "Brawn",
                      "value": "Brawn"
                    },
                    {
                      "key": "Finesse",
                      "value": "Finesse"
                    },
                    {
                      "key": "Resolve",
                      "value": "Resolve"
                    },
                    {
                      "key": "Focus",
                      "value": "Focus"
                    }
                  ]
                },
                {
                  "key": "limitBonusSource",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "textField",
                  "size": "full-size",
                  "label": "limitBonusSource",
                  "defaultValue": "Software Rating",
                  "charList": "",
                  "maxLength": null,
                  "autocomplete": ""
                },
                {
                  "key": "loopingFlag",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "textField",
                  "size": "full-size",
                  "label": "loopingFlag",
                  "defaultValue": "No",
                  "charList": "",
                  "maxLength": null,
                  "autocomplete": ""
                }
              ],
              "flow": "vertical",
              "align": "left",
              "verticalAlign": "top",
              "collapsible": true,
              "defaultCollapsed": false,
              "title": "hidden",
              "titleStyle": "default"
            }
          ],
          "key": "custom_body",
          "type": "panel"
        },
        "display": {
          "width": 600,
          "height": 600,
          "fix_size": false,
          "pp_width": 64,
          "pp_height": 64
        },
        "header": {
          "contents": [
            {
              "key": "",
              "colSpan": 1,
              "rowSpan": 1,
              "cssClass": "",
              "role": 0,
              "editRole": 0,
              "permission": 0,
              "tooltip": "",
              "visibilityFormula": "",
              "editableFormula": "",
              "escapeHTML": false,
              "type": "panel",
              "contents": [
                {
                  "key": "",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "label",
                  "size": "full-size",
                  "icon": "code",
                  "value": "${actionLabel ? actionLabel : \"Use\"}$",
                  "prefix": "",
                  "suffix": "",
                  "rollMessage": "%{\n  // Prefer linkedEntity (inventory row) then entity (item sheet)\n  const doc = (typeof linkedEntity !== \"undefined\" && linkedEntity) ? linkedEntity\n            : (typeof entity !== \"undefined\" && entity) ? entity\n            : null;\n\n  const itemUuid = String(doc?.uuid ?? \"\").trim();\n\n  // Pull actor from safe sources only\n  const embeddedActorUuid =\n    (doc?.parent?.documentName === \"Actor\" && doc?.parent?.uuid) ? String(doc.parent.uuid) : \"\";\n\n  const scopeActorUuid =\n    (typeof actor !== \"undefined\" && actor?.documentName === \"Actor\" && actor?.uuid) ? String(actor.uuid) : \"\";\n\n  const controlledActorUuid = (() => {\n    const t = canvas?.tokens?.controlled?.[0];\n    return t?.actor?.uuid ? String(t.actor.uuid) : \"\";\n  })();\n\n  const targetedActorUuid = (() => {\n    const t = game.user?.targets ? Array.from(game.user.targets)[0] : null;\n    return t?.actor?.uuid ? String(t.actor.uuid) : \"\";\n  })();\n\n  const userCharUuid = game.user?.character?.uuid ? String(game.user.character.uuid) : \"\";\n\n  const actorUuid = String(\n    embeddedActorUuid ||\n    scopeActorUuid ||\n    controlledActorUuid ||\n    targetedActorUuid ||\n    userCharUuid ||\n    \"\"\n  ).trim();\n\n  if (!itemUuid) {\n    console.warn(\"SinlessCSB | rollItem: missing itemUuid\", { doc, linkedEntity: (typeof linkedEntity !== \"undefined\" ? linkedEntity : undefined), entity: (typeof entity !== \"undefined\" ? entity : undefined) });\n    ui.notifications?.warn?.(\"SinlessCSB: missing item context (itemUuid).\");\n    return \"\";\n  }\n\n  if (!actorUuid) {\n    console.warn(\"SinlessCSB | rollItem: missing actorUuid (control/target a token)\", {\n      itemUuid,\n      controlled: canvas?.tokens?.controlled?.length ?? 0,\n      targets: game.user?.targets?.size ?? 0\n    });\n    ui.notifications?.warn?.(\"SinlessCSB: No actor context. Control a token (click) or target one, then try again.\");\n    return \"\";\n  }\n\n  const api = game.modules.get(\"sinlesscsb\")?.api;\n  if (typeof api?.rollItem !== \"function\") {\n    console.warn(\"SinlessCSB | rollItem: API not available\", { apiKeys: Object.keys(api ?? {}) });\n    ui.notifications?.error?.(\"SinlessCSB: rollItem API not available (module not ready / not exposed).\");\n    return \"\";\n  }\n\n  console.log(\"SinlessCSB | rollItem (hardened)\", { itemUuid, actorUuid, itemName: doc?.name });\n  api.rollItem({ itemUuid, actorUuid });\n  return \"\";\n}%\n",
                  "altRollMessage": "",
                  "rollMessageToChat": false,
                  "altRollMessageToChat": false,
                  "style": "button"
                },
                {
                  "key": "",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "panel",
                  "contents": [],
                  "flow": "vertical",
                  "align": "center",
                  "verticalAlign": "top",
                  "collapsible": false,
                  "defaultCollapsed": false,
                  "title": "",
                  "titleStyle": "default"
                },
                {
                  "key": "",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "panel",
                  "contents": [
                    {
                      "key": "deckactionType",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "textField",
                      "size": "m-large",
                      "label": "Action Type:",
                      "defaultValue": "Complex Action",
                      "charList": "",
                      "maxLength": null,
                      "autocomplete": ""
                    },
                    {
                      "key": "actionSpecial",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "textField",
                      "size": "full-size",
                      "label": "Special:",
                      "defaultValue": "",
                      "charList": "",
                      "maxLength": null,
                      "autocomplete": ""
                    }
                  ],
                  "flow": "vertical",
                  "align": "right",
                  "verticalAlign": "top",
                  "collapsible": false,
                  "defaultCollapsed": false,
                  "title": "",
                  "titleStyle": "default"
                }
              ],
              "flow": "vertical",
              "align": "center",
              "verticalAlign": "top",
              "collapsible": false,
              "defaultCollapsed": false,
              "title": "",
              "titleStyle": "default"
            }
          ],
          "key": "custom_header",
          "type": "panel"
        },
        "hidden": [],
        "modifiers": [],
        "props": {
          "deckactionType": "Complex Action",
          "actionSpecial": "",
          "ioSoftware": "Yes",
          "softwareCost": "2500",
          "softwareAlert": "file security rating every round.",
          "programRulestext": "<h2 style=\"font-family:'Bruno Ace', sans-serif; margin:0 0 0.5em 0;\">Crack Encryption</h2><p>This software allows you to access encrypted and secured files.</p><p>You need to get a number of successes on a Computer (Hacking) + Crack Encryption rating test equal to six times the file security rating in order to access the file.</p><p>Once you have access, you may copy, control, delete, or take any other action you wish with the file.</p><p>File Security rating varies, from 1 for a public library site file to 6 for a classified military document. More advanced encryption reduces the number of dice the decker can use on a Crack Encryption.</p><p>Crack Encryption loads into the I/O, so you can continue to make this test until all the successes necessary to access the file are acquired.</p>",
          "skillKey": "Skill_Hacking",
          "actionLabel": "Hack",
          "gearFeature": "1",
          "bonusDice": "0",
          "diceMod": "0",
          "softwareSlot": 1,
          "poolKey_copy1": "Focus",
          "limitBonusSource": "Software Rating",
          "loopingFlag": "No"
        },
        "unique": false,
        "uniqueId": "K68bkQAH3YKDUtXO"
      },
      "_id": "4Oar0S95tYVvaKC1",
      "effects": [],
      "sort": 0,
      "flags": {
        "custom-system-builder": {
          "version": "5.1.0"
        }
      },
      "_stats": {
        "compendiumSource": "Item.K68bkQAH3YKDUtXO",
        "duplicateSource": null,
        "exportSource": null,
        "coreVersion": "13.351",
        "systemId": "custom-system-builder",
        "systemVersion": "5.1.0",
        "createdTime": 1769974616445,
        "modifiedTime": 1769983688807,
        "lastModifiedBy": "KoiB8oaGNkPdgzdM"
      },
      "ownership": {
        "default": 0
      }
    },
    {
      "name": "Vent Gas",
      "type": "equippableItem",
      "folder": "rCTnl7myqTtxE5gl",
      "img": "modules/sinlesscsb/assets/icons/SR6/status/cover.svg",
      "system": {
        "template": "8CMq8JmyHbRCglOv",
        "templateSystemUniqueVersion": 3104837394,
        "body": {
          "contents": [
            {
              "key": "",
              "colSpan": 1,
              "rowSpan": 1,
              "cssClass": "sinlesscsb-marker",
              "role": 0,
              "editRole": 0,
              "permission": 0,
              "tooltip": "",
              "visibilityFormula": "",
              "editableFormula": "",
              "escapeHTML": false,
              "type": "panel",
              "contents": [
                {
                  "key": "",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "panel",
                  "contents": [
                    {
                      "key": "gearFeature",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "medium",
                      "label": "Software Rating:",
                      "defaultValue": "1",
                      "allowDecimal": false,
                      "minVal": "1",
                      "maxVal": "6",
                      "allowRelative": false,
                      "showControls": true,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    },
                    {
                      "key": "bonusDice",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "medium",
                      "label": "bonusDice",
                      "defaultValue": "0",
                      "allowDecimal": false,
                      "minVal": "",
                      "maxVal": "",
                      "allowRelative": false,
                      "showControls": true,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    },
                    {
                      "key": "diceMod",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "(can spend from MCP Pool in roll dialogue using this)",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "medium",
                      "label": "diceMod ",
                      "defaultValue": "0",
                      "allowDecimal": false,
                      "minVal": "",
                      "maxVal": "",
                      "allowRelative": false,
                      "showControls": true,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    },
                    {
                      "key": "actionLabel",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "textField",
                      "size": "full-size",
                      "label": "actionLabel",
                      "defaultValue": "Hack",
                      "charList": "",
                      "maxLength": null,
                      "autocomplete": ""
                    },
                    {
                      "key": "softwareSlot",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "0=inactive, 1=active",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "medium",
                      "label": "softwareSlot",
                      "defaultValue": "0",
                      "allowDecimal": false,
                      "minVal": "0",
                      "maxVal": "1",
                      "allowRelative": false,
                      "showControls": false,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    },
                    {
                      "key": "ioSoftware",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "textField",
                      "size": "medium",
                      "label": "I / O",
                      "defaultValue": "",
                      "charList": "",
                      "maxLength": null,
                      "autocomplete": ""
                    },
                    {
                      "key": "softwareCost",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "full-size",
                      "label": "Cost per rating",
                      "defaultValue": "",
                      "allowDecimal": false,
                      "minVal": "0",
                      "maxVal": "",
                      "allowRelative": false,
                      "showControls": true,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    },
                    {
                      "key": "softwareAlert",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "textField",
                      "size": "full-size",
                      "label": "Alert",
                      "defaultValue": "",
                      "charList": "",
                      "maxLength": null,
                      "autocomplete": ""
                    }
                  ],
                  "flow": "grid-2",
                  "align": "left",
                  "verticalAlign": "top",
                  "collapsible": false,
                  "defaultCollapsed": false,
                  "title": "",
                  "titleStyle": "default"
                }
              ],
              "flow": "vertical",
              "align": "left",
              "verticalAlign": "top",
              "collapsible": true,
              "defaultCollapsed": false,
              "title": "Roll Config",
              "titleStyle": "default"
            },
            {
              "key": "",
              "colSpan": 1,
              "rowSpan": 1,
              "cssClass": "",
              "role": 0,
              "editRole": 0,
              "permission": 0,
              "tooltip": "",
              "visibilityFormula": "",
              "editableFormula": "",
              "escapeHTML": false,
              "type": "panel",
              "contents": [
                {
                  "key": "programRulestext",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "textArea",
                  "size": "full-size",
                  "label": "",
                  "defaultValue": "",
                  "style": "sheet"
                }
              ],
              "flow": "vertical",
              "align": "left",
              "verticalAlign": "top",
              "collapsible": true,
              "defaultCollapsed": true,
              "title": "Software rules text",
              "titleStyle": "default"
            },
            {
              "key": "",
              "colSpan": 1,
              "rowSpan": 1,
              "cssClass": "",
              "role": 4,
              "editRole": 0,
              "permission": 0,
              "tooltip": "",
              "visibilityFormula": "",
              "editableFormula": "",
              "escapeHTML": false,
              "type": "panel",
              "contents": [
                {
                  "key": "skillKey",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "textField",
                  "size": "full-size",
                  "label": "skillKey",
                  "defaultValue": "Skill_Hacking",
                  "charList": "",
                  "maxLength": null,
                  "autocomplete": ""
                },
                {
                  "key": "poolKey_copy1",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "select",
                  "size": "full-size",
                  "label": "poolKey",
                  "defaultValue": "Focus",
                  "selectedOptionType": "custom",
                  "options": [
                    {
                      "key": "Brawn",
                      "value": "Brawn"
                    },
                    {
                      "key": "Finesse",
                      "value": "Finesse"
                    },
                    {
                      "key": "Resolve",
                      "value": "Resolve"
                    },
                    {
                      "key": "Focus",
                      "value": "Focus"
                    }
                  ]
                },
                {
                  "key": "limitBonusSource",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "textField",
                  "size": "full-size",
                  "label": "limitBonusSource",
                  "defaultValue": "Software Rating",
                  "charList": "",
                  "maxLength": null,
                  "autocomplete": ""
                },
                {
                  "key": "loopingFlag",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "textField",
                  "size": "full-size",
                  "label": "loopingFlag",
                  "defaultValue": "No",
                  "charList": "",
                  "maxLength": null,
                  "autocomplete": ""
                }
              ],
              "flow": "vertical",
              "align": "left",
              "verticalAlign": "top",
              "collapsible": true,
              "defaultCollapsed": false,
              "title": "hidden",
              "titleStyle": "default"
            }
          ],
          "key": "custom_body",
          "type": "panel"
        },
        "display": {
          "width": 600,
          "height": 600,
          "fix_size": false,
          "pp_width": 64,
          "pp_height": 64
        },
        "header": {
          "contents": [
            {
              "key": "",
              "colSpan": 1,
              "rowSpan": 1,
              "cssClass": "",
              "role": 0,
              "editRole": 0,
              "permission": 0,
              "tooltip": "",
              "visibilityFormula": "",
              "editableFormula": "",
              "escapeHTML": false,
              "type": "panel",
              "contents": [
                {
                  "key": "",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "label",
                  "size": "full-size",
                  "icon": "code",
                  "value": "${actionLabel ? actionLabel : \"Use\"}$",
                  "prefix": "",
                  "suffix": "",
                  "rollMessage": "%{\n  // Prefer linkedEntity (inventory row) then entity (item sheet)\n  const doc = (typeof linkedEntity !== \"undefined\" && linkedEntity) ? linkedEntity\n            : (typeof entity !== \"undefined\" && entity) ? entity\n            : null;\n\n  const itemUuid = String(doc?.uuid ?? \"\").trim();\n\n  // Pull actor from safe sources only\n  const embeddedActorUuid =\n    (doc?.parent?.documentName === \"Actor\" && doc?.parent?.uuid) ? String(doc.parent.uuid) : \"\";\n\n  const scopeActorUuid =\n    (typeof actor !== \"undefined\" && actor?.documentName === \"Actor\" && actor?.uuid) ? String(actor.uuid) : \"\";\n\n  const controlledActorUuid = (() => {\n    const t = canvas?.tokens?.controlled?.[0];\n    return t?.actor?.uuid ? String(t.actor.uuid) : \"\";\n  })();\n\n  const targetedActorUuid = (() => {\n    const t = game.user?.targets ? Array.from(game.user.targets)[0] : null;\n    return t?.actor?.uuid ? String(t.actor.uuid) : \"\";\n  })();\n\n  const userCharUuid = game.user?.character?.uuid ? String(game.user.character.uuid) : \"\";\n\n  const actorUuid = String(\n    embeddedActorUuid ||\n    scopeActorUuid ||\n    controlledActorUuid ||\n    targetedActorUuid ||\n    userCharUuid ||\n    \"\"\n  ).trim();\n\n  if (!itemUuid) {\n    console.warn(\"SinlessCSB | rollItem: missing itemUuid\", { doc, linkedEntity: (typeof linkedEntity !== \"undefined\" ? linkedEntity : undefined), entity: (typeof entity !== \"undefined\" ? entity : undefined) });\n    ui.notifications?.warn?.(\"SinlessCSB: missing item context (itemUuid).\");\n    return \"\";\n  }\n\n  if (!actorUuid) {\n    console.warn(\"SinlessCSB | rollItem: missing actorUuid (control/target a token)\", {\n      itemUuid,\n      controlled: canvas?.tokens?.controlled?.length ?? 0,\n      targets: game.user?.targets?.size ?? 0\n    });\n    ui.notifications?.warn?.(\"SinlessCSB: No actor context. Control a token (click) or target one, then try again.\");\n    return \"\";\n  }\n\n  const api = game.modules.get(\"sinlesscsb\")?.api;\n  if (typeof api?.rollItem !== \"function\") {\n    console.warn(\"SinlessCSB | rollItem: API not available\", { apiKeys: Object.keys(api ?? {}) });\n    ui.notifications?.error?.(\"SinlessCSB: rollItem API not available (module not ready / not exposed).\");\n    return \"\";\n  }\n\n  console.log(\"SinlessCSB | rollItem (hardened)\", { itemUuid, actorUuid, itemName: doc?.name });\n  api.rollItem({ itemUuid, actorUuid });\n  return \"\";\n}%\n",
                  "altRollMessage": "",
                  "rollMessageToChat": false,
                  "altRollMessageToChat": false,
                  "style": "button"
                },
                {
                  "key": "",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "panel",
                  "contents": [],
                  "flow": "vertical",
                  "align": "center",
                  "verticalAlign": "top",
                  "collapsible": false,
                  "defaultCollapsed": false,
                  "title": "",
                  "titleStyle": "default"
                },
                {
                  "key": "",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "panel",
                  "contents": [
                    {
                      "key": "deckactionType",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "textField",
                      "size": "m-large",
                      "label": "Action Type:",
                      "defaultValue": "Complex Action",
                      "charList": "",
                      "maxLength": null,
                      "autocomplete": ""
                    },
                    {
                      "key": "actionSpecial",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "textField",
                      "size": "full-size",
                      "label": "Special:",
                      "defaultValue": "",
                      "charList": "",
                      "maxLength": null,
                      "autocomplete": ""
                    }
                  ],
                  "flow": "vertical",
                  "align": "right",
                  "verticalAlign": "top",
                  "collapsible": false,
                  "defaultCollapsed": false,
                  "title": "",
                  "titleStyle": "default"
                }
              ],
              "flow": "vertical",
              "align": "center",
              "verticalAlign": "top",
              "collapsible": false,
              "defaultCollapsed": false,
              "title": "",
              "titleStyle": "default"
            }
          ],
          "key": "custom_header",
          "type": "panel"
        },
        "hidden": [],
        "modifiers": [],
        "props": {
          "deckactionType": "Complex Action",
          "actionSpecial": "Network Access Node control required",
          "ioSoftware": "No",
          "softwareCost": "3000",
          "softwareAlert": "3",
          "programRulestext": "<h2 style=\"font-family:'Bruno Ace', sans-serif; margin:0 0 0.5em 0;\">Vent Gas</h2><p>This allows the decker to access central temperature and climate control to vent gas and mist.</p><p>The decker can choose one 2 m (1\") square per success and fill it with an opaque fog or mist. This obscures vision through the barrier but not movement. It provides total cover.</p>",
          "skillKey": "Skill_Hacking",
          "actionLabel": "Hack",
          "gearFeature": "1",
          "bonusDice": "0",
          "diceMod": "0",
          "softwareSlot": 0,
          "poolKey_copy1": "Focus",
          "limitBonusSource": "Software Rating",
          "loopingFlag": "No"
        },
        "unique": false,
        "uniqueId": "vvfsVWv2MAqEncOz"
      },
      "_id": "RHBhMKyVszSoQDtU",
      "effects": [],
      "sort": 0,
      "flags": {
        "custom-system-builder": {
          "version": "5.1.0"
        }
      },
      "_stats": {
        "compendiumSource": "Item.vvfsVWv2MAqEncOz",
        "duplicateSource": null,
        "exportSource": null,
        "coreVersion": "13.351",
        "systemId": "custom-system-builder",
        "systemVersion": "5.1.0",
        "createdTime": 1769974623669,
        "modifiedTime": 1769982037019,
        "lastModifiedBy": "KoiB8oaGNkPdgzdM"
      },
      "ownership": {
        "default": 0
      }
    },
    {
      "name": "De-Rez",
      "type": "equippableItem",
      "folder": "rCTnl7myqTtxE5gl",
      "img": "modules/sinlesscsb/assets/icons/SR6/programs/CrashAndBurn.webp",
      "system": {
        "template": "lBNLLAeL3gcJs2RQ",
        "templateSystemUniqueVersion": 2509181623,
        "body": {
          "contents": [
            {
              "key": "",
              "colSpan": 1,
              "rowSpan": 1,
              "cssClass": "sinlesscsb-marker",
              "role": 0,
              "editRole": 0,
              "permission": 0,
              "tooltip": "",
              "visibilityFormula": "",
              "editableFormula": "",
              "escapeHTML": false,
              "type": "panel",
              "contents": [
                {
                  "key": "",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "panel",
                  "contents": [
                    {
                      "key": "gearFeature",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "medium",
                      "label": "Software Rating:",
                      "defaultValue": "1",
                      "allowDecimal": false,
                      "minVal": "1",
                      "maxVal": "6",
                      "allowRelative": false,
                      "showControls": true,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    },
                    {
                      "key": "bonusDice",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "medium",
                      "label": "bonusDice",
                      "defaultValue": "0",
                      "allowDecimal": false,
                      "minVal": "",
                      "maxVal": "",
                      "allowRelative": false,
                      "showControls": true,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    },
                    {
                      "key": "diceMod",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "(can spend from MCP Pool in roll dialogue using this)",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "medium",
                      "label": "diceMod ",
                      "defaultValue": "0",
                      "allowDecimal": false,
                      "minVal": "",
                      "maxVal": "",
                      "allowRelative": false,
                      "showControls": true,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    },
                    {
                      "key": "actionLabel",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "textField",
                      "size": "full-size",
                      "label": "actionLabel",
                      "defaultValue": "E War",
                      "charList": "",
                      "maxLength": null,
                      "autocomplete": ""
                    },
                    {
                      "key": "softwareSlot",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "0=inactive, 1=active",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "medium",
                      "label": "softwareSlot",
                      "defaultValue": "0",
                      "allowDecimal": false,
                      "minVal": "0",
                      "maxVal": "1",
                      "allowRelative": false,
                      "showControls": false,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    },
                    {
                      "key": "ioSoftware",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "textField",
                      "size": "medium",
                      "label": "I / O",
                      "defaultValue": "",
                      "charList": "",
                      "maxLength": null,
                      "autocomplete": ""
                    },
                    {
                      "key": "softwareCost",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "full-size",
                      "label": "Cost per rating",
                      "defaultValue": "",
                      "allowDecimal": false,
                      "minVal": "0",
                      "maxVal": "",
                      "allowRelative": false,
                      "showControls": true,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    },
                    {
                      "key": "softwareAlert",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "textField",
                      "size": "full-size",
                      "label": "Alert",
                      "defaultValue": "",
                      "charList": "",
                      "maxLength": null,
                      "autocomplete": ""
                    }
                  ],
                  "flow": "grid-2",
                  "align": "left",
                  "verticalAlign": "top",
                  "collapsible": false,
                  "defaultCollapsed": false,
                  "title": "",
                  "titleStyle": "default"
                }
              ],
              "flow": "vertical",
              "align": "left",
              "verticalAlign": "top",
              "collapsible": true,
              "defaultCollapsed": false,
              "title": "Roll Config",
              "titleStyle": "default"
            },
            {
              "key": "",
              "colSpan": 1,
              "rowSpan": 1,
              "cssClass": "",
              "role": 0,
              "editRole": 0,
              "permission": 0,
              "tooltip": "",
              "visibilityFormula": "",
              "editableFormula": "",
              "escapeHTML": false,
              "type": "panel",
              "contents": [
                {
                  "key": "programRulestext",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "textArea",
                  "size": "full-size",
                  "label": "",
                  "defaultValue": "",
                  "style": "sheet"
                }
              ],
              "flow": "vertical",
              "align": "left",
              "verticalAlign": "top",
              "collapsible": true,
              "defaultCollapsed": true,
              "title": "Software rules text",
              "titleStyle": "default"
            },
            {
              "key": "",
              "colSpan": 1,
              "rowSpan": 1,
              "cssClass": "",
              "role": 4,
              "editRole": 0,
              "permission": 0,
              "tooltip": "",
              "visibilityFormula": "",
              "editableFormula": "",
              "escapeHTML": false,
              "type": "panel",
              "contents": [
                {
                  "key": "skillKey",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "textField",
                  "size": "full-size",
                  "label": "skillKey",
                  "defaultValue": "Skill_EWarfare",
                  "charList": "",
                  "maxLength": null,
                  "autocomplete": ""
                },
                {
                  "key": "poolKey_copy1",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "select",
                  "size": "full-size",
                  "label": "poolKey",
                  "defaultValue": "Focus",
                  "selectedOptionType": "custom",
                  "options": [
                    {
                      "key": "Brawn",
                      "value": "Brawn"
                    },
                    {
                      "key": "Finesse",
                      "value": "Finesse"
                    },
                    {
                      "key": "Resolve",
                      "value": "Resolve"
                    },
                    {
                      "key": "Focus",
                      "value": "Focus"
                    }
                  ]
                },
                {
                  "key": "limitBonusSource",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "textField",
                  "size": "full-size",
                  "label": "limitBonusSource",
                  "defaultValue": "Software Rating",
                  "charList": "",
                  "maxLength": null,
                  "autocomplete": ""
                },
                {
                  "key": "loopingFlag",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "textField",
                  "size": "full-size",
                  "label": "loopingFlag",
                  "defaultValue": "No",
                  "charList": "",
                  "maxLength": null,
                  "autocomplete": ""
                }
              ],
              "flow": "vertical",
              "align": "left",
              "verticalAlign": "top",
              "collapsible": true,
              "defaultCollapsed": false,
              "title": "hidden",
              "titleStyle": "default"
            }
          ],
          "key": "custom_body",
          "type": "panel"
        },
        "display": {
          "width": 600,
          "height": 600,
          "fix_size": false,
          "pp_width": 64,
          "pp_height": 64
        },
        "header": {
          "contents": [
            {
              "key": "",
              "colSpan": 1,
              "rowSpan": 1,
              "cssClass": "",
              "role": 0,
              "editRole": 0,
              "permission": 0,
              "tooltip": "",
              "visibilityFormula": "",
              "editableFormula": "",
              "escapeHTML": false,
              "type": "panel",
              "contents": [
                {
                  "key": "",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "label",
                  "size": "full-size",
                  "icon": "code",
                  "value": "${actionLabel ? actionLabel : \"Use\"}$",
                  "prefix": "",
                  "suffix": "",
                  "rollMessage": "%{\n  // Prefer linkedEntity (inventory row) then entity (item sheet)\n  const doc = (typeof linkedEntity !== \"undefined\" && linkedEntity) ? linkedEntity\n            : (typeof entity !== \"undefined\" && entity) ? entity\n            : null;\n\n  const itemUuid = String(doc?.uuid ?? \"\").trim();\n\n  // Pull actor from safe sources only\n  const embeddedActorUuid =\n    (doc?.parent?.documentName === \"Actor\" && doc?.parent?.uuid) ? String(doc.parent.uuid) : \"\";\n\n  const scopeActorUuid =\n    (typeof actor !== \"undefined\" && actor?.documentName === \"Actor\" && actor?.uuid) ? String(actor.uuid) : \"\";\n\n  const controlledActorUuid = (() => {\n    const t = canvas?.tokens?.controlled?.[0];\n    return t?.actor?.uuid ? String(t.actor.uuid) : \"\";\n  })();\n\n  const targetedActorUuid = (() => {\n    const t = game.user?.targets ? Array.from(game.user.targets)[0] : null;\n    return t?.actor?.uuid ? String(t.actor.uuid) : \"\";\n  })();\n\n  const userCharUuid = game.user?.character?.uuid ? String(game.user.character.uuid) : \"\";\n\n  const actorUuid = String(\n    embeddedActorUuid ||\n    scopeActorUuid ||\n    controlledActorUuid ||\n    targetedActorUuid ||\n    userCharUuid ||\n    \"\"\n  ).trim();\n\n  if (!itemUuid) {\n    console.warn(\"SinlessCSB | rollItem: missing itemUuid\", { doc, linkedEntity: (typeof linkedEntity !== \"undefined\" ? linkedEntity : undefined), entity: (typeof entity !== \"undefined\" ? entity : undefined) });\n    ui.notifications?.warn?.(\"SinlessCSB: missing item context (itemUuid).\");\n    return \"\";\n  }\n\n  if (!actorUuid) {\n    console.warn(\"SinlessCSB | rollItem: missing actorUuid (control/target a token)\", {\n      itemUuid,\n      controlled: canvas?.tokens?.controlled?.length ?? 0,\n      targets: game.user?.targets?.size ?? 0\n    });\n    ui.notifications?.warn?.(\"SinlessCSB: No actor context. Control a token (click) or target one, then try again.\");\n    return \"\";\n  }\n\n  const api = game.modules.get(\"sinlesscsb\")?.api;\n  if (typeof api?.rollItem !== \"function\") {\n    console.warn(\"SinlessCSB | rollItem: API not available\", { apiKeys: Object.keys(api ?? {}) });\n    ui.notifications?.error?.(\"SinlessCSB: rollItem API not available (module not ready / not exposed).\");\n    return \"\";\n  }\n\n  console.log(\"SinlessCSB | rollItem (hardened)\", { itemUuid, actorUuid, itemName: doc?.name });\n  api.rollItem({ itemUuid, actorUuid });\n  return \"\";\n}%\n",
                  "altRollMessage": "",
                  "rollMessageToChat": false,
                  "altRollMessageToChat": false,
                  "style": "button"
                },
                {
                  "key": "",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "panel",
                  "contents": [],
                  "flow": "vertical",
                  "align": "center",
                  "verticalAlign": "top",
                  "collapsible": false,
                  "defaultCollapsed": false,
                  "title": "",
                  "titleStyle": "default"
                },
                {
                  "key": "",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "panel",
                  "contents": [
                    {
                      "key": "deckactionType",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "textField",
                      "size": "m-large",
                      "label": "Action Type:",
                      "defaultValue": "Complex Action",
                      "charList": "",
                      "maxLength": null,
                      "autocomplete": ""
                    },
                    {
                      "key": "actionSpecial",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "textField",
                      "size": "full-size",
                      "label": "Special:",
                      "defaultValue": "",
                      "charList": "",
                      "maxLength": null,
                      "autocomplete": ""
                    }
                  ],
                  "flow": "vertical",
                  "align": "right",
                  "verticalAlign": "top",
                  "collapsible": false,
                  "defaultCollapsed": false,
                  "title": "",
                  "titleStyle": "default"
                }
              ],
              "flow": "vertical",
              "align": "center",
              "verticalAlign": "top",
              "collapsible": false,
              "defaultCollapsed": false,
              "title": "",
              "titleStyle": "default"
            }
          ],
          "key": "custom_header",
          "type": "panel"
        },
        "hidden": [],
        "modifiers": [],
        "props": {
          "deckactionType": "Complex Action",
          "actionSpecial": "",
          "ioSoftware": "Yes",
          "softwareCost": "14000",
          "softwareAlert": "5",
          "programRulestext": "<h2 style=\"font-family:'Bruno Ace', sans-serif; margin:0 0 0.5em 0;\">De-Rez</h2><p>This software allows you to disrupt network daemons and intrusion contact elimination software.</p><p>The decker opens up one of his I/O ports and then rolls a Computer (Electronic Warfare) + De-Rez rating test. Hardening and defensive routines reduce these successes.</p><p>For every remaining success, the network daemon or ICE takes 1d6 direct damage to their cohesion track.</p>",
          "skillKey": "Skill_EWarfare",
          "actionLabel": "E War",
          "gearFeature": "1",
          "bonusDice": "0",
          "diceMod": "0",
          "softwareSlot": 0,
          "poolKey_copy1": "Focus",
          "limitBonusSource": "Software Rating",
          "loopingFlag": "No"
        },
        "unique": false,
        "uniqueId": "FQmvFTag1EMZwk94"
      },
      "_id": "X8kpEpQ1aCqHkQcC",
      "effects": [],
      "sort": 0,
      "flags": {
        "custom-system-builder": {
          "version": "5.1.0"
        }
      },
      "_stats": {
        "compendiumSource": "Item.FQmvFTag1EMZwk94",
        "duplicateSource": null,
        "exportSource": null,
        "coreVersion": "13.351",
        "systemId": "custom-system-builder",
        "systemVersion": "5.1.0",
        "createdTime": 1769974626308,
        "modifiedTime": 1769982037548,
        "lastModifiedBy": "KoiB8oaGNkPdgzdM"
      },
      "ownership": {
        "default": 0
      }
    },
    {
      "name": "Alert Monitor",
      "type": "equippableItem",
      "folder": "rCTnl7myqTtxE5gl",
      "img": "modules/sinlesscsb/assets/icons/SR6/programs/Watchdog.webp",
      "system": {
        "template": "8CMq8JmyHbRCglOv",
        "templateSystemUniqueVersion": 3104837394,
        "body": {
          "contents": [
            {
              "key": "",
              "colSpan": 1,
              "rowSpan": 1,
              "cssClass": "sinlesscsb-marker",
              "role": 0,
              "editRole": 0,
              "permission": 0,
              "tooltip": "",
              "visibilityFormula": "",
              "editableFormula": "",
              "escapeHTML": false,
              "type": "panel",
              "contents": [
                {
                  "key": "",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "panel",
                  "contents": [
                    {
                      "key": "gearFeature",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "medium",
                      "label": "Software Rating:",
                      "defaultValue": "1",
                      "allowDecimal": false,
                      "minVal": "1",
                      "maxVal": "6",
                      "allowRelative": false,
                      "showControls": true,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    },
                    {
                      "key": "bonusDice",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "medium",
                      "label": "bonusDice",
                      "defaultValue": "0",
                      "allowDecimal": false,
                      "minVal": "",
                      "maxVal": "",
                      "allowRelative": false,
                      "showControls": true,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    },
                    {
                      "key": "diceMod",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "(can spend from MCP Pool in roll dialogue using this)",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "medium",
                      "label": "diceMod ",
                      "defaultValue": "0",
                      "allowDecimal": false,
                      "minVal": "",
                      "maxVal": "",
                      "allowRelative": false,
                      "showControls": true,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    },
                    {
                      "key": "actionLabel",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "textField",
                      "size": "full-size",
                      "label": "actionLabel",
                      "defaultValue": "Hack",
                      "charList": "",
                      "maxLength": null,
                      "autocomplete": ""
                    },
                    {
                      "key": "softwareSlot",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "0=inactive, 1=active",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "medium",
                      "label": "softwareSlot",
                      "defaultValue": "0",
                      "allowDecimal": false,
                      "minVal": "0",
                      "maxVal": "1",
                      "allowRelative": false,
                      "showControls": false,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    },
                    {
                      "key": "ioSoftware",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "textField",
                      "size": "medium",
                      "label": "I / O",
                      "defaultValue": "",
                      "charList": "",
                      "maxLength": null,
                      "autocomplete": ""
                    },
                    {
                      "key": "softwareCost",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "full-size",
                      "label": "Cost per rating",
                      "defaultValue": "",
                      "allowDecimal": false,
                      "minVal": "0",
                      "maxVal": "",
                      "allowRelative": false,
                      "showControls": true,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    },
                    {
                      "key": "softwareAlert",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "textField",
                      "size": "full-size",
                      "label": "Alert",
                      "defaultValue": "",
                      "charList": "",
                      "maxLength": null,
                      "autocomplete": ""
                    }
                  ],
                  "flow": "grid-2",
                  "align": "left",
                  "verticalAlign": "top",
                  "collapsible": false,
                  "defaultCollapsed": false,
                  "title": "",
                  "titleStyle": "default"
                }
              ],
              "flow": "vertical",
              "align": "left",
              "verticalAlign": "top",
              "collapsible": true,
              "defaultCollapsed": false,
              "title": "Roll Config",
              "titleStyle": "default"
            },
            {
              "key": "",
              "colSpan": 1,
              "rowSpan": 1,
              "cssClass": "",
              "role": 0,
              "editRole": 0,
              "permission": 0,
              "tooltip": "",
              "visibilityFormula": "",
              "editableFormula": "",
              "escapeHTML": false,
              "type": "panel",
              "contents": [
                {
                  "key": "programRulestext",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "textArea",
                  "size": "full-size",
                  "label": "",
                  "defaultValue": "",
                  "style": "sheet"
                }
              ],
              "flow": "vertical",
              "align": "left",
              "verticalAlign": "top",
              "collapsible": true,
              "defaultCollapsed": true,
              "title": "Software rules text",
              "titleStyle": "default"
            },
            {
              "key": "",
              "colSpan": 1,
              "rowSpan": 1,
              "cssClass": "",
              "role": 4,
              "editRole": 0,
              "permission": 0,
              "tooltip": "",
              "visibilityFormula": "",
              "editableFormula": "",
              "escapeHTML": false,
              "type": "panel",
              "contents": [
                {
                  "key": "skillKey",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "textField",
                  "size": "full-size",
                  "label": "skillKey",
                  "defaultValue": "Skill_Hacking",
                  "charList": "",
                  "maxLength": null,
                  "autocomplete": ""
                },
                {
                  "key": "poolKey_copy1",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "select",
                  "size": "full-size",
                  "label": "poolKey",
                  "defaultValue": "Focus",
                  "selectedOptionType": "custom",
                  "options": [
                    {
                      "key": "Brawn",
                      "value": "Brawn"
                    },
                    {
                      "key": "Finesse",
                      "value": "Finesse"
                    },
                    {
                      "key": "Resolve",
                      "value": "Resolve"
                    },
                    {
                      "key": "Focus",
                      "value": "Focus"
                    }
                  ]
                },
                {
                  "key": "limitBonusSource",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "textField",
                  "size": "full-size",
                  "label": "limitBonusSource",
                  "defaultValue": "Software Rating",
                  "charList": "",
                  "maxLength": null,
                  "autocomplete": ""
                },
                {
                  "key": "loopingFlag",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "textField",
                  "size": "full-size",
                  "label": "loopingFlag",
                  "defaultValue": "No",
                  "charList": "",
                  "maxLength": null,
                  "autocomplete": ""
                }
              ],
              "flow": "vertical",
              "align": "left",
              "verticalAlign": "top",
              "collapsible": true,
              "defaultCollapsed": false,
              "title": "hidden",
              "titleStyle": "default"
            }
          ],
          "key": "custom_body",
          "type": "panel"
        },
        "display": {
          "width": 600,
          "height": 600,
          "fix_size": false,
          "pp_width": 64,
          "pp_height": 64
        },
        "header": {
          "contents": [
            {
              "key": "",
              "colSpan": 1,
              "rowSpan": 1,
              "cssClass": "",
              "role": 0,
              "editRole": 0,
              "permission": 0,
              "tooltip": "",
              "visibilityFormula": "",
              "editableFormula": "",
              "escapeHTML": false,
              "type": "panel",
              "contents": [
                {
                  "key": "",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "label",
                  "size": "full-size",
                  "icon": "code",
                  "value": "${actionLabel ? actionLabel : \"Use\"}$",
                  "prefix": "",
                  "suffix": "",
                  "rollMessage": "%{\n  // Prefer linkedEntity (inventory row) then entity (item sheet)\n  const doc = (typeof linkedEntity !== \"undefined\" && linkedEntity) ? linkedEntity\n            : (typeof entity !== \"undefined\" && entity) ? entity\n            : null;\n\n  const itemUuid = String(doc?.uuid ?? \"\").trim();\n\n  // Pull actor from safe sources only\n  const embeddedActorUuid =\n    (doc?.parent?.documentName === \"Actor\" && doc?.parent?.uuid) ? String(doc.parent.uuid) : \"\";\n\n  const scopeActorUuid =\n    (typeof actor !== \"undefined\" && actor?.documentName === \"Actor\" && actor?.uuid) ? String(actor.uuid) : \"\";\n\n  const controlledActorUuid = (() => {\n    const t = canvas?.tokens?.controlled?.[0];\n    return t?.actor?.uuid ? String(t.actor.uuid) : \"\";\n  })();\n\n  const targetedActorUuid = (() => {\n    const t = game.user?.targets ? Array.from(game.user.targets)[0] : null;\n    return t?.actor?.uuid ? String(t.actor.uuid) : \"\";\n  })();\n\n  const userCharUuid = game.user?.character?.uuid ? String(game.user.character.uuid) : \"\";\n\n  const actorUuid = String(\n    embeddedActorUuid ||\n    scopeActorUuid ||\n    controlledActorUuid ||\n    targetedActorUuid ||\n    userCharUuid ||\n    \"\"\n  ).trim();\n\n  if (!itemUuid) {\n    console.warn(\"SinlessCSB | rollItem: missing itemUuid\", { doc, linkedEntity: (typeof linkedEntity !== \"undefined\" ? linkedEntity : undefined), entity: (typeof entity !== \"undefined\" ? entity : undefined) });\n    ui.notifications?.warn?.(\"SinlessCSB: missing item context (itemUuid).\");\n    return \"\";\n  }\n\n  if (!actorUuid) {\n    console.warn(\"SinlessCSB | rollItem: missing actorUuid (control/target a token)\", {\n      itemUuid,\n      controlled: canvas?.tokens?.controlled?.length ?? 0,\n      targets: game.user?.targets?.size ?? 0\n    });\n    ui.notifications?.warn?.(\"SinlessCSB: No actor context. Control a token (click) or target one, then try again.\");\n    return \"\";\n  }\n\n  const api = game.modules.get(\"sinlesscsb\")?.api;\n  if (typeof api?.rollItem !== \"function\") {\n    console.warn(\"SinlessCSB | rollItem: API not available\", { apiKeys: Object.keys(api ?? {}) });\n    ui.notifications?.error?.(\"SinlessCSB: rollItem API not available (module not ready / not exposed).\");\n    return \"\";\n  }\n\n  console.log(\"SinlessCSB | rollItem (hardened)\", { itemUuid, actorUuid, itemName: doc?.name });\n  api.rollItem({ itemUuid, actorUuid });\n  return \"\";\n}%\n",
                  "altRollMessage": "",
                  "rollMessageToChat": false,
                  "altRollMessageToChat": false,
                  "style": "button"
                },
                {
                  "key": "",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "panel",
                  "contents": [],
                  "flow": "vertical",
                  "align": "center",
                  "verticalAlign": "top",
                  "collapsible": false,
                  "defaultCollapsed": false,
                  "title": "",
                  "titleStyle": "default"
                },
                {
                  "key": "",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "panel",
                  "contents": [
                    {
                      "key": "deckactionType",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "textField",
                      "size": "m-large",
                      "label": "Action Type:",
                      "defaultValue": "Complex Action",
                      "charList": "",
                      "maxLength": null,
                      "autocomplete": ""
                    },
                    {
                      "key": "actionSpecial",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "textField",
                      "size": "full-size",
                      "label": "Special:",
                      "defaultValue": "",
                      "charList": "",
                      "maxLength": null,
                      "autocomplete": ""
                    }
                  ],
                  "flow": "vertical",
                  "align": "right",
                  "verticalAlign": "top",
                  "collapsible": false,
                  "defaultCollapsed": false,
                  "title": "",
                  "titleStyle": "default"
                }
              ],
              "flow": "vertical",
              "align": "center",
              "verticalAlign": "top",
              "collapsible": false,
              "defaultCollapsed": false,
              "title": "",
              "titleStyle": "default"
            }
          ],
          "key": "custom_header",
          "type": "panel"
        },
        "hidden": [],
        "modifiers": [],
        "props": {
          "deckactionType": "Complex Action",
          "actionSpecial": "",
          "ioSoftware": "Yes",
          "softwareCost": "5000",
          "softwareAlert": "1",
          "programRulestext": "<h2 style=\"font-family:'Bruno Ace', sans-serif; margin:0 0 0.5em 0;\">Alert Monitor</h2><p>This software lets the decker know the current value of the alert monitor and the next expected response.</p>",
          "skillKey": "Skill_Hacking",
          "actionLabel": "Hack",
          "gearFeature": "1",
          "bonusDice": "0",
          "diceMod": "0",
          "softwareSlot": 0,
          "poolKey_copy1": "Focus",
          "limitBonusSource": "Software Rating",
          "loopingFlag": "No"
        },
        "unique": false,
        "uniqueId": "CRfCfHczDcdxvQG7"
      },
      "_id": "jP6yKYWdTfuRJkLU",
      "effects": [],
      "sort": 0,
      "flags": {
        "custom-system-builder": {
          "version": "5.1.0"
        }
      },
      "_stats": {
        "compendiumSource": "Item.CRfCfHczDcdxvQG7",
        "duplicateSource": null,
        "exportSource": null,
        "coreVersion": "13.351",
        "systemId": "custom-system-builder",
        "systemVersion": "5.1.0",
        "createdTime": 1769974630038,
        "modifiedTime": 1769982038052,
        "lastModifiedBy": "KoiB8oaGNkPdgzdM"
      },
      "ownership": {
        "default": 0
      }
    },
    {
      "name": "Electric Strike",
      "type": "equippableItem",
      "folder": "rCTnl7myqTtxE5gl",
      "img": "modules/sinlesscsb/assets/icons/SR6/programs/Blackout.webp",
      "system": {
        "template": "8CMq8JmyHbRCglOv",
        "templateSystemUniqueVersion": 3104837394,
        "body": {
          "contents": [
            {
              "key": "",
              "colSpan": 1,
              "rowSpan": 1,
              "cssClass": "sinlesscsb-marker",
              "role": 0,
              "editRole": 0,
              "permission": 0,
              "tooltip": "",
              "visibilityFormula": "",
              "editableFormula": "",
              "escapeHTML": false,
              "type": "panel",
              "contents": [
                {
                  "key": "",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "panel",
                  "contents": [
                    {
                      "key": "gearFeature",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "medium",
                      "label": "Software Rating:",
                      "defaultValue": "1",
                      "allowDecimal": false,
                      "minVal": "1",
                      "maxVal": "6",
                      "allowRelative": false,
                      "showControls": true,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    },
                    {
                      "key": "bonusDice",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "medium",
                      "label": "bonusDice",
                      "defaultValue": "0",
                      "allowDecimal": false,
                      "minVal": "",
                      "maxVal": "",
                      "allowRelative": false,
                      "showControls": true,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    },
                    {
                      "key": "diceMod",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "(can spend from MCP Pool in roll dialogue using this)",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "medium",
                      "label": "diceMod ",
                      "defaultValue": "0",
                      "allowDecimal": false,
                      "minVal": "",
                      "maxVal": "",
                      "allowRelative": false,
                      "showControls": true,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    },
                    {
                      "key": "actionLabel",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "textField",
                      "size": "full-size",
                      "label": "actionLabel",
                      "defaultValue": "Hack",
                      "charList": "",
                      "maxLength": null,
                      "autocomplete": ""
                    },
                    {
                      "key": "softwareSlot",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "0=inactive, 1=active",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "medium",
                      "label": "softwareSlot",
                      "defaultValue": "0",
                      "allowDecimal": false,
                      "minVal": "0",
                      "maxVal": "1",
                      "allowRelative": false,
                      "showControls": false,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    },
                    {
                      "key": "ioSoftware",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "textField",
                      "size": "medium",
                      "label": "I / O",
                      "defaultValue": "",
                      "charList": "",
                      "maxLength": null,
                      "autocomplete": ""
                    },
                    {
                      "key": "softwareCost",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "full-size",
                      "label": "Cost per rating",
                      "defaultValue": "",
                      "allowDecimal": false,
                      "minVal": "0",
                      "maxVal": "",
                      "allowRelative": false,
                      "showControls": true,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    },
                    {
                      "key": "softwareAlert",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "textField",
                      "size": "full-size",
                      "label": "Alert",
                      "defaultValue": "",
                      "charList": "",
                      "maxLength": null,
                      "autocomplete": ""
                    }
                  ],
                  "flow": "grid-2",
                  "align": "left",
                  "verticalAlign": "top",
                  "collapsible": false,
                  "defaultCollapsed": false,
                  "title": "",
                  "titleStyle": "default"
                }
              ],
              "flow": "vertical",
              "align": "left",
              "verticalAlign": "top",
              "collapsible": true,
              "defaultCollapsed": false,
              "title": "Roll Config",
              "titleStyle": "default"
            },
            {
              "key": "",
              "colSpan": 1,
              "rowSpan": 1,
              "cssClass": "",
              "role": 0,
              "editRole": 0,
              "permission": 0,
              "tooltip": "",
              "visibilityFormula": "",
              "editableFormula": "",
              "escapeHTML": false,
              "type": "panel",
              "contents": [
                {
                  "key": "programRulestext",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "textArea",
                  "size": "full-size",
                  "label": "",
                  "defaultValue": "",
                  "style": "sheet"
                }
              ],
              "flow": "vertical",
              "align": "left",
              "verticalAlign": "top",
              "collapsible": true,
              "defaultCollapsed": true,
              "title": "Software rules text",
              "titleStyle": "default"
            },
            {
              "key": "",
              "colSpan": 1,
              "rowSpan": 1,
              "cssClass": "",
              "role": 4,
              "editRole": 0,
              "permission": 0,
              "tooltip": "",
              "visibilityFormula": "",
              "editableFormula": "",
              "escapeHTML": false,
              "type": "panel",
              "contents": [
                {
                  "key": "skillKey",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "textField",
                  "size": "full-size",
                  "label": "skillKey",
                  "defaultValue": "Skill_Hacking",
                  "charList": "",
                  "maxLength": null,
                  "autocomplete": ""
                },
                {
                  "key": "poolKey_copy1",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "select",
                  "size": "full-size",
                  "label": "poolKey",
                  "defaultValue": "Focus",
                  "selectedOptionType": "custom",
                  "options": [
                    {
                      "key": "Brawn",
                      "value": "Brawn"
                    },
                    {
                      "key": "Finesse",
                      "value": "Finesse"
                    },
                    {
                      "key": "Resolve",
                      "value": "Resolve"
                    },
                    {
                      "key": "Focus",
                      "value": "Focus"
                    }
                  ]
                },
                {
                  "key": "limitBonusSource",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "textField",
                  "size": "full-size",
                  "label": "limitBonusSource",
                  "defaultValue": "Software Rating",
                  "charList": "",
                  "maxLength": null,
                  "autocomplete": ""
                },
                {
                  "key": "loopingFlag",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "textField",
                  "size": "full-size",
                  "label": "loopingFlag",
                  "defaultValue": "No",
                  "charList": "",
                  "maxLength": null,
                  "autocomplete": ""
                }
              ],
              "flow": "vertical",
              "align": "left",
              "verticalAlign": "top",
              "collapsible": true,
              "defaultCollapsed": false,
              "title": "hidden",
              "titleStyle": "default"
            }
          ],
          "key": "custom_body",
          "type": "panel"
        },
        "display": {
          "width": 600,
          "height": 600,
          "fix_size": false,
          "pp_width": 64,
          "pp_height": 64
        },
        "header": {
          "contents": [
            {
              "key": "",
              "colSpan": 1,
              "rowSpan": 1,
              "cssClass": "",
              "role": 0,
              "editRole": 0,
              "permission": 0,
              "tooltip": "",
              "visibilityFormula": "",
              "editableFormula": "",
              "escapeHTML": false,
              "type": "panel",
              "contents": [
                {
                  "key": "",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "label",
                  "size": "full-size",
                  "icon": "code",
                  "value": "${actionLabel ? actionLabel : \"Use\"}$",
                  "prefix": "",
                  "suffix": "",
                  "rollMessage": "%{\n  // Prefer linkedEntity (inventory row) then entity (item sheet)\n  const doc = (typeof linkedEntity !== \"undefined\" && linkedEntity) ? linkedEntity\n            : (typeof entity !== \"undefined\" && entity) ? entity\n            : null;\n\n  const itemUuid = String(doc?.uuid ?? \"\").trim();\n\n  // Pull actor from safe sources only\n  const embeddedActorUuid =\n    (doc?.parent?.documentName === \"Actor\" && doc?.parent?.uuid) ? String(doc.parent.uuid) : \"\";\n\n  const scopeActorUuid =\n    (typeof actor !== \"undefined\" && actor?.documentName === \"Actor\" && actor?.uuid) ? String(actor.uuid) : \"\";\n\n  const controlledActorUuid = (() => {\n    const t = canvas?.tokens?.controlled?.[0];\n    return t?.actor?.uuid ? String(t.actor.uuid) : \"\";\n  })();\n\n  const targetedActorUuid = (() => {\n    const t = game.user?.targets ? Array.from(game.user.targets)[0] : null;\n    return t?.actor?.uuid ? String(t.actor.uuid) : \"\";\n  })();\n\n  const userCharUuid = game.user?.character?.uuid ? String(game.user.character.uuid) : \"\";\n\n  const actorUuid = String(\n    embeddedActorUuid ||\n    scopeActorUuid ||\n    controlledActorUuid ||\n    targetedActorUuid ||\n    userCharUuid ||\n    \"\"\n  ).trim();\n\n  if (!itemUuid) {\n    console.warn(\"SinlessCSB | rollItem: missing itemUuid\", { doc, linkedEntity: (typeof linkedEntity !== \"undefined\" ? linkedEntity : undefined), entity: (typeof entity !== \"undefined\" ? entity : undefined) });\n    ui.notifications?.warn?.(\"SinlessCSB: missing item context (itemUuid).\");\n    return \"\";\n  }\n\n  if (!actorUuid) {\n    console.warn(\"SinlessCSB | rollItem: missing actorUuid (control/target a token)\", {\n      itemUuid,\n      controlled: canvas?.tokens?.controlled?.length ?? 0,\n      targets: game.user?.targets?.size ?? 0\n    });\n    ui.notifications?.warn?.(\"SinlessCSB: No actor context. Control a token (click) or target one, then try again.\");\n    return \"\";\n  }\n\n  const api = game.modules.get(\"sinlesscsb\")?.api;\n  if (typeof api?.rollItem !== \"function\") {\n    console.warn(\"SinlessCSB | rollItem: API not available\", { apiKeys: Object.keys(api ?? {}) });\n    ui.notifications?.error?.(\"SinlessCSB: rollItem API not available (module not ready / not exposed).\");\n    return \"\";\n  }\n\n  console.log(\"SinlessCSB | rollItem (hardened)\", { itemUuid, actorUuid, itemName: doc?.name });\n  api.rollItem({ itemUuid, actorUuid });\n  return \"\";\n}%\n",
                  "altRollMessage": "",
                  "rollMessageToChat": false,
                  "altRollMessageToChat": false,
                  "style": "button"
                },
                {
                  "key": "",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "panel",
                  "contents": [],
                  "flow": "vertical",
                  "align": "center",
                  "verticalAlign": "top",
                  "collapsible": false,
                  "defaultCollapsed": false,
                  "title": "",
                  "titleStyle": "default"
                },
                {
                  "key": "",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "panel",
                  "contents": [
                    {
                      "key": "deckactionType",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "textField",
                      "size": "m-large",
                      "label": "Action Type:",
                      "defaultValue": "Complex Action",
                      "charList": "",
                      "maxLength": null,
                      "autocomplete": ""
                    },
                    {
                      "key": "actionSpecial",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "textField",
                      "size": "full-size",
                      "label": "Special:",
                      "defaultValue": "",
                      "charList": "",
                      "maxLength": null,
                      "autocomplete": ""
                    }
                  ],
                  "flow": "vertical",
                  "align": "right",
                  "verticalAlign": "top",
                  "collapsible": false,
                  "defaultCollapsed": false,
                  "title": "",
                  "titleStyle": "default"
                }
              ],
              "flow": "vertical",
              "align": "center",
              "verticalAlign": "top",
              "collapsible": false,
              "defaultCollapsed": false,
              "title": "",
              "titleStyle": "default"
            }
          ],
          "key": "custom_header",
          "type": "panel"
        },
        "hidden": [],
        "modifiers": [],
        "props": {
          "deckactionType": "Complex Action",
          "actionSpecial": "Network Access Node control required",
          "ioSoftware": "No",
          "softwareCost": "10000",
          "softwareAlert": "15",
          "programRulestext": "<h2 style=\"font-family:'Bruno Ace', sans-serif; margin:0 0 0.5em 0;\">Electric Strike</h2><p>This software causes an electrical discharge from nearby electrical equipment within the decker's influence field.</p><p>The decker makes a Computer (Hacking) + Electric Strike rating test. It does 1d6 direct damage to the target's stun condition track, plus an additional 1 point per success.</p><p>This damage ignores armor. It cannot be dodged, but can be soaked.</p><p>The decker can distribute this damage to anyone in range, divided however they wish. If targeting machines, software agents, or synthetics, damage assigned is applied twice.</p>",
          "skillKey": "Skill_Hacking",
          "actionLabel": "Hack",
          "gearFeature": "1",
          "bonusDice": "0",
          "diceMod": "0",
          "softwareSlot": 0,
          "poolKey_copy1": "Focus",
          "limitBonusSource": "Software Rating",
          "loopingFlag": "No"
        },
        "unique": false,
        "uniqueId": "2IYdU2FRR7FrlnCZ"
      },
      "_id": "dRwjT9HfZ5IQvi7e",
      "effects": [],
      "sort": 0,
      "flags": {
        "custom-system-builder": {
          "version": "5.1.0"
        }
      },
      "_stats": {
        "compendiumSource": "Item.2IYdU2FRR7FrlnCZ",
        "duplicateSource": null,
        "exportSource": null,
        "coreVersion": "13.351",
        "systemId": "custom-system-builder",
        "systemVersion": "5.1.0",
        "createdTime": 1769974631877,
        "modifiedTime": 1769982035790,
        "lastModifiedBy": "KoiB8oaGNkPdgzdM"
      },
      "ownership": {
        "default": 0
      }
    },
    {
      "name": "Ghost Protocol",
      "type": "equippableItem",
      "folder": "rCTnl7myqTtxE5gl",
      "img": "modules/sinlesscsb/assets/icons/SR6/programs/SecretAgent.webp",
      "system": {
        "template": "8CMq8JmyHbRCglOv",
        "templateSystemUniqueVersion": 3104837394,
        "body": {
          "contents": [
            {
              "key": "",
              "colSpan": 1,
              "rowSpan": 1,
              "cssClass": "sinlesscsb-marker",
              "role": 0,
              "editRole": 0,
              "permission": 0,
              "tooltip": "",
              "visibilityFormula": "",
              "editableFormula": "",
              "escapeHTML": false,
              "type": "panel",
              "contents": [
                {
                  "key": "",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "panel",
                  "contents": [
                    {
                      "key": "gearFeature",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "medium",
                      "label": "Software Rating:",
                      "defaultValue": "1",
                      "allowDecimal": false,
                      "minVal": "1",
                      "maxVal": "6",
                      "allowRelative": false,
                      "showControls": true,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    },
                    {
                      "key": "bonusDice",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "medium",
                      "label": "bonusDice",
                      "defaultValue": "0",
                      "allowDecimal": false,
                      "minVal": "",
                      "maxVal": "",
                      "allowRelative": false,
                      "showControls": true,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    },
                    {
                      "key": "diceMod",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "(can spend from MCP Pool in roll dialogue using this)",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "medium",
                      "label": "diceMod ",
                      "defaultValue": "0",
                      "allowDecimal": false,
                      "minVal": "",
                      "maxVal": "",
                      "allowRelative": false,
                      "showControls": true,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    },
                    {
                      "key": "actionLabel",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "textField",
                      "size": "full-size",
                      "label": "actionLabel",
                      "defaultValue": "Hack",
                      "charList": "",
                      "maxLength": null,
                      "autocomplete": ""
                    },
                    {
                      "key": "softwareSlot",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "0=inactive, 1=active",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "medium",
                      "label": "softwareSlot",
                      "defaultValue": "0",
                      "allowDecimal": false,
                      "minVal": "0",
                      "maxVal": "1",
                      "allowRelative": false,
                      "showControls": false,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    },
                    {
                      "key": "ioSoftware",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "textField",
                      "size": "medium",
                      "label": "I / O",
                      "defaultValue": "",
                      "charList": "",
                      "maxLength": null,
                      "autocomplete": ""
                    },
                    {
                      "key": "softwareCost",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "full-size",
                      "label": "Cost per rating",
                      "defaultValue": "",
                      "allowDecimal": false,
                      "minVal": "0",
                      "maxVal": "",
                      "allowRelative": false,
                      "showControls": true,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    },
                    {
                      "key": "softwareAlert",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "textField",
                      "size": "full-size",
                      "label": "Alert",
                      "defaultValue": "",
                      "charList": "",
                      "maxLength": null,
                      "autocomplete": ""
                    }
                  ],
                  "flow": "grid-2",
                  "align": "left",
                  "verticalAlign": "top",
                  "collapsible": false,
                  "defaultCollapsed": false,
                  "title": "",
                  "titleStyle": "default"
                }
              ],
              "flow": "vertical",
              "align": "left",
              "verticalAlign": "top",
              "collapsible": true,
              "defaultCollapsed": false,
              "title": "Roll Config",
              "titleStyle": "default"
            },
            {
              "key": "",
              "colSpan": 1,
              "rowSpan": 1,
              "cssClass": "",
              "role": 0,
              "editRole": 0,
              "permission": 0,
              "tooltip": "",
              "visibilityFormula": "",
              "editableFormula": "",
              "escapeHTML": false,
              "type": "panel",
              "contents": [
                {
                  "key": "programRulestext",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "textArea",
                  "size": "full-size",
                  "label": "",
                  "defaultValue": "",
                  "style": "sheet"
                }
              ],
              "flow": "vertical",
              "align": "left",
              "verticalAlign": "top",
              "collapsible": true,
              "defaultCollapsed": true,
              "title": "Software rules text",
              "titleStyle": "default"
            },
            {
              "key": "",
              "colSpan": 1,
              "rowSpan": 1,
              "cssClass": "",
              "role": 4,
              "editRole": 0,
              "permission": 0,
              "tooltip": "",
              "visibilityFormula": "",
              "editableFormula": "",
              "escapeHTML": false,
              "type": "panel",
              "contents": [
                {
                  "key": "skillKey",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "textField",
                  "size": "full-size",
                  "label": "skillKey",
                  "defaultValue": "Skill_Hacking",
                  "charList": "",
                  "maxLength": null,
                  "autocomplete": ""
                },
                {
                  "key": "poolKey_copy1",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "select",
                  "size": "full-size",
                  "label": "poolKey",
                  "defaultValue": "Focus",
                  "selectedOptionType": "custom",
                  "options": [
                    {
                      "key": "Brawn",
                      "value": "Brawn"
                    },
                    {
                      "key": "Finesse",
                      "value": "Finesse"
                    },
                    {
                      "key": "Resolve",
                      "value": "Resolve"
                    },
                    {
                      "key": "Focus",
                      "value": "Focus"
                    }
                  ]
                },
                {
                  "key": "limitBonusSource",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "textField",
                  "size": "full-size",
                  "label": "limitBonusSource",
                  "defaultValue": "Software Rating",
                  "charList": "",
                  "maxLength": null,
                  "autocomplete": ""
                },
                {
                  "key": "loopingFlag",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "textField",
                  "size": "full-size",
                  "label": "loopingFlag",
                  "defaultValue": "No",
                  "charList": "",
                  "maxLength": null,
                  "autocomplete": ""
                }
              ],
              "flow": "vertical",
              "align": "left",
              "verticalAlign": "top",
              "collapsible": true,
              "defaultCollapsed": false,
              "title": "hidden",
              "titleStyle": "default"
            }
          ],
          "key": "custom_body",
          "type": "panel"
        },
        "display": {
          "width": 600,
          "height": 600,
          "fix_size": false,
          "pp_width": 64,
          "pp_height": 64
        },
        "header": {
          "contents": [
            {
              "key": "",
              "colSpan": 1,
              "rowSpan": 1,
              "cssClass": "",
              "role": 0,
              "editRole": 0,
              "permission": 0,
              "tooltip": "",
              "visibilityFormula": "",
              "editableFormula": "",
              "escapeHTML": false,
              "type": "panel",
              "contents": [
                {
                  "key": "",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "label",
                  "size": "full-size",
                  "icon": "code",
                  "value": "${actionLabel ? actionLabel : \"Use\"}$",
                  "prefix": "",
                  "suffix": "",
                  "rollMessage": "%{\n  // Prefer linkedEntity (inventory row) then entity (item sheet)\n  const doc = (typeof linkedEntity !== \"undefined\" && linkedEntity) ? linkedEntity\n            : (typeof entity !== \"undefined\" && entity) ? entity\n            : null;\n\n  const itemUuid = String(doc?.uuid ?? \"\").trim();\n\n  // Pull actor from safe sources only\n  const embeddedActorUuid =\n    (doc?.parent?.documentName === \"Actor\" && doc?.parent?.uuid) ? String(doc.parent.uuid) : \"\";\n\n  const scopeActorUuid =\n    (typeof actor !== \"undefined\" && actor?.documentName === \"Actor\" && actor?.uuid) ? String(actor.uuid) : \"\";\n\n  const controlledActorUuid = (() => {\n    const t = canvas?.tokens?.controlled?.[0];\n    return t?.actor?.uuid ? String(t.actor.uuid) : \"\";\n  })();\n\n  const targetedActorUuid = (() => {\n    const t = game.user?.targets ? Array.from(game.user.targets)[0] : null;\n    return t?.actor?.uuid ? String(t.actor.uuid) : \"\";\n  })();\n\n  const userCharUuid = game.user?.character?.uuid ? String(game.user.character.uuid) : \"\";\n\n  const actorUuid = String(\n    embeddedActorUuid ||\n    scopeActorUuid ||\n    controlledActorUuid ||\n    targetedActorUuid ||\n    userCharUuid ||\n    \"\"\n  ).trim();\n\n  if (!itemUuid) {\n    console.warn(\"SinlessCSB | rollItem: missing itemUuid\", { doc, linkedEntity: (typeof linkedEntity !== \"undefined\" ? linkedEntity : undefined), entity: (typeof entity !== \"undefined\" ? entity : undefined) });\n    ui.notifications?.warn?.(\"SinlessCSB: missing item context (itemUuid).\");\n    return \"\";\n  }\n\n  if (!actorUuid) {\n    console.warn(\"SinlessCSB | rollItem: missing actorUuid (control/target a token)\", {\n      itemUuid,\n      controlled: canvas?.tokens?.controlled?.length ?? 0,\n      targets: game.user?.targets?.size ?? 0\n    });\n    ui.notifications?.warn?.(\"SinlessCSB: No actor context. Control a token (click) or target one, then try again.\");\n    return \"\";\n  }\n\n  const api = game.modules.get(\"sinlesscsb\")?.api;\n  if (typeof api?.rollItem !== \"function\") {\n    console.warn(\"SinlessCSB | rollItem: API not available\", { apiKeys: Object.keys(api ?? {}) });\n    ui.notifications?.error?.(\"SinlessCSB: rollItem API not available (module not ready / not exposed).\");\n    return \"\";\n  }\n\n  console.log(\"SinlessCSB | rollItem (hardened)\", { itemUuid, actorUuid, itemName: doc?.name });\n  api.rollItem({ itemUuid, actorUuid });\n  return \"\";\n}%\n",
                  "altRollMessage": "",
                  "rollMessageToChat": false,
                  "altRollMessageToChat": false,
                  "style": "button"
                },
                {
                  "key": "",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "panel",
                  "contents": [],
                  "flow": "vertical",
                  "align": "center",
                  "verticalAlign": "top",
                  "collapsible": false,
                  "defaultCollapsed": false,
                  "title": "",
                  "titleStyle": "default"
                },
                {
                  "key": "",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "panel",
                  "contents": [
                    {
                      "key": "deckactionType",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "textField",
                      "size": "m-large",
                      "label": "Action Type:",
                      "defaultValue": "Complex Action",
                      "charList": "",
                      "maxLength": null,
                      "autocomplete": ""
                    },
                    {
                      "key": "actionSpecial",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "textField",
                      "size": "full-size",
                      "label": "Special:",
                      "defaultValue": "",
                      "charList": "",
                      "maxLength": null,
                      "autocomplete": ""
                    }
                  ],
                  "flow": "vertical",
                  "align": "right",
                  "verticalAlign": "top",
                  "collapsible": false,
                  "defaultCollapsed": false,
                  "title": "",
                  "titleStyle": "default"
                }
              ],
              "flow": "vertical",
              "align": "center",
              "verticalAlign": "top",
              "collapsible": false,
              "defaultCollapsed": false,
              "title": "",
              "titleStyle": "default"
            }
          ],
          "key": "custom_header",
          "type": "panel"
        },
        "hidden": [],
        "modifiers": [],
        "props": {
          "deckactionType": "Complex Action",
          "actionSpecial": "",
          "ioSoftware": "No",
          "softwareCost": "20000",
          "softwareAlert": "N/A",
          "programRulestext": "<h2 style=\"font-family:'Bruno Ace', sans-serif; margin:0 0 0.5em 0;\">Ghost Protocol</h2><p>This software allows the decker to create a temporary false digital persona for an operation.</p><p>During the Reconnaissance and Preparation framework a decker can replace one of their options with the Ghost Protocol.</p><p>The decker makes a Computer (Hacking) + Ghost Protocol rating test. Every success creates a layer of protection for a fictional persona. This allows the decker (and her allies) to fake access, bypass security clearance, and otherwise appear as a legitimate person on site.</p><p>The number of successes is the target number of successes that on-site security needs to discover the deception.</p><p>Characters in a brand also have false digital personas, a Ghost Rating. These can be enhanced by a hacker with a Ghost Protocol program.</p><p>A decker may take a sector action, using the brand's grid and use successes to increase a character's Ghost Rating. Successes can be accumulated across sector turns.</p><table><thead><tr><th>Ghost Rating</th><th>Successes to increase by 1</th></tr></thead><tbody><tr><td>1-4</td><td>1</td></tr><tr><td>5-8</td><td>2</td></tr><tr><td>9-10</td><td>4</td></tr><tr><td>11-12</td><td>8</td></tr><tr><td>13-14</td><td>16</td></tr><tr><td>15-16</td><td>32</td></tr><tr><td>17-18</td><td>64</td></tr><tr><td>19-20</td><td>128</td></tr><tr><td>21+</td><td>256</td></tr></tbody></table>",
          "skillKey": "Skill_Hacking",
          "actionLabel": "Hack",
          "gearFeature": "1",
          "bonusDice": "0",
          "diceMod": "0",
          "softwareSlot": 1,
          "poolKey_copy1": "Focus",
          "limitBonusSource": "Software Rating",
          "loopingFlag": "No"
        },
        "unique": false,
        "uniqueId": "TbZIiS4wj4ebQr3v"
      },
      "_id": "Lzsyoi4yqkdxN5mn",
      "effects": [],
      "sort": 0,
      "flags": {
        "custom-system-builder": {
          "version": "5.1.0"
        }
      },
      "_stats": {
        "compendiumSource": "Item.TbZIiS4wj4ebQr3v",
        "duplicateSource": null,
        "exportSource": null,
        "coreVersion": "13.351",
        "systemId": "custom-system-builder",
        "systemVersion": "5.1.0",
        "createdTime": 1769974638662,
        "modifiedTime": 1769974667876,
        "lastModifiedBy": "KoiB8oaGNkPdgzdM"
      },
      "ownership": {
        "default": 0
      }
    },
    {
      "name": "Shadow Protocols",
      "type": "equippableItem",
      "folder": "rCTnl7myqTtxE5gl",
      "img": "modules/sinlesscsb/assets/icons/SR6/programs/RunSilentRunDeep.webp",
      "system": {
        "template": "8CMq8JmyHbRCglOv",
        "templateSystemUniqueVersion": 3104837394,
        "body": {
          "contents": [
            {
              "key": "",
              "colSpan": 1,
              "rowSpan": 1,
              "cssClass": "sinlesscsb-marker",
              "role": 0,
              "editRole": 0,
              "permission": 0,
              "tooltip": "",
              "visibilityFormula": "",
              "editableFormula": "",
              "escapeHTML": false,
              "type": "panel",
              "contents": [
                {
                  "key": "",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "panel",
                  "contents": [
                    {
                      "key": "gearFeature",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "medium",
                      "label": "Software Rating:",
                      "defaultValue": "1",
                      "allowDecimal": false,
                      "minVal": "1",
                      "maxVal": "6",
                      "allowRelative": false,
                      "showControls": true,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    },
                    {
                      "key": "bonusDice",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "medium",
                      "label": "bonusDice",
                      "defaultValue": "0",
                      "allowDecimal": false,
                      "minVal": "",
                      "maxVal": "",
                      "allowRelative": false,
                      "showControls": true,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    },
                    {
                      "key": "diceMod",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "(can spend from MCP Pool in roll dialogue using this)",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "medium",
                      "label": "diceMod ",
                      "defaultValue": "0",
                      "allowDecimal": false,
                      "minVal": "",
                      "maxVal": "",
                      "allowRelative": false,
                      "showControls": true,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    },
                    {
                      "key": "actionLabel",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "textField",
                      "size": "full-size",
                      "label": "actionLabel",
                      "defaultValue": "Hack",
                      "charList": "",
                      "maxLength": null,
                      "autocomplete": ""
                    },
                    {
                      "key": "softwareSlot",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "0=inactive, 1=active",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "medium",
                      "label": "softwareSlot",
                      "defaultValue": "0",
                      "allowDecimal": false,
                      "minVal": "0",
                      "maxVal": "1",
                      "allowRelative": false,
                      "showControls": false,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    },
                    {
                      "key": "ioSoftware",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "textField",
                      "size": "medium",
                      "label": "I / O",
                      "defaultValue": "",
                      "charList": "",
                      "maxLength": null,
                      "autocomplete": ""
                    },
                    {
                      "key": "softwareCost",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "full-size",
                      "label": "Cost per rating",
                      "defaultValue": "",
                      "allowDecimal": false,
                      "minVal": "0",
                      "maxVal": "",
                      "allowRelative": false,
                      "showControls": true,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    },
                    {
                      "key": "softwareAlert",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "textField",
                      "size": "full-size",
                      "label": "Alert",
                      "defaultValue": "",
                      "charList": "",
                      "maxLength": null,
                      "autocomplete": ""
                    }
                  ],
                  "flow": "grid-2",
                  "align": "left",
                  "verticalAlign": "top",
                  "collapsible": false,
                  "defaultCollapsed": false,
                  "title": "",
                  "titleStyle": "default"
                }
              ],
              "flow": "vertical",
              "align": "left",
              "verticalAlign": "top",
              "collapsible": true,
              "defaultCollapsed": false,
              "title": "Roll Config",
              "titleStyle": "default"
            },
            {
              "key": "",
              "colSpan": 1,
              "rowSpan": 1,
              "cssClass": "",
              "role": 0,
              "editRole": 0,
              "permission": 0,
              "tooltip": "",
              "visibilityFormula": "",
              "editableFormula": "",
              "escapeHTML": false,
              "type": "panel",
              "contents": [
                {
                  "key": "programRulestext",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "textArea",
                  "size": "full-size",
                  "label": "",
                  "defaultValue": "",
                  "style": "sheet"
                }
              ],
              "flow": "vertical",
              "align": "left",
              "verticalAlign": "top",
              "collapsible": true,
              "defaultCollapsed": true,
              "title": "Software rules text",
              "titleStyle": "default"
            },
            {
              "key": "",
              "colSpan": 1,
              "rowSpan": 1,
              "cssClass": "",
              "role": 4,
              "editRole": 0,
              "permission": 0,
              "tooltip": "",
              "visibilityFormula": "",
              "editableFormula": "",
              "escapeHTML": false,
              "type": "panel",
              "contents": [
                {
                  "key": "skillKey",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "textField",
                  "size": "full-size",
                  "label": "skillKey",
                  "defaultValue": "Skill_Hacking",
                  "charList": "",
                  "maxLength": null,
                  "autocomplete": ""
                },
                {
                  "key": "poolKey_copy1",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "select",
                  "size": "full-size",
                  "label": "poolKey",
                  "defaultValue": "Focus",
                  "selectedOptionType": "custom",
                  "options": [
                    {
                      "key": "Brawn",
                      "value": "Brawn"
                    },
                    {
                      "key": "Finesse",
                      "value": "Finesse"
                    },
                    {
                      "key": "Resolve",
                      "value": "Resolve"
                    },
                    {
                      "key": "Focus",
                      "value": "Focus"
                    }
                  ]
                },
                {
                  "key": "limitBonusSource",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "textField",
                  "size": "full-size",
                  "label": "limitBonusSource",
                  "defaultValue": "Software Rating",
                  "charList": "",
                  "maxLength": null,
                  "autocomplete": ""
                },
                {
                  "key": "loopingFlag",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "textField",
                  "size": "full-size",
                  "label": "loopingFlag",
                  "defaultValue": "No",
                  "charList": "",
                  "maxLength": null,
                  "autocomplete": ""
                }
              ],
              "flow": "vertical",
              "align": "left",
              "verticalAlign": "top",
              "collapsible": true,
              "defaultCollapsed": false,
              "title": "hidden",
              "titleStyle": "default"
            }
          ],
          "key": "custom_body",
          "type": "panel"
        },
        "display": {
          "width": 600,
          "height": 600,
          "fix_size": false,
          "pp_width": 64,
          "pp_height": 64
        },
        "header": {
          "contents": [
            {
              "key": "",
              "colSpan": 1,
              "rowSpan": 1,
              "cssClass": "",
              "role": 0,
              "editRole": 0,
              "permission": 0,
              "tooltip": "",
              "visibilityFormula": "",
              "editableFormula": "",
              "escapeHTML": false,
              "type": "panel",
              "contents": [
                {
                  "key": "",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "label",
                  "size": "full-size",
                  "icon": "code",
                  "value": "${actionLabel ? actionLabel : \"Use\"}$",
                  "prefix": "",
                  "suffix": "",
                  "rollMessage": "%{\n  // Prefer linkedEntity (inventory row) then entity (item sheet)\n  const doc = (typeof linkedEntity !== \"undefined\" && linkedEntity) ? linkedEntity\n            : (typeof entity !== \"undefined\" && entity) ? entity\n            : null;\n\n  const itemUuid = String(doc?.uuid ?? \"\").trim();\n\n  // Pull actor from safe sources only\n  const embeddedActorUuid =\n    (doc?.parent?.documentName === \"Actor\" && doc?.parent?.uuid) ? String(doc.parent.uuid) : \"\";\n\n  const scopeActorUuid =\n    (typeof actor !== \"undefined\" && actor?.documentName === \"Actor\" && actor?.uuid) ? String(actor.uuid) : \"\";\n\n  const controlledActorUuid = (() => {\n    const t = canvas?.tokens?.controlled?.[0];\n    return t?.actor?.uuid ? String(t.actor.uuid) : \"\";\n  })();\n\n  const targetedActorUuid = (() => {\n    const t = game.user?.targets ? Array.from(game.user.targets)[0] : null;\n    return t?.actor?.uuid ? String(t.actor.uuid) : \"\";\n  })();\n\n  const userCharUuid = game.user?.character?.uuid ? String(game.user.character.uuid) : \"\";\n\n  const actorUuid = String(\n    embeddedActorUuid ||\n    scopeActorUuid ||\n    controlledActorUuid ||\n    targetedActorUuid ||\n    userCharUuid ||\n    \"\"\n  ).trim();\n\n  if (!itemUuid) {\n    console.warn(\"SinlessCSB | rollItem: missing itemUuid\", { doc, linkedEntity: (typeof linkedEntity !== \"undefined\" ? linkedEntity : undefined), entity: (typeof entity !== \"undefined\" ? entity : undefined) });\n    ui.notifications?.warn?.(\"SinlessCSB: missing item context (itemUuid).\");\n    return \"\";\n  }\n\n  if (!actorUuid) {\n    console.warn(\"SinlessCSB | rollItem: missing actorUuid (control/target a token)\", {\n      itemUuid,\n      controlled: canvas?.tokens?.controlled?.length ?? 0,\n      targets: game.user?.targets?.size ?? 0\n    });\n    ui.notifications?.warn?.(\"SinlessCSB: No actor context. Control a token (click) or target one, then try again.\");\n    return \"\";\n  }\n\n  const api = game.modules.get(\"sinlesscsb\")?.api;\n  if (typeof api?.rollItem !== \"function\") {\n    console.warn(\"SinlessCSB | rollItem: API not available\", { apiKeys: Object.keys(api ?? {}) });\n    ui.notifications?.error?.(\"SinlessCSB: rollItem API not available (module not ready / not exposed).\");\n    return \"\";\n  }\n\n  console.log(\"SinlessCSB | rollItem (hardened)\", { itemUuid, actorUuid, itemName: doc?.name });\n  api.rollItem({ itemUuid, actorUuid });\n  return \"\";\n}%\n",
                  "altRollMessage": "",
                  "rollMessageToChat": false,
                  "altRollMessageToChat": false,
                  "style": "button"
                },
                {
                  "key": "",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "panel",
                  "contents": [],
                  "flow": "vertical",
                  "align": "center",
                  "verticalAlign": "top",
                  "collapsible": false,
                  "defaultCollapsed": false,
                  "title": "",
                  "titleStyle": "default"
                },
                {
                  "key": "",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "panel",
                  "contents": [
                    {
                      "key": "deckactionType",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "textField",
                      "size": "m-large",
                      "label": "Action Type:",
                      "defaultValue": "Complex Action",
                      "charList": "",
                      "maxLength": null,
                      "autocomplete": ""
                    },
                    {
                      "key": "actionSpecial",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "textField",
                      "size": "full-size",
                      "label": "Special:",
                      "defaultValue": "",
                      "charList": "",
                      "maxLength": null,
                      "autocomplete": ""
                    }
                  ],
                  "flow": "vertical",
                  "align": "right",
                  "verticalAlign": "top",
                  "collapsible": false,
                  "defaultCollapsed": false,
                  "title": "",
                  "titleStyle": "default"
                }
              ],
              "flow": "vertical",
              "align": "center",
              "verticalAlign": "top",
              "collapsible": false,
              "defaultCollapsed": false,
              "title": "",
              "titleStyle": "default"
            }
          ],
          "key": "custom_header",
          "type": "panel"
        },
        "hidden": [],
        "modifiers": [],
        "props": {
          "deckactionType": "Complex Action",
          "actionSpecial": "",
          "ioSoftware": "Optional",
          "softwareCost": "10000",
          "softwareAlert": "N/A",
          "programRulestext": "<h2 style=\"font-family:'Bruno Ace', sans-serif; margin:0 0 0.5em 0;\">Shadow Protocols</h2><p>This software is designed to lower the alert level.</p><p>It can be used actively to reduce the alert level, or loaded into the I/O stream to reduce all alert increases by its software rating.</p><p>Make a Computer (Hacking) + Shadow Protocols rating test as a complex action; each success reduces the alert level by 1.</p>",
          "skillKey": "Skill_Hacking",
          "actionLabel": "Hack",
          "gearFeature": "1",
          "bonusDice": "0",
          "diceMod": "0",
          "softwareSlot": 0,
          "poolKey_copy1": "Focus",
          "limitBonusSource": "Software Rating",
          "loopingFlag": "No"
        },
        "unique": false,
        "uniqueId": "dmVJnyLDngBKpJCJ"
      },
      "_id": "2iB381eJ4og3PFR6",
      "effects": [],
      "sort": 0,
      "flags": {
        "custom-system-builder": {
          "version": "5.1.0"
        }
      },
      "_stats": {
        "compendiumSource": "Item.dmVJnyLDngBKpJCJ",
        "duplicateSource": null,
        "exportSource": null,
        "coreVersion": "13.351",
        "systemId": "custom-system-builder",
        "systemVersion": "5.1.0",
        "createdTime": 1769974650953,
        "modifiedTime": 1769981988243,
        "lastModifiedBy": "KoiB8oaGNkPdgzdM"
      },
      "ownership": {
        "default": 0
      }
    },
    {
      "name": "Vermin Call",
      "type": "equippableItem",
      "folder": "rCTnl7myqTtxE5gl",
      "img": "modules/sinlesscsb/assets/icons/SR6/programs/Swarm.webp",
      "system": {
        "template": "lBNLLAeL3gcJs2RQ",
        "templateSystemUniqueVersion": 2509181623,
        "body": {
          "contents": [
            {
              "key": "",
              "colSpan": 1,
              "rowSpan": 1,
              "cssClass": "sinlesscsb-marker",
              "role": 0,
              "editRole": 0,
              "permission": 0,
              "tooltip": "",
              "visibilityFormula": "",
              "editableFormula": "",
              "escapeHTML": false,
              "type": "panel",
              "contents": [
                {
                  "key": "",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "panel",
                  "contents": [
                    {
                      "key": "gearFeature",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "medium",
                      "label": "Software Rating:",
                      "defaultValue": "1",
                      "allowDecimal": false,
                      "minVal": "1",
                      "maxVal": "6",
                      "allowRelative": false,
                      "showControls": true,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    },
                    {
                      "key": "bonusDice",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "medium",
                      "label": "bonusDice",
                      "defaultValue": "0",
                      "allowDecimal": false,
                      "minVal": "",
                      "maxVal": "",
                      "allowRelative": false,
                      "showControls": true,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    },
                    {
                      "key": "diceMod",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "(can spend from MCP Pool in roll dialogue using this)",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "medium",
                      "label": "diceMod ",
                      "defaultValue": "0",
                      "allowDecimal": false,
                      "minVal": "",
                      "maxVal": "",
                      "allowRelative": false,
                      "showControls": true,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    },
                    {
                      "key": "actionLabel",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "textField",
                      "size": "full-size",
                      "label": "actionLabel",
                      "defaultValue": "E War",
                      "charList": "",
                      "maxLength": null,
                      "autocomplete": ""
                    },
                    {
                      "key": "softwareSlot",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "0=inactive, 1=active",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "medium",
                      "label": "softwareSlot",
                      "defaultValue": "0",
                      "allowDecimal": false,
                      "minVal": "0",
                      "maxVal": "1",
                      "allowRelative": false,
                      "showControls": false,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    },
                    {
                      "key": "ioSoftware",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "textField",
                      "size": "medium",
                      "label": "I / O",
                      "defaultValue": "",
                      "charList": "",
                      "maxLength": null,
                      "autocomplete": ""
                    },
                    {
                      "key": "softwareCost",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "full-size",
                      "label": "Cost per rating",
                      "defaultValue": "",
                      "allowDecimal": false,
                      "minVal": "0",
                      "maxVal": "",
                      "allowRelative": false,
                      "showControls": true,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    },
                    {
                      "key": "softwareAlert",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "textField",
                      "size": "full-size",
                      "label": "Alert",
                      "defaultValue": "",
                      "charList": "",
                      "maxLength": null,
                      "autocomplete": ""
                    }
                  ],
                  "flow": "grid-2",
                  "align": "left",
                  "verticalAlign": "top",
                  "collapsible": false,
                  "defaultCollapsed": false,
                  "title": "",
                  "titleStyle": "default"
                }
              ],
              "flow": "vertical",
              "align": "left",
              "verticalAlign": "top",
              "collapsible": true,
              "defaultCollapsed": false,
              "title": "Roll Config",
              "titleStyle": "default"
            },
            {
              "key": "",
              "colSpan": 1,
              "rowSpan": 1,
              "cssClass": "",
              "role": 0,
              "editRole": 0,
              "permission": 0,
              "tooltip": "",
              "visibilityFormula": "",
              "editableFormula": "",
              "escapeHTML": false,
              "type": "panel",
              "contents": [
                {
                  "key": "programRulestext",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "textArea",
                  "size": "full-size",
                  "label": "",
                  "defaultValue": "",
                  "style": "sheet"
                }
              ],
              "flow": "vertical",
              "align": "left",
              "verticalAlign": "top",
              "collapsible": true,
              "defaultCollapsed": true,
              "title": "Software rules text",
              "titleStyle": "default"
            },
            {
              "key": "",
              "colSpan": 1,
              "rowSpan": 1,
              "cssClass": "",
              "role": 4,
              "editRole": 0,
              "permission": 0,
              "tooltip": "",
              "visibilityFormula": "",
              "editableFormula": "",
              "escapeHTML": false,
              "type": "panel",
              "contents": [
                {
                  "key": "skillKey",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "textField",
                  "size": "full-size",
                  "label": "skillKey",
                  "defaultValue": "Skill_EWarfare",
                  "charList": "",
                  "maxLength": null,
                  "autocomplete": ""
                },
                {
                  "key": "poolKey_copy1",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "select",
                  "size": "full-size",
                  "label": "poolKey",
                  "defaultValue": "Focus",
                  "selectedOptionType": "custom",
                  "options": [
                    {
                      "key": "Brawn",
                      "value": "Brawn"
                    },
                    {
                      "key": "Finesse",
                      "value": "Finesse"
                    },
                    {
                      "key": "Resolve",
                      "value": "Resolve"
                    },
                    {
                      "key": "Focus",
                      "value": "Focus"
                    }
                  ]
                },
                {
                  "key": "limitBonusSource",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "textField",
                  "size": "full-size",
                  "label": "limitBonusSource",
                  "defaultValue": "Software Rating",
                  "charList": "",
                  "maxLength": null,
                  "autocomplete": ""
                },
                {
                  "key": "loopingFlag",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "textField",
                  "size": "full-size",
                  "label": "loopingFlag",
                  "defaultValue": "No",
                  "charList": "",
                  "maxLength": null,
                  "autocomplete": ""
                }
              ],
              "flow": "vertical",
              "align": "left",
              "verticalAlign": "top",
              "collapsible": true,
              "defaultCollapsed": false,
              "title": "hidden",
              "titleStyle": "default"
            }
          ],
          "key": "custom_body",
          "type": "panel"
        },
        "display": {
          "width": 600,
          "height": 600,
          "fix_size": false,
          "pp_width": 64,
          "pp_height": 64
        },
        "header": {
          "contents": [
            {
              "key": "",
              "colSpan": 1,
              "rowSpan": 1,
              "cssClass": "",
              "role": 0,
              "editRole": 0,
              "permission": 0,
              "tooltip": "",
              "visibilityFormula": "",
              "editableFormula": "",
              "escapeHTML": false,
              "type": "panel",
              "contents": [
                {
                  "key": "",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "label",
                  "size": "full-size",
                  "icon": "code",
                  "value": "${actionLabel ? actionLabel : \"Use\"}$",
                  "prefix": "",
                  "suffix": "",
                  "rollMessage": "%{\n  // Prefer linkedEntity (inventory row) then entity (item sheet)\n  const doc = (typeof linkedEntity !== \"undefined\" && linkedEntity) ? linkedEntity\n            : (typeof entity !== \"undefined\" && entity) ? entity\n            : null;\n\n  const itemUuid = String(doc?.uuid ?? \"\").trim();\n\n  // Pull actor from safe sources only\n  const embeddedActorUuid =\n    (doc?.parent?.documentName === \"Actor\" && doc?.parent?.uuid) ? String(doc.parent.uuid) : \"\";\n\n  const scopeActorUuid =\n    (typeof actor !== \"undefined\" && actor?.documentName === \"Actor\" && actor?.uuid) ? String(actor.uuid) : \"\";\n\n  const controlledActorUuid = (() => {\n    const t = canvas?.tokens?.controlled?.[0];\n    return t?.actor?.uuid ? String(t.actor.uuid) : \"\";\n  })();\n\n  const targetedActorUuid = (() => {\n    const t = game.user?.targets ? Array.from(game.user.targets)[0] : null;\n    return t?.actor?.uuid ? String(t.actor.uuid) : \"\";\n  })();\n\n  const userCharUuid = game.user?.character?.uuid ? String(game.user.character.uuid) : \"\";\n\n  const actorUuid = String(\n    embeddedActorUuid ||\n    scopeActorUuid ||\n    controlledActorUuid ||\n    targetedActorUuid ||\n    userCharUuid ||\n    \"\"\n  ).trim();\n\n  if (!itemUuid) {\n    console.warn(\"SinlessCSB | rollItem: missing itemUuid\", { doc, linkedEntity: (typeof linkedEntity !== \"undefined\" ? linkedEntity : undefined), entity: (typeof entity !== \"undefined\" ? entity : undefined) });\n    ui.notifications?.warn?.(\"SinlessCSB: missing item context (itemUuid).\");\n    return \"\";\n  }\n\n  if (!actorUuid) {\n    console.warn(\"SinlessCSB | rollItem: missing actorUuid (control/target a token)\", {\n      itemUuid,\n      controlled: canvas?.tokens?.controlled?.length ?? 0,\n      targets: game.user?.targets?.size ?? 0\n    });\n    ui.notifications?.warn?.(\"SinlessCSB: No actor context. Control a token (click) or target one, then try again.\");\n    return \"\";\n  }\n\n  const api = game.modules.get(\"sinlesscsb\")?.api;\n  if (typeof api?.rollItem !== \"function\") {\n    console.warn(\"SinlessCSB | rollItem: API not available\", { apiKeys: Object.keys(api ?? {}) });\n    ui.notifications?.error?.(\"SinlessCSB: rollItem API not available (module not ready / not exposed).\");\n    return \"\";\n  }\n\n  console.log(\"SinlessCSB | rollItem (hardened)\", { itemUuid, actorUuid, itemName: doc?.name });\n  api.rollItem({ itemUuid, actorUuid });\n  return \"\";\n}%\n",
                  "altRollMessage": "",
                  "rollMessageToChat": false,
                  "altRollMessageToChat": false,
                  "style": "button"
                },
                {
                  "key": "",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "panel",
                  "contents": [],
                  "flow": "vertical",
                  "align": "center",
                  "verticalAlign": "top",
                  "collapsible": false,
                  "defaultCollapsed": false,
                  "title": "",
                  "titleStyle": "default"
                },
                {
                  "key": "",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "panel",
                  "contents": [
                    {
                      "key": "deckactionType",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "textField",
                      "size": "m-large",
                      "label": "Action Type:",
                      "defaultValue": "Complex Action",
                      "charList": "",
                      "maxLength": null,
                      "autocomplete": ""
                    },
                    {
                      "key": "actionSpecial",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "textField",
                      "size": "full-size",
                      "label": "Special:",
                      "defaultValue": "",
                      "charList": "",
                      "maxLength": null,
                      "autocomplete": ""
                    }
                  ],
                  "flow": "vertical",
                  "align": "right",
                  "verticalAlign": "top",
                  "collapsible": false,
                  "defaultCollapsed": false,
                  "title": "",
                  "titleStyle": "default"
                }
              ],
              "flow": "vertical",
              "align": "center",
              "verticalAlign": "top",
              "collapsible": false,
              "defaultCollapsed": false,
              "title": "",
              "titleStyle": "default"
            }
          ],
          "key": "custom_header",
          "type": "panel"
        },
        "hidden": [],
        "modifiers": [],
        "props": {
          "deckactionType": "Complex Action",
          "actionSpecial": "Network Access Node control required",
          "ioSoftware": "Yes",
          "softwareCost": "20000",
          "softwareAlert": "7",
          "programRulestext": "<h2 style=\"font-family:'Bruno Ace', sans-serif; margin:0 0 0.5em 0;\">Vermin Call</h2><p>The decker causes certain inaudible frequencies to surround a target.</p><p>At the start of the next round, vermin swarm the target; silverfish, electrical ants, cockroaches, bedbugs, and more, depending on the environment, begin crawling and biting the target.</p><p>The target is unable to concentrate on any actions, preventing them from taking any complex actions while the effect lasts, and the decker does a direct 1 + 1/3 software rating in damage (round down) to the target's physical condition track at the start of each round.</p><p>Targets in power armor, synthetics, spirits, and software agents are immune.</p>",
          "skillKey": "Skill_EWarfare",
          "actionLabel": "E War",
          "gearFeature": "1",
          "bonusDice": "0",
          "diceMod": "0",
          "softwareSlot": 0,
          "poolKey_copy1": "Focus",
          "limitBonusSource": "Software Rating",
          "loopingFlag": "No"
        },
        "unique": false,
        "uniqueId": "oRz0KfIjh0V4CbbD"
      },
      "_id": "ywpFab1sQHu5j82r",
      "effects": [],
      "sort": 0,
      "flags": {
        "custom-system-builder": {
          "version": "5.1.0"
        }
      },
      "_stats": {
        "compendiumSource": "Item.oRz0KfIjh0V4CbbD",
        "duplicateSource": null,
        "exportSource": null,
        "coreVersion": "13.351",
        "systemId": "custom-system-builder",
        "systemVersion": "5.1.0",
        "createdTime": 1769974654182,
        "modifiedTime": 1769981987483,
        "lastModifiedBy": "KoiB8oaGNkPdgzdM"
      },
      "ownership": {
        "default": 0
      }
    },
    {
      "name": "Electric Strike",
      "type": "equippableItem",
      "folder": "rCTnl7myqTtxE5gl",
      "img": "modules/sinlesscsb/assets/icons/SR6/programs/Blackout.webp",
      "system": {
        "template": "8CMq8JmyHbRCglOv",
        "templateSystemUniqueVersion": 3104837394,
        "body": {
          "contents": [
            {
              "key": "",
              "colSpan": 1,
              "rowSpan": 1,
              "cssClass": "sinlesscsb-marker",
              "role": 0,
              "editRole": 0,
              "permission": 0,
              "tooltip": "",
              "visibilityFormula": "",
              "editableFormula": "",
              "escapeHTML": false,
              "type": "panel",
              "contents": [
                {
                  "key": "",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "panel",
                  "contents": [
                    {
                      "key": "gearFeature",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "medium",
                      "label": "Software Rating:",
                      "defaultValue": "1",
                      "allowDecimal": false,
                      "minVal": "1",
                      "maxVal": "6",
                      "allowRelative": false,
                      "showControls": true,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    },
                    {
                      "key": "bonusDice",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "medium",
                      "label": "bonusDice",
                      "defaultValue": "0",
                      "allowDecimal": false,
                      "minVal": "",
                      "maxVal": "",
                      "allowRelative": false,
                      "showControls": true,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    },
                    {
                      "key": "diceMod",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "(can spend from MCP Pool in roll dialogue using this)",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "medium",
                      "label": "diceMod ",
                      "defaultValue": "0",
                      "allowDecimal": false,
                      "minVal": "",
                      "maxVal": "",
                      "allowRelative": false,
                      "showControls": true,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    },
                    {
                      "key": "actionLabel",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "textField",
                      "size": "full-size",
                      "label": "actionLabel",
                      "defaultValue": "Hack",
                      "charList": "",
                      "maxLength": null,
                      "autocomplete": ""
                    },
                    {
                      "key": "softwareSlot",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "0=inactive, 1=active",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "medium",
                      "label": "softwareSlot",
                      "defaultValue": "0",
                      "allowDecimal": false,
                      "minVal": "0",
                      "maxVal": "1",
                      "allowRelative": false,
                      "showControls": false,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    },
                    {
                      "key": "ioSoftware",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "textField",
                      "size": "medium",
                      "label": "I / O",
                      "defaultValue": "",
                      "charList": "",
                      "maxLength": null,
                      "autocomplete": ""
                    },
                    {
                      "key": "softwareCost",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "full-size",
                      "label": "Cost per rating",
                      "defaultValue": "",
                      "allowDecimal": false,
                      "minVal": "0",
                      "maxVal": "",
                      "allowRelative": false,
                      "showControls": true,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    },
                    {
                      "key": "softwareAlert",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "textField",
                      "size": "full-size",
                      "label": "Alert",
                      "defaultValue": "",
                      "charList": "",
                      "maxLength": null,
                      "autocomplete": ""
                    }
                  ],
                  "flow": "grid-2",
                  "align": "left",
                  "verticalAlign": "top",
                  "collapsible": false,
                  "defaultCollapsed": false,
                  "title": "",
                  "titleStyle": "default"
                }
              ],
              "flow": "vertical",
              "align": "left",
              "verticalAlign": "top",
              "collapsible": true,
              "defaultCollapsed": false,
              "title": "Roll Config",
              "titleStyle": "default"
            },
            {
              "key": "",
              "colSpan": 1,
              "rowSpan": 1,
              "cssClass": "",
              "role": 0,
              "editRole": 0,
              "permission": 0,
              "tooltip": "",
              "visibilityFormula": "",
              "editableFormula": "",
              "escapeHTML": false,
              "type": "panel",
              "contents": [
                {
                  "key": "programRulestext",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "textArea",
                  "size": "full-size",
                  "label": "",
                  "defaultValue": "",
                  "style": "sheet"
                }
              ],
              "flow": "vertical",
              "align": "left",
              "verticalAlign": "top",
              "collapsible": true,
              "defaultCollapsed": true,
              "title": "Software rules text",
              "titleStyle": "default"
            },
            {
              "key": "",
              "colSpan": 1,
              "rowSpan": 1,
              "cssClass": "",
              "role": 4,
              "editRole": 0,
              "permission": 0,
              "tooltip": "",
              "visibilityFormula": "",
              "editableFormula": "",
              "escapeHTML": false,
              "type": "panel",
              "contents": [
                {
                  "key": "skillKey",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "textField",
                  "size": "full-size",
                  "label": "skillKey",
                  "defaultValue": "Skill_Hacking",
                  "charList": "",
                  "maxLength": null,
                  "autocomplete": ""
                },
                {
                  "key": "poolKey_copy1",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "select",
                  "size": "full-size",
                  "label": "poolKey",
                  "defaultValue": "Focus",
                  "selectedOptionType": "custom",
                  "options": [
                    {
                      "key": "Brawn",
                      "value": "Brawn"
                    },
                    {
                      "key": "Finesse",
                      "value": "Finesse"
                    },
                    {
                      "key": "Resolve",
                      "value": "Resolve"
                    },
                    {
                      "key": "Focus",
                      "value": "Focus"
                    }
                  ]
                },
                {
                  "key": "limitBonusSource",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "textField",
                  "size": "full-size",
                  "label": "limitBonusSource",
                  "defaultValue": "Software Rating",
                  "charList": "",
                  "maxLength": null,
                  "autocomplete": ""
                },
                {
                  "key": "loopingFlag",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "textField",
                  "size": "full-size",
                  "label": "loopingFlag",
                  "defaultValue": "No",
                  "charList": "",
                  "maxLength": null,
                  "autocomplete": ""
                }
              ],
              "flow": "vertical",
              "align": "left",
              "verticalAlign": "top",
              "collapsible": true,
              "defaultCollapsed": false,
              "title": "hidden",
              "titleStyle": "default"
            }
          ],
          "key": "custom_body",
          "type": "panel"
        },
        "display": {
          "width": 600,
          "height": 600,
          "fix_size": false,
          "pp_width": 64,
          "pp_height": 64
        },
        "header": {
          "contents": [
            {
              "key": "",
              "colSpan": 1,
              "rowSpan": 1,
              "cssClass": "",
              "role": 0,
              "editRole": 0,
              "permission": 0,
              "tooltip": "",
              "visibilityFormula": "",
              "editableFormula": "",
              "escapeHTML": false,
              "type": "panel",
              "contents": [
                {
                  "key": "",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "label",
                  "size": "full-size",
                  "icon": "code",
                  "value": "${actionLabel ? actionLabel : \"Use\"}$",
                  "prefix": "",
                  "suffix": "",
                  "rollMessage": "%{\n  // Prefer linkedEntity (inventory row) then entity (item sheet)\n  const doc = (typeof linkedEntity !== \"undefined\" && linkedEntity) ? linkedEntity\n            : (typeof entity !== \"undefined\" && entity) ? entity\n            : null;\n\n  const itemUuid = String(doc?.uuid ?? \"\").trim();\n\n  // Pull actor from safe sources only\n  const embeddedActorUuid =\n    (doc?.parent?.documentName === \"Actor\" && doc?.parent?.uuid) ? String(doc.parent.uuid) : \"\";\n\n  const scopeActorUuid =\n    (typeof actor !== \"undefined\" && actor?.documentName === \"Actor\" && actor?.uuid) ? String(actor.uuid) : \"\";\n\n  const controlledActorUuid = (() => {\n    const t = canvas?.tokens?.controlled?.[0];\n    return t?.actor?.uuid ? String(t.actor.uuid) : \"\";\n  })();\n\n  const targetedActorUuid = (() => {\n    const t = game.user?.targets ? Array.from(game.user.targets)[0] : null;\n    return t?.actor?.uuid ? String(t.actor.uuid) : \"\";\n  })();\n\n  const userCharUuid = game.user?.character?.uuid ? String(game.user.character.uuid) : \"\";\n\n  const actorUuid = String(\n    embeddedActorUuid ||\n    scopeActorUuid ||\n    controlledActorUuid ||\n    targetedActorUuid ||\n    userCharUuid ||\n    \"\"\n  ).trim();\n\n  if (!itemUuid) {\n    console.warn(\"SinlessCSB | rollItem: missing itemUuid\", { doc, linkedEntity: (typeof linkedEntity !== \"undefined\" ? linkedEntity : undefined), entity: (typeof entity !== \"undefined\" ? entity : undefined) });\n    ui.notifications?.warn?.(\"SinlessCSB: missing item context (itemUuid).\");\n    return \"\";\n  }\n\n  if (!actorUuid) {\n    console.warn(\"SinlessCSB | rollItem: missing actorUuid (control/target a token)\", {\n      itemUuid,\n      controlled: canvas?.tokens?.controlled?.length ?? 0,\n      targets: game.user?.targets?.size ?? 0\n    });\n    ui.notifications?.warn?.(\"SinlessCSB: No actor context. Control a token (click) or target one, then try again.\");\n    return \"\";\n  }\n\n  const api = game.modules.get(\"sinlesscsb\")?.api;\n  if (typeof api?.rollItem !== \"function\") {\n    console.warn(\"SinlessCSB | rollItem: API not available\", { apiKeys: Object.keys(api ?? {}) });\n    ui.notifications?.error?.(\"SinlessCSB: rollItem API not available (module not ready / not exposed).\");\n    return \"\";\n  }\n\n  console.log(\"SinlessCSB | rollItem (hardened)\", { itemUuid, actorUuid, itemName: doc?.name });\n  api.rollItem({ itemUuid, actorUuid });\n  return \"\";\n}%\n",
                  "altRollMessage": "",
                  "rollMessageToChat": false,
                  "altRollMessageToChat": false,
                  "style": "button"
                },
                {
                  "key": "",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "panel",
                  "contents": [],
                  "flow": "vertical",
                  "align": "center",
                  "verticalAlign": "top",
                  "collapsible": false,
                  "defaultCollapsed": false,
                  "title": "",
                  "titleStyle": "default"
                },
                {
                  "key": "",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "panel",
                  "contents": [
                    {
                      "key": "deckactionType",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "textField",
                      "size": "m-large",
                      "label": "Action Type:",
                      "defaultValue": "Complex Action",
                      "charList": "",
                      "maxLength": null,
                      "autocomplete": ""
                    },
                    {
                      "key": "actionSpecial",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "textField",
                      "size": "full-size",
                      "label": "Special:",
                      "defaultValue": "",
                      "charList": "",
                      "maxLength": null,
                      "autocomplete": ""
                    }
                  ],
                  "flow": "vertical",
                  "align": "right",
                  "verticalAlign": "top",
                  "collapsible": false,
                  "defaultCollapsed": false,
                  "title": "",
                  "titleStyle": "default"
                }
              ],
              "flow": "vertical",
              "align": "center",
              "verticalAlign": "top",
              "collapsible": false,
              "defaultCollapsed": false,
              "title": "",
              "titleStyle": "default"
            }
          ],
          "key": "custom_header",
          "type": "panel"
        },
        "hidden": [],
        "modifiers": [],
        "props": {
          "deckactionType": "Complex Action",
          "actionSpecial": "Network Access Node control required",
          "ioSoftware": "No",
          "softwareCost": "10000",
          "softwareAlert": "15",
          "programRulestext": "<h2 style=\"font-family:'Bruno Ace', sans-serif; margin:0 0 0.5em 0;\">Electric Strike</h2><p>This software causes an electrical discharge from nearby electrical equipment within the decker's influence field.</p><p>The decker makes a Computer (Hacking) + Electric Strike rating test. It does 1d6 direct damage to the target's stun condition track, plus an additional 1 point per success.</p><p>This damage ignores armor. It cannot be dodged, but can be soaked.</p><p>The decker can distribute this damage to anyone in range, divided however they wish. If targeting machines, software agents, or synthetics, damage assigned is applied twice.</p>",
          "skillKey": "Skill_Hacking",
          "actionLabel": "Hack",
          "gearFeature": "1",
          "bonusDice": "0",
          "diceMod": "0",
          "softwareSlot": 0,
          "poolKey_copy1": "Focus",
          "limitBonusSource": "Software Rating",
          "loopingFlag": "No"
        },
        "unique": false,
        "uniqueId": "2IYdU2FRR7FrlnCZ"
      },
      "_id": "MfsN0BZyKer0BkC2",
      "effects": [],
      "sort": 0,
      "flags": {
        "custom-system-builder": {
          "version": "5.1.0"
        }
      },
      "_stats": {
        "compendiumSource": "Item.2IYdU2FRR7FrlnCZ",
        "duplicateSource": null,
        "exportSource": null,
        "coreVersion": "13.351",
        "systemId": "custom-system-builder",
        "systemVersion": "5.1.0",
        "createdTime": 1769974663895,
        "modifiedTime": 1769981986283,
        "lastModifiedBy": "KoiB8oaGNkPdgzdM"
      },
      "ownership": {
        "default": 0
      }
    },
    {
      "name": "Refraction Field",
      "type": "equippableItem",
      "folder": "rCTnl7myqTtxE5gl",
      "img": "modules/sinlesscsb/assets/icons/SR6/programs/DirectionalShield.webp",
      "system": {
        "template": "lBNLLAeL3gcJs2RQ",
        "templateSystemUniqueVersion": 2509181623,
        "body": {
          "contents": [
            {
              "key": "",
              "colSpan": 1,
              "rowSpan": 1,
              "cssClass": "sinlesscsb-marker",
              "role": 0,
              "editRole": 0,
              "permission": 0,
              "tooltip": "",
              "visibilityFormula": "",
              "editableFormula": "",
              "escapeHTML": false,
              "type": "panel",
              "contents": [
                {
                  "key": "",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "panel",
                  "contents": [
                    {
                      "key": "gearFeature",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "medium",
                      "label": "Software Rating:",
                      "defaultValue": "1",
                      "allowDecimal": false,
                      "minVal": "1",
                      "maxVal": "6",
                      "allowRelative": false,
                      "showControls": true,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    },
                    {
                      "key": "bonusDice",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "medium",
                      "label": "bonusDice",
                      "defaultValue": "0",
                      "allowDecimal": false,
                      "minVal": "",
                      "maxVal": "",
                      "allowRelative": false,
                      "showControls": true,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    },
                    {
                      "key": "diceMod",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "(can spend from MCP Pool in roll dialogue using this)",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "medium",
                      "label": "diceMod ",
                      "defaultValue": "0",
                      "allowDecimal": false,
                      "minVal": "",
                      "maxVal": "",
                      "allowRelative": false,
                      "showControls": true,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    },
                    {
                      "key": "actionLabel",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "textField",
                      "size": "full-size",
                      "label": "actionLabel",
                      "defaultValue": "E War",
                      "charList": "",
                      "maxLength": null,
                      "autocomplete": ""
                    },
                    {
                      "key": "softwareSlot",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "0=inactive, 1=active",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "medium",
                      "label": "softwareSlot",
                      "defaultValue": "0",
                      "allowDecimal": false,
                      "minVal": "0",
                      "maxVal": "1",
                      "allowRelative": false,
                      "showControls": false,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    },
                    {
                      "key": "ioSoftware",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "textField",
                      "size": "medium",
                      "label": "I / O",
                      "defaultValue": "",
                      "charList": "",
                      "maxLength": null,
                      "autocomplete": ""
                    },
                    {
                      "key": "softwareCost",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "full-size",
                      "label": "Cost per rating",
                      "defaultValue": "",
                      "allowDecimal": false,
                      "minVal": "0",
                      "maxVal": "",
                      "allowRelative": false,
                      "showControls": true,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    },
                    {
                      "key": "softwareAlert",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "textField",
                      "size": "full-size",
                      "label": "Alert",
                      "defaultValue": "",
                      "charList": "",
                      "maxLength": null,
                      "autocomplete": ""
                    }
                  ],
                  "flow": "grid-2",
                  "align": "left",
                  "verticalAlign": "top",
                  "collapsible": false,
                  "defaultCollapsed": false,
                  "title": "",
                  "titleStyle": "default"
                }
              ],
              "flow": "vertical",
              "align": "left",
              "verticalAlign": "top",
              "collapsible": true,
              "defaultCollapsed": false,
              "title": "Roll Config",
              "titleStyle": "default"
            },
            {
              "key": "",
              "colSpan": 1,
              "rowSpan": 1,
              "cssClass": "",
              "role": 0,
              "editRole": 0,
              "permission": 0,
              "tooltip": "",
              "visibilityFormula": "",
              "editableFormula": "",
              "escapeHTML": false,
              "type": "panel",
              "contents": [
                {
                  "key": "programRulestext",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "textArea",
                  "size": "full-size",
                  "label": "",
                  "defaultValue": "",
                  "style": "sheet"
                }
              ],
              "flow": "vertical",
              "align": "left",
              "verticalAlign": "top",
              "collapsible": true,
              "defaultCollapsed": true,
              "title": "Software rules text",
              "titleStyle": "default"
            },
            {
              "key": "",
              "colSpan": 1,
              "rowSpan": 1,
              "cssClass": "",
              "role": 4,
              "editRole": 0,
              "permission": 0,
              "tooltip": "",
              "visibilityFormula": "",
              "editableFormula": "",
              "escapeHTML": false,
              "type": "panel",
              "contents": [
                {
                  "key": "skillKey",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "textField",
                  "size": "full-size",
                  "label": "skillKey",
                  "defaultValue": "Skill_EWarfare",
                  "charList": "",
                  "maxLength": null,
                  "autocomplete": ""
                },
                {
                  "key": "poolKey_copy1",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "select",
                  "size": "full-size",
                  "label": "poolKey",
                  "defaultValue": "Focus",
                  "selectedOptionType": "custom",
                  "options": [
                    {
                      "key": "Brawn",
                      "value": "Brawn"
                    },
                    {
                      "key": "Finesse",
                      "value": "Finesse"
                    },
                    {
                      "key": "Resolve",
                      "value": "Resolve"
                    },
                    {
                      "key": "Focus",
                      "value": "Focus"
                    }
                  ]
                },
                {
                  "key": "limitBonusSource",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "textField",
                  "size": "full-size",
                  "label": "limitBonusSource",
                  "defaultValue": "Software Rating",
                  "charList": "",
                  "maxLength": null,
                  "autocomplete": ""
                },
                {
                  "key": "loopingFlag",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "textField",
                  "size": "full-size",
                  "label": "loopingFlag",
                  "defaultValue": "No",
                  "charList": "",
                  "maxLength": null,
                  "autocomplete": ""
                }
              ],
              "flow": "vertical",
              "align": "left",
              "verticalAlign": "top",
              "collapsible": true,
              "defaultCollapsed": false,
              "title": "hidden",
              "titleStyle": "default"
            }
          ],
          "key": "custom_body",
          "type": "panel"
        },
        "display": {
          "width": 600,
          "height": 600,
          "fix_size": false,
          "pp_width": 64,
          "pp_height": 64
        },
        "header": {
          "contents": [
            {
              "key": "",
              "colSpan": 1,
              "rowSpan": 1,
              "cssClass": "",
              "role": 0,
              "editRole": 0,
              "permission": 0,
              "tooltip": "",
              "visibilityFormula": "",
              "editableFormula": "",
              "escapeHTML": false,
              "type": "panel",
              "contents": [
                {
                  "key": "",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "label",
                  "size": "full-size",
                  "icon": "code",
                  "value": "${actionLabel ? actionLabel : \"Use\"}$",
                  "prefix": "",
                  "suffix": "",
                  "rollMessage": "%{\n  // Prefer linkedEntity (inventory row) then entity (item sheet)\n  const doc = (typeof linkedEntity !== \"undefined\" && linkedEntity) ? linkedEntity\n            : (typeof entity !== \"undefined\" && entity) ? entity\n            : null;\n\n  const itemUuid = String(doc?.uuid ?? \"\").trim();\n\n  // Pull actor from safe sources only\n  const embeddedActorUuid =\n    (doc?.parent?.documentName === \"Actor\" && doc?.parent?.uuid) ? String(doc.parent.uuid) : \"\";\n\n  const scopeActorUuid =\n    (typeof actor !== \"undefined\" && actor?.documentName === \"Actor\" && actor?.uuid) ? String(actor.uuid) : \"\";\n\n  const controlledActorUuid = (() => {\n    const t = canvas?.tokens?.controlled?.[0];\n    return t?.actor?.uuid ? String(t.actor.uuid) : \"\";\n  })();\n\n  const targetedActorUuid = (() => {\n    const t = game.user?.targets ? Array.from(game.user.targets)[0] : null;\n    return t?.actor?.uuid ? String(t.actor.uuid) : \"\";\n  })();\n\n  const userCharUuid = game.user?.character?.uuid ? String(game.user.character.uuid) : \"\";\n\n  const actorUuid = String(\n    embeddedActorUuid ||\n    scopeActorUuid ||\n    controlledActorUuid ||\n    targetedActorUuid ||\n    userCharUuid ||\n    \"\"\n  ).trim();\n\n  if (!itemUuid) {\n    console.warn(\"SinlessCSB | rollItem: missing itemUuid\", { doc, linkedEntity: (typeof linkedEntity !== \"undefined\" ? linkedEntity : undefined), entity: (typeof entity !== \"undefined\" ? entity : undefined) });\n    ui.notifications?.warn?.(\"SinlessCSB: missing item context (itemUuid).\");\n    return \"\";\n  }\n\n  if (!actorUuid) {\n    console.warn(\"SinlessCSB | rollItem: missing actorUuid (control/target a token)\", {\n      itemUuid,\n      controlled: canvas?.tokens?.controlled?.length ?? 0,\n      targets: game.user?.targets?.size ?? 0\n    });\n    ui.notifications?.warn?.(\"SinlessCSB: No actor context. Control a token (click) or target one, then try again.\");\n    return \"\";\n  }\n\n  const api = game.modules.get(\"sinlesscsb\")?.api;\n  if (typeof api?.rollItem !== \"function\") {\n    console.warn(\"SinlessCSB | rollItem: API not available\", { apiKeys: Object.keys(api ?? {}) });\n    ui.notifications?.error?.(\"SinlessCSB: rollItem API not available (module not ready / not exposed).\");\n    return \"\";\n  }\n\n  console.log(\"SinlessCSB | rollItem (hardened)\", { itemUuid, actorUuid, itemName: doc?.name });\n  api.rollItem({ itemUuid, actorUuid });\n  return \"\";\n}%\n",
                  "altRollMessage": "",
                  "rollMessageToChat": false,
                  "altRollMessageToChat": false,
                  "style": "button"
                },
                {
                  "key": "",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "panel",
                  "contents": [],
                  "flow": "vertical",
                  "align": "center",
                  "verticalAlign": "top",
                  "collapsible": false,
                  "defaultCollapsed": false,
                  "title": "",
                  "titleStyle": "default"
                },
                {
                  "key": "",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "panel",
                  "contents": [
                    {
                      "key": "deckactionType",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "textField",
                      "size": "m-large",
                      "label": "Action Type:",
                      "defaultValue": "Complex Action",
                      "charList": "",
                      "maxLength": null,
                      "autocomplete": ""
                    },
                    {
                      "key": "actionSpecial",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "textField",
                      "size": "full-size",
                      "label": "Special:",
                      "defaultValue": "",
                      "charList": "",
                      "maxLength": null,
                      "autocomplete": ""
                    }
                  ],
                  "flow": "vertical",
                  "align": "right",
                  "verticalAlign": "top",
                  "collapsible": false,
                  "defaultCollapsed": false,
                  "title": "",
                  "titleStyle": "default"
                }
              ],
              "flow": "vertical",
              "align": "center",
              "verticalAlign": "top",
              "collapsible": false,
              "defaultCollapsed": false,
              "title": "",
              "titleStyle": "default"
            }
          ],
          "key": "custom_header",
          "type": "panel"
        },
        "hidden": [],
        "modifiers": [],
        "props": {
          "deckactionType": "Complex Action",
          "actionSpecial": "Network Access Node control required",
          "ioSoftware": "Yes",
          "softwareCost": "15000",
          "softwareAlert": "3 + 1 per success",
          "programRulestext": "<h2 style=\"font-family:'Bruno Ace', sans-serif; margin:0 0 0.5em 0;\">Refraction Field</h2><p>This software allows the decker to manipulate a strong electromagnetic field. She can draw a straight line that intersects any 2 edges of her range of influence.</p><p>Make a Computer (Electronic Warfare) + Refraction Field software rating test. Lasers and other energy weapons fired through the barrier drop in power by 1 per success.</p><p>The field does not impede physical movement or normal gunfire.</p>",
          "skillKey": "Skill_EWarfare",
          "actionLabel": "E War",
          "gearFeature": "1",
          "bonusDice": "0",
          "diceMod": "0",
          "softwareSlot": "0",
          "poolKey_copy1": "Focus",
          "limitBonusSource": "Software Rating",
          "loopingFlag": "No"
        },
        "unique": false,
        "uniqueId": "7IRs6MwcbyHAALRp"
      },
      "_id": "mI5aL5i6sY9pd1i9",
      "effects": [],
      "sort": 0,
      "flags": {
        "custom-system-builder": {
          "version": "5.1.0"
        }
      },
      "_stats": {
        "compendiumSource": "Item.7IRs6MwcbyHAALRp",
        "duplicateSource": null,
        "exportSource": null,
        "coreVersion": "13.351",
        "systemId": "custom-system-builder",
        "systemVersion": "5.1.0",
        "createdTime": 1769974666519,
        "modifiedTime": 1769974666519,
        "lastModifiedBy": "KoiB8oaGNkPdgzdM"
      },
      "ownership": {
        "default": 0
      }
    },
    {
      "name": "Emotional Influence",
      "type": "equippableItem",
      "folder": "rCTnl7myqTtxE5gl",
      "img": "modules/sinlesscsb/assets/icons/SR6/programs/MeFeed.webp",
      "system": {
        "template": "8CMq8JmyHbRCglOv",
        "templateSystemUniqueVersion": 3104837394,
        "body": {
          "contents": [
            {
              "key": "",
              "colSpan": 1,
              "rowSpan": 1,
              "cssClass": "sinlesscsb-marker",
              "role": 0,
              "editRole": 0,
              "permission": 0,
              "tooltip": "",
              "visibilityFormula": "",
              "editableFormula": "",
              "escapeHTML": false,
              "type": "panel",
              "contents": [
                {
                  "key": "",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "panel",
                  "contents": [
                    {
                      "key": "gearFeature",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "medium",
                      "label": "Software Rating:",
                      "defaultValue": "1",
                      "allowDecimal": false,
                      "minVal": "1",
                      "maxVal": "6",
                      "allowRelative": false,
                      "showControls": true,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    },
                    {
                      "key": "bonusDice",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "medium",
                      "label": "bonusDice",
                      "defaultValue": "0",
                      "allowDecimal": false,
                      "minVal": "",
                      "maxVal": "",
                      "allowRelative": false,
                      "showControls": true,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    },
                    {
                      "key": "diceMod",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "(can spend from MCP Pool in roll dialogue using this)",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "medium",
                      "label": "diceMod ",
                      "defaultValue": "0",
                      "allowDecimal": false,
                      "minVal": "",
                      "maxVal": "",
                      "allowRelative": false,
                      "showControls": true,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    },
                    {
                      "key": "actionLabel",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "textField",
                      "size": "full-size",
                      "label": "actionLabel",
                      "defaultValue": "Hack",
                      "charList": "",
                      "maxLength": null,
                      "autocomplete": ""
                    },
                    {
                      "key": "softwareSlot",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "0=inactive, 1=active",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "medium",
                      "label": "softwareSlot",
                      "defaultValue": "0",
                      "allowDecimal": false,
                      "minVal": "0",
                      "maxVal": "1",
                      "allowRelative": false,
                      "showControls": false,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    },
                    {
                      "key": "ioSoftware",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "textField",
                      "size": "medium",
                      "label": "I / O",
                      "defaultValue": "",
                      "charList": "",
                      "maxLength": null,
                      "autocomplete": ""
                    },
                    {
                      "key": "softwareCost",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "full-size",
                      "label": "Cost per rating",
                      "defaultValue": "",
                      "allowDecimal": false,
                      "minVal": "0",
                      "maxVal": "",
                      "allowRelative": false,
                      "showControls": true,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    },
                    {
                      "key": "softwareAlert",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "textField",
                      "size": "full-size",
                      "label": "Alert",
                      "defaultValue": "",
                      "charList": "",
                      "maxLength": null,
                      "autocomplete": ""
                    }
                  ],
                  "flow": "grid-2",
                  "align": "left",
                  "verticalAlign": "top",
                  "collapsible": false,
                  "defaultCollapsed": false,
                  "title": "",
                  "titleStyle": "default"
                }
              ],
              "flow": "vertical",
              "align": "left",
              "verticalAlign": "top",
              "collapsible": true,
              "defaultCollapsed": false,
              "title": "Roll Config",
              "titleStyle": "default"
            },
            {
              "key": "",
              "colSpan": 1,
              "rowSpan": 1,
              "cssClass": "",
              "role": 0,
              "editRole": 0,
              "permission": 0,
              "tooltip": "",
              "visibilityFormula": "",
              "editableFormula": "",
              "escapeHTML": false,
              "type": "panel",
              "contents": [
                {
                  "key": "programRulestext",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "textArea",
                  "size": "full-size",
                  "label": "",
                  "defaultValue": "",
                  "style": "sheet"
                }
              ],
              "flow": "vertical",
              "align": "left",
              "verticalAlign": "top",
              "collapsible": true,
              "defaultCollapsed": true,
              "title": "Software rules text",
              "titleStyle": "default"
            },
            {
              "key": "",
              "colSpan": 1,
              "rowSpan": 1,
              "cssClass": "",
              "role": 4,
              "editRole": 0,
              "permission": 0,
              "tooltip": "",
              "visibilityFormula": "",
              "editableFormula": "",
              "escapeHTML": false,
              "type": "panel",
              "contents": [
                {
                  "key": "skillKey",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "textField",
                  "size": "full-size",
                  "label": "skillKey",
                  "defaultValue": "Skill_Hacking",
                  "charList": "",
                  "maxLength": null,
                  "autocomplete": ""
                },
                {
                  "key": "poolKey_copy1",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "select",
                  "size": "full-size",
                  "label": "poolKey",
                  "defaultValue": "Focus",
                  "selectedOptionType": "custom",
                  "options": [
                    {
                      "key": "Brawn",
                      "value": "Brawn"
                    },
                    {
                      "key": "Finesse",
                      "value": "Finesse"
                    },
                    {
                      "key": "Resolve",
                      "value": "Resolve"
                    },
                    {
                      "key": "Focus",
                      "value": "Focus"
                    }
                  ]
                },
                {
                  "key": "limitBonusSource",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "textField",
                  "size": "full-size",
                  "label": "limitBonusSource",
                  "defaultValue": "Software Rating",
                  "charList": "",
                  "maxLength": null,
                  "autocomplete": ""
                },
                {
                  "key": "loopingFlag",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "textField",
                  "size": "full-size",
                  "label": "loopingFlag",
                  "defaultValue": "No",
                  "charList": "",
                  "maxLength": null,
                  "autocomplete": ""
                }
              ],
              "flow": "vertical",
              "align": "left",
              "verticalAlign": "top",
              "collapsible": true,
              "defaultCollapsed": false,
              "title": "hidden",
              "titleStyle": "default"
            }
          ],
          "key": "custom_body",
          "type": "panel"
        },
        "display": {
          "width": 600,
          "height": 600,
          "fix_size": false,
          "pp_width": 64,
          "pp_height": 64
        },
        "header": {
          "contents": [
            {
              "key": "",
              "colSpan": 1,
              "rowSpan": 1,
              "cssClass": "",
              "role": 0,
              "editRole": 0,
              "permission": 0,
              "tooltip": "",
              "visibilityFormula": "",
              "editableFormula": "",
              "escapeHTML": false,
              "type": "panel",
              "contents": [
                {
                  "key": "",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "label",
                  "size": "full-size",
                  "icon": "code",
                  "value": "${actionLabel ? actionLabel : \"Use\"}$",
                  "prefix": "",
                  "suffix": "",
                  "rollMessage": "%{\n  // Prefer linkedEntity (inventory row) then entity (item sheet)\n  const doc = (typeof linkedEntity !== \"undefined\" && linkedEntity) ? linkedEntity\n            : (typeof entity !== \"undefined\" && entity) ? entity\n            : null;\n\n  const itemUuid = String(doc?.uuid ?? \"\").trim();\n\n  // Pull actor from safe sources only\n  const embeddedActorUuid =\n    (doc?.parent?.documentName === \"Actor\" && doc?.parent?.uuid) ? String(doc.parent.uuid) : \"\";\n\n  const scopeActorUuid =\n    (typeof actor !== \"undefined\" && actor?.documentName === \"Actor\" && actor?.uuid) ? String(actor.uuid) : \"\";\n\n  const controlledActorUuid = (() => {\n    const t = canvas?.tokens?.controlled?.[0];\n    return t?.actor?.uuid ? String(t.actor.uuid) : \"\";\n  })();\n\n  const targetedActorUuid = (() => {\n    const t = game.user?.targets ? Array.from(game.user.targets)[0] : null;\n    return t?.actor?.uuid ? String(t.actor.uuid) : \"\";\n  })();\n\n  const userCharUuid = game.user?.character?.uuid ? String(game.user.character.uuid) : \"\";\n\n  const actorUuid = String(\n    embeddedActorUuid ||\n    scopeActorUuid ||\n    controlledActorUuid ||\n    targetedActorUuid ||\n    userCharUuid ||\n    \"\"\n  ).trim();\n\n  if (!itemUuid) {\n    console.warn(\"SinlessCSB | rollItem: missing itemUuid\", { doc, linkedEntity: (typeof linkedEntity !== \"undefined\" ? linkedEntity : undefined), entity: (typeof entity !== \"undefined\" ? entity : undefined) });\n    ui.notifications?.warn?.(\"SinlessCSB: missing item context (itemUuid).\");\n    return \"\";\n  }\n\n  if (!actorUuid) {\n    console.warn(\"SinlessCSB | rollItem: missing actorUuid (control/target a token)\", {\n      itemUuid,\n      controlled: canvas?.tokens?.controlled?.length ?? 0,\n      targets: game.user?.targets?.size ?? 0\n    });\n    ui.notifications?.warn?.(\"SinlessCSB: No actor context. Control a token (click) or target one, then try again.\");\n    return \"\";\n  }\n\n  const api = game.modules.get(\"sinlesscsb\")?.api;\n  if (typeof api?.rollItem !== \"function\") {\n    console.warn(\"SinlessCSB | rollItem: API not available\", { apiKeys: Object.keys(api ?? {}) });\n    ui.notifications?.error?.(\"SinlessCSB: rollItem API not available (module not ready / not exposed).\");\n    return \"\";\n  }\n\n  console.log(\"SinlessCSB | rollItem (hardened)\", { itemUuid, actorUuid, itemName: doc?.name });\n  api.rollItem({ itemUuid, actorUuid });\n  return \"\";\n}%\n",
                  "altRollMessage": "",
                  "rollMessageToChat": false,
                  "altRollMessageToChat": false,
                  "style": "button"
                },
                {
                  "key": "",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "panel",
                  "contents": [],
                  "flow": "vertical",
                  "align": "center",
                  "verticalAlign": "top",
                  "collapsible": false,
                  "defaultCollapsed": false,
                  "title": "",
                  "titleStyle": "default"
                },
                {
                  "key": "",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "panel",
                  "contents": [
                    {
                      "key": "deckactionType",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "textField",
                      "size": "m-large",
                      "label": "Action Type:",
                      "defaultValue": "Complex Action",
                      "charList": "",
                      "maxLength": null,
                      "autocomplete": ""
                    },
                    {
                      "key": "actionSpecial",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "textField",
                      "size": "full-size",
                      "label": "Special:",
                      "defaultValue": "",
                      "charList": "",
                      "maxLength": null,
                      "autocomplete": ""
                    }
                  ],
                  "flow": "vertical",
                  "align": "right",
                  "verticalAlign": "top",
                  "collapsible": false,
                  "defaultCollapsed": false,
                  "title": "",
                  "titleStyle": "default"
                }
              ],
              "flow": "vertical",
              "align": "center",
              "verticalAlign": "top",
              "collapsible": false,
              "defaultCollapsed": false,
              "title": "",
              "titleStyle": "default"
            }
          ],
          "key": "custom_header",
          "type": "panel"
        },
        "hidden": [],
        "modifiers": [],
        "props": {
          "deckactionType": "Complex Action",
          "actionSpecial": "Network Access Node control required",
          "ioSoftware": "Yes",
          "softwareCost": "15000",
          "softwareAlert": "3 per target",
          "programRulestext": "<h2 style=\"font-family:'Bruno Ace', sans-serif; margin:0 0 0.5em 0;\">Emotional Influence</h2><p>This software allows the decker to manipulate and alter the emotions of the targets in the field using subsonics, holograms, and soft musical clues.</p><p>Targets may resist by rolling as many dice as they wish from their Resolve pool, versus the decker's Computer (Hacking) + Emotional Influence rating test.</p><p>The decker can evoke sadness, happiness, despair, or any other emotion she wishes.</p><p>This can support other tests, providing a number of bonus dice equal to the rating of the Emotional Influence software.</p>",
          "skillKey": "Skill_Hacking",
          "actionLabel": "Hack",
          "gearFeature": "1",
          "bonusDice": "0",
          "diceMod": "0",
          "softwareSlot": "0",
          "poolKey_copy1": "Focus",
          "limitBonusSource": "Software Rating",
          "loopingFlag": "No"
        },
        "unique": false,
        "uniqueId": "DHu7KLrwWwZrhsYw"
      },
      "_id": "RyvPEGbdg7WcUqs1",
      "effects": [],
      "sort": 0,
      "flags": {
        "custom-system-builder": {
          "version": "5.1.0"
        }
      },
      "_stats": {
        "compendiumSource": "Item.DHu7KLrwWwZrhsYw",
        "duplicateSource": null,
        "exportSource": null,
        "coreVersion": "13.351",
        "systemId": "custom-system-builder",
        "systemVersion": "5.1.0",
        "createdTime": 1769974686055,
        "modifiedTime": 1769974686055,
        "lastModifiedBy": "KoiB8oaGNkPdgzdM"
      },
      "ownership": {
        "default": 0
      }
    },
    {
      "name": "Device Control",
      "type": "equippableItem",
      "folder": "rCTnl7myqTtxE5gl",
      "img": "modules/sinlesscsb/assets/icons/SR6/programs/EmergencyOverride.webp",
      "system": {
        "template": "lBNLLAeL3gcJs2RQ",
        "templateSystemUniqueVersion": 2509181623,
        "body": {
          "contents": [
            {
              "key": "",
              "colSpan": 1,
              "rowSpan": 1,
              "cssClass": "sinlesscsb-marker",
              "role": 0,
              "editRole": 0,
              "permission": 0,
              "tooltip": "",
              "visibilityFormula": "",
              "editableFormula": "",
              "escapeHTML": false,
              "type": "panel",
              "contents": [
                {
                  "key": "",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "panel",
                  "contents": [
                    {
                      "key": "gearFeature",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "medium",
                      "label": "Software Rating:",
                      "defaultValue": "1",
                      "allowDecimal": false,
                      "minVal": "1",
                      "maxVal": "6",
                      "allowRelative": false,
                      "showControls": true,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    },
                    {
                      "key": "bonusDice",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "medium",
                      "label": "bonusDice",
                      "defaultValue": "0",
                      "allowDecimal": false,
                      "minVal": "",
                      "maxVal": "",
                      "allowRelative": false,
                      "showControls": true,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    },
                    {
                      "key": "diceMod",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "(can spend from MCP Pool in roll dialogue using this)",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "medium",
                      "label": "diceMod ",
                      "defaultValue": "0",
                      "allowDecimal": false,
                      "minVal": "",
                      "maxVal": "",
                      "allowRelative": false,
                      "showControls": true,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    },
                    {
                      "key": "actionLabel",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "textField",
                      "size": "full-size",
                      "label": "actionLabel",
                      "defaultValue": "E War",
                      "charList": "",
                      "maxLength": null,
                      "autocomplete": ""
                    },
                    {
                      "key": "softwareSlot",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "0=inactive, 1=active",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "medium",
                      "label": "softwareSlot",
                      "defaultValue": "0",
                      "allowDecimal": false,
                      "minVal": "0",
                      "maxVal": "1",
                      "allowRelative": false,
                      "showControls": false,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    },
                    {
                      "key": "ioSoftware",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "textField",
                      "size": "medium",
                      "label": "I / O",
                      "defaultValue": "",
                      "charList": "",
                      "maxLength": null,
                      "autocomplete": ""
                    },
                    {
                      "key": "softwareCost",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "numberField",
                      "size": "full-size",
                      "label": "Cost per rating",
                      "defaultValue": "",
                      "allowDecimal": false,
                      "minVal": "0",
                      "maxVal": "",
                      "allowRelative": false,
                      "showControls": true,
                      "controlsStyle": "hover",
                      "controlsCustomIncrements": "",
                      "inputStyle": "text"
                    },
                    {
                      "key": "softwareAlert",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "textField",
                      "size": "full-size",
                      "label": "Alert",
                      "defaultValue": "",
                      "charList": "",
                      "maxLength": null,
                      "autocomplete": ""
                    }
                  ],
                  "flow": "grid-2",
                  "align": "left",
                  "verticalAlign": "top",
                  "collapsible": false,
                  "defaultCollapsed": false,
                  "title": "",
                  "titleStyle": "default"
                }
              ],
              "flow": "vertical",
              "align": "left",
              "verticalAlign": "top",
              "collapsible": true,
              "defaultCollapsed": false,
              "title": "Roll Config",
              "titleStyle": "default"
            },
            {
              "key": "",
              "colSpan": 1,
              "rowSpan": 1,
              "cssClass": "",
              "role": 0,
              "editRole": 0,
              "permission": 0,
              "tooltip": "",
              "visibilityFormula": "",
              "editableFormula": "",
              "escapeHTML": false,
              "type": "panel",
              "contents": [
                {
                  "key": "programRulestext",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "textArea",
                  "size": "full-size",
                  "label": "",
                  "defaultValue": "",
                  "style": "sheet"
                }
              ],
              "flow": "vertical",
              "align": "left",
              "verticalAlign": "top",
              "collapsible": true,
              "defaultCollapsed": true,
              "title": "Software rules text",
              "titleStyle": "default"
            },
            {
              "key": "",
              "colSpan": 1,
              "rowSpan": 1,
              "cssClass": "",
              "role": 4,
              "editRole": 0,
              "permission": 0,
              "tooltip": "",
              "visibilityFormula": "",
              "editableFormula": "",
              "escapeHTML": false,
              "type": "panel",
              "contents": [
                {
                  "key": "skillKey",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "textField",
                  "size": "full-size",
                  "label": "skillKey",
                  "defaultValue": "Skill_EWarfare",
                  "charList": "",
                  "maxLength": null,
                  "autocomplete": ""
                },
                {
                  "key": "poolKey_copy1",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "select",
                  "size": "full-size",
                  "label": "poolKey",
                  "defaultValue": "Focus",
                  "selectedOptionType": "custom",
                  "options": [
                    {
                      "key": "Brawn",
                      "value": "Brawn"
                    },
                    {
                      "key": "Finesse",
                      "value": "Finesse"
                    },
                    {
                      "key": "Resolve",
                      "value": "Resolve"
                    },
                    {
                      "key": "Focus",
                      "value": "Focus"
                    }
                  ]
                },
                {
                  "key": "limitBonusSource",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "textField",
                  "size": "full-size",
                  "label": "limitBonusSource",
                  "defaultValue": "Software Rating",
                  "charList": "",
                  "maxLength": null,
                  "autocomplete": ""
                },
                {
                  "key": "loopingFlag",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "textField",
                  "size": "full-size",
                  "label": "loopingFlag",
                  "defaultValue": "No",
                  "charList": "",
                  "maxLength": null,
                  "autocomplete": ""
                }
              ],
              "flow": "vertical",
              "align": "left",
              "verticalAlign": "top",
              "collapsible": true,
              "defaultCollapsed": false,
              "title": "hidden",
              "titleStyle": "default"
            }
          ],
          "key": "custom_body",
          "type": "panel"
        },
        "display": {
          "width": 600,
          "height": 600,
          "fix_size": false,
          "pp_width": 64,
          "pp_height": 64
        },
        "header": {
          "contents": [
            {
              "key": "",
              "colSpan": 1,
              "rowSpan": 1,
              "cssClass": "",
              "role": 0,
              "editRole": 0,
              "permission": 0,
              "tooltip": "",
              "visibilityFormula": "",
              "editableFormula": "",
              "escapeHTML": false,
              "type": "panel",
              "contents": [
                {
                  "key": "",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "label",
                  "size": "full-size",
                  "icon": "code",
                  "value": "${actionLabel ? actionLabel : \"Use\"}$",
                  "prefix": "",
                  "suffix": "",
                  "rollMessage": "%{\n  // Prefer linkedEntity (inventory row) then entity (item sheet)\n  const doc = (typeof linkedEntity !== \"undefined\" && linkedEntity) ? linkedEntity\n            : (typeof entity !== \"undefined\" && entity) ? entity\n            : null;\n\n  const itemUuid = String(doc?.uuid ?? \"\").trim();\n\n  // Pull actor from safe sources only\n  const embeddedActorUuid =\n    (doc?.parent?.documentName === \"Actor\" && doc?.parent?.uuid) ? String(doc.parent.uuid) : \"\";\n\n  const scopeActorUuid =\n    (typeof actor !== \"undefined\" && actor?.documentName === \"Actor\" && actor?.uuid) ? String(actor.uuid) : \"\";\n\n  const controlledActorUuid = (() => {\n    const t = canvas?.tokens?.controlled?.[0];\n    return t?.actor?.uuid ? String(t.actor.uuid) : \"\";\n  })();\n\n  const targetedActorUuid = (() => {\n    const t = game.user?.targets ? Array.from(game.user.targets)[0] : null;\n    return t?.actor?.uuid ? String(t.actor.uuid) : \"\";\n  })();\n\n  const userCharUuid = game.user?.character?.uuid ? String(game.user.character.uuid) : \"\";\n\n  const actorUuid = String(\n    embeddedActorUuid ||\n    scopeActorUuid ||\n    controlledActorUuid ||\n    targetedActorUuid ||\n    userCharUuid ||\n    \"\"\n  ).trim();\n\n  if (!itemUuid) {\n    console.warn(\"SinlessCSB | rollItem: missing itemUuid\", { doc, linkedEntity: (typeof linkedEntity !== \"undefined\" ? linkedEntity : undefined), entity: (typeof entity !== \"undefined\" ? entity : undefined) });\n    ui.notifications?.warn?.(\"SinlessCSB: missing item context (itemUuid).\");\n    return \"\";\n  }\n\n  if (!actorUuid) {\n    console.warn(\"SinlessCSB | rollItem: missing actorUuid (control/target a token)\", {\n      itemUuid,\n      controlled: canvas?.tokens?.controlled?.length ?? 0,\n      targets: game.user?.targets?.size ?? 0\n    });\n    ui.notifications?.warn?.(\"SinlessCSB: No actor context. Control a token (click) or target one, then try again.\");\n    return \"\";\n  }\n\n  const api = game.modules.get(\"sinlesscsb\")?.api;\n  if (typeof api?.rollItem !== \"function\") {\n    console.warn(\"SinlessCSB | rollItem: API not available\", { apiKeys: Object.keys(api ?? {}) });\n    ui.notifications?.error?.(\"SinlessCSB: rollItem API not available (module not ready / not exposed).\");\n    return \"\";\n  }\n\n  console.log(\"SinlessCSB | rollItem (hardened)\", { itemUuid, actorUuid, itemName: doc?.name });\n  api.rollItem({ itemUuid, actorUuid });\n  return \"\";\n}%\n",
                  "altRollMessage": "",
                  "rollMessageToChat": false,
                  "altRollMessageToChat": false,
                  "style": "button"
                },
                {
                  "key": "",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "panel",
                  "contents": [],
                  "flow": "vertical",
                  "align": "center",
                  "verticalAlign": "top",
                  "collapsible": false,
                  "defaultCollapsed": false,
                  "title": "",
                  "titleStyle": "default"
                },
                {
                  "key": "",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "panel",
                  "contents": [
                    {
                      "key": "deckactionType",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "textField",
                      "size": "m-large",
                      "label": "Action Type:",
                      "defaultValue": "Complex Action",
                      "charList": "",
                      "maxLength": null,
                      "autocomplete": ""
                    },
                    {
                      "key": "actionSpecial",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "textField",
                      "size": "full-size",
                      "label": "Special:",
                      "defaultValue": "",
                      "charList": "",
                      "maxLength": null,
                      "autocomplete": ""
                    }
                  ],
                  "flow": "vertical",
                  "align": "right",
                  "verticalAlign": "top",
                  "collapsible": false,
                  "defaultCollapsed": false,
                  "title": "",
                  "titleStyle": "default"
                }
              ],
              "flow": "vertical",
              "align": "center",
              "verticalAlign": "top",
              "collapsible": false,
              "defaultCollapsed": false,
              "title": "",
              "titleStyle": "default"
            }
          ],
          "key": "custom_header",
          "type": "panel"
        },
        "hidden": [],
        "modifiers": [],
        "props": {
          "deckactionType": "Complex Action",
          "actionSpecial": "",
          "ioSoftware": "Yes",
          "softwareCost": "10000",
          "softwareAlert": "Hardening of target",
          "programRulestext": "<h2 style=\"font-family:'Bruno Ace', sans-serif; margin:0 0 0.5em 0;\">Device Control</h2><p>This software allows deckers to take control of devices and systems within range of their influence.</p><p>The decker must make a Computer (Electronic Warfare) + Device Control software rating test. They need a number of successes equal to twice a device's hardening.</p><p>If they succeed, Device Control goes into the I/O stream, and they gain control of the device and can use or deactivate any of its functions. This raises the alert value by the hardening of the device controlled.</p><p>Unlike hacking which can just turn devices on or off, this software allows complete control of the device as if she were the administrator.</p>",
          "skillKey": "Skill_EWarfare",
          "actionLabel": "E War",
          "gearFeature": "1",
          "bonusDice": "0",
          "diceMod": "0",
          "softwareSlot": 1,
          "poolKey_copy1": "Focus",
          "limitBonusSource": "Software Rating",
          "loopingFlag": "No"
        },
        "unique": false,
        "uniqueId": "EZPyN7GodhwHFB0G"
      },
      "_id": "itIpsTCH2uOWeaiv",
      "effects": [],
      "sort": 0,
      "flags": {
        "custom-system-builder": {
          "version": "5.1.0"
        }
      },
      "_stats": {
        "compendiumSource": "Item.EZPyN7GodhwHFB0G",
        "duplicateSource": null,
        "exportSource": null,
        "coreVersion": "13.351",
        "systemId": "custom-system-builder",
        "systemVersion": "5.1.0",
        "createdTime": 1769974692663,
        "modifiedTime": 1769983709935,
        "lastModifiedBy": "KoiB8oaGNkPdgzdM"
      },
      "ownership": {
        "default": 0
      }
    },
    {
      "name": "Orb Epsilon",
      "type": "equippableItem",
      "folder": "rCTnl7myqTtxE5gl",
      "img": "modules/sinlesscsb/assets/icons/cpRed/upgrades/hardened_circuitry.svg",
      "system": {
        "template": "b2F3cWZSzUeZvam8",
        "templateSystemUniqueVersion": 3433085292,
        "body": {
          "contents": [
            {
              "key": "",
              "colSpan": 1,
              "rowSpan": 1,
              "cssClass": "sinlesscsb-marker",
              "role": 0,
              "editRole": 0,
              "permission": 0,
              "tooltip": "",
              "visibilityFormula": "",
              "editableFormula": "",
              "escapeHTML": false,
              "type": "panel",
              "contents": [
                {
                  "key": "mcpDeck",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "Master Control Persona",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "numberField",
                  "size": "medium",
                  "label": "MCP:",
                  "defaultValue": "3",
                  "allowDecimal": false,
                  "minVal": "3",
                  "maxVal": "12",
                  "allowRelative": false,
                  "showControls": true,
                  "controlsStyle": "hover",
                  "controlsCustomIncrements": "",
                  "inputStyle": "text"
                },
                {
                  "key": "mcpCur",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "numberField",
                  "size": "medium",
                  "label": "MCP Current",
                  "defaultValue": "${mcpDeck}$",
                  "allowDecimal": false,
                  "minVal": "0",
                  "maxVal": "",
                  "allowRelative": false,
                  "showControls": false,
                  "controlsStyle": "hover",
                  "controlsCustomIncrements": "",
                  "inputStyle": "text"
                },
                {
                  "key": "hardeningDeck",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "numberField",
                  "size": "medium",
                  "label": "Hardening",
                  "defaultValue": "1",
                  "allowDecimal": false,
                  "minVal": "1",
                  "maxVal": "",
                  "allowRelative": false,
                  "showControls": true,
                  "controlsStyle": "hover",
                  "controlsCustomIncrements": "",
                  "inputStyle": "text"
                },
                {
                  "key": "ioDeck",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "numberField",
                  "size": "medium",
                  "label": "I / O",
                  "defaultValue": "1",
                  "allowDecimal": false,
                  "minVal": "1",
                  "maxVal": "",
                  "allowRelative": false,
                  "showControls": true,
                  "controlsStyle": "hover",
                  "controlsCustomIncrements": "",
                  "inputStyle": "text"
                },
                {
                  "key": "modsDeck",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "numberField",
                  "size": "medium",
                  "label": "Mods:",
                  "defaultValue": "0",
                  "allowDecimal": false,
                  "minVal": "0",
                  "maxVal": "",
                  "allowRelative": false,
                  "showControls": true,
                  "controlsStyle": "hover",
                  "controlsCustomIncrements": "",
                  "inputStyle": "text"
                },
                {
                  "key": "threadsDeck",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "numberField",
                  "size": "medium",
                  "label": "Threads",
                  "defaultValue": "4",
                  "allowDecimal": false,
                  "minVal": "4",
                  "maxVal": "",
                  "allowRelative": false,
                  "showControls": true,
                  "controlsStyle": "hover",
                  "controlsCustomIncrements": "",
                  "inputStyle": "text"
                },
                {
                  "key": "coreDeck",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "textField",
                  "size": "medium",
                  "label": "Core:",
                  "defaultValue": "",
                  "charList": "",
                  "maxLength": null,
                  "autocomplete": ""
                },
                {
                  "key": "deckCost",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "numberField",
                  "size": "full-size",
                  "label": "Cost",
                  "defaultValue": "",
                  "allowDecimal": false,
                  "minVal": "",
                  "maxVal": "",
                  "allowRelative": false,
                  "showControls": true,
                  "controlsStyle": "hover",
                  "controlsCustomIncrements": "",
                  "inputStyle": "text"
                }
              ],
              "flow": "grid-2",
              "align": "left",
              "verticalAlign": "top",
              "collapsible": true,
              "defaultCollapsed": false,
              "title": "Deck Stats",
              "titleStyle": "default"
            },
            {
              "key": "",
              "colSpan": 1,
              "rowSpan": 1,
              "cssClass": "",
              "role": 0,
              "editRole": 0,
              "permission": 0,
              "tooltip": "",
              "visibilityFormula": "",
              "editableFormula": "",
              "escapeHTML": false,
              "type": "panel",
              "contents": [
                {
                  "key": "deckMod1",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "textField",
                  "size": "full-size",
                  "label": "Mod 1:",
                  "defaultValue": "",
                  "charList": "",
                  "maxLength": null,
                  "autocomplete": ""
                },
                {
                  "key": "deckMod2",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "textField",
                  "size": "full-size",
                  "label": "Mod 2:",
                  "defaultValue": "",
                  "charList": "",
                  "maxLength": null,
                  "autocomplete": ""
                },
                {
                  "key": "deckMod3",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "textField",
                  "size": "full-size",
                  "label": "Mod 3:",
                  "defaultValue": "",
                  "charList": "",
                  "maxLength": null,
                  "autocomplete": ""
                },
                {
                  "key": "deckMod4",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "textField",
                  "size": "full-size",
                  "label": "Mod 4:",
                  "defaultValue": "",
                  "charList": "",
                  "maxLength": null,
                  "autocomplete": ""
                },
                {
                  "key": "deckMod5",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "textField",
                  "size": "full-size",
                  "label": "Mod 5:",
                  "defaultValue": "",
                  "charList": "",
                  "maxLength": null,
                  "autocomplete": ""
                }
              ],
              "flow": "vertical",
              "align": "left",
              "verticalAlign": "top",
              "collapsible": true,
              "defaultCollapsed": false,
              "title": "Mods installed:",
              "titleStyle": "default"
            },
            {
              "key": "",
              "colSpan": 1,
              "rowSpan": 1,
              "cssClass": "",
              "role": 4,
              "editRole": 0,
              "permission": 0,
              "tooltip": "",
              "visibilityFormula": "",
              "editableFormula": "",
              "escapeHTML": false,
              "type": "panel",
              "contents": [],
              "flow": "vertical",
              "align": "left",
              "verticalAlign": "top",
              "collapsible": true,
              "defaultCollapsed": false,
              "title": "Hidden",
              "titleStyle": "default"
            },
            {
              "key": "",
              "colSpan": 1,
              "rowSpan": 1,
              "cssClass": "",
              "role": 4,
              "editRole": 0,
              "permission": 0,
              "tooltip": "",
              "visibilityFormula": "",
              "editableFormula": "",
              "escapeHTML": false,
              "type": "panel",
              "contents": [
                {
                  "key": "skillKey",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "textField",
                  "size": "full-size",
                  "label": "skillKey",
                  "defaultValue": "Skill_Hacking",
                  "charList": "",
                  "maxLength": null,
                  "autocomplete": ""
                },
                {
                  "key": "poolKey_copy1",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "select",
                  "size": "full-size",
                  "label": "poolKey",
                  "defaultValue": "Focus",
                  "selectedOptionType": "custom",
                  "options": [
                    {
                      "key": "Brawn",
                      "value": "Brawn"
                    },
                    {
                      "key": "Finesse",
                      "value": "Finesse"
                    },
                    {
                      "key": "Resolve",
                      "value": "Resolve"
                    },
                    {
                      "key": "Focus",
                      "value": "Focus"
                    }
                  ]
                },
                {
                  "key": "limitBonusSource",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "textField",
                  "size": "full-size",
                  "label": "limitBonusSource",
                  "defaultValue": "Software Rating",
                  "charList": "",
                  "maxLength": null,
                  "autocomplete": ""
                },
                {
                  "key": "loopingFlag",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "textField",
                  "size": "full-size",
                  "label": "loopingFlag",
                  "defaultValue": "No",
                  "charList": "",
                  "maxLength": null,
                  "autocomplete": ""
                }
              ],
              "flow": "vertical",
              "align": "left",
              "verticalAlign": "top",
              "collapsible": true,
              "defaultCollapsed": false,
              "title": "hidden",
              "titleStyle": "default"
            }
          ],
          "key": "custom_body",
          "type": "panel"
        },
        "display": {
          "width": 600,
          "height": 600,
          "fix_size": false,
          "pp_width": 64,
          "pp_height": 64
        },
        "header": {
          "contents": [
            {
              "key": "",
              "colSpan": 1,
              "rowSpan": 1,
              "cssClass": "",
              "role": 0,
              "editRole": 0,
              "permission": 0,
              "tooltip": "",
              "visibilityFormula": "",
              "editableFormula": "",
              "escapeHTML": false,
              "type": "panel",
              "contents": [
                {
                  "key": "hackGeneral",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "panel",
                  "contents": [
                    {
                      "key": "",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "label",
                      "size": "medium",
                      "icon": "binary",
                      "value": "Hack Device",
                      "prefix": "",
                      "suffix": "",
                      "rollMessage": "%{\n  const BUTTON_LABEL = \"Hack Device\";\n\n  const doc = (typeof linkedEntity !== \"undefined\" && linkedEntity) ? linkedEntity\n            : (typeof entity !== \"undefined\" && entity) ? entity\n            : null;\n\n  const itemUuid = String(doc?.uuid ?? \"\").trim();\n\n  const embeddedActorUuid =\n    (doc?.parent?.documentName === \"Actor\" && doc?.parent?.uuid) ? String(doc.parent.uuid) : \"\";\n\n  const scopeActorUuid =\n    (typeof actor !== \"undefined\" && actor?.documentName === \"Actor\" && actor?.uuid) ? String(actor.uuid) : \"\";\n\n  const controlledActorUuid = (() => {\n    const t = canvas?.tokens?.controlled?.[0];\n    return t?.actor?.uuid ? String(t.actor.uuid) : \"\";\n  })();\n\n  const targetedActorUuid = (() => {\n    const t = game.user?.targets ? Array.from(game.user.targets)[0] : null;\n    return t?.actor?.uuid ? String(t.actor.uuid) : \"\";\n  })();\n\n  const userCharUuid = game.user?.character?.uuid ? String(game.user.character.uuid) : \"\";\n\n  const actorUuid = String(\n    embeddedActorUuid ||\n    scopeActorUuid ||\n    controlledActorUuid ||\n    targetedActorUuid ||\n    userCharUuid ||\n    \"\"\n  ).trim();\n\n  if (!itemUuid) { ui.notifications?.warn?.(`SinlessCSB: missing cyberdeck context for ${BUTTON_LABEL}.`); return \"\"; }\n  if (!actorUuid) { ui.notifications?.warn?.(`SinlessCSB: No actor context for ${BUTTON_LABEL}.`); return \"\"; }\n\n  const api = game.modules.get(\"sinlesscsb\")?.api;\n  if (typeof api?.rollItem !== \"function\") {\n    ui.notifications?.error?.(\"SinlessCSB: rollItem API not available.\");\n    return \"\";\n  }\n\n  api.rollItem({ itemUuid, actorUuid, skillKeyOverride: \"Skill_Hacking\" });\n  return \"\";\n}%\n",
                      "altRollMessage": "",
                      "rollMessageToChat": false,
                      "altRollMessageToChat": false,
                      "style": "button"
                    },
                    {
                      "key": "",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "label",
                      "size": "medium",
                      "icon": "hand-fist",
                      "value": "Brute Force",
                      "prefix": "",
                      "suffix": "",
                      "rollMessage": "%{\n  const BUTTON_LABEL = \"Brute Force\";\n\n  const doc = (typeof linkedEntity !== \"undefined\" && linkedEntity) ? linkedEntity\n            : (typeof entity !== \"undefined\" && entity) ? entity\n            : null;\n\n  const itemUuid = String(doc?.uuid ?? \"\").trim();\n\n  const embeddedActorUuid =\n    (doc?.parent?.documentName === \"Actor\" && doc?.parent?.uuid) ? String(doc.parent.uuid) : \"\";\n\n  const scopeActorUuid =\n    (typeof actor !== \"undefined\" && actor?.documentName === \"Actor\" && actor?.uuid) ? String(actor.uuid) : \"\";\n\n  const controlledActorUuid = (() => {\n    const t = canvas?.tokens?.controlled?.[0];\n    return t?.actor?.uuid ? String(t.actor.uuid) : \"\";\n  })();\n\n  const targetedActorUuid = (() => {\n    const t = game.user?.targets ? Array.from(game.user.targets)[0] : null;\n    return t?.actor?.uuid ? String(t.actor.uuid) : \"\";\n  })();\n\n  const userCharUuid = game.user?.character?.uuid ? String(game.user.character.uuid) : \"\";\n\n  const actorUuid = String(\n    embeddedActorUuid ||\n    scopeActorUuid ||\n    controlledActorUuid ||\n    targetedActorUuid ||\n    userCharUuid ||\n    \"\"\n  ).trim();\n\n  if (!itemUuid) { ui.notifications?.warn?.(`SinlessCSB: missing cyberdeck context for ${BUTTON_LABEL}.`); return \"\"; }\n  if (!actorUuid) { ui.notifications?.warn?.(`SinlessCSB: No actor context for ${BUTTON_LABEL}.`); return \"\"; }\n\n  const api = game.modules.get(\"sinlesscsb\")?.api;\n  if (typeof api?.rollItem !== \"function\") {\n    ui.notifications?.error?.(\"SinlessCSB: rollItem API not available.\");\n    return \"\";\n  }\n\n  api.rollItem({ itemUuid, actorUuid, skillKeyOverride: \"Skill_Hacking\" });\n  return \"\";\n}%\n",
                      "altRollMessage": "",
                      "rollMessageToChat": false,
                      "altRollMessageToChat": false,
                      "style": "button"
                    },
                    {
                      "key": "",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "label",
                      "size": "medium",
                      "icon": "ghost",
                      "value": "Stealth Infiltration",
                      "prefix": "",
                      "suffix": "",
                      "rollMessage": "%{\n  const BUTTON_LABEL = \"Stealth Infiltration\";\n\n  const doc = (typeof linkedEntity !== \"undefined\" && linkedEntity) ? linkedEntity\n            : (typeof entity !== \"undefined\" && entity) ? entity\n            : null;\n\n  const itemUuid = String(doc?.uuid ?? \"\").trim();\n\n  const embeddedActorUuid =\n    (doc?.parent?.documentName === \"Actor\" && doc?.parent?.uuid) ? String(doc.parent.uuid) : \"\";\n\n  const scopeActorUuid =\n    (typeof actor !== \"undefined\" && actor?.documentName === \"Actor\" && actor?.uuid) ? String(actor.uuid) : \"\";\n\n  const controlledActorUuid = (() => {\n    const t = canvas?.tokens?.controlled?.[0];\n    return t?.actor?.uuid ? String(t.actor.uuid) : \"\";\n  })();\n\n  const targetedActorUuid = (() => {\n    const t = game.user?.targets ? Array.from(game.user.targets)[0] : null;\n    return t?.actor?.uuid ? String(t.actor.uuid) : \"\";\n  })();\n\n  const userCharUuid = game.user?.character?.uuid ? String(game.user.character.uuid) : \"\";\n\n  const actorUuid = String(\n    embeddedActorUuid ||\n    scopeActorUuid ||\n    controlledActorUuid ||\n    targetedActorUuid ||\n    userCharUuid ||\n    \"\"\n  ).trim();\n\n  if (!itemUuid) { ui.notifications?.warn?.(`SinlessCSB: missing cyberdeck context for ${BUTTON_LABEL}.`); return \"\"; }\n  if (!actorUuid) { ui.notifications?.warn?.(`SinlessCSB: No actor context for ${BUTTON_LABEL}.`); return \"\"; }\n\n  const api = game.modules.get(\"sinlesscsb\")?.api;\n  if (typeof api?.rollItem !== \"function\") {\n    ui.notifications?.error?.(\"SinlessCSB: rollItem API not available.\");\n    return \"\";\n  }\n\n  api.rollItem({ itemUuid, actorUuid, skillKeyOverride: \"Skill_Hacking\" });\n  return \"\";\n}%\n",
                      "altRollMessage": "",
                      "rollMessageToChat": false,
                      "altRollMessageToChat": false,
                      "style": "button"
                    }
                  ],
                  "flow": "grid-3",
                  "align": "left",
                  "verticalAlign": "top",
                  "collapsible": false,
                  "defaultCollapsed": false,
                  "title": "",
                  "titleStyle": "default"
                },
                {
                  "key": "",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "panel",
                  "contents": [
                    {
                      "key": "hackingRules",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "textArea",
                      "size": "full-size",
                      "label": "",
                      "defaultValue": "<p>This software, the raison d'tre of every deckers deck, is always running. The deck is the hardware that allows this software to function. It provides several functions, hacking nearby electronic devices, drones, vehicles, and weapons, hacking cameras, and gaining control over a network access node (<span style=\"font-family: 'Bruno Ace'\">NAN</span>).</p><p></p><p>Control of a <span style=\"font-family: 'Bruno Ace'\">NAN</span> allows you to subvert its resources to your own ends, allowing any of your software programs to work within the vicinity.</p><p></p><p><span style=\"font-family: 'Bruno Ace'\">Hacking Devices:</span> Any decker within 10 meters (5\") of a piece of equipment can attempt to disable it, unlock it, or activate it. This is a Focus pool test with a limit of the Computer (Hacking) skill + the Hacking software rating needing a number of successes equal or higher than twice the hardening of the target. These successes can be accumulated over time.</p><p>On a success, the hacker may turn the item off, on, or activate the item, but that is the limit of their control. This includes enemy guns, cameras, drones, lights, or any other piece of hardware, though not cybertechtronics.</p><p>When deckers turn devices off they are shut down for one round. On the following round, anyone may spend a simple action to reactivate the device. Riggers can reactivate drones, guards can turn their smart guns back on, deckers can reactivate network devices (like mini-gun emplacements). If no one turns the device back on, it stays off.</p><p></p><p><span style=\"font-family: 'Bruno Ace'\">Hacking a NAN:</span> The hacker must be within 10 meters (5\") of a network access node. The hacker can use the software to execute a brute attack or a stealth infiltration.</p><p></p><p><span style=\"font-family: 'Bruno Ace'\">Brute Force Hack:</span> Make a Computer (Hacking) + Hacking software rating skill test; on a success, you double your I/O value in meters plus 2 extra</p><p>meters (1\") of influence range per success. Each success also raises the alert level by 2. (The Mars Claymore deck has an I/O rating of three, so when they hack they expand their influence radius six meters (3\") plus two meters (1\") per success).</p><p></p><p><span style=\"font-family: 'Bruno Ace'\">Stealth Infiltration:</span> Make a computer (hacking) + Hacking software rating skill test, and every success grants you a meter of influence (.5\"). This only raises the alert level by a flat 1.</p><p></p><p>Every time you choose to hack a <span style=\"font-family: 'Bruno Ace'\">NAN</span>, you can continue to extend your range. Once the range is at 40 meters (20\") tests to extend the range further have 2 penalty dice. This increases by another 2 penalty dice every 20 meters (10\"). The range expands out in a radius from the target node.</p><p></p>",
                      "style": "sheet"
                    }
                  ],
                  "flow": "vertical",
                  "align": "left",
                  "verticalAlign": "top",
                  "collapsible": true,
                  "defaultCollapsed": true,
                  "title": "Hacking Rules",
                  "titleStyle": "default"
                },
                {
                  "key": "hackCamera",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "panel",
                  "contents": [
                    {
                      "key": "",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "panel",
                      "contents": [],
                      "flow": "vertical",
                      "align": "center",
                      "verticalAlign": "top",
                      "collapsible": false,
                      "defaultCollapsed": false,
                      "title": "",
                      "titleStyle": "default"
                    },
                    {
                      "key": "",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "label",
                      "size": "medium",
                      "icon": "video",
                      "value": "Camera Off",
                      "prefix": "",
                      "suffix": "",
                      "rollMessage": "%{\n  const BUTTON_LABEL = \"Camera Off\";\n\n  const doc = (typeof linkedEntity !== \"undefined\" && linkedEntity) ? linkedEntity\n            : (typeof entity !== \"undefined\" && entity) ? entity\n            : null;\n\n  const itemUuid = String(doc?.uuid ?? \"\").trim();\n\n  const embeddedActorUuid =\n    (doc?.parent?.documentName === \"Actor\" && doc?.parent?.uuid) ? String(doc.parent.uuid) : \"\";\n\n  const scopeActorUuid =\n    (typeof actor !== \"undefined\" && actor?.documentName === \"Actor\" && actor?.uuid) ? String(actor.uuid) : \"\";\n\n  const controlledActorUuid = (() => {\n    const t = canvas?.tokens?.controlled?.[0];\n    return t?.actor?.uuid ? String(t.actor.uuid) : \"\";\n  })();\n\n  const targetedActorUuid = (() => {\n    const t = game.user?.targets ? Array.from(game.user.targets)[0] : null;\n    return t?.actor?.uuid ? String(t.actor.uuid) : \"\";\n  })();\n\n  const userCharUuid = game.user?.character?.uuid ? String(game.user.character.uuid) : \"\";\n\n  const actorUuid = String(\n    embeddedActorUuid ||\n    scopeActorUuid ||\n    controlledActorUuid ||\n    targetedActorUuid ||\n    userCharUuid ||\n    \"\"\n  ).trim();\n\n  if (!itemUuid) { ui.notifications?.warn?.(`SinlessCSB: missing cyberdeck context for ${BUTTON_LABEL}.`); return \"\"; }\n  if (!actorUuid) { ui.notifications?.warn?.(`SinlessCSB: No actor context for ${BUTTON_LABEL}.`); return \"\"; }\n\n  let actorDoc = await fromUuid(actorUuid);\n  if (actorDoc?.documentName === \"Token\") actorDoc = actorDoc.actor;\n  if (!actorDoc || actorDoc.documentName !== \"Actor\") {\n    ui.notifications?.warn?.(`SinlessCSB: Could not resolve Actor for ${BUTTON_LABEL}.`);\n    return \"\";\n  }\n\n  const deck = (itemUuid && actorDoc.items?.get?.(itemUuid.split(\".\").pop())) || null;\n  if (!deck) {\n    ui.notifications?.warn?.(`Missing cyberdeck context for ${BUTTON_LABEL}.`);\n    return \"\";\n  }\n\n  const deckProps = deck?.system?.props ?? {};\n  const hackRating = Number(deckProps.hackingRating ?? deckProps.gearFeature ?? deckProps.gearFeature_copy1 ?? 0) || 0;\n\n  const api = game.modules.get(\"sinlesscsb\")?.api;\n  if (typeof api?.rollItem !== \"function\") {\n    ui.notifications?.error?.(\"SinlessCSB: rollItem API not available.\");\n    return \"\";\n  }\n\n  api.rollItem({\n    itemUuid: deck.uuid,\n    actorUuid,\n    skillKeyOverride: \"Skill_EWarfare\",\n    gearFeatureOverride: hackRating,\n    limitBonusSourceOverride: \"Hacking rating\"\n  });\n  return \"\";\n}%\n",
                      "altRollMessage": "",
                      "rollMessageToChat": false,
                      "altRollMessageToChat": false,
                      "style": "button"
                    },
                    {
                      "key": "",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "panel",
                      "contents": [],
                      "flow": "vertical",
                      "align": "center",
                      "verticalAlign": "top",
                      "collapsible": false,
                      "defaultCollapsed": false,
                      "title": "",
                      "titleStyle": "default"
                    },
                    {
                      "key": "",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "label",
                      "size": "medium",
                      "icon": "arrow-up-wide-short",
                      "value": "Loop 1 [Access]",
                      "prefix": "",
                      "suffix": "",
                      "rollMessage": "%{\n  const BUTTON_LABEL = \"Loop 1 [Access]\";\n\n  const doc = (typeof linkedEntity !== \"undefined\" && linkedEntity) ? linkedEntity\n            : (typeof entity !== \"undefined\" && entity) ? entity\n            : null;\n\n  const itemUuid = String(doc?.uuid ?? \"\").trim();\n\n  const embeddedActorUuid =\n    (doc?.parent?.documentName === \"Actor\" && doc?.parent?.uuid) ? String(doc.parent.uuid) : \"\";\n\n  const scopeActorUuid =\n    (typeof actor !== \"undefined\" && actor?.documentName === \"Actor\" && actor?.uuid) ? String(actor.uuid) : \"\";\n\n  const controlledActorUuid = (() => {\n    const t = canvas?.tokens?.controlled?.[0];\n    return t?.actor?.uuid ? String(t.actor.uuid) : \"\";\n  })();\n\n  const targetedActorUuid = (() => {\n    const t = game.user?.targets ? Array.from(game.user.targets)[0] : null;\n    return t?.actor?.uuid ? String(t.actor.uuid) : \"\";\n  })();\n\n  const userCharUuid = game.user?.character?.uuid ? String(game.user.character.uuid) : \"\";\n\n  const actorUuid = String(\n    embeddedActorUuid ||\n    scopeActorUuid ||\n    controlledActorUuid ||\n    targetedActorUuid ||\n    userCharUuid ||\n    \"\"\n  ).trim();\n\n  if (!itemUuid) { ui.notifications?.warn?.(`SinlessCSB: missing cyberdeck context for ${BUTTON_LABEL}.`); return \"\"; }\n  if (!actorUuid) { ui.notifications?.warn?.(`SinlessCSB: No actor context for ${BUTTON_LABEL}.`); return \"\"; }\n\n  let actorDoc = await fromUuid(actorUuid);\n  if (actorDoc?.documentName === \"Token\") actorDoc = actorDoc.actor;\n  if (!actorDoc || actorDoc.documentName !== \"Actor\") {\n    ui.notifications?.warn?.(`SinlessCSB: Could not resolve Actor for ${BUTTON_LABEL}.`);\n    return \"\";\n  }\n\n  const deck = (itemUuid && actorDoc.items?.get?.(itemUuid.split(\".\").pop())) || null;\n  if (!deck) {\n    ui.notifications?.warn?.(`Missing cyberdeck context for ${BUTTON_LABEL}.`);\n    return \"\";\n  }\n\n  const deckProps = deck?.system?.props ?? {};\n  const hackRating = Number(deckProps.hackingRating ?? deckProps.gearFeature ?? deckProps.gearFeature_copy1 ?? 0) || 0;\n\n  const api = game.modules.get(\"sinlesscsb\")?.api;\n  if (typeof api?.rollItem !== \"function\") {\n    ui.notifications?.error?.(\"SinlessCSB: rollItem API not available.\");\n    return \"\";\n  }\n\n  api.rollItem({\n    itemUuid: deck.uuid,\n    actorUuid,\n    skillKeyOverride: \"Skill_EWarfare\",\n    gearFeatureOverride: hackRating,\n    limitBonusSourceOverride: \"Hacking rating\"\n  });\n  return \"\";\n}%\n",
                      "altRollMessage": "",
                      "rollMessageToChat": false,
                      "altRollMessageToChat": false,
                      "style": "button"
                    },
                    {
                      "key": "",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "label",
                      "size": "medium",
                      "icon": "ring",
                      "value": "Loop 2 [Decrypt]",
                      "prefix": "",
                      "suffix": "",
                      "rollMessage": "%{\n  const BUTTON_LABEL = \"Loop 2 [Decrypt]\";\n  const SOFT_NAME = \"Crack Encryption\";\n\n  const doc = (typeof linkedEntity !== \"undefined\" && linkedEntity) ? linkedEntity\n            : (typeof entity !== \"undefined\" && entity) ? entity\n            : null;\n\n  const embeddedActorUuid =\n    (doc?.parent?.documentName === \"Actor\" && doc?.parent?.uuid) ? String(doc.parent.uuid) : \"\";\n\n  const scopeActorUuid =\n    (typeof actor !== \"undefined\" && actor?.documentName === \"Actor\" && actor?.uuid) ? String(actor.uuid) : \"\";\n\n  const controlledActorUuid = (() => {\n    const t = canvas?.tokens?.controlled?.[0];\n    return t?.actor?.uuid ? String(t.actor.uuid) : \"\";\n  })();\n\n  const targetedActorUuid = (() => {\n    const t = game.user?.targets ? Array.from(game.user.targets)[0] : null;\n    return t?.actor?.uuid ? String(t.actor.uuid) : \"\";\n  })();\n\n  const userCharUuid = game.user?.character?.uuid ? String(game.user.character.uuid) : \"\";\n\n  const actorUuid = String(\n    embeddedActorUuid ||\n    scopeActorUuid ||\n    controlledActorUuid ||\n    targetedActorUuid ||\n    userCharUuid ||\n    \"\"\n  ).trim();\n\n  if (!actorUuid) { ui.notifications?.warn?.(`SinlessCSB: No actor context for ${BUTTON_LABEL}.`); return \"\"; }\n\n  let actorDoc = await fromUuid(actorUuid);\n  if (actorDoc?.documentName === \"Token\") actorDoc = actorDoc.actor;\n  if (!actorDoc || actorDoc.documentName !== \"Actor\") {\n    ui.notifications?.warn?.(`SinlessCSB: Could not resolve Actor for ${BUTTON_LABEL}.`);\n    return \"\";\n  }\n\n  const soft = (actorDoc.items ?? []).find(i =>\n    String(i.name ?? \"\").trim().toLowerCase() === SOFT_NAME.toLowerCase()\n  );\n  const activeFlag = Number(soft?.system?.props?.softwareSlot ?? 0) === 1;\n  const activeMap = actorDoc?.system?.props?.activeThreads ?? {};\n  const activeList = (soft?.id && activeMap?.[soft.id]) ||\n    Object.values(activeMap).some(v => String(v?.name ?? \"\").trim().toLowerCase() === SOFT_NAME.toLowerCase());\n\n  if (!soft || (!activeFlag && !activeList)) {\n    ui.notifications?.warn?.(`Missing \"${SOFT_NAME}\" loaded in Active Threads on ${actorDoc.name}.`);\n    return \"\";\n  }\n\n  const api = game.modules.get(\"sinlesscsb\")?.api;\n  if (typeof api?.rollItem !== \"function\") {\n    ui.notifications?.error?.(\"SinlessCSB: rollItem API not available.\");\n    return \"\";\n  }\n\n  api.rollItem({\n    itemUuid: soft.uuid,\n    actorUuid,\n    limitBonusSourceOverride: \"Crack Encryption rating\"\n  });\n  return \"\";\n}%\n",
                      "altRollMessage": "",
                      "rollMessageToChat": false,
                      "altRollMessageToChat": false,
                      "style": "button"
                    },
                    {
                      "key": "",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "label",
                      "size": "medium",
                      "icon": "infinity",
                      "value": "Loop 3 [Edit]",
                      "prefix": "",
                      "suffix": "",
                      "rollMessage": "%{\n  const BUTTON_LABEL = \"Loop 3 [Edit]\";\n  const SOFT_NAME = \"Device Control\";\n\n  const doc = (typeof linkedEntity !== \"undefined\" && linkedEntity) ? linkedEntity\n            : (typeof entity !== \"undefined\" && entity) ? entity\n            : null;\n\n  const embeddedActorUuid =\n    (doc?.parent?.documentName === \"Actor\" && doc?.parent?.uuid) ? String(doc.parent.uuid) : \"\";\n\n  const scopeActorUuid =\n    (typeof actor !== \"undefined\" && actor?.documentName === \"Actor\" && actor?.uuid) ? String(actor.uuid) : \"\";\n\n  const controlledActorUuid = (() => {\n    const t = canvas?.tokens?.controlled?.[0];\n    return t?.actor?.uuid ? String(t.actor.uuid) : \"\";\n  })();\n\n  const targetedActorUuid = (() => {\n    const t = game.user?.targets ? Array.from(game.user.targets)[0] : null;\n    return t?.actor?.uuid ? String(t.actor.uuid) : \"\";\n  })();\n\n  const userCharUuid = game.user?.character?.uuid ? String(game.user.character.uuid) : \"\";\n\n  const actorUuid = String(\n    embeddedActorUuid ||\n    scopeActorUuid ||\n    controlledActorUuid ||\n    targetedActorUuid ||\n    userCharUuid ||\n    \"\"\n  ).trim();\n\n  if (!actorUuid) { ui.notifications?.warn?.(`SinlessCSB: No actor context for ${BUTTON_LABEL}.`); return \"\"; }\n\n  let actorDoc = await fromUuid(actorUuid);\n  if (actorDoc?.documentName === \"Token\") actorDoc = actorDoc.actor;\n  if (!actorDoc || actorDoc.documentName !== \"Actor\") {\n    ui.notifications?.warn?.(`SinlessCSB: Could not resolve Actor for ${BUTTON_LABEL}.`);\n    return \"\";\n  }\n\n  const soft = (actorDoc.items ?? []).find(i =>\n    String(i.name ?? \"\").trim().toLowerCase() === SOFT_NAME.toLowerCase()\n  );\n  const activeFlag = Number(soft?.system?.props?.softwareSlot ?? 0) === 1;\n  const activeMap = actorDoc?.system?.props?.activeThreads ?? {};\n  const activeList = (soft?.id && activeMap?.[soft.id]) ||\n    Object.values(activeMap).some(v => String(v?.name ?? \"\").trim().toLowerCase() === SOFT_NAME.toLowerCase());\n\n  if (!soft || (!activeFlag && !activeList)) {\n    ui.notifications?.warn?.(`Missing \"${SOFT_NAME}\" loaded in Active Threads on ${actorDoc.name}.`);\n    return \"\";\n  }\n\n  const api = game.modules.get(\"sinlesscsb\")?.api;\n  if (typeof api?.rollItem !== \"function\") {\n    ui.notifications?.error?.(\"SinlessCSB: rollItem API not available.\");\n    return \"\";\n  }\n\n  api.rollItem({\n    itemUuid: soft.uuid,\n    actorUuid,\n    limitBonusSourceOverride: \"Device Control rating\"\n  });\n  return \"\";\n}%\n",
                      "altRollMessage": "",
                      "rollMessageToChat": false,
                      "altRollMessageToChat": false,
                      "style": "button"
                    }
                  ],
                  "flow": "grid-3",
                  "align": "left",
                  "verticalAlign": "top",
                  "collapsible": true,
                  "defaultCollapsed": false,
                  "title": "Cameras",
                  "titleStyle": "default"
                },
                {
                  "key": "",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "panel",
                  "contents": [
                    {
                      "key": "cameraRules",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "textArea",
                      "size": "full-size",
                      "label": "",
                      "defaultValue": "<p><span style=\"font-family: 'Bruno Ace'\">Hacking Cameras:</span> A decker has several options when dealing with cameras.</p><p></p><p><span style=\"font-family: 'Bruno Ace'\">Turning Them Off: </span>The decker makes a Computer (Electronic Warfare) + <span style=\"font-family: 'Bruno Ace'\">Hacking</span> software rating skill test.</p><p>Open sites require one success, secure sites require two successes, red sites require four successes, and black sites require eight successes. Note that certain alert levels are keyed to run diagnostics and reactivate cameras. This test can be made anytime before the operation. Easy to do, but easy to undo.</p><p></p><p><span style=\"font-family: 'Bruno Ace'\">Looping an Image:</span> On site, the Decker makes a Computer (Electronic Warfare) + <span style=\"font-family: 'Bruno Ace'\">Hacking</span> software rating test to get access to the data stream.</p><p>Then the data stream must be decrypted with a Computer (Hacking) + <span style=\"font-family: 'Bruno Ace'\">Crack Encryption</span> software rating test.</p><p>Finally, the data stream must be edited with a Computer (Hacking) + <span style=\"font-family: 'Bruno Ace'\">Device Control</span> software rating test. It renders the cameras ineffective and doesnt raise suspicions.</p><p>The downsides are that this must be done on-site raising alert, it ties up an <span style=\"font-family: 'Bruno Ace'\">I/O</span> slot for the duration of the run, and it requires <span style=\"font-family: 'Bruno Ace'\">Crack Encryption</span> and <span style=\"font-family: 'Bruno Ace'\">Device Control</span> software.</p><p>Successes needed are listed below:</p><img src=\"modules/sinlesscsb/assets/images/LoopImage.png\"><p></p><p><span style=\"font-family: 'Bruno Ace'\">DisaBling Them:</span> On-site, the decker can use any attack software to destroy the cameras. They will spark and possibly melt or explode. You can target individual cameras or attack the whole camera network. Refer to the following table for the condition track values of individual cameras and the camera network. You cannot be captured on cameras that are melted slag.</p><p>The downsides are the attacks raise the alert level, and melting cameras raise operational heat by one.</p><img src=\"modules/sinlesscsb/assets/images/disableCamera.png\"><p></p><p><span style=\"font-family: 'Bruno Ace'\">Erasing the Data Stream File: </span>The hacker can just. . . delete the camera record. This has to be done after the operation. However, by that time, the file is usually defended. Before leaving the operation, the decker may attempt to delete the file. She will first have to crack the file using the <span style=\"font-family: 'Bruno Ace'\">Crack Encryption</span> software while fighting against the defenders (with the assistance of any characters that can see in AR). After decryption, the decker can just delete the file.</p><p>Open systems have a file encryption level of one, secure systems have a file encryption level of two, Red sites have an encryption level of four, and black sites have an encryption level of six.</p>",
                      "style": "sheet"
                    }
                  ],
                  "flow": "vertical",
                  "align": "left",
                  "verticalAlign": "top",
                  "collapsible": true,
                  "defaultCollapsed": true,
                  "title": "Camera Hack rules",
                  "titleStyle": "default"
                },
                {
                  "key": "",
                  "colSpan": 1,
                  "rowSpan": 1,
                  "cssClass": "sinlesscsb-marker",
                  "role": 0,
                  "editRole": 0,
                  "permission": 0,
                  "tooltip": "",
                  "visibilityFormula": "",
                  "editableFormula": "",
                  "escapeHTML": false,
                  "type": "panel",
                  "contents": [
                    {
                      "key": "",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "panel",
                      "contents": [
                        {
                          "key": "deckactionType",
                          "colSpan": 1,
                          "rowSpan": 1,
                          "cssClass": "",
                          "role": 0,
                          "editRole": 0,
                          "permission": 0,
                          "tooltip": "",
                          "visibilityFormula": "",
                          "editableFormula": "",
                          "escapeHTML": false,
                          "type": "textField",
                          "size": "m-large",
                          "label": "Action Type:",
                          "defaultValue": "Complex Action",
                          "charList": "",
                          "maxLength": null,
                          "autocomplete": ""
                        },
                        {
                          "key": "actionSpecial",
                          "colSpan": 1,
                          "rowSpan": 1,
                          "cssClass": "",
                          "role": 0,
                          "editRole": 0,
                          "permission": 0,
                          "tooltip": "",
                          "visibilityFormula": "",
                          "editableFormula": "",
                          "escapeHTML": false,
                          "type": "textField",
                          "size": "full-size",
                          "label": "Special:",
                          "defaultValue": "",
                          "charList": "",
                          "maxLength": null,
                          "autocomplete": ""
                        }
                      ],
                      "flow": "vertical",
                      "align": "right",
                      "verticalAlign": "top",
                      "collapsible": false,
                      "defaultCollapsed": false,
                      "title": "",
                      "titleStyle": "default"
                    },
                    {
                      "key": "",
                      "colSpan": 1,
                      "rowSpan": 1,
                      "cssClass": "",
                      "role": 0,
                      "editRole": 0,
                      "permission": 0,
                      "tooltip": "",
                      "visibilityFormula": "",
                      "editableFormula": "",
                      "escapeHTML": false,
                      "type": "panel",
                      "contents": [
                        {
                          "key": "gearFeature",
                          "colSpan": 1,
                          "rowSpan": 1,
                          "cssClass": "",
                          "role": 0,
                          "editRole": 0,
                          "permission": 0,
                          "tooltip": "",
                          "visibilityFormula": "",
                          "editableFormula": "",
                          "escapeHTML": false,
                          "type": "numberField",
                          "size": "full-size",
                          "label": "Hacking Software Rating:",
                          "defaultValue": "1",
                          "allowDecimal": false,
                          "minVal": "1",
                          "maxVal": "6",
                          "allowRelative": false,
                          "showControls": true,
                          "controlsStyle": "hover",
                          "controlsCustomIncrements": "",
                          "inputStyle": "text"
                        },
                        {
                          "key": "bonusDice",
                          "colSpan": 1,
                          "rowSpan": 1,
                          "cssClass": "",
                          "role": 0,
                          "editRole": 0,
                          "permission": 0,
                          "tooltip": "",
                          "visibilityFormula": "",
                          "editableFormula": "",
                          "escapeHTML": false,
                          "type": "numberField",
                          "size": "medium",
                          "label": "bonusDice",
                          "defaultValue": "0",
                          "allowDecimal": false,
                          "minVal": "",
                          "maxVal": "",
                          "allowRelative": false,
                          "showControls": true,
                          "controlsStyle": "hover",
                          "controlsCustomIncrements": "",
                          "inputStyle": "text"
                        },
                        {
                          "key": "softwareAlert",
                          "colSpan": 1,
                          "rowSpan": 1,
                          "cssClass": "",
                          "role": 0,
                          "editRole": 0,
                          "permission": 0,
                          "tooltip": "",
                          "visibilityFormula": "",
                          "editableFormula": "",
                          "escapeHTML": false,
                          "type": "textField",
                          "size": "full-size",
                          "label": "Alert",
                          "defaultValue": "",
                          "charList": "",
                          "maxLength": null,
                          "autocomplete": ""
                        },
                        {
                          "key": "diceMod",
                          "colSpan": 1,
                          "rowSpan": 1,
                          "cssClass": "",
                          "role": 0,
                          "editRole": 0,
                          "permission": 0,
                          "tooltip": "(can spend from MCP Pool in roll dialogue using this)",
                          "visibilityFormula": "",
                          "editableFormula": "",
                          "escapeHTML": false,
                          "type": "numberField",
                          "size": "medium",
                          "label": "diceMod ",
                          "defaultValue": "0",
                          "allowDecimal": false,
                          "minVal": "",
                          "maxVal": "",
                          "allowRelative": false,
                          "showControls": true,
                          "controlsStyle": "hover",
                          "controlsCustomIncrements": "",
                          "inputStyle": "text"
                        },
                        {
                          "key": "softwareCost",
                          "colSpan": 1,
                          "rowSpan": 1,
                          "cssClass": "",
                          "role": 0,
                          "editRole": 0,
                          "permission": 0,
                          "tooltip": "",
                          "visibilityFormula": "",
                          "editableFormula": "",
                          "escapeHTML": false,
                          "type": "numberField",
                          "size": "full-size",
                          "label": "Cost per rating",
                          "defaultValue": "5000",
                          "allowDecimal": false,
                          "minVal": "0",
                          "maxVal": "",
                          "allowRelative": false,
                          "showControls": true,
                          "controlsStyle": "hover",
                          "controlsCustomIncrements": "",
                          "inputStyle": "text"
                        }
                      ],
                      "flow": "grid-2",
                      "align": "left",
                      "verticalAlign": "top",
                      "collapsible": false,
                      "defaultCollapsed": false,
                      "title": "",
                      "titleStyle": "default"
                    }
                  ],
                  "flow": "vertical",
                  "align": "left",
                  "verticalAlign": "top",
                  "collapsible": true,
                  "defaultCollapsed": false,
                  "title": "Hacking Skill Config",
                  "titleStyle": "default"
                }
              ],
              "flow": "vertical",
              "align": "left",
              "verticalAlign": "top",
              "collapsible": true,
              "defaultCollapsed": false,
              "title": "Hacking",
              "titleStyle": "title"
            }
          ],
          "key": "custom_header",
          "type": "panel"
        },
        "hidden": [],
        "modifiers": [],
        "props": {
          "mcpDeck": "9",
          "hardeningDeck": "4",
          "threadsDeck": "10",
          "coreDeck": "Tri",
          "modsDeck": "2",
          "ioDeck": "3",
          "deckCost": "600000",
          "deckMod1": "",
          "deckMod2": "",
          "deckMod3": "",
          "deckMod4": "",
          "deckMod5": "",
          "hackingRules": "<p>This software, the raison d'tre of every deckers deck, is always running. The deck is the hardware that allows this software to function. It provides several functions, hacking nearby electronic devices, drones, vehicles, and weapons, hacking cameras, and gaining control over a network access node (<span style=\"font-family: 'Bruno Ace'\">NAN</span>).</p><p></p><p>Control of a <span style=\"font-family: 'Bruno Ace'\">NAN</span> allows you to subvert its resources to your own ends, allowing any of your software programs to work within the vicinity.</p><p></p><p><span style=\"font-family: 'Bruno Ace'\">Hacking Devices:</span> Any decker within 10 meters (5\") of a piece of equipment can attempt to disable it, unlock it, or activate it. This is a Focus pool test with a limit of the Computer (Hacking) skill + the Hacking software rating needing a number of successes equal or higher than twice the hardening of the target. These successes can be accumulated over time.</p><p>On a success, the hacker may turn the item off, on, or activate the item, but that is the limit of their control. This includes enemy guns, cameras, drones, lights, or any other piece of hardware, though not cybertechtronics.</p><p>When deckers turn devices off they are shut down for one round. On the following round, anyone may spend a simple action to reactivate the device. Riggers can reactivate drones, guards can turn their smart guns back on, deckers can reactivate network devices (like mini-gun emplacements). If no one turns the device back on, it stays off.</p><p></p><p><span style=\"font-family: 'Bruno Ace'\">Hacking a NAN:</span> The hacker must be within 10 meters (5\") of a network access node. The hacker can use the software to execute a brute attack or a stealth infiltration.</p><p></p><p><span style=\"font-family: 'Bruno Ace'\">Brute Force Hack:</span> Make a Computer (Hacking) + Hacking software rating skill test; on a success, you double your I/O value in meters plus 2 extra</p><p>meters (1\") of influence range per success. Each success also raises the alert level by 2. (The Mars Claymore deck has an I/O rating of three, so when they hack they expand their influence radius six meters (3\") plus two meters (1\") per success).</p><p></p><p><span style=\"font-family: 'Bruno Ace'\">Stealth Infiltration:</span> Make a computer (hacking) + Hacking software rating skill test, and every success grants you a meter of influence (.5\"). This only raises the alert level by a flat 1.</p><p></p><p>Every time you choose to hack a <span style=\"font-family: 'Bruno Ace'\">NAN</span>, you can continue to extend your range. Once the range is at 40 meters (20\") tests to extend the range further have 2 penalty dice. This increases by another 2 penalty dice every 20 meters (10\"). The range expands out in a radius from the target node.</p><p></p>",
          "cameraRules": "<p><span style=\"font-family: 'Bruno Ace'\">Hacking Cameras:</span> A decker has several options when dealing with cameras.</p><p></p><p><span style=\"font-family: 'Bruno Ace'\">Turning Them Off: </span>The decker makes a Computer (Electronic Warfare) + <span style=\"font-family: 'Bruno Ace'\">Hacking</span> software rating skill test.</p><p>Open sites require one success, secure sites require two successes, red sites require four successes, and black sites require eight successes. Note that certain alert levels are keyed to run diagnostics and reactivate cameras. This test can be made anytime before the operation. Easy to do, but easy to undo.</p><p></p><p><span style=\"font-family: 'Bruno Ace'\">Looping an Image:</span> On site, the Decker makes a Computer (Electronic Warfare) + <span style=\"font-family: 'Bruno Ace'\">Hacking</span> software rating test to get access to the data stream.</p><p>Then the data stream must be decrypted with a Computer (Hacking) + <span style=\"font-family: 'Bruno Ace'\">Crack Encryption</span> software rating test.</p><p>Finally, the data stream must be edited with a Computer (Hacking) + <span style=\"font-family: 'Bruno Ace'\">Device Control</span> software rating test. It renders the cameras ineffective and doesnt raise suspicions.</p><p>The downsides are that this must be done on-site raising alert, it ties up an <span style=\"font-family: 'Bruno Ace'\">I/O</span> slot for the duration of the run, and it requires <span style=\"font-family: 'Bruno Ace'\">Crack Encryption</span> and <span style=\"font-family: 'Bruno Ace'\">Device Control</span> software.</p><p>Successes needed are listed below:</p><img src=\"modules/sinlesscsb/assets/images/LoopImage.png\"><p></p><p><span style=\"font-family: 'Bruno Ace'\">DisaBling Them:</span> On-site, the decker can use any attack software to destroy the cameras. They will spark and possibly melt or explode. You can target individual cameras or attack the whole camera network. Refer to the following table for the condition track values of individual cameras and the camera network. You cannot be captured on cameras that are melted slag.</p><p>The downsides are the attacks raise the alert level, and melting cameras raise operational heat by one.</p><img src=\"modules/sinlesscsb/assets/images/disableCamera.png\"><p></p><p><span style=\"font-family: 'Bruno Ace'\">Erasing the Data Stream File: </span>The hacker can just. . . delete the camera record. This has to be done after the operation. However, by that time, the file is usually defended. Before leaving the operation, the decker may attempt to delete the file. She will first have to crack the file using the <span style=\"font-family: 'Bruno Ace'\">Crack Encryption</span> software while fighting against the defenders (with the assistance of any characters that can see in AR). After decryption, the decker can just delete the file.</p><p>Open systems have a file encryption level of one, secure systems have a file encryption level of two, Red sites have an encryption level of four, and black sites have an encryption level of six.</p>",
          "deckactionType": "Complex Action",
          "gearFeature": "1",
          "bonusDice": "0",
          "diceMod": "0",
          "softwareCost": "5000",
          "mcpCur": "9",
          "actionSpecial": "",
          "softwareAlert": "",
          "skillKey": "Skill_Hacking",
          "poolKey_copy1": "Focus",
          "limitBonusSource": "Software Rating",
          "loopingFlag": "No"
        },
        "unique": false,
        "uniqueId": "DD5aVFTQACYYq90Q"
      },
      "_id": "iI0IrpV99bsQGtRx",
      "effects": [],
      "sort": 387500,
      "flags": {
        "custom-system-builder": {
          "version": "5.1.0"
        }
      },
      "_stats": {
        "compendiumSource": "Item.DD5aVFTQACYYq90Q",
        "duplicateSource": null,
        "exportSource": null,
        "coreVersion": "13.351",
        "systemId": "custom-system-builder",
        "systemVersion": "5.1.0",
        "createdTime": 1769983632801,
        "modifiedTime": 1769983632801,
        "lastModifiedBy": "KoiB8oaGNkPdgzdM"
      },
      "ownership": {
        "default": 0
      }
    }
  ],
  "effects": [],
  "folder": "bGGgYtFXJvPyXTLo",
  "flags": {
    "custom-system-builder": {
      "version": "5.1.0"
    },
    "sinlesscsb": {
      "tracksInitialized": true
    }
  },
  "_stats": {
    "compendiumSource": null,
    "duplicateSource": null,
    "exportSource": {
      "worldId": "sinless",
      "uuid": "Actor.eMbezua6UThIStwT",
      "coreVersion": "13.351",
      "systemId": "custom-system-builder",
      "systemVersion": "5.1.0"
    },
    "coreVersion": "13.351",
    "systemId": "custom-system-builder",
    "systemVersion": "5.1.0",
    "createdTime": 1768082654572,
    "modifiedTime": 1769989554314,
    "lastModifiedBy": "KoiB8oaGNkPdgzdM"
  },
  "ownership": {
    "default": 2
  }
}